(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function hP(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var m0={exports:{}},Ph={},g0={exports:{}},ln={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function pP(){if(US)return ln;US=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(J){return J===null||typeof J!="object"?null:(J=g&&J[g]||J["@@iterator"],typeof J=="function"?J:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function M(J,ae,Le){this.props=J,this.context=ae,this.refs=w,this.updater=Le||v}M.prototype.isReactComponent={},M.prototype.setState=function(J,ae){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ae,"setState")},M.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function A(){}A.prototype=M.prototype;function C(J,ae,Le){this.props=J,this.context=ae,this.refs=w,this.updater=Le||v}var b=C.prototype=new A;b.constructor=C,S(b,M.prototype),b.isPureReactComponent=!0;var B=Array.isArray,N=Object.prototype.hasOwnProperty,F={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function z(J,ae,Le){var fe,we={},Ne=null,De=null;if(ae!=null)for(fe in ae.ref!==void 0&&(De=ae.ref),ae.key!==void 0&&(Ne=""+ae.key),ae)N.call(ae,fe)&&!k.hasOwnProperty(fe)&&(we[fe]=ae[fe]);var je=arguments.length-2;if(je===1)we.children=Le;else if(1<je){for(var xt=Array(je),Je=0;Je<je;Je++)xt[Je]=arguments[Je+2];we.children=xt}if(J&&J.defaultProps)for(fe in je=J.defaultProps,je)we[fe]===void 0&&(we[fe]=je[fe]);return{$$typeof:i,type:J,key:Ne,ref:De,props:we,_owner:F.current}}function L(J,ae){return{$$typeof:i,type:J.type,key:ae,ref:J.ref,props:J.props,_owner:J._owner}}function D(J){return typeof J=="object"&&J!==null&&J.$$typeof===i}function V(J){var ae={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Le){return ae[Le]})}var oe=/\/+/g;function ie(J,ae){return typeof J=="object"&&J!==null&&J.key!=null?V(""+J.key):ae.toString(36)}function ye(J,ae,Le,fe,we){var Ne=typeof J;(Ne==="undefined"||Ne==="boolean")&&(J=null);var De=!1;if(J===null)De=!0;else switch(Ne){case"string":case"number":De=!0;break;case"object":switch(J.$$typeof){case i:case e:De=!0}}if(De)return De=J,we=we(De),J=fe===""?"."+ie(De,0):fe,B(we)?(Le="",J!=null&&(Le=J.replace(oe,"$&/")+"/"),ye(we,ae,Le,"",function(Je){return Je})):we!=null&&(D(we)&&(we=L(we,Le+(!we.key||De&&De.key===we.key?"":(""+we.key).replace(oe,"$&/")+"/")+J)),ae.push(we)),1;if(De=0,fe=fe===""?".":fe+":",B(J))for(var je=0;je<J.length;je++){Ne=J[je];var xt=fe+ie(Ne,je);De+=ye(Ne,ae,Le,xt,we)}else if(xt=y(J),typeof xt=="function")for(J=xt.call(J),je=0;!(Ne=J.next()).done;)Ne=Ne.value,xt=fe+ie(Ne,je++),De+=ye(Ne,ae,Le,xt,we);else if(Ne==="object")throw ae=String(J),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.");return De}function xe(J,ae,Le){if(J==null)return J;var fe=[],we=0;return ye(J,fe,"","",function(Ne){return ae.call(Le,Ne,we++)}),fe}function ge(J){if(J._status===-1){var ae=J._result;ae=ae(),ae.then(function(Le){(J._status===0||J._status===-1)&&(J._status=1,J._result=Le)},function(Le){(J._status===0||J._status===-1)&&(J._status=2,J._result=Le)}),J._status===-1&&(J._status=0,J._result=ae)}if(J._status===1)return J._result.default;throw J._result}var de={current:null},W={transition:null},re={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:W,ReactCurrentOwner:F};function $(){throw Error("act(...) is not supported in production builds of React.")}return ln.Children={map:xe,forEach:function(J,ae,Le){xe(J,function(){ae.apply(this,arguments)},Le)},count:function(J){var ae=0;return xe(J,function(){ae++}),ae},toArray:function(J){return xe(J,function(ae){return ae})||[]},only:function(J){if(!D(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},ln.Component=M,ln.Fragment=t,ln.Profiler=r,ln.PureComponent=C,ln.StrictMode=n,ln.Suspense=c,ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,ln.act=$,ln.cloneElement=function(J,ae,Le){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var fe=S({},J.props),we=J.key,Ne=J.ref,De=J._owner;if(ae!=null){if(ae.ref!==void 0&&(Ne=ae.ref,De=F.current),ae.key!==void 0&&(we=""+ae.key),J.type&&J.type.defaultProps)var je=J.type.defaultProps;for(xt in ae)N.call(ae,xt)&&!k.hasOwnProperty(xt)&&(fe[xt]=ae[xt]===void 0&&je!==void 0?je[xt]:ae[xt])}var xt=arguments.length-2;if(xt===1)fe.children=Le;else if(1<xt){je=Array(xt);for(var Je=0;Je<xt;Je++)je[Je]=arguments[Je+2];fe.children=je}return{$$typeof:i,type:J.type,key:we,ref:Ne,props:fe,_owner:De}},ln.createContext=function(J){return J={$$typeof:o,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:s,_context:J},J.Consumer=J},ln.createElement=z,ln.createFactory=function(J){var ae=z.bind(null,J);return ae.type=J,ae},ln.createRef=function(){return{current:null}},ln.forwardRef=function(J){return{$$typeof:l,render:J}},ln.isValidElement=D,ln.lazy=function(J){return{$$typeof:p,_payload:{_status:-1,_result:J},_init:ge}},ln.memo=function(J,ae){return{$$typeof:h,type:J,compare:ae===void 0?null:ae}},ln.startTransition=function(J){var ae=W.transition;W.transition={};try{J()}finally{W.transition=ae}},ln.unstable_act=$,ln.useCallback=function(J,ae){return de.current.useCallback(J,ae)},ln.useContext=function(J){return de.current.useContext(J)},ln.useDebugValue=function(){},ln.useDeferredValue=function(J){return de.current.useDeferredValue(J)},ln.useEffect=function(J,ae){return de.current.useEffect(J,ae)},ln.useId=function(){return de.current.useId()},ln.useImperativeHandle=function(J,ae,Le){return de.current.useImperativeHandle(J,ae,Le)},ln.useInsertionEffect=function(J,ae){return de.current.useInsertionEffect(J,ae)},ln.useLayoutEffect=function(J,ae){return de.current.useLayoutEffect(J,ae)},ln.useMemo=function(J,ae){return de.current.useMemo(J,ae)},ln.useReducer=function(J,ae,Le){return de.current.useReducer(J,ae,Le)},ln.useRef=function(J){return de.current.useRef(J)},ln.useState=function(J){return de.current.useState(J)},ln.useSyncExternalStore=function(J,ae,Le){return de.current.useSyncExternalStore(J,ae,Le)},ln.useTransition=function(){return de.current.useTransition()},ln.version="18.3.1",ln}var OS;function $y(){return OS||(OS=1,g0.exports=pP()),g0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kS;function mP(){if(kS)return Ph;kS=1;var i=$y(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,h){var p,g={},y=null,v=null;h!==void 0&&(y=""+h),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(v=c.ref);for(p in c)n.call(c,p)&&!s.hasOwnProperty(p)&&(g[p]=c[p]);if(l&&l.defaultProps)for(p in c=l.defaultProps,c)g[p]===void 0&&(g[p]=c[p]);return{$$typeof:e,type:l,key:y,ref:v,props:g,_owner:r.current}}return Ph.Fragment=t,Ph.jsx=o,Ph.jsxs=o,Ph}var HS;function gP(){return HS||(HS=1,m0.exports=mP()),m0.exports}var U=gP(),q=$y(),Km={},y0={exports:{}},Hr={},v0={exports:{}},x0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS;function yP(){return zS||(zS=1,function(i){function e(W,re){var $=W.length;W.push(re);e:for(;0<$;){var J=$-1>>>1,ae=W[J];if(0<r(ae,re))W[J]=re,W[$]=ae,$=J;else break e}}function t(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var re=W[0],$=W.pop();if($!==re){W[0]=$;e:for(var J=0,ae=W.length,Le=ae>>>1;J<Le;){var fe=2*(J+1)-1,we=W[fe],Ne=fe+1,De=W[Ne];if(0>r(we,$))Ne<ae&&0>r(De,we)?(W[J]=De,W[Ne]=$,J=Ne):(W[J]=we,W[fe]=$,J=fe);else if(Ne<ae&&0>r(De,$))W[J]=De,W[Ne]=$,J=Ne;else break e}}return re}function r(W,re){var $=W.sortIndex-re.sortIndex;return $!==0?$:W.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,g=null,y=3,v=!1,S=!1,w=!1,M=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(W){for(var re=t(h);re!==null;){if(re.callback===null)n(h);else if(re.startTime<=W)n(h),re.sortIndex=re.expirationTime,e(c,re);else break;re=t(h)}}function B(W){if(w=!1,b(W),!S)if(t(c)!==null)S=!0,ge(N);else{var re=t(h);re!==null&&de(B,re.startTime-W)}}function N(W,re){S=!1,w&&(w=!1,A(z),z=-1),v=!0;var $=y;try{for(b(re),g=t(c);g!==null&&(!(g.expirationTime>re)||W&&!V());){var J=g.callback;if(typeof J=="function"){g.callback=null,y=g.priorityLevel;var ae=J(g.expirationTime<=re);re=i.unstable_now(),typeof ae=="function"?g.callback=ae:g===t(c)&&n(c),b(re)}else n(c);g=t(c)}if(g!==null)var Le=!0;else{var fe=t(h);fe!==null&&de(B,fe.startTime-re),Le=!1}return Le}finally{g=null,y=$,v=!1}}var F=!1,k=null,z=-1,L=5,D=-1;function V(){return!(i.unstable_now()-D<L)}function oe(){if(k!==null){var W=i.unstable_now();D=W;var re=!0;try{re=k(!0,W)}finally{re?ie():(F=!1,k=null)}}else F=!1}var ie;if(typeof C=="function")ie=function(){C(oe)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,xe=ye.port2;ye.port1.onmessage=oe,ie=function(){xe.postMessage(null)}}else ie=function(){M(oe,0)};function ge(W){k=W,F||(F=!0,ie())}function de(W,re){z=M(function(){W(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(W){W.callback=null},i.unstable_continueExecution=function(){S||v||(S=!0,ge(N))},i.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<W?Math.floor(1e3/W):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(W){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var $=y;y=re;try{return W()}finally{y=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(W,re){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var $=y;y=W;try{return re()}finally{y=$}},i.unstable_scheduleCallback=function(W,re,$){var J=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?J+$:J):$=J,W){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=$+ae,W={id:p++,callback:re,priorityLevel:W,startTime:$,expirationTime:ae,sortIndex:-1},$>J?(W.sortIndex=$,e(h,W),t(c)===null&&W===t(h)&&(w?(A(z),z=-1):w=!0,de(B,$-J))):(W.sortIndex=ae,e(c,W),S||v||(S=!0,ge(N))),W},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(W){var re=y;return function(){var $=y;y=re;try{return W.apply(this,arguments)}finally{y=$}}}}(x0)),x0}var GS;function vP(){return GS||(GS=1,v0.exports=yP()),v0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS;function xP(){if(VS)return Hr;VS=1;var i=$y(),e=vP();function t(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function s(a,u){o(a,u),o(a+"Capture",u)}function o(a,u){for(r[a]=u,a=0;a<u.length;a++)n.add(u[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(a){return c.call(g,a)?!0:c.call(p,a)?!1:h.test(a)?g[a]=!0:(p[a]=!0,!1)}function v(a,u,m,_){if(m!==null&&m.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return _?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function S(a,u,m,_){if(u===null||typeof u>"u"||v(a,u,m,_))return!0;if(_)return!1;if(m!==null)switch(m.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function w(a,u,m,_,T,P,O){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=_,this.attributeNamespace=T,this.mustUseProperty=m,this.propertyName=a,this.type=u,this.sanitizeURL=P,this.removeEmptyString=O}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){M[a]=new w(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var u=a[0];M[u]=new w(u,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){M[a]=new w(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){M[a]=new w(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){M[a]=new w(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){M[a]=new w(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){M[a]=new w(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){M[a]=new w(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){M[a]=new w(a,5,!1,a.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var u=a.replace(A,C);M[u]=new w(u,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var u=a.replace(A,C);M[u]=new w(u,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var u=a.replace(A,C);M[u]=new w(u,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){M[a]=new w(a,1,!1,a.toLowerCase(),null,!1,!1)}),M.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){M[a]=new w(a,1,!1,a.toLowerCase(),null,!0,!0)});function b(a,u,m,_){var T=M.hasOwnProperty(u)?M[u]:null;(T!==null?T.type!==0:_||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(S(u,m,T,_)&&(m=null),_||T===null?y(u)&&(m===null?a.removeAttribute(u):a.setAttribute(u,""+m)):T.mustUseProperty?a[T.propertyName]=m===null?T.type===3?!1:"":m:(u=T.attributeName,_=T.attributeNamespace,m===null?a.removeAttribute(u):(T=T.type,m=T===3||T===4&&m===!0?"":""+m,_?a.setAttributeNS(_,u,m):a.setAttribute(u,m))))}var B=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),F=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),V=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),W=Symbol.iterator;function re(a){return a===null||typeof a!="object"?null:(a=W&&a[W]||a["@@iterator"],typeof a=="function"?a:null)}var $=Object.assign,J;function ae(a){if(J===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);J=u&&u[1]||""}return`
`+J+a}var Le=!1;function fe(a,u){if(!a||Le)return"";Le=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Se){var _=Se}Reflect.construct(a,[],u)}else{try{u.call()}catch(Se){_=Se}a.call(u.prototype)}else{try{throw Error()}catch(Se){_=Se}a()}}catch(Se){if(Se&&_&&typeof Se.stack=="string"){for(var T=Se.stack.split(`
`),P=_.stack.split(`
`),O=T.length-1,Q=P.length-1;1<=O&&0<=Q&&T[O]!==P[Q];)Q--;for(;1<=O&&0<=Q;O--,Q--)if(T[O]!==P[Q]){if(O!==1||Q!==1)do if(O--,Q--,0>Q||T[O]!==P[Q]){var te=`
`+T[O].replace(" at new "," at ");return a.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",a.displayName)),te}while(1<=O&&0<=Q);break}}}finally{Le=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?ae(a):""}function we(a){switch(a.tag){case 5:return ae(a.type);case 16:return ae("Lazy");case 13:return ae("Suspense");case 19:return ae("SuspenseList");case 0:case 2:case 15:return a=fe(a.type,!1),a;case 11:return a=fe(a.type.render,!1),a;case 1:return a=fe(a.type,!0),a;default:return""}}function Ne(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case k:return"Fragment";case F:return"Portal";case L:return"Profiler";case z:return"StrictMode";case ie:return"Suspense";case ye:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case V:return(a.displayName||"Context")+".Consumer";case D:return(a._context.displayName||"Context")+".Provider";case oe:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case xe:return u=a.displayName||null,u!==null?u:Ne(a.type)||"Memo";case ge:u=a._payload,a=a._init;try{return Ne(a(u))}catch{}}return null}function De(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(u);case 8:return u===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function je(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function xt(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Je(a){var u=xt(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),_=""+a[u];if(!a.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var T=m.get,P=m.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return T.call(this)},set:function(O){_=""+O,P.call(this,O)}}),Object.defineProperty(a,u,{enumerable:m.enumerable}),{getValue:function(){return _},setValue:function(O){_=""+O},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function rt(a){a._valueTracker||(a._valueTracker=Je(a))}function Fe(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var m=u.getValue(),_="";return a&&(_=xt(a)?a.checked?"true":"false":a.value),a=_,a!==m?(u.setValue(a),!0):!1}function be(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function K(a,u){var m=u.checked;return $({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function mt(a,u){var m=u.defaultValue==null?"":u.defaultValue,_=u.checked!=null?u.checked:u.defaultChecked;m=je(u.value!=null?u.value:m),a._wrapperState={initialChecked:_,initialValue:m,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function ke(a,u){u=u.checked,u!=null&&b(a,"checked",u,!1)}function et(a,u){ke(a,u);var m=je(u.value),_=u.type;if(m!=null)_==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(_==="submit"||_==="reset"){a.removeAttribute("value");return}u.hasOwnProperty("value")?wt(a,u.type,m):u.hasOwnProperty("defaultValue")&&wt(a,u.type,je(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(a.defaultChecked=!!u.defaultChecked)}function Xe(a,u,m){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var _=u.type;if(!(_!=="submit"&&_!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+a._wrapperState.initialValue,m||u===a.value||(a.value=u),a.defaultValue=u}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function wt(a,u,m){(u!=="number"||be(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var qe=Array.isArray;function X(a,u,m,_){if(a=a.options,u){u={};for(var T=0;T<m.length;T++)u["$"+m[T]]=!0;for(m=0;m<a.length;m++)T=u.hasOwnProperty("$"+a[m].value),a[m].selected!==T&&(a[m].selected=T),T&&_&&(a[m].defaultSelected=!0)}else{for(m=""+je(m),u=null,T=0;T<a.length;T++){if(a[T].value===m){a[T].selected=!0,_&&(a[T].defaultSelected=!0);return}u!==null||a[T].disabled||(u=a[T])}u!==null&&(u.selected=!0)}}function H(a,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return $({},u,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function pe(a,u){var m=u.value;if(m==null){if(m=u.children,u=u.defaultValue,m!=null){if(u!=null)throw Error(t(92));if(qe(m)){if(1<m.length)throw Error(t(93));m=m[0]}u=m}u==null&&(u=""),m=u}a._wrapperState={initialValue:je(m)}}function Te(a,u){var m=je(u.value),_=je(u.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),u.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),_!=null&&(a.defaultValue=""+_)}function Ue(a){var u=a.textContent;u===a._wrapperState.initialValue&&u!==""&&u!==null&&(a.value=u)}function Pe(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function st(a,u){return a==null||a==="http://www.w3.org/1999/xhtml"?Pe(u):a==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Ze,ct=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,m,_,T){MSApp.execUnsafeLocalFunction(function(){return a(u,m,_,T)})}:a}(function(a,u){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=u;else{for(Ze=Ze||document.createElement("div"),Ze.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Ze.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}});function Gt(a,u){if(u){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=u;return}}a.textContent=u}var ze={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];Object.keys(ze).forEach(function(a){gt.forEach(function(u){u=u+a.charAt(0).toUpperCase()+a.substring(1),ze[u]=ze[a]})});function Bt(a,u,m){return u==null||typeof u=="boolean"||u===""?"":m||typeof u!="number"||u===0||ze.hasOwnProperty(a)&&ze[a]?(""+u).trim():u+"px"}function Lt(a,u){a=a.style;for(var m in u)if(u.hasOwnProperty(m)){var _=m.indexOf("--")===0,T=Bt(m,u[m],_);m==="float"&&(m="cssFloat"),_?a.setProperty(m,T):a[m]=T}}var ht=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ee(a,u){if(u){if(ht[a]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function Re(a,u){if(a.indexOf("-")===-1)return typeof u.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tt=null;function Z(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ve=null,Me=null,Be=null;function ut(a){if(a=Gs(a)){if(typeof Ve!="function")throw Error(t(280));var u=a.stateNode;u&&(u=mf(u),Ve(a.stateNode,a.type,u))}}function nt(a){Me?Be?Be.push(a):Be=[a]:Me=a}function Pt(){if(Me){var a=Me,u=Be;if(Be=Me=null,ut(a),u)for(a=0;a<u.length;a++)ut(u[a])}}function un(a,u){return a(u)}function Tn(){}var Qt=!1;function Vn(a,u,m){if(Qt)return a(u,m);Qt=!0;try{return un(a,u,m)}finally{Qt=!1,(Me!==null||Be!==null)&&(Tn(),Pt())}}function Qn(a,u){var m=a.stateNode;if(m===null)return null;var _=mf(m);if(_===null)return null;m=_[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(a=a.type,_=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!_;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(t(231,u,typeof m));return m}var ja=!1;if(l)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){ja=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{ja=!1}function ds(a,u,m,_,T,P,O,Q,te){var Se=Array.prototype.slice.call(arguments,3);try{u.apply(m,Se)}catch(He){this.onError(He)}}var Xr=!1,Go=null,Jr=!1,vo=null,bc={onError:function(a){Xr=!0,Go=a}};function Xa(a,u,m,_,T,P,O,Q,te){Xr=!1,Go=null,ds.apply(bc,arguments)}function Rc(a,u,m,_,T,P,O,Q,te){if(Xa.apply(this,arguments),Xr){if(Xr){var Se=Go;Xr=!1,Go=null}else throw Error(t(198));Jr||(Jr=!0,vo=Se)}}function hs(a){var u=a,m=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(m=u.return),a=u.return;while(a)}return u.tag===3?m:null}function Pc(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function Bc(a){if(hs(a)!==a)throw Error(t(188))}function Ic(a){var u=a.alternate;if(!u){if(u=hs(a),u===null)throw Error(t(188));return u!==a?null:a}for(var m=a,_=u;;){var T=m.return;if(T===null)break;var P=T.alternate;if(P===null){if(_=T.return,_!==null){m=_;continue}break}if(T.child===P.child){for(P=T.child;P;){if(P===m)return Bc(T),a;if(P===_)return Bc(T),u;P=P.sibling}throw Error(t(188))}if(m.return!==_.return)m=T,_=P;else{for(var O=!1,Q=T.child;Q;){if(Q===m){O=!0,m=T,_=P;break}if(Q===_){O=!0,_=T,m=P;break}Q=Q.sibling}if(!O){for(Q=P.child;Q;){if(Q===m){O=!0,m=P,_=T;break}if(Q===_){O=!0,_=P,m=T;break}Q=Q.sibling}if(!O)throw Error(t(189))}}if(m.alternate!==_)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?a:u}function Dc(a){return a=Ic(a),a!==null?Lc(a):null}function Lc(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=Lc(a);if(u!==null)return u;a=a.sibling}return null}var Fc=e.unstable_scheduleCallback,G=e.unstable_cancelCallback,le=e.unstable_shouldYield,Ae=e.unstable_requestPaint,he=e.unstable_now,ce=e.unstable_getCurrentPriorityLevel,Ge=e.unstable_ImmediatePriority,it=e.unstable_UserBlockingPriority,dt=e.unstable_NormalPriority,yt=e.unstable_LowPriority,It=e.unstable_IdlePriority,Rt=null,Ye=null;function Mt(a){if(Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Rt,a,void 0,(a.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:qt,rn=Math.log,sn=Math.LN2;function qt(a){return a>>>=0,a===0?32:31-(rn(a)/sn|0)|0}var St=64,cn=4194304;function en(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function vi(a,u){var m=a.pendingLanes;if(m===0)return 0;var _=0,T=a.suspendedLanes,P=a.pingedLanes,O=m&268435455;if(O!==0){var Q=O&~T;Q!==0?_=en(Q):(P&=O,P!==0&&(_=en(P)))}else O=m&~T,O!==0?_=en(O):P!==0&&(_=en(P));if(_===0)return 0;if(u!==0&&u!==_&&(u&T)===0&&(T=_&-_,P=u&-u,T>=P||T===16&&(P&4194240)!==0))return u;if((_&4)!==0&&(_|=m&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=_;0<u;)m=31-kt(u),T=1<<m,_|=a[m],u&=~T;return _}function Ds(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ui(a,u){for(var m=a.suspendedLanes,_=a.pingedLanes,T=a.expirationTimes,P=a.pendingLanes;0<P;){var O=31-kt(P),Q=1<<O,te=T[O];te===-1?((Q&m)===0||(Q&_)!==0)&&(T[O]=Ds(Q,u)):te<=u&&(a.expiredLanes|=Q),P&=~Q}}function ps(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function on(){var a=St;return St<<=1,(St&4194240)===0&&(St=64),a}function Pi(a){for(var u=[],m=0;31>m;m++)u.push(a);return u}function ci(a,u,m){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-kt(u),a[u]=m}function xi(a,u){var m=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var _=a.eventTimes;for(a=a.expirationTimes;0<m;){var T=31-kt(m),P=1<<T;u[T]=0,_[T]=-1,a[T]=-1,m&=~P}}function Wn(a,u){var m=a.entangledLanes|=u;for(a=a.entanglements;m;){var _=31-kt(m),T=1<<_;T&u|a[_]&u&&(a[_]|=u),m&=~T}}var an=0;function qi(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Xl,Nd,nm,Nc,Uc,Vo=!1,Oc=[],ms=null,tn=null,Ls=null,Wo=new Map,Ja=new Map,xo=[],Hv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ni(a,u){switch(a){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Wo.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ja.delete(u.pointerId)}}function jo(a,u,m,_,T,P){return a===null||a.nativeEvent!==P?(a={blockedOn:u,domEventName:m,eventSystemFlags:_,nativeEvent:P,targetContainers:[T]},u!==null&&(u=Gs(u),u!==null&&Nd(u)),a):(a.eventSystemFlags|=_,u=a.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),a)}function zv(a,u,m,_,T){switch(u){case"focusin":return ms=jo(ms,a,u,m,_,T),!0;case"dragenter":return tn=jo(tn,a,u,m,_,T),!0;case"mouseover":return Ls=jo(Ls,a,u,m,_,T),!0;case"pointerover":var P=T.pointerId;return Wo.set(P,jo(Wo.get(P)||null,a,u,m,_,T)),!0;case"gotpointercapture":return P=T.pointerId,Ja.set(P,jo(Ja.get(P)||null,a,u,m,_,T)),!0}return!1}function kc(a){var u=To(a.target);if(u!==null){var m=hs(u);if(m!==null){if(u=m.tag,u===13){if(u=Pc(m),u!==null){a.blockedOn=u,Uc(a.priority,function(){nm(m)});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Hc(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var m=Pr(a.domEventName,a.eventSystemFlags,u[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var _=new m.constructor(m.type,m);tt=_,m.target.dispatchEvent(_),tt=null}else return u=Gs(m),u!==null&&Nd(u),a.blockedOn=m,!1;u.shift()}return!0}function Jl(a,u,m){Hc(a)&&m.delete(u)}function gs(){Vo=!1,ms!==null&&Hc(ms)&&(ms=null),tn!==null&&Hc(tn)&&(tn=null),Ls!==null&&Hc(Ls)&&(Ls=null),Wo.forEach(Jl),Ja.forEach(Jl)}function Kl(a,u){a.blockedOn===u&&(a.blockedOn=null,Vo||(Vo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gs)))}function Yl(a){function u(T){return Kl(T,a)}if(0<Oc.length){Kl(Oc[0],a);for(var m=1;m<Oc.length;m++){var _=Oc[m];_.blockedOn===a&&(_.blockedOn=null)}}for(ms!==null&&Kl(ms,a),tn!==null&&Kl(tn,a),Ls!==null&&Kl(Ls,a),Wo.forEach(u),Ja.forEach(u),m=0;m<xo.length;m++)_=xo[m],_.blockedOn===a&&(_.blockedOn=null);for(;0<xo.length&&(m=xo[0],m.blockedOn===null);)kc(m),m.blockedOn===null&&xo.shift()}var ki=B.ReactCurrentBatchConfig,Rr=!0;function zc(a,u,m,_){var T=an,P=ki.transition;ki.transition=null;try{an=1,Gc(a,u,m,_)}finally{an=T,ki.transition=P}}function Ud(a,u,m,_){var T=an,P=ki.transition;ki.transition=null;try{an=4,Gc(a,u,m,_)}finally{an=T,ki.transition=P}}function Gc(a,u,m,_){if(Rr){var T=Pr(a,u,m,_);if(T===null)uf(a,u,_,Vc,m),ni(a,_);else if(zv(T,a,u,m,_))_.stopPropagation();else if(ni(a,_),u&4&&-1<Hv.indexOf(a)){for(;T!==null;){var P=Gs(T);if(P!==null&&Xl(P),P=Pr(a,u,m,_),P===null&&uf(a,u,_,Vc,m),P===T)break;T=P}T!==null&&_.stopPropagation()}else uf(a,u,_,null,m)}}var Vc=null;function Pr(a,u,m,_){if(Vc=null,a=Z(_),a=To(a),a!==null)if(u=hs(a),u===null)a=null;else if(m=u.tag,m===13){if(a=Pc(u),a!==null)return a;a=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null);return Vc=a,null}function im(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ce()){case Ge:return 1;case it:return 4;case dt:case yt:return 16;case It:return 536870912;default:return 16}default:return 16}}var Kr=null,Od=null,Zi=null;function Ql(){if(Zi)return Zi;var a,u=Od,m=u.length,_,T="value"in Kr?Kr.value:Kr.textContent,P=T.length;for(a=0;a<m&&u[a]===T[a];a++);var O=m-a;for(_=1;_<=O&&u[m-_]===T[P-_];_++);return Zi=T.slice(a,1<_?1-_:void 0)}function Xo(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function Fs(){return!0}function Wc(){return!1}function Hi(a){function u(m,_,T,P,O){this._reactName=m,this._targetInst=T,this.type=_,this.nativeEvent=P,this.target=O,this.currentTarget=null;for(var Q in a)a.hasOwnProperty(Q)&&(m=a[Q],this[Q]=m?m(P):P[Q]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Fs:Wc,this.isPropagationStopped=Wc,this}return $(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Fs)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Fs)},persist:function(){},isPersistent:Fs}),u}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ql=Hi(Jo),Ko=$({},Jo,{view:0,detail:0}),Ka=Hi(Ko),$i,Br,Ir,Ya=$({},Ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ao,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ir&&(Ir&&a.type==="mousemove"?($i=a.screenX-Ir.screenX,Br=a.screenY-Ir.screenY):Br=$i=0,Ir=a),$i)},movementY:function(a){return"movementY"in a?a.movementY:Br}}),kd=Hi(Ya),Ns=$({},Ya,{dataTransfer:0}),_o=Hi(Ns),jc=$({},Ko,{relatedTarget:0}),Xc=Hi(jc),Jc=$({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),rm=Hi(Jc),sm=$({},Jo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Hd=Hi(sm),Kc=$({},Jo,{data:0}),zd=Hi(Kc),om={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},am={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qa(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=Gd[a])?!!u[a]:!1}function Ao(){return Qa}var Yc=$({},Ko,{key:function(a){if(a.key){var u=om[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=Xo(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?am[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ao,charCode:function(a){return a.type==="keypress"?Xo(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Xo(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Qc=Hi(Yc),Dr=$({},Ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pr=Hi(Dr),Yo=$({},Ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ao}),Us=Hi(Yo),Os=$({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qo=Hi(Os),lm=$({},Ya,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Vd=Hi(lm),Wd=[9,13,27,32],zi=l&&"CompositionEvent"in window,_i=null;l&&"documentMode"in document&&(_i=document.documentMode);var In=l&&"TextEvent"in window&&!_i,qa=l&&(!zi||_i&&8<_i&&11>=_i),Lr=" ",jd=!1;function Xd(a,u){switch(a){case"keyup":return Wd.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qc(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var So=!1;function um(a,u){switch(a){case"compositionend":return qc(u);case"keypress":return u.which!==32?null:(jd=!0,Lr);case"textInput":return a=u.data,a===Lr&&jd?null:a;default:return null}}function Zl(a,u){if(So)return a==="compositionend"||!zi&&Xd(a,u)?(a=Ql(),Zi=Od=Kr=null,So=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return qa&&u.locale!=="ko"?null:u.data;default:return null}}var Za={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zc(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!Za[a.type]:u==="textarea"}function $a(a,u,m,_){nt(_),u=cf(u,"onChange"),0<u.length&&(m=new ql("onChange","change",null,m,_),a.push({event:m,listeners:u}))}var Mo=null,el=null;function cm(a){rl(a,0)}function ks(a){var u=jn(a);if(Fe(u))return a}function fm(a,u){if(a==="change")return u}var tl=!1;if(l){var er;if(l){var qo="oninput"in document;if(!qo){var Zo=document.createElement("div");Zo.setAttribute("oninput","return;"),qo=typeof Zo.oninput=="function"}er=qo}else er=!1;tl=er&&(!document.documentMode||9<document.documentMode)}function Yr(){Mo&&(Mo.detachEvent("onpropertychange",$c),el=Mo=null)}function $c(a){if(a.propertyName==="value"&&ks(el)){var u=[];$a(u,el,a,Z(a)),Vn(cm,u)}}function nl(a,u,m){a==="focusin"?(Yr(),Mo=u,el=m,Mo.attachEvent("onpropertychange",$c)):a==="focusout"&&Yr()}function dm(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ks(el)}function Jd(a,u){if(a==="click")return ks(u)}function Nn(a,u){if(a==="input"||a==="change")return ks(u)}function ef(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var mr=typeof Object.is=="function"?Object.is:ef;function $o(a,u){if(mr(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var m=Object.keys(a),_=Object.keys(u);if(m.length!==_.length)return!1;for(_=0;_<m.length;_++){var T=m[_];if(!c.call(u,T)||!mr(a[T],u[T]))return!1}return!0}function $l(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function gr(a,u){var m=$l(a);a=0;for(var _;m;){if(m.nodeType===3){if(_=a+m.textContent.length,a<=u&&_>=u)return{node:m,offset:u-a};a=_}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=$l(m)}}function ea(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?ea(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function Un(){for(var a=window,u=be();u instanceof a.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)a=u.contentWindow;else break;u=be(a.document)}return u}function fi(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}function di(a){var u=Un(),m=a.focusedElem,_=a.selectionRange;if(u!==m&&m&&m.ownerDocument&&ea(m.ownerDocument.documentElement,m)){if(_!==null&&fi(m)){if(u=_.start,a=_.end,a===void 0&&(a=u),"selectionStart"in m)m.selectionStart=u,m.selectionEnd=Math.min(a,m.value.length);else if(a=(u=m.ownerDocument||document)&&u.defaultView||window,a.getSelection){a=a.getSelection();var T=m.textContent.length,P=Math.min(_.start,T);_=_.end===void 0?P:Math.min(_.end,T),!a.extend&&P>_&&(T=_,_=P,P=T),T=gr(m,P);var O=gr(m,_);T&&O&&(a.rangeCount!==1||a.anchorNode!==T.node||a.anchorOffset!==T.offset||a.focusNode!==O.node||a.focusOffset!==O.offset)&&(u=u.createRange(),u.setStart(T.node,T.offset),a.removeAllRanges(),P>_?(a.addRange(u),a.extend(O.node,O.offset)):(u.setEnd(O.node,O.offset),a.addRange(u)))}}for(u=[],a=m;a=a.parentNode;)a.nodeType===1&&u.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<u.length;m++)a=u[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var tf=l&&"documentMode"in document&&11>=document.documentMode,ys=null,ta=null,eu=null,hi=!1;function nf(a,u,m){var _=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;hi||ys==null||ys!==be(_)||(_=ys,"selectionStart"in _&&fi(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),eu&&$o(eu,_)||(eu=_,_=cf(ta,"onSelect"),0<_.length&&(u=new ql("onSelect","select",null,u,m),a.push({event:u,listeners:_}),u.target=ys)))}function il(a,u){var m={};return m[a.toLowerCase()]=u.toLowerCase(),m["Webkit"+a]="webkit"+u,m["Moz"+a]="moz"+u,m}var Eo={animationend:il("Animation","AnimationEnd"),animationiteration:il("Animation","AnimationIteration"),animationstart:il("Animation","AnimationStart"),transitionend:il("Transition","TransitionEnd")},Qr={},qr={};l&&(qr=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function vs(a){if(Qr[a])return Qr[a];if(!Eo[a])return a;var u=Eo[a],m;for(m in u)if(u.hasOwnProperty(m)&&m in qr)return Qr[a]=u[m];return a}var tu=vs("animationend"),nu=vs("animationiteration"),Kd=vs("animationstart"),Yd=vs("transitionend"),Qd=new Map,qd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hs(a,u){Qd.set(a,u),s(u,[a])}for(var rf=0;rf<qd.length;rf++){var iu=qd[rf],ru=iu.toLowerCase(),hm=iu[0].toUpperCase()+iu.slice(1);Hs(ru,"on"+hm)}Hs(tu,"onAnimationEnd"),Hs(nu,"onAnimationIteration"),Hs(Kd,"onAnimationStart"),Hs("dblclick","onDoubleClick"),Hs("focusin","onFocus"),Hs("focusout","onBlur"),Hs(Yd,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sf=new Set("cancel close invalid load scroll toggle".split(" ").concat(wo));function of(a,u,m){var _=a.type||"unknown-event";a.currentTarget=m,Rc(_,u,void 0,a),a.currentTarget=null}function rl(a,u){u=(u&4)!==0;for(var m=0;m<a.length;m++){var _=a[m],T=_.event;_=_.listeners;e:{var P=void 0;if(u)for(var O=_.length-1;0<=O;O--){var Q=_[O],te=Q.instance,Se=Q.currentTarget;if(Q=Q.listener,te!==P&&T.isPropagationStopped())break e;of(T,Q,Se),P=te}else for(O=0;O<_.length;O++){if(Q=_[O],te=Q.instance,Se=Q.currentTarget,Q=Q.listener,te!==P&&T.isPropagationStopped())break e;of(T,Q,Se),P=te}}}if(Jr)throw a=vo,Jr=!1,vo=null,a}function Cn(a,u){var m=u[ra];m===void 0&&(m=u[ra]=new Set);var _=a+"__bubble";m.has(_)||(lf(u,a,2,!1),m.add(_))}function af(a,u,m){var _=0;u&&(_|=4),lf(m,a,_,u)}var su="_reactListening"+Math.random().toString(36).slice(2);function sl(a){if(!a[su]){a[su]=!0,n.forEach(function(m){m!=="selectionchange"&&(sf.has(m)||af(m,!1,a),af(m,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[su]||(u[su]=!0,af("selectionchange",!1,u))}}function lf(a,u,m,_){switch(im(u)){case 1:var T=zc;break;case 4:T=Ud;break;default:T=Gc}m=T.bind(null,u,m,a),T=void 0,!ja||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),_?T!==void 0?a.addEventListener(u,m,{capture:!0,passive:T}):a.addEventListener(u,m,!0):T!==void 0?a.addEventListener(u,m,{passive:T}):a.addEventListener(u,m,!1)}function uf(a,u,m,_,T){var P=_;if((u&1)===0&&(u&2)===0&&_!==null)e:for(;;){if(_===null)return;var O=_.tag;if(O===3||O===4){var Q=_.stateNode.containerInfo;if(Q===T||Q.nodeType===8&&Q.parentNode===T)break;if(O===4)for(O=_.return;O!==null;){var te=O.tag;if((te===3||te===4)&&(te=O.stateNode.containerInfo,te===T||te.nodeType===8&&te.parentNode===T))return;O=O.return}for(;Q!==null;){if(O=To(Q),O===null)return;if(te=O.tag,te===5||te===6){_=P=O;continue e}Q=Q.parentNode}}_=_.return}Vn(function(){var Se=P,He=Z(m),We=[];e:{var Oe=Qd.get(a);if(Oe!==void 0){var pt=ql,At=a;switch(a){case"keypress":if(Xo(m)===0)break e;case"keydown":case"keyup":pt=Qc;break;case"focusin":At="focus",pt=Xc;break;case"focusout":At="blur",pt=Xc;break;case"beforeblur":case"afterblur":pt=Xc;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=_o;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=Us;break;case tu:case nu:case Kd:pt=rm;break;case Yd:pt=Qo;break;case"scroll":pt=Ka;break;case"wheel":pt=Vd;break;case"copy":case"cut":case"paste":pt=Hd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=pr}var Et=(u&4)!==0,ri=!Et&&a==="scroll",me=Et?Oe!==null?Oe+"Capture":null:Oe;Et=[];for(var ne=Se,ve;ne!==null;){ve=ne;var Qe=ve.stateNode;if(ve.tag===5&&Qe!==null&&(ve=Qe,me!==null&&(Qe=Qn(ne,me),Qe!=null&&Et.push(ol(ne,Qe,ve)))),ri)break;ne=ne.return}0<Et.length&&(Oe=new pt(Oe,At,null,m,He),We.push({event:Oe,listeners:Et}))}}if((u&7)===0){e:{if(Oe=a==="mouseover"||a==="pointerover",pt=a==="mouseout"||a==="pointerout",Oe&&m!==tt&&(At=m.relatedTarget||m.fromElement)&&(To(At)||At[yr]))break e;if((pt||Oe)&&(Oe=He.window===He?He:(Oe=He.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,pt?(At=m.relatedTarget||m.toElement,pt=Se,At=At?To(At):null,At!==null&&(ri=hs(At),At!==ri||At.tag!==5&&At.tag!==6)&&(At=null)):(pt=null,At=Se),pt!==At)){if(Et=kd,Qe="onMouseLeave",me="onMouseEnter",ne="mouse",(a==="pointerout"||a==="pointerover")&&(Et=pr,Qe="onPointerLeave",me="onPointerEnter",ne="pointer"),ri=pt==null?Oe:jn(pt),ve=At==null?Oe:jn(At),Oe=new Et(Qe,ne+"leave",pt,m,He),Oe.target=ri,Oe.relatedTarget=ve,Qe=null,To(He)===Se&&(Et=new Et(me,ne+"enter",At,m,He),Et.target=ve,Et.relatedTarget=ri,Qe=Et),ri=Qe,pt&&At)t:{for(Et=pt,me=At,ne=0,ve=Et;ve;ve=na(ve))ne++;for(ve=0,Qe=me;Qe;Qe=na(Qe))ve++;for(;0<ne-ve;)Et=na(Et),ne--;for(;0<ve-ne;)me=na(me),ve--;for(;ne--;){if(Et===me||me!==null&&Et===me.alternate)break t;Et=na(Et),me=na(me)}Et=null}else Et=null;pt!==null&&pm(We,Oe,pt,Et,!1),At!==null&&ri!==null&&pm(We,ri,At,Et,!0)}}e:{if(Oe=Se?jn(Se):window,pt=Oe.nodeName&&Oe.nodeName.toLowerCase(),pt==="select"||pt==="input"&&Oe.type==="file")var bt=fm;else if(Zc(Oe))if(tl)bt=Nn;else{bt=dm;var Ft=nl}else(pt=Oe.nodeName)&&pt.toLowerCase()==="input"&&(Oe.type==="checkbox"||Oe.type==="radio")&&(bt=Jd);if(bt&&(bt=bt(a,Se))){$a(We,bt,m,He);break e}Ft&&Ft(a,Oe,Se),a==="focusout"&&(Ft=Oe._wrapperState)&&Ft.controlled&&Oe.type==="number"&&wt(Oe,"number",Oe.value)}switch(Ft=Se?jn(Se):window,a){case"focusin":(Zc(Ft)||Ft.contentEditable==="true")&&(ys=Ft,ta=Se,eu=null);break;case"focusout":eu=ta=ys=null;break;case"mousedown":hi=!0;break;case"contextmenu":case"mouseup":case"dragend":hi=!1,nf(We,m,He);break;case"selectionchange":if(tf)break;case"keydown":case"keyup":nf(We,m,He)}var Nt;if(zi)e:{switch(a){case"compositionstart":var zt="onCompositionStart";break e;case"compositionend":zt="onCompositionEnd";break e;case"compositionupdate":zt="onCompositionUpdate";break e}zt=void 0}else So?Xd(a,m)&&(zt="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(zt="onCompositionStart");zt&&(qa&&m.locale!=="ko"&&(So||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&So&&(Nt=Ql()):(Kr=He,Od="value"in Kr?Kr.value:Kr.textContent,So=!0)),Ft=cf(Se,zt),0<Ft.length&&(zt=new zd(zt,a,null,m,He),We.push({event:zt,listeners:Ft}),Nt?zt.data=Nt:(Nt=qc(m),Nt!==null&&(zt.data=Nt)))),(Nt=In?um(a,m):Zl(a,m))&&(Se=cf(Se,"onBeforeInput"),0<Se.length&&(He=new zd("onBeforeInput","beforeinput",null,m,He),We.push({event:He,listeners:Se}),He.data=Nt))}rl(We,u)})}function ol(a,u,m){return{instance:a,listener:u,currentTarget:m}}function cf(a,u){for(var m=u+"Capture",_=[];a!==null;){var T=a,P=T.stateNode;T.tag===5&&P!==null&&(T=P,P=Qn(a,m),P!=null&&_.unshift(ol(a,P,T)),P=Qn(a,u),P!=null&&_.push(ol(a,P,T))),a=a.return}return _}function na(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function pm(a,u,m,_,T){for(var P=u._reactName,O=[];m!==null&&m!==_;){var Q=m,te=Q.alternate,Se=Q.stateNode;if(te!==null&&te===_)break;Q.tag===5&&Se!==null&&(Q=Se,T?(te=Qn(m,P),te!=null&&O.unshift(ol(m,te,Q))):T||(te=Qn(m,P),te!=null&&O.push(ol(m,te,Q)))),m=m.return}O.length!==0&&a.push({event:u,listeners:O})}var Gv=/\r\n?/g,mm=/\u0000|\uFFFD/g;function Zd(a){return(typeof a=="string"?a:""+a).replace(Gv,`
`).replace(mm,"")}function ou(a,u,m){if(u=Zd(u),Zd(a)!==u&&m)throw Error(t(425))}function au(){}var al=null,$d=null;function eh(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var th=typeof setTimeout=="function"?setTimeout:void 0,nh=typeof clearTimeout=="function"?clearTimeout:void 0,ff=typeof Promise=="function"?Promise:void 0,Vv=typeof queueMicrotask=="function"?queueMicrotask:typeof ff<"u"?function(a){return ff.resolve(null).then(a).catch(gm)}:th;function gm(a){setTimeout(function(){throw a})}function df(a,u){var m=u,_=0;do{var T=m.nextSibling;if(a.removeChild(m),T&&T.nodeType===8)if(m=T.data,m==="/$"){if(_===0){a.removeChild(T),Yl(u);return}_--}else m!=="$"&&m!=="$?"&&m!=="$!"||_++;m=T}while(m);Yl(u)}function zs(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return a}function ih(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(u===0)return a;u--}else m==="/$"&&u++}a=a.previousSibling}return null}var ia=Math.random().toString(36).slice(2),ii="__reactFiber$"+ia,ll="__reactProps$"+ia,yr="__reactContainer$"+ia,ra="__reactEvents$"+ia,hf="__reactListeners$"+ia,pf="__reactHandles$"+ia;function To(a){var u=a[ii];if(u)return u;for(var m=a.parentNode;m;){if(u=m[yr]||m[ii]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(a=ih(a);a!==null;){if(m=a[ii])return m;a=ih(a)}return u}a=m,m=a.parentNode}return null}function Gs(a){return a=a[ii]||a[yr],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function jn(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function mf(a){return a[ll]||null}var rh=[],pi=-1;function On(a){return{current:a}}function bn(a){0>pi||(a.current=rh[pi],rh[pi]=null,pi--)}function En(a,u){pi++,rh[pi]=a.current,a.current=u}var Vs={},Ai=On(Vs),Gi=On(!1),Ws=Vs;function sa(a,u){var m=a.type.contextTypes;if(!m)return Vs;var _=a.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===u)return _.__reactInternalMemoizedMaskedChildContext;var T={},P;for(P in m)T[P]=u[P];return _&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=T),T}function Bi(a){return a=a.childContextTypes,a!=null}function lu(){bn(Gi),bn(Ai)}function sh(a,u,m){if(Ai.current!==Vs)throw Error(t(168));En(Ai,u),En(Gi,m)}function uu(a,u,m){var _=a.stateNode;if(u=u.childContextTypes,typeof _.getChildContext!="function")return m;_=_.getChildContext();for(var T in _)if(!(T in u))throw Error(t(108,De(a)||"Unknown",T));return $({},m,_)}function oa(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vs,Ws=Ai.current,En(Ai,a),En(Gi,Gi.current),!0}function oh(a,u,m){var _=a.stateNode;if(!_)throw Error(t(169));m?(a=uu(a,u,Ws),_.__reactInternalMemoizedMergedChildContext=a,bn(Gi),bn(Ai),En(Ai,a)):bn(Gi),En(Gi,m)}var Zr=null,cu=!1,gf=!1;function fu(a){Zr===null?Zr=[a]:Zr.push(a)}function ym(a){cu=!0,fu(a)}function xs(){if(!gf&&Zr!==null){gf=!0;var a=0,u=an;try{var m=Zr;for(an=1;a<m.length;a++){var _=m[a];do _=_(!0);while(_!==null)}Zr=null,cu=!1}catch(T){throw Zr!==null&&(Zr=Zr.slice(a+1)),Fc(Ge,xs),T}finally{an=u,gf=!1}}return null}var aa=[],tr=0,yf=null,vf=0,Vi=[],mi=0,la=null,$e=1,Fr="";function js(a,u){aa[tr++]=vf,aa[tr++]=yf,yf=a,vf=u}function ah(a,u,m){Vi[mi++]=$e,Vi[mi++]=Fr,Vi[mi++]=la,la=a;var _=$e;a=Fr;var T=32-kt(_)-1;_&=~(1<<T),m+=1;var P=32-kt(u)+T;if(30<P){var O=T-T%5;P=(_&(1<<O)-1).toString(32),_>>=O,T-=O,$e=1<<32-kt(u)+T|m<<T|_,Fr=P+a}else $e=1<<P|m<<T|_,Fr=a}function lh(a){a.return!==null&&(js(a,1),ah(a,1,0))}function Xs(a){for(;a===yf;)yf=aa[--tr],aa[tr]=null,vf=aa[--tr],aa[tr]=null;for(;a===la;)la=Vi[--mi],Vi[mi]=null,Fr=Vi[--mi],Vi[mi]=null,$e=Vi[--mi],Vi[mi]=null}var Si=null,Wi=null,Pn=!1,Nr=null;function uh(a,u){var m=Es(5,null,null,0);m.elementType="DELETED",m.stateNode=u,m.return=a,u=a.deletions,u===null?(a.deletions=[m],a.flags|=16):u.push(m)}function ch(a,u){switch(a.tag){case 5:var m=a.type;return u=u.nodeType!==1||m.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(a.stateNode=u,Si=a,Wi=zs(u.firstChild),!0):!1;case 6:return u=a.pendingProps===""||u.nodeType!==3?null:u,u!==null?(a.stateNode=u,Si=a,Wi=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(m=la!==null?{id:$e,overflow:Fr}:null,a.memoizedState={dehydrated:u,treeContext:m,retryLane:1073741824},m=Es(18,null,null,0),m.stateNode=u,m.return=a,a.child=m,Si=a,Wi=null,!0):!1;default:return!1}}function xf(a){return(a.mode&1)!==0&&(a.flags&128)===0}function _f(a){if(Pn){var u=Wi;if(u){var m=u;if(!ch(a,u)){if(xf(a))throw Error(t(418));u=zs(m.nextSibling);var _=Si;u&&ch(a,u)?uh(_,m):(a.flags=a.flags&-4097|2,Pn=!1,Si=a)}}else{if(xf(a))throw Error(t(418));a.flags=a.flags&-4097|2,Pn=!1,Si=a}}}function Af(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Si=a}function ul(a){if(a!==Si)return!1;if(!Pn)return Af(a),Pn=!0,!1;var u;if((u=a.tag!==3)&&!(u=a.tag!==5)&&(u=a.type,u=u!=="head"&&u!=="body"&&!eh(a.type,a.memoizedProps)),u&&(u=Wi)){if(xf(a))throw fh(),Error(t(418));for(;u;)uh(a,u),u=zs(u.nextSibling)}if(Af(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(u===0){Wi=zs(a.nextSibling);break e}u--}else m!=="$"&&m!=="$!"&&m!=="$?"||u++}a=a.nextSibling}Wi=null}}else Wi=Si?zs(a.stateNode.nextSibling):null;return!0}function fh(){for(var a=Wi;a;)a=zs(a.nextSibling)}function Co(){Wi=Si=null,Pn=!1}function cl(a){Nr===null?Nr=[a]:Nr.push(a)}var Wv=B.ReactCurrentBatchConfig;function du(a,u,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var _=m.stateNode}if(!_)throw Error(t(147,a));var T=_,P=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===P?u.ref:(u=function(O){var Q=T.refs;O===null?delete Q[P]:Q[P]=O},u._stringRef=P,u)}if(typeof a!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,a))}return a}function hu(a,u){throw a=Object.prototype.toString.call(u),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function dh(a){var u=a._init;return u(a._payload)}function hh(a){function u(me,ne){if(a){var ve=me.deletions;ve===null?(me.deletions=[ne],me.flags|=16):ve.push(ne)}}function m(me,ne){if(!a)return null;for(;ne!==null;)u(me,ne),ne=ne.sibling;return null}function _(me,ne){for(me=new Map;ne!==null;)ne.key!==null?me.set(ne.key,ne):me.set(ne.index,ne),ne=ne.sibling;return me}function T(me,ne){return me=Al(me,ne),me.index=0,me.sibling=null,me}function P(me,ne,ve){return me.index=ve,a?(ve=me.alternate,ve!==null?(ve=ve.index,ve<ne?(me.flags|=2,ne):ve):(me.flags|=2,ne)):(me.flags|=1048576,ne)}function O(me){return a&&me.alternate===null&&(me.flags|=2),me}function Q(me,ne,ve,Qe){return ne===null||ne.tag!==6?(ne=u0(ve,me.mode,Qe),ne.return=me,ne):(ne=T(ne,ve),ne.return=me,ne)}function te(me,ne,ve,Qe){var bt=ve.type;return bt===k?He(me,ne,ve.props.children,Qe,ve.key):ne!==null&&(ne.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===ge&&dh(bt)===ne.type)?(Qe=T(ne,ve.props),Qe.ref=du(me,ne,ve),Qe.return=me,Qe):(Qe=Hm(ve.type,ve.key,ve.props,null,me.mode,Qe),Qe.ref=du(me,ne,ve),Qe.return=me,Qe)}function Se(me,ne,ve,Qe){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ve.containerInfo||ne.stateNode.implementation!==ve.implementation?(ne=c0(ve,me.mode,Qe),ne.return=me,ne):(ne=T(ne,ve.children||[]),ne.return=me,ne)}function He(me,ne,ve,Qe,bt){return ne===null||ne.tag!==7?(ne=Pu(ve,me.mode,Qe,bt),ne.return=me,ne):(ne=T(ne,ve),ne.return=me,ne)}function We(me,ne,ve){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=u0(""+ne,me.mode,ve),ne.return=me,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return ve=Hm(ne.type,ne.key,ne.props,null,me.mode,ve),ve.ref=du(me,null,ne),ve.return=me,ve;case F:return ne=c0(ne,me.mode,ve),ne.return=me,ne;case ge:var Qe=ne._init;return We(me,Qe(ne._payload),ve)}if(qe(ne)||re(ne))return ne=Pu(ne,me.mode,ve,null),ne.return=me,ne;hu(me,ne)}return null}function Oe(me,ne,ve,Qe){var bt=ne!==null?ne.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number")return bt!==null?null:Q(me,ne,""+ve,Qe);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case N:return ve.key===bt?te(me,ne,ve,Qe):null;case F:return ve.key===bt?Se(me,ne,ve,Qe):null;case ge:return bt=ve._init,Oe(me,ne,bt(ve._payload),Qe)}if(qe(ve)||re(ve))return bt!==null?null:He(me,ne,ve,Qe,null);hu(me,ve)}return null}function pt(me,ne,ve,Qe,bt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return me=me.get(ve)||null,Q(ne,me,""+Qe,bt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case N:return me=me.get(Qe.key===null?ve:Qe.key)||null,te(ne,me,Qe,bt);case F:return me=me.get(Qe.key===null?ve:Qe.key)||null,Se(ne,me,Qe,bt);case ge:var Ft=Qe._init;return pt(me,ne,ve,Ft(Qe._payload),bt)}if(qe(Qe)||re(Qe))return me=me.get(ve)||null,He(ne,me,Qe,bt,null);hu(ne,Qe)}return null}function At(me,ne,ve,Qe){for(var bt=null,Ft=null,Nt=ne,zt=ne=0,Fi=null;Nt!==null&&zt<ve.length;zt++){Nt.index>zt?(Fi=Nt,Nt=null):Fi=Nt.sibling;var An=Oe(me,Nt,ve[zt],Qe);if(An===null){Nt===null&&(Nt=Fi);break}a&&Nt&&An.alternate===null&&u(me,Nt),ne=P(An,ne,zt),Ft===null?bt=An:Ft.sibling=An,Ft=An,Nt=Fi}if(zt===ve.length)return m(me,Nt),Pn&&js(me,zt),bt;if(Nt===null){for(;zt<ve.length;zt++)Nt=We(me,ve[zt],Qe),Nt!==null&&(ne=P(Nt,ne,zt),Ft===null?bt=Nt:Ft.sibling=Nt,Ft=Nt);return Pn&&js(me,zt),bt}for(Nt=_(me,Nt);zt<ve.length;zt++)Fi=pt(Nt,me,zt,ve[zt],Qe),Fi!==null&&(a&&Fi.alternate!==null&&Nt.delete(Fi.key===null?zt:Fi.key),ne=P(Fi,ne,zt),Ft===null?bt=Fi:Ft.sibling=Fi,Ft=Fi);return a&&Nt.forEach(function(Sl){return u(me,Sl)}),Pn&&js(me,zt),bt}function Et(me,ne,ve,Qe){var bt=re(ve);if(typeof bt!="function")throw Error(t(150));if(ve=bt.call(ve),ve==null)throw Error(t(151));for(var Ft=bt=null,Nt=ne,zt=ne=0,Fi=null,An=ve.next();Nt!==null&&!An.done;zt++,An=ve.next()){Nt.index>zt?(Fi=Nt,Nt=null):Fi=Nt.sibling;var Sl=Oe(me,Nt,An.value,Qe);if(Sl===null){Nt===null&&(Nt=Fi);break}a&&Nt&&Sl.alternate===null&&u(me,Nt),ne=P(Sl,ne,zt),Ft===null?bt=Sl:Ft.sibling=Sl,Ft=Sl,Nt=Fi}if(An.done)return m(me,Nt),Pn&&js(me,zt),bt;if(Nt===null){for(;!An.done;zt++,An=ve.next())An=We(me,An.value,Qe),An!==null&&(ne=P(An,ne,zt),Ft===null?bt=An:Ft.sibling=An,Ft=An);return Pn&&js(me,zt),bt}for(Nt=_(me,Nt);!An.done;zt++,An=ve.next())An=pt(Nt,me,zt,An.value,Qe),An!==null&&(a&&An.alternate!==null&&Nt.delete(An.key===null?zt:An.key),ne=P(An,ne,zt),Ft===null?bt=An:Ft.sibling=An,Ft=An);return a&&Nt.forEach(function(dP){return u(me,dP)}),Pn&&js(me,zt),bt}function ri(me,ne,ve,Qe){if(typeof ve=="object"&&ve!==null&&ve.type===k&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case N:e:{for(var bt=ve.key,Ft=ne;Ft!==null;){if(Ft.key===bt){if(bt=ve.type,bt===k){if(Ft.tag===7){m(me,Ft.sibling),ne=T(Ft,ve.props.children),ne.return=me,me=ne;break e}}else if(Ft.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===ge&&dh(bt)===Ft.type){m(me,Ft.sibling),ne=T(Ft,ve.props),ne.ref=du(me,Ft,ve),ne.return=me,me=ne;break e}m(me,Ft);break}else u(me,Ft);Ft=Ft.sibling}ve.type===k?(ne=Pu(ve.props.children,me.mode,Qe,ve.key),ne.return=me,me=ne):(Qe=Hm(ve.type,ve.key,ve.props,null,me.mode,Qe),Qe.ref=du(me,ne,ve),Qe.return=me,me=Qe)}return O(me);case F:e:{for(Ft=ve.key;ne!==null;){if(ne.key===Ft)if(ne.tag===4&&ne.stateNode.containerInfo===ve.containerInfo&&ne.stateNode.implementation===ve.implementation){m(me,ne.sibling),ne=T(ne,ve.children||[]),ne.return=me,me=ne;break e}else{m(me,ne);break}else u(me,ne);ne=ne.sibling}ne=c0(ve,me.mode,Qe),ne.return=me,me=ne}return O(me);case ge:return Ft=ve._init,ri(me,ne,Ft(ve._payload),Qe)}if(qe(ve))return At(me,ne,ve,Qe);if(re(ve))return Et(me,ne,ve,Qe);hu(me,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"?(ve=""+ve,ne!==null&&ne.tag===6?(m(me,ne.sibling),ne=T(ne,ve),ne.return=me,me=ne):(m(me,ne),ne=u0(ve,me.mode,Qe),ne.return=me,me=ne),O(me)):m(me,ne)}return ri}var ua=hh(!0),pu=hh(!1),ca=On(null),fa=null,Js=null,fl=null;function da(){fl=Js=fa=null}function mu(a){var u=ca.current;bn(ca),a._currentValue=u}function gu(a,u,m){for(;a!==null;){var _=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,_!==null&&(_.childLanes|=u)):_!==null&&(_.childLanes&u)!==u&&(_.childLanes|=u),a===m)break;a=a.return}}function bo(a,u){fa=a,fl=Js=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&u)!==0&&(Zt=!0),a.firstContext=null)}function vr(a){var u=a._currentValue;if(fl!==a)if(a={context:a,memoizedValue:u,next:null},Js===null){if(fa===null)throw Error(t(308));Js=a,fa.dependencies={lanes:0,firstContext:a}}else Js=Js.next=a;return u}var Ks=null;function ph(a){Ks===null?Ks=[a]:Ks.push(a)}function yu(a,u,m,_){var T=u.interleaved;return T===null?(m.next=m,ph(u)):(m.next=T.next,T.next=m),u.interleaved=m,$r(a,_)}function $r(a,u){a.lanes|=u;var m=a.alternate;for(m!==null&&(m.lanes|=u),m=a,a=a.return;a!==null;)a.childLanes|=u,m=a.alternate,m!==null&&(m.childLanes|=u),m=a,a=a.return;return m.tag===3?m.stateNode:null}var Sn=!1;function Jt(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xn(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Mn(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function Dn(a,u,m){var _=a.updateQueue;if(_===null)return null;if(_=_.shared,(vn&2)!==0){var T=_.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),_.pending=u,$r(a,m)}return T=_.interleaved,T===null?(u.next=u,ph(_)):(u.next=T.next,T.next=u),_.interleaved=u,$r(a,m)}function Ii(a,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194240)!==0)){var _=u.lanes;_&=a.pendingLanes,m|=_,u.lanes=m,Wn(a,m)}}function ha(a,u){var m=a.updateQueue,_=a.alternate;if(_!==null&&(_=_.updateQueue,m===_)){var T=null,P=null;if(m=m.firstBaseUpdate,m!==null){do{var O={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};P===null?T=P=O:P=P.next=O,m=m.next}while(m!==null);P===null?T=P=u:P=P.next=u}else T=P=u;m={baseState:_.baseState,firstBaseUpdate:T,lastBaseUpdate:P,shared:_.shared,effects:_.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=u:a.next=u,m.lastBaseUpdate=u}function kn(a,u,m,_){var T=a.updateQueue;Sn=!1;var P=T.firstBaseUpdate,O=T.lastBaseUpdate,Q=T.shared.pending;if(Q!==null){T.shared.pending=null;var te=Q,Se=te.next;te.next=null,O===null?P=Se:O.next=Se,O=te;var He=a.alternate;He!==null&&(He=He.updateQueue,Q=He.lastBaseUpdate,Q!==O&&(Q===null?He.firstBaseUpdate=Se:Q.next=Se,He.lastBaseUpdate=te))}if(P!==null){var We=T.baseState;O=0,He=Se=te=null,Q=P;do{var Oe=Q.lane,pt=Q.eventTime;if((_&Oe)===Oe){He!==null&&(He=He.next={eventTime:pt,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var At=a,Et=Q;switch(Oe=u,pt=m,Et.tag){case 1:if(At=Et.payload,typeof At=="function"){We=At.call(pt,We,Oe);break e}We=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=Et.payload,Oe=typeof At=="function"?At.call(pt,We,Oe):At,Oe==null)break e;We=$({},We,Oe);break e;case 2:Sn=!0}}Q.callback!==null&&Q.lane!==0&&(a.flags|=64,Oe=T.effects,Oe===null?T.effects=[Q]:Oe.push(Q))}else pt={eventTime:pt,lane:Oe,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},He===null?(Se=He=pt,te=We):He=He.next=pt,O|=Oe;if(Q=Q.next,Q===null){if(Q=T.shared.pending,Q===null)break;Oe=Q,Q=Oe.next,Oe.next=null,T.lastBaseUpdate=Oe,T.shared.pending=null}}while(!0);if(He===null&&(te=We),T.baseState=te,T.firstBaseUpdate=Se,T.lastBaseUpdate=He,u=T.shared.interleaved,u!==null){T=u;do O|=T.lane,T=T.next;while(T!==u)}else P===null&&(T.shared.lanes=0);Tu|=O,a.lanes=O,a.memoizedState=We}}function dl(a,u,m){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var _=a[u],T=_.callback;if(T!==null){if(_.callback=null,_=m,typeof T!="function")throw Error(t(191,T));T.call(_)}}}var _s={},xr=On(_s),pa=On(_s),Ys=On(_s);function qn(a){if(a===_s)throw Error(t(174));return a}function vu(a,u){switch(En(Ys,u),En(pa,a),En(xr,_s),a=u.nodeType,a){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:st(null,"");break;default:a=a===8?u.parentNode:u,u=a.namespaceURI||null,a=a.tagName,u=st(u,a)}bn(xr),En(xr,u)}function Ro(){bn(xr),bn(pa),bn(Ys)}function ma(a){qn(Ys.current);var u=qn(xr.current),m=st(u,a.type);u!==m&&(En(pa,a),En(xr,m))}function hl(a){pa.current===a&&(bn(xr),bn(pa))}var Bn=On(0);function es(a){for(var u=a;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var pl=[];function As(){for(var a=0;a<pl.length;a++)pl[a]._workInProgressVersionPrimary=null;pl.length=0}var ga=B.ReactCurrentDispatcher,ya=B.ReactCurrentBatchConfig,Qs=0,Rn=null,Hn=null,mn=null,ts=!1,Di=!1,Po=0,nr=0;function Mi(){throw Error(t(321))}function xu(a,u){if(u===null)return!1;for(var m=0;m<u.length&&m<a.length;m++)if(!mr(a[m],u[m]))return!1;return!0}function _u(a,u,m,_,T,P){if(Qs=P,Rn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ga.current=a===null||a.memoizedState===null?Em:wm,a=m(_,T),Di){P=0;do{if(Di=!1,Po=0,25<=P)throw Error(t(301));P+=1,mn=Hn=null,u.updateQueue=null,ga.current=Tm,a=m(_,T)}while(Di)}if(ga.current=bf,u=Hn!==null&&Hn.next!==null,Qs=0,mn=Hn=Rn=null,ts=!1,u)throw Error(t(300));return a}function mh(){var a=Po!==0;return Po=0,a}function Ei(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Rn.memoizedState=mn=a:mn=mn.next=a,mn}function _r(){if(Hn===null){var a=Rn.alternate;a=a!==null?a.memoizedState:null}else a=Hn.next;var u=mn===null?Rn.memoizedState:mn.next;if(u!==null)mn=u,Hn=a;else{if(a===null)throw Error(t(310));Hn=a,a={memoizedState:Hn.memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},mn===null?Rn.memoizedState=mn=a:mn=mn.next=a}return mn}function ml(a,u){return typeof u=="function"?u(a):u}function Au(a){var u=_r(),m=u.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=a;var _=Hn,T=_.baseQueue,P=m.pending;if(P!==null){if(T!==null){var O=T.next;T.next=P.next,P.next=O}_.baseQueue=T=P,m.pending=null}if(T!==null){P=T.next,_=_.baseState;var Q=O=null,te=null,Se=P;do{var He=Se.lane;if((Qs&He)===He)te!==null&&(te=te.next={lane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),_=Se.hasEagerState?Se.eagerState:a(_,Se.action);else{var We={lane:He,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null};te===null?(Q=te=We,O=_):te=te.next=We,Rn.lanes|=He,Tu|=He}Se=Se.next}while(Se!==null&&Se!==P);te===null?O=_:te.next=Q,mr(_,u.memoizedState)||(Zt=!0),u.memoizedState=_,u.baseState=O,u.baseQueue=te,m.lastRenderedState=_}if(a=m.interleaved,a!==null){T=a;do P=T.lane,Rn.lanes|=P,Tu|=P,T=T.next;while(T!==a)}else T===null&&(m.lanes=0);return[u.memoizedState,m.dispatch]}function qs(a){var u=_r(),m=u.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=a;var _=m.dispatch,T=m.pending,P=u.memoizedState;if(T!==null){m.pending=null;var O=T=T.next;do P=a(P,O.action),O=O.next;while(O!==T);mr(P,u.memoizedState)||(Zt=!0),u.memoizedState=P,u.baseQueue===null&&(u.baseState=P),m.lastRenderedState=P}return[P,_]}function gh(){}function yh(a,u){var m=Rn,_=_r(),T=u(),P=!mr(_.memoizedState,T);if(P&&(_.memoizedState=T,Zt=!0),_=_.queue,_h(vm.bind(null,m,_,a),[a]),_.getSnapshot!==u||P||mn!==null&&mn.memoizedState.tag&1){if(m.flags|=2048,ns(9,Su.bind(null,m,_,T,u),void 0,null),Li===null)throw Error(t(349));(Qs&30)!==0||Sf(m,u,T)}return T}function Sf(a,u,m){a.flags|=16384,a={getSnapshot:u,value:m},u=Rn.updateQueue,u===null?(u={lastEffect:null,stores:null},Rn.updateQueue=u,u.stores=[a]):(m=u.stores,m===null?u.stores=[a]:m.push(a))}function Su(a,u,m,_){u.value=m,u.getSnapshot=_,xm(u)&&vh(a)}function vm(a,u,m){return m(function(){xm(u)&&vh(a)})}function xm(a){var u=a.getSnapshot;a=a.value;try{var m=u();return!mr(a,m)}catch{return!0}}function vh(a){var u=$r(a,1);u!==null&&no(u,a,1,-1)}function xh(a){var u=Ei();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:a},u.queue=a,a=a.dispatch=va.bind(null,Rn,a),[u.memoizedState,a]}function ns(a,u,m,_){return a={tag:a,create:u,destroy:m,deps:_,next:null},u=Rn.updateQueue,u===null?(u={lastEffect:null,stores:null},Rn.updateQueue=u,u.lastEffect=a.next=a):(m=u.lastEffect,m===null?u.lastEffect=a.next=a:(_=m.next,m.next=a,a.next=_,u.lastEffect=a)),a}function _m(){return _r().memoizedState}function Ss(a,u,m,_){var T=Ei();Rn.flags|=a,T.memoizedState=ns(1|u,m,void 0,_===void 0?null:_)}function Mu(a,u,m,_){var T=_r();_=_===void 0?null:_;var P=void 0;if(Hn!==null){var O=Hn.memoizedState;if(P=O.destroy,_!==null&&xu(_,O.deps)){T.memoizedState=ns(u,m,P,_);return}}Rn.flags|=a,T.memoizedState=ns(1|u,m,P,_)}function ji(a,u){return Ss(8390656,8,a,u)}function _h(a,u){return Mu(2048,8,a,u)}function Ah(a,u){return Mu(4,2,a,u)}function Am(a,u){return Mu(4,4,a,u)}function Sm(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function Sh(a,u,m){return m=m!=null?m.concat([a]):null,Mu(4,4,Sm.bind(null,u,a),m)}function Mf(){}function Mm(a,u){var m=_r();u=u===void 0?null:u;var _=m.memoizedState;return _!==null&&u!==null&&xu(u,_[1])?_[0]:(m.memoizedState=[a,u],a)}function Ar(a,u){var m=_r();u=u===void 0?null:u;var _=m.memoizedState;return _!==null&&u!==null&&xu(u,_[1])?_[0]:(a=a(),m.memoizedState=[a,u],a)}function Ef(a,u,m){return(Qs&21)===0?(a.baseState&&(a.baseState=!1,Zt=!0),a.memoizedState=m):(mr(m,u)||(m=on(),Rn.lanes|=m,Tu|=m,a.baseState=!0),u)}function jv(a,u){var m=an;an=m!==0&&4>m?m:4,a(!0);var _=ya.transition;ya.transition={};try{a(!1),u()}finally{an=m,ya.transition=_}}function Zs(){return _r().memoizedState}function wf(a,u,m){var _=xl(a);if(m={lane:_,action:m,hasEagerState:!1,eagerState:null,next:null},Eu(a))Tf(u,m);else if(m=yu(a,u,m,_),m!==null){var T=Mr();no(m,a,_,T),Cf(m,u,_)}}function va(a,u,m){var _=xl(a),T={lane:_,action:m,hasEagerState:!1,eagerState:null,next:null};if(Eu(a))Tf(u,T);else{var P=a.alternate;if(a.lanes===0&&(P===null||P.lanes===0)&&(P=u.lastRenderedReducer,P!==null))try{var O=u.lastRenderedState,Q=P(O,m);if(T.hasEagerState=!0,T.eagerState=Q,mr(Q,O)){var te=u.interleaved;te===null?(T.next=T,ph(u)):(T.next=te.next,te.next=T),u.interleaved=T;return}}catch{}finally{}m=yu(a,u,T,_),m!==null&&(T=Mr(),no(m,a,_,T),Cf(m,u,_))}}function Eu(a){var u=a.alternate;return a===Rn||u!==null&&u===Rn}function Tf(a,u){Di=ts=!0;var m=a.pending;m===null?u.next=u:(u.next=m.next,m.next=u),a.pending=u}function Cf(a,u,m){if((m&4194240)!==0){var _=u.lanes;_&=a.pendingLanes,m|=_,u.lanes=m,Wn(a,m)}}var bf={readContext:vr,useCallback:Mi,useContext:Mi,useEffect:Mi,useImperativeHandle:Mi,useInsertionEffect:Mi,useLayoutEffect:Mi,useMemo:Mi,useReducer:Mi,useRef:Mi,useState:Mi,useDebugValue:Mi,useDeferredValue:Mi,useTransition:Mi,useMutableSource:Mi,useSyncExternalStore:Mi,useId:Mi,unstable_isNewReconciler:!1},Em={readContext:vr,useCallback:function(a,u){return Ei().memoizedState=[a,u===void 0?null:u],a},useContext:vr,useEffect:ji,useImperativeHandle:function(a,u,m){return m=m!=null?m.concat([a]):null,Ss(4194308,4,Sm.bind(null,u,a),m)},useLayoutEffect:function(a,u){return Ss(4194308,4,a,u)},useInsertionEffect:function(a,u){return Ss(4,2,a,u)},useMemo:function(a,u){var m=Ei();return u=u===void 0?null:u,a=a(),m.memoizedState=[a,u],a},useReducer:function(a,u,m){var _=Ei();return u=m!==void 0?m(u):u,_.memoizedState=_.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},_.queue=a,a=a.dispatch=wf.bind(null,Rn,a),[_.memoizedState,a]},useRef:function(a){var u=Ei();return a={current:a},u.memoizedState=a},useState:xh,useDebugValue:Mf,useDeferredValue:function(a){return Ei().memoizedState=a},useTransition:function(){var a=xh(!1),u=a[0];return a=jv.bind(null,a[1]),Ei().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,m){var _=Rn,T=Ei();if(Pn){if(m===void 0)throw Error(t(407));m=m()}else{if(m=u(),Li===null)throw Error(t(349));(Qs&30)!==0||Sf(_,u,m)}T.memoizedState=m;var P={value:m,getSnapshot:u};return T.queue=P,ji(vm.bind(null,_,P,a),[a]),_.flags|=2048,ns(9,Su.bind(null,_,P,m,u),void 0,null),m},useId:function(){var a=Ei(),u=Li.identifierPrefix;if(Pn){var m=Fr,_=$e;m=(_&~(1<<32-kt(_)-1)).toString(32)+m,u=":"+u+"R"+m,m=Po++,0<m&&(u+="H"+m.toString(32)),u+=":"}else m=nr++,u=":"+u+"r"+m.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},wm={readContext:vr,useCallback:Mm,useContext:vr,useEffect:_h,useImperativeHandle:Sh,useInsertionEffect:Ah,useLayoutEffect:Am,useMemo:Ar,useReducer:Au,useRef:_m,useState:function(){return Au(ml)},useDebugValue:Mf,useDeferredValue:function(a){var u=_r();return Ef(u,Hn.memoizedState,a)},useTransition:function(){var a=Au(ml)[0],u=_r().memoizedState;return[a,u]},useMutableSource:gh,useSyncExternalStore:yh,useId:Zs,unstable_isNewReconciler:!1},Tm={readContext:vr,useCallback:Mm,useContext:vr,useEffect:_h,useImperativeHandle:Sh,useInsertionEffect:Ah,useLayoutEffect:Am,useMemo:Ar,useReducer:qs,useRef:_m,useState:function(){return qs(ml)},useDebugValue:Mf,useDeferredValue:function(a){var u=_r();return Hn===null?u.memoizedState=a:Ef(u,Hn.memoizedState,a)},useTransition:function(){var a=qs(ml)[0],u=_r().memoizedState;return[a,u]},useMutableSource:gh,useSyncExternalStore:yh,useId:Zs,unstable_isNewReconciler:!1};function Ur(a,u){if(a&&a.defaultProps){u=$({},u),a=a.defaultProps;for(var m in a)u[m]===void 0&&(u[m]=a[m]);return u}return u}function wu(a,u,m,_){u=a.memoizedState,m=m(_,u),m=m==null?u:$({},u,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var Rf={isMounted:function(a){return(a=a._reactInternals)?hs(a)===a:!1},enqueueSetState:function(a,u,m){a=a._reactInternals;var _=Mr(),T=xl(a),P=Mn(_,T);P.payload=u,m!=null&&(P.callback=m),u=Dn(a,P,T),u!==null&&(no(u,a,T,_),Ii(u,a,T))},enqueueReplaceState:function(a,u,m){a=a._reactInternals;var _=Mr(),T=xl(a),P=Mn(_,T);P.tag=1,P.payload=u,m!=null&&(P.callback=m),u=Dn(a,P,T),u!==null&&(no(u,a,T,_),Ii(u,a,T))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var m=Mr(),_=xl(a),T=Mn(m,_);T.tag=2,u!=null&&(T.callback=u),u=Dn(a,T,_),u!==null&&(no(u,a,_,m),Ii(u,a,_))}};function Cm(a,u,m,_,T,P,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(_,P,O):u.prototype&&u.prototype.isPureReactComponent?!$o(m,_)||!$o(T,P):!0}function f(a,u,m){var _=!1,T=Vs,P=u.contextType;return typeof P=="object"&&P!==null?P=vr(P):(T=Bi(u)?Ws:Ai.current,_=u.contextTypes,P=(_=_!=null)?sa(a,T):Vs),u=new u(m,P),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Rf,a.stateNode=u,u._reactInternals=a,_&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=T,a.__reactInternalMemoizedMaskedChildContext=P),u}function d(a,u,m,_){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,_),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,_),u.state!==a&&Rf.enqueueReplaceState(u,u.state,null)}function x(a,u,m,_){var T=a.stateNode;T.props=m,T.state=a.memoizedState,T.refs={},Jt(a);var P=u.contextType;typeof P=="object"&&P!==null?T.context=vr(P):(P=Bi(u)?Ws:Ai.current,T.context=sa(a,P)),T.state=a.memoizedState,P=u.getDerivedStateFromProps,typeof P=="function"&&(wu(a,u,P,m),T.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(u=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),u!==T.state&&Rf.enqueueReplaceState(T,T.state,null),kn(a,m,T,_),T.state=a.memoizedState),typeof T.componentDidMount=="function"&&(a.flags|=4194308)}function E(a,u){try{var m="",_=u;do m+=we(_),_=_.return;while(_);var T=m}catch(P){T=`
Error generating stack: `+P.message+`
`+P.stack}return{value:a,source:u,stack:T,digest:null}}function R(a,u,m){return{value:a,source:null,stack:m??null,digest:u??null}}function I(a,u){try{console.error(u.value)}catch(m){setTimeout(function(){throw m})}}var Y=typeof WeakMap=="function"?WeakMap:Map;function se(a,u,m){m=Mn(-1,m),m.tag=3,m.payload={element:null};var _=u.value;return m.callback=function(){Lm||(Lm=!0,t0=_),I(a,u)},m}function Ce(a,u,m){m=Mn(-1,m),m.tag=3;var _=a.type.getDerivedStateFromError;if(typeof _=="function"){var T=u.value;m.payload=function(){return _(T)},m.callback=function(){I(a,u)}}var P=a.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(m.callback=function(){I(a,u),typeof _!="function"&&(yl===null?yl=new Set([this]):yl.add(this));var O=u.stack;this.componentDidCatch(u.value,{componentStack:O!==null?O:""})}),m}function Ke(a,u,m){var _=a.pingCache;if(_===null){_=a.pingCache=new Y;var T=new Set;_.set(u,T)}else T=_.get(u),T===void 0&&(T=new Set,_.set(u,T));T.has(m)||(T.add(m),a=tP.bind(null,a,u,m),u.then(a,a))}function vt(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function Vt(a,u,m,_,T){return(a.mode&1)===0?(a===u?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(u=Mn(-1,1),u.tag=2,Dn(m,u,1))),m.lanes|=1),a):(a.flags|=65536,a.lanes=T,a)}var Dt=B.ReactCurrentOwner,Zt=!1;function ft(a,u,m,_){u.child=a===null?pu(u,null,m,_):ua(u,a.child,m,_)}function wi(a,u,m,_,T){m=m.render;var P=u.ref;return bo(u,T),_=_u(a,u,m,_,P,T),m=mh(),a!==null&&!Zt?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~T,xa(a,u,T)):(Pn&&m&&lh(u),u.flags|=1,ft(a,u,_,T),u.child)}function Sr(a,u,m,_,T){if(a===null){var P=m.type;return typeof P=="function"&&!l0(P)&&P.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(u.tag=15,u.type=P,_e(a,u,P,_,T)):(a=Hm(m.type,null,_,u,u.mode,T),a.ref=u.ref,a.return=u,u.child=a)}if(P=a.child,(a.lanes&T)===0){var O=P.memoizedProps;if(m=m.compare,m=m!==null?m:$o,m(O,_)&&a.ref===u.ref)return xa(a,u,T)}return u.flags|=1,a=Al(P,_),a.ref=u.ref,a.return=u,u.child=a}function _e(a,u,m,_,T){if(a!==null){var P=a.memoizedProps;if($o(P,_)&&a.ref===u.ref)if(Zt=!1,u.pendingProps=_=P,(a.lanes&T)!==0)(a.flags&131072)!==0&&(Zt=!0);else return u.lanes=a.lanes,xa(a,u,T)}return ot(a,u,m,_,T)}function ue(a,u,m){var _=u.pendingProps,T=_.children,P=a!==null?a.memoizedState:null;if(_.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},En(Bf,is),is|=m;else{if((m&1073741824)===0)return a=P!==null?P.baseLanes|m:m,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,En(Bf,is),is|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=P!==null?P.baseLanes:m,En(Bf,is),is|=_}else P!==null?(_=P.baseLanes|m,u.memoizedState=null):_=m,En(Bf,is),is|=_;return ft(a,u,T,m),u.child}function Ee(a,u){var m=u.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(u.flags|=512,u.flags|=2097152)}function ot(a,u,m,_,T){var P=Bi(m)?Ws:Ai.current;return P=sa(u,P),bo(u,T),m=_u(a,u,m,_,P,T),_=mh(),a!==null&&!Zt?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~T,xa(a,u,T)):(Pn&&_&&lh(u),u.flags|=1,ft(a,u,m,T),u.child)}function Tt(a,u,m,_,T){if(Bi(m)){var P=!0;oa(u)}else P=!1;if(bo(u,T),u.stateNode===null)Rm(a,u),f(u,m,_),x(u,m,_,T),_=!0;else if(a===null){var O=u.stateNode,Q=u.memoizedProps;O.props=Q;var te=O.context,Se=m.contextType;typeof Se=="object"&&Se!==null?Se=vr(Se):(Se=Bi(m)?Ws:Ai.current,Se=sa(u,Se));var He=m.getDerivedStateFromProps,We=typeof He=="function"||typeof O.getSnapshotBeforeUpdate=="function";We||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Q!==_||te!==Se)&&d(u,O,_,Se),Sn=!1;var Oe=u.memoizedState;O.state=Oe,kn(u,_,O,T),te=u.memoizedState,Q!==_||Oe!==te||Gi.current||Sn?(typeof He=="function"&&(wu(u,m,He,_),te=u.memoizedState),(Q=Sn||Cm(u,m,Q,_,Oe,te,Se))?(We||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(u.flags|=4194308)):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=_,u.memoizedState=te),O.props=_,O.state=te,O.context=Se,_=Q):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),_=!1)}else{O=u.stateNode,Xn(a,u),Q=u.memoizedProps,Se=u.type===u.elementType?Q:Ur(u.type,Q),O.props=Se,We=u.pendingProps,Oe=O.context,te=m.contextType,typeof te=="object"&&te!==null?te=vr(te):(te=Bi(m)?Ws:Ai.current,te=sa(u,te));var pt=m.getDerivedStateFromProps;(He=typeof pt=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Q!==We||Oe!==te)&&d(u,O,_,te),Sn=!1,Oe=u.memoizedState,O.state=Oe,kn(u,_,O,T);var At=u.memoizedState;Q!==We||Oe!==At||Gi.current||Sn?(typeof pt=="function"&&(wu(u,m,pt,_),At=u.memoizedState),(Se=Sn||Cm(u,m,Se,_,Oe,At,te)||!1)?(He||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(_,At,te),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(_,At,te)),typeof O.componentDidUpdate=="function"&&(u.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof O.componentDidUpdate!="function"||Q===a.memoizedProps&&Oe===a.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Q===a.memoizedProps&&Oe===a.memoizedState||(u.flags|=1024),u.memoizedProps=_,u.memoizedState=At),O.props=_,O.state=At,O.context=te,_=Se):(typeof O.componentDidUpdate!="function"||Q===a.memoizedProps&&Oe===a.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Q===a.memoizedProps&&Oe===a.memoizedState||(u.flags|=1024),_=!1)}return jt(a,u,m,_,P,T)}function jt(a,u,m,_,T,P){Ee(a,u);var O=(u.flags&128)!==0;if(!_&&!O)return T&&oh(u,m,!1),xa(a,u,P);_=u.stateNode,Dt.current=u;var Q=O&&typeof m.getDerivedStateFromError!="function"?null:_.render();return u.flags|=1,a!==null&&O?(u.child=ua(u,a.child,null,P),u.child=ua(u,null,Q,P)):ft(a,u,Q,P),u.memoizedState=_.state,T&&oh(u,m,!0),u.child}function Wt(a){var u=a.stateNode;u.pendingContext?sh(a,u.pendingContext,u.pendingContext!==u.context):u.context&&sh(a,u.context,!1),vu(a,u.containerInfo)}function hn(a,u,m,_,T){return Co(),cl(T),u.flags|=256,ft(a,u,m,_),u.child}var Zn={dehydrated:null,treeContext:null,retryLane:0};function dn(a){return{baseLanes:a,cachePool:null,transitions:null}}function $s(a,u,m){var _=u.pendingProps,T=Bn.current,P=!1,O=(u.flags&128)!==0,Q;if((Q=O)||(Q=a!==null&&a.memoizedState===null?!1:(T&2)!==0),Q?(P=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(T|=1),En(Bn,T&1),a===null)return _f(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((u.mode&1)===0?u.lanes=1:a.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(O=_.children,a=_.fallback,P?(_=u.mode,P=u.child,O={mode:"hidden",children:O},(_&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=O):P=zm(O,_,0,null),a=Pu(a,_,m,null),P.return=u,a.return=u,P.sibling=a,u.child=P,u.child.memoizedState=dn(m),u.memoizedState=Zn,a):Mh(u,O));if(T=a.memoizedState,T!==null&&(Q=T.dehydrated,Q!==null))return VR(a,u,O,_,Q,T,m);if(P){P=_.fallback,O=u.mode,T=a.child,Q=T.sibling;var te={mode:"hidden",children:_.children};return(O&1)===0&&u.child!==T?(_=u.child,_.childLanes=0,_.pendingProps=te,u.deletions=null):(_=Al(T,te),_.subtreeFlags=T.subtreeFlags&14680064),Q!==null?P=Al(Q,P):(P=Pu(P,O,m,null),P.flags|=2),P.return=u,_.return=u,_.sibling=P,u.child=_,_=P,P=u.child,O=a.child.memoizedState,O=O===null?dn(m):{baseLanes:O.baseLanes|m,cachePool:null,transitions:O.transitions},P.memoizedState=O,P.childLanes=a.childLanes&~m,u.memoizedState=Zn,_}return P=a.child,a=P.sibling,_=Al(P,{mode:"visible",children:_.children}),(u.mode&1)===0&&(_.lanes=m),_.return=u,_.sibling=null,a!==null&&(m=u.deletions,m===null?(u.deletions=[a],u.flags|=16):m.push(a)),u.child=_,u.memoizedState=null,_}function Mh(a,u){return u=zm({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function bm(a,u,m,_){return _!==null&&cl(_),ua(u,a.child,null,m),a=Mh(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function VR(a,u,m,_,T,P,O){if(m)return u.flags&256?(u.flags&=-257,_=R(Error(t(422))),bm(a,u,O,_)):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(P=_.fallback,T=u.mode,_=zm({mode:"visible",children:_.children},T,0,null),P=Pu(P,T,O,null),P.flags|=2,_.return=u,P.return=u,_.sibling=P,u.child=_,(u.mode&1)!==0&&ua(u,a.child,null,O),u.child.memoizedState=dn(O),u.memoizedState=Zn,P);if((u.mode&1)===0)return bm(a,u,O,null);if(T.data==="$!"){if(_=T.nextSibling&&T.nextSibling.dataset,_)var Q=_.dgst;return _=Q,P=Error(t(419)),_=R(P,_,void 0),bm(a,u,O,_)}if(Q=(O&a.childLanes)!==0,Zt||Q){if(_=Li,_!==null){switch(O&-O){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(_.suspendedLanes|O))!==0?0:T,T!==0&&T!==P.retryLane&&(P.retryLane=T,$r(a,T),no(_,a,T,-1))}return a0(),_=R(Error(t(421))),bm(a,u,O,_)}return T.data==="$?"?(u.flags|=128,u.child=a.child,u=nP.bind(null,a),T._reactRetry=u,null):(a=P.treeContext,Wi=zs(T.nextSibling),Si=u,Pn=!0,Nr=null,a!==null&&(Vi[mi++]=$e,Vi[mi++]=Fr,Vi[mi++]=la,$e=a.id,Fr=a.overflow,la=u),u=Mh(u,_.children),u.flags|=4096,u)}function oS(a,u,m){a.lanes|=u;var _=a.alternate;_!==null&&(_.lanes|=u),gu(a.return,u,m)}function Xv(a,u,m,_,T){var P=a.memoizedState;P===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:_,tail:m,tailMode:T}:(P.isBackwards=u,P.rendering=null,P.renderingStartTime=0,P.last=_,P.tail=m,P.tailMode=T)}function aS(a,u,m){var _=u.pendingProps,T=_.revealOrder,P=_.tail;if(ft(a,u,_.children,m),_=Bn.current,(_&2)!==0)_=_&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&oS(a,m,u);else if(a.tag===19)oS(a,m,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}_&=1}if(En(Bn,_),(u.mode&1)===0)u.memoizedState=null;else switch(T){case"forwards":for(m=u.child,T=null;m!==null;)a=m.alternate,a!==null&&es(a)===null&&(T=m),m=m.sibling;m=T,m===null?(T=u.child,u.child=null):(T=m.sibling,m.sibling=null),Xv(u,!1,T,m,P);break;case"backwards":for(m=null,T=u.child,u.child=null;T!==null;){if(a=T.alternate,a!==null&&es(a)===null){u.child=T;break}a=T.sibling,T.sibling=m,m=T,T=a}Xv(u,!0,m,null,P);break;case"together":Xv(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Rm(a,u){(u.mode&1)===0&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function xa(a,u,m){if(a!==null&&(u.dependencies=a.dependencies),Tu|=u.lanes,(m&u.childLanes)===0)return null;if(a!==null&&u.child!==a.child)throw Error(t(153));if(u.child!==null){for(a=u.child,m=Al(a,a.pendingProps),u.child=m,m.return=u;a.sibling!==null;)a=a.sibling,m=m.sibling=Al(a,a.pendingProps),m.return=u;m.sibling=null}return u.child}function WR(a,u,m){switch(u.tag){case 3:Wt(u),Co();break;case 5:ma(u);break;case 1:Bi(u.type)&&oa(u);break;case 4:vu(u,u.stateNode.containerInfo);break;case 10:var _=u.type._context,T=u.memoizedProps.value;En(ca,_._currentValue),_._currentValue=T;break;case 13:if(_=u.memoizedState,_!==null)return _.dehydrated!==null?(En(Bn,Bn.current&1),u.flags|=128,null):(m&u.child.childLanes)!==0?$s(a,u,m):(En(Bn,Bn.current&1),a=xa(a,u,m),a!==null?a.sibling:null);En(Bn,Bn.current&1);break;case 19:if(_=(m&u.childLanes)!==0,(a.flags&128)!==0){if(_)return aS(a,u,m);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),En(Bn,Bn.current),_)break;return null;case 22:case 23:return u.lanes=0,ue(a,u,m)}return xa(a,u,m)}var lS,Jv,uS,cS;lS=function(a,u){for(var m=u.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Jv=function(){},uS=function(a,u,m,_){var T=a.memoizedProps;if(T!==_){a=u.stateNode,qn(xr.current);var P=null;switch(m){case"input":T=K(a,T),_=K(a,_),P=[];break;case"select":T=$({},T,{value:void 0}),_=$({},_,{value:void 0}),P=[];break;case"textarea":T=H(a,T),_=H(a,_),P=[];break;default:typeof T.onClick!="function"&&typeof _.onClick=="function"&&(a.onclick=au)}ee(m,_);var O;m=null;for(Se in T)if(!_.hasOwnProperty(Se)&&T.hasOwnProperty(Se)&&T[Se]!=null)if(Se==="style"){var Q=T[Se];for(O in Q)Q.hasOwnProperty(O)&&(m||(m={}),m[O]="")}else Se!=="dangerouslySetInnerHTML"&&Se!=="children"&&Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&Se!=="autoFocus"&&(r.hasOwnProperty(Se)?P||(P=[]):(P=P||[]).push(Se,null));for(Se in _){var te=_[Se];if(Q=T!=null?T[Se]:void 0,_.hasOwnProperty(Se)&&te!==Q&&(te!=null||Q!=null))if(Se==="style")if(Q){for(O in Q)!Q.hasOwnProperty(O)||te&&te.hasOwnProperty(O)||(m||(m={}),m[O]="");for(O in te)te.hasOwnProperty(O)&&Q[O]!==te[O]&&(m||(m={}),m[O]=te[O])}else m||(P||(P=[]),P.push(Se,m)),m=te;else Se==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,Q=Q?Q.__html:void 0,te!=null&&Q!==te&&(P=P||[]).push(Se,te)):Se==="children"?typeof te!="string"&&typeof te!="number"||(P=P||[]).push(Se,""+te):Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&(r.hasOwnProperty(Se)?(te!=null&&Se==="onScroll"&&Cn("scroll",a),P||Q===te||(P=[])):(P=P||[]).push(Se,te))}m&&(P=P||[]).push("style",m);var Se=P;(u.updateQueue=Se)&&(u.flags|=4)}},cS=function(a,u,m,_){m!==_&&(u.flags|=4)};function Eh(a,u){if(!Pn)switch(a.tailMode){case"hidden":u=a.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:_.sibling=null}}function ir(a){var u=a.alternate!==null&&a.alternate.child===a.child,m=0,_=0;if(u)for(var T=a.child;T!==null;)m|=T.lanes|T.childLanes,_|=T.subtreeFlags&14680064,_|=T.flags&14680064,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)m|=T.lanes|T.childLanes,_|=T.subtreeFlags,_|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=_,a.childLanes=m,u}function jR(a,u,m){var _=u.pendingProps;switch(Xs(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ir(u),null;case 1:return Bi(u.type)&&lu(),ir(u),null;case 3:return _=u.stateNode,Ro(),bn(Gi),bn(Ai),As(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(a===null||a.child===null)&&(ul(u)?u.flags|=4:a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Nr!==null&&(r0(Nr),Nr=null))),Jv(a,u),ir(u),null;case 5:hl(u);var T=qn(Ys.current);if(m=u.type,a!==null&&u.stateNode!=null)uS(a,u,m,_,T),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!_){if(u.stateNode===null)throw Error(t(166));return ir(u),null}if(a=qn(xr.current),ul(u)){_=u.stateNode,m=u.type;var P=u.memoizedProps;switch(_[ii]=u,_[ll]=P,a=(u.mode&1)!==0,m){case"dialog":Cn("cancel",_),Cn("close",_);break;case"iframe":case"object":case"embed":Cn("load",_);break;case"video":case"audio":for(T=0;T<wo.length;T++)Cn(wo[T],_);break;case"source":Cn("error",_);break;case"img":case"image":case"link":Cn("error",_),Cn("load",_);break;case"details":Cn("toggle",_);break;case"input":mt(_,P),Cn("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!P.multiple},Cn("invalid",_);break;case"textarea":pe(_,P),Cn("invalid",_)}ee(m,P),T=null;for(var O in P)if(P.hasOwnProperty(O)){var Q=P[O];O==="children"?typeof Q=="string"?_.textContent!==Q&&(P.suppressHydrationWarning!==!0&&ou(_.textContent,Q,a),T=["children",Q]):typeof Q=="number"&&_.textContent!==""+Q&&(P.suppressHydrationWarning!==!0&&ou(_.textContent,Q,a),T=["children",""+Q]):r.hasOwnProperty(O)&&Q!=null&&O==="onScroll"&&Cn("scroll",_)}switch(m){case"input":rt(_),Xe(_,P,!0);break;case"textarea":rt(_),Ue(_);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(_.onclick=au)}_=T,u.updateQueue=_,_!==null&&(u.flags|=4)}else{O=T.nodeType===9?T:T.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Pe(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=O.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof _.is=="string"?a=O.createElement(m,{is:_.is}):(a=O.createElement(m),m==="select"&&(O=a,_.multiple?O.multiple=!0:_.size&&(O.size=_.size))):a=O.createElementNS(a,m),a[ii]=u,a[ll]=_,lS(a,u,!1,!1),u.stateNode=a;e:{switch(O=Re(m,_),m){case"dialog":Cn("cancel",a),Cn("close",a),T=_;break;case"iframe":case"object":case"embed":Cn("load",a),T=_;break;case"video":case"audio":for(T=0;T<wo.length;T++)Cn(wo[T],a);T=_;break;case"source":Cn("error",a),T=_;break;case"img":case"image":case"link":Cn("error",a),Cn("load",a),T=_;break;case"details":Cn("toggle",a),T=_;break;case"input":mt(a,_),T=K(a,_),Cn("invalid",a);break;case"option":T=_;break;case"select":a._wrapperState={wasMultiple:!!_.multiple},T=$({},_,{value:void 0}),Cn("invalid",a);break;case"textarea":pe(a,_),T=H(a,_),Cn("invalid",a);break;default:T=_}ee(m,T),Q=T;for(P in Q)if(Q.hasOwnProperty(P)){var te=Q[P];P==="style"?Lt(a,te):P==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&ct(a,te)):P==="children"?typeof te=="string"?(m!=="textarea"||te!=="")&&Gt(a,te):typeof te=="number"&&Gt(a,""+te):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(r.hasOwnProperty(P)?te!=null&&P==="onScroll"&&Cn("scroll",a):te!=null&&b(a,P,te,O))}switch(m){case"input":rt(a),Xe(a,_,!1);break;case"textarea":rt(a),Ue(a);break;case"option":_.value!=null&&a.setAttribute("value",""+je(_.value));break;case"select":a.multiple=!!_.multiple,P=_.value,P!=null?X(a,!!_.multiple,P,!1):_.defaultValue!=null&&X(a,!!_.multiple,_.defaultValue,!0);break;default:typeof T.onClick=="function"&&(a.onclick=au)}switch(m){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return ir(u),null;case 6:if(a&&u.stateNode!=null)cS(a,u,a.memoizedProps,_);else{if(typeof _!="string"&&u.stateNode===null)throw Error(t(166));if(m=qn(Ys.current),qn(xr.current),ul(u)){if(_=u.stateNode,m=u.memoizedProps,_[ii]=u,(P=_.nodeValue!==m)&&(a=Si,a!==null))switch(a.tag){case 3:ou(_.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&ou(_.nodeValue,m,(a.mode&1)!==0)}P&&(u.flags|=4)}else _=(m.nodeType===9?m:m.ownerDocument).createTextNode(_),_[ii]=u,u.stateNode=_}return ir(u),null;case 13:if(bn(Bn),_=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Pn&&Wi!==null&&(u.mode&1)!==0&&(u.flags&128)===0)fh(),Co(),u.flags|=98560,P=!1;else if(P=ul(u),_!==null&&_.dehydrated!==null){if(a===null){if(!P)throw Error(t(318));if(P=u.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[ii]=u}else Co(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ir(u),P=!1}else Nr!==null&&(r0(Nr),Nr=null),P=!0;if(!P)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=m,u):(_=_!==null,_!==(a!==null&&a.memoizedState!==null)&&_&&(u.child.flags|=8192,(u.mode&1)!==0&&(a===null||(Bn.current&1)!==0?Ti===0&&(Ti=3):a0())),u.updateQueue!==null&&(u.flags|=4),ir(u),null);case 4:return Ro(),Jv(a,u),a===null&&sl(u.stateNode.containerInfo),ir(u),null;case 10:return mu(u.type._context),ir(u),null;case 17:return Bi(u.type)&&lu(),ir(u),null;case 19:if(bn(Bn),P=u.memoizedState,P===null)return ir(u),null;if(_=(u.flags&128)!==0,O=P.rendering,O===null)if(_)Eh(P,!1);else{if(Ti!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(O=es(a),O!==null){for(u.flags|=128,Eh(P,!1),_=O.updateQueue,_!==null&&(u.updateQueue=_,u.flags|=4),u.subtreeFlags=0,_=m,m=u.child;m!==null;)P=m,a=_,P.flags&=14680066,O=P.alternate,O===null?(P.childLanes=0,P.lanes=a,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=O.childLanes,P.lanes=O.lanes,P.child=O.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=O.memoizedProps,P.memoizedState=O.memoizedState,P.updateQueue=O.updateQueue,P.type=O.type,a=O.dependencies,P.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return En(Bn,Bn.current&1|2),u.child}a=a.sibling}P.tail!==null&&he()>If&&(u.flags|=128,_=!0,Eh(P,!1),u.lanes=4194304)}else{if(!_)if(a=es(O),a!==null){if(u.flags|=128,_=!0,m=a.updateQueue,m!==null&&(u.updateQueue=m,u.flags|=4),Eh(P,!0),P.tail===null&&P.tailMode==="hidden"&&!O.alternate&&!Pn)return ir(u),null}else 2*he()-P.renderingStartTime>If&&m!==1073741824&&(u.flags|=128,_=!0,Eh(P,!1),u.lanes=4194304);P.isBackwards?(O.sibling=u.child,u.child=O):(m=P.last,m!==null?m.sibling=O:u.child=O,P.last=O)}return P.tail!==null?(u=P.tail,P.rendering=u,P.tail=u.sibling,P.renderingStartTime=he(),u.sibling=null,m=Bn.current,En(Bn,_?m&1|2:m&1),u):(ir(u),null);case 22:case 23:return o0(),_=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==_&&(u.flags|=8192),_&&(u.mode&1)!==0?(is&1073741824)!==0&&(ir(u),u.subtreeFlags&6&&(u.flags|=8192)):ir(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function XR(a,u){switch(Xs(u),u.tag){case 1:return Bi(u.type)&&lu(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Ro(),bn(Gi),bn(Ai),As(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 5:return hl(u),null;case 13:if(bn(Bn),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(t(340));Co()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return bn(Bn),null;case 4:return Ro(),null;case 10:return mu(u.type._context),null;case 22:case 23:return o0(),null;case 24:return null;default:return null}}var Pm=!1,rr=!1,JR=typeof WeakSet=="function"?WeakSet:Set,_t=null;function Pf(a,u){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(_){$n(a,u,_)}else m.current=null}function Kv(a,u,m){try{m()}catch(_){$n(a,u,_)}}var fS=!1;function KR(a,u){if(al=Rr,a=Un(),fi(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var _=m.getSelection&&m.getSelection();if(_&&_.rangeCount!==0){m=_.anchorNode;var T=_.anchorOffset,P=_.focusNode;_=_.focusOffset;try{m.nodeType,P.nodeType}catch{m=null;break e}var O=0,Q=-1,te=-1,Se=0,He=0,We=a,Oe=null;t:for(;;){for(var pt;We!==m||T!==0&&We.nodeType!==3||(Q=O+T),We!==P||_!==0&&We.nodeType!==3||(te=O+_),We.nodeType===3&&(O+=We.nodeValue.length),(pt=We.firstChild)!==null;)Oe=We,We=pt;for(;;){if(We===a)break t;if(Oe===m&&++Se===T&&(Q=O),Oe===P&&++He===_&&(te=O),(pt=We.nextSibling)!==null)break;We=Oe,Oe=We.parentNode}We=pt}m=Q===-1||te===-1?null:{start:Q,end:te}}else m=null}m=m||{start:0,end:0}}else m=null;for($d={focusedElem:a,selectionRange:m},Rr=!1,_t=u;_t!==null;)if(u=_t,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,_t=a;else for(;_t!==null;){u=_t;try{var At=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(At!==null){var Et=At.memoizedProps,ri=At.memoizedState,me=u.stateNode,ne=me.getSnapshotBeforeUpdate(u.elementType===u.type?Et:Ur(u.type,Et),ri);me.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var ve=u.stateNode.containerInfo;ve.nodeType===1?ve.textContent="":ve.nodeType===9&&ve.documentElement&&ve.removeChild(ve.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Qe){$n(u,u.return,Qe)}if(a=u.sibling,a!==null){a.return=u.return,_t=a;break}_t=u.return}return At=fS,fS=!1,At}function wh(a,u,m){var _=u.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var T=_=_.next;do{if((T.tag&a)===a){var P=T.destroy;T.destroy=void 0,P!==void 0&&Kv(u,m,P)}T=T.next}while(T!==_)}}function Bm(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&a)===a){var _=m.create;m.destroy=_()}m=m.next}while(m!==u)}}function Yv(a){var u=a.ref;if(u!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof u=="function"?u(a):u.current=a}}function dS(a){var u=a.alternate;u!==null&&(a.alternate=null,dS(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&(delete u[ii],delete u[ll],delete u[ra],delete u[hf],delete u[pf])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function hS(a){return a.tag===5||a.tag===3||a.tag===4}function pS(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||hS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Qv(a,u,m){var _=a.tag;if(_===5||_===6)a=a.stateNode,u?m.nodeType===8?m.parentNode.insertBefore(a,u):m.insertBefore(a,u):(m.nodeType===8?(u=m.parentNode,u.insertBefore(a,m)):(u=m,u.appendChild(a)),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=au));else if(_!==4&&(a=a.child,a!==null))for(Qv(a,u,m),a=a.sibling;a!==null;)Qv(a,u,m),a=a.sibling}function qv(a,u,m){var _=a.tag;if(_===5||_===6)a=a.stateNode,u?m.insertBefore(a,u):m.appendChild(a);else if(_!==4&&(a=a.child,a!==null))for(qv(a,u,m),a=a.sibling;a!==null;)qv(a,u,m),a=a.sibling}var Xi=null,eo=!1;function gl(a,u,m){for(m=m.child;m!==null;)mS(a,u,m),m=m.sibling}function mS(a,u,m){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Rt,m)}catch{}switch(m.tag){case 5:rr||Pf(m,u);case 6:var _=Xi,T=eo;Xi=null,gl(a,u,m),Xi=_,eo=T,Xi!==null&&(eo?(a=Xi,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):Xi.removeChild(m.stateNode));break;case 18:Xi!==null&&(eo?(a=Xi,m=m.stateNode,a.nodeType===8?df(a.parentNode,m):a.nodeType===1&&df(a,m),Yl(a)):df(Xi,m.stateNode));break;case 4:_=Xi,T=eo,Xi=m.stateNode.containerInfo,eo=!0,gl(a,u,m),Xi=_,eo=T;break;case 0:case 11:case 14:case 15:if(!rr&&(_=m.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){T=_=_.next;do{var P=T,O=P.destroy;P=P.tag,O!==void 0&&((P&2)!==0||(P&4)!==0)&&Kv(m,u,O),T=T.next}while(T!==_)}gl(a,u,m);break;case 1:if(!rr&&(Pf(m,u),_=m.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=m.memoizedProps,_.state=m.memoizedState,_.componentWillUnmount()}catch(Q){$n(m,u,Q)}gl(a,u,m);break;case 21:gl(a,u,m);break;case 22:m.mode&1?(rr=(_=rr)||m.memoizedState!==null,gl(a,u,m),rr=_):gl(a,u,m);break;default:gl(a,u,m)}}function gS(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new JR),u.forEach(function(_){var T=iP.bind(null,a,_);m.has(_)||(m.add(_),_.then(T,T))})}}function to(a,u){var m=u.deletions;if(m!==null)for(var _=0;_<m.length;_++){var T=m[_];try{var P=a,O=u,Q=O;e:for(;Q!==null;){switch(Q.tag){case 5:Xi=Q.stateNode,eo=!1;break e;case 3:Xi=Q.stateNode.containerInfo,eo=!0;break e;case 4:Xi=Q.stateNode.containerInfo,eo=!0;break e}Q=Q.return}if(Xi===null)throw Error(t(160));mS(P,O,T),Xi=null,eo=!1;var te=T.alternate;te!==null&&(te.return=null),T.return=null}catch(Se){$n(T,u,Se)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)yS(u,a),u=u.sibling}function yS(a,u){var m=a.alternate,_=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(to(u,a),Bo(a),_&4){try{wh(3,a,a.return),Bm(3,a)}catch(Et){$n(a,a.return,Et)}try{wh(5,a,a.return)}catch(Et){$n(a,a.return,Et)}}break;case 1:to(u,a),Bo(a),_&512&&m!==null&&Pf(m,m.return);break;case 5:if(to(u,a),Bo(a),_&512&&m!==null&&Pf(m,m.return),a.flags&32){var T=a.stateNode;try{Gt(T,"")}catch(Et){$n(a,a.return,Et)}}if(_&4&&(T=a.stateNode,T!=null)){var P=a.memoizedProps,O=m!==null?m.memoizedProps:P,Q=a.type,te=a.updateQueue;if(a.updateQueue=null,te!==null)try{Q==="input"&&P.type==="radio"&&P.name!=null&&ke(T,P),Re(Q,O);var Se=Re(Q,P);for(O=0;O<te.length;O+=2){var He=te[O],We=te[O+1];He==="style"?Lt(T,We):He==="dangerouslySetInnerHTML"?ct(T,We):He==="children"?Gt(T,We):b(T,He,We,Se)}switch(Q){case"input":et(T,P);break;case"textarea":Te(T,P);break;case"select":var Oe=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!P.multiple;var pt=P.value;pt!=null?X(T,!!P.multiple,pt,!1):Oe!==!!P.multiple&&(P.defaultValue!=null?X(T,!!P.multiple,P.defaultValue,!0):X(T,!!P.multiple,P.multiple?[]:"",!1))}T[ll]=P}catch(Et){$n(a,a.return,Et)}}break;case 6:if(to(u,a),Bo(a),_&4){if(a.stateNode===null)throw Error(t(162));T=a.stateNode,P=a.memoizedProps;try{T.nodeValue=P}catch(Et){$n(a,a.return,Et)}}break;case 3:if(to(u,a),Bo(a),_&4&&m!==null&&m.memoizedState.isDehydrated)try{Yl(u.containerInfo)}catch(Et){$n(a,a.return,Et)}break;case 4:to(u,a),Bo(a);break;case 13:to(u,a),Bo(a),T=a.child,T.flags&8192&&(P=T.memoizedState!==null,T.stateNode.isHidden=P,!P||T.alternate!==null&&T.alternate.memoizedState!==null||(e0=he())),_&4&&gS(a);break;case 22:if(He=m!==null&&m.memoizedState!==null,a.mode&1?(rr=(Se=rr)||He,to(u,a),rr=Se):to(u,a),Bo(a),_&8192){if(Se=a.memoizedState!==null,(a.stateNode.isHidden=Se)&&!He&&(a.mode&1)!==0)for(_t=a,He=a.child;He!==null;){for(We=_t=He;_t!==null;){switch(Oe=_t,pt=Oe.child,Oe.tag){case 0:case 11:case 14:case 15:wh(4,Oe,Oe.return);break;case 1:Pf(Oe,Oe.return);var At=Oe.stateNode;if(typeof At.componentWillUnmount=="function"){_=Oe,m=Oe.return;try{u=_,At.props=u.memoizedProps,At.state=u.memoizedState,At.componentWillUnmount()}catch(Et){$n(_,m,Et)}}break;case 5:Pf(Oe,Oe.return);break;case 22:if(Oe.memoizedState!==null){_S(We);continue}}pt!==null?(pt.return=Oe,_t=pt):_S(We)}He=He.sibling}e:for(He=null,We=a;;){if(We.tag===5){if(He===null){He=We;try{T=We.stateNode,Se?(P=T.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(Q=We.stateNode,te=We.memoizedProps.style,O=te!=null&&te.hasOwnProperty("display")?te.display:null,Q.style.display=Bt("display",O))}catch(Et){$n(a,a.return,Et)}}}else if(We.tag===6){if(He===null)try{We.stateNode.nodeValue=Se?"":We.memoizedProps}catch(Et){$n(a,a.return,Et)}}else if((We.tag!==22&&We.tag!==23||We.memoizedState===null||We===a)&&We.child!==null){We.child.return=We,We=We.child;continue}if(We===a)break e;for(;We.sibling===null;){if(We.return===null||We.return===a)break e;He===We&&(He=null),We=We.return}He===We&&(He=null),We.sibling.return=We.return,We=We.sibling}}break;case 19:to(u,a),Bo(a),_&4&&gS(a);break;case 21:break;default:to(u,a),Bo(a)}}function Bo(a){var u=a.flags;if(u&2){try{e:{for(var m=a.return;m!==null;){if(hS(m)){var _=m;break e}m=m.return}throw Error(t(160))}switch(_.tag){case 5:var T=_.stateNode;_.flags&32&&(Gt(T,""),_.flags&=-33);var P=pS(a);qv(a,P,T);break;case 3:case 4:var O=_.stateNode.containerInfo,Q=pS(a);Qv(a,Q,O);break;default:throw Error(t(161))}}catch(te){$n(a,a.return,te)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function YR(a,u,m){_t=a,vS(a)}function vS(a,u,m){for(var _=(a.mode&1)!==0;_t!==null;){var T=_t,P=T.child;if(T.tag===22&&_){var O=T.memoizedState!==null||Pm;if(!O){var Q=T.alternate,te=Q!==null&&Q.memoizedState!==null||rr;Q=Pm;var Se=rr;if(Pm=O,(rr=te)&&!Se)for(_t=T;_t!==null;)O=_t,te=O.child,O.tag===22&&O.memoizedState!==null?AS(T):te!==null?(te.return=O,_t=te):AS(T);for(;P!==null;)_t=P,vS(P),P=P.sibling;_t=T,Pm=Q,rr=Se}xS(a)}else(T.subtreeFlags&8772)!==0&&P!==null?(P.return=T,_t=P):xS(a)}}function xS(a){for(;_t!==null;){var u=_t;if((u.flags&8772)!==0){var m=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:rr||Bm(5,u);break;case 1:var _=u.stateNode;if(u.flags&4&&!rr)if(m===null)_.componentDidMount();else{var T=u.elementType===u.type?m.memoizedProps:Ur(u.type,m.memoizedProps);_.componentDidUpdate(T,m.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var P=u.updateQueue;P!==null&&dl(u,P,_);break;case 3:var O=u.updateQueue;if(O!==null){if(m=null,u.child!==null)switch(u.child.tag){case 5:m=u.child.stateNode;break;case 1:m=u.child.stateNode}dl(u,O,m)}break;case 5:var Q=u.stateNode;if(m===null&&u.flags&4){m=Q;var te=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&m.focus();break;case"img":te.src&&(m.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Se=u.alternate;if(Se!==null){var He=Se.memoizedState;if(He!==null){var We=He.dehydrated;We!==null&&Yl(We)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}rr||u.flags&512&&Yv(u)}catch(Oe){$n(u,u.return,Oe)}}if(u===a){_t=null;break}if(m=u.sibling,m!==null){m.return=u.return,_t=m;break}_t=u.return}}function _S(a){for(;_t!==null;){var u=_t;if(u===a){_t=null;break}var m=u.sibling;if(m!==null){m.return=u.return,_t=m;break}_t=u.return}}function AS(a){for(;_t!==null;){var u=_t;try{switch(u.tag){case 0:case 11:case 15:var m=u.return;try{Bm(4,u)}catch(te){$n(u,m,te)}break;case 1:var _=u.stateNode;if(typeof _.componentDidMount=="function"){var T=u.return;try{_.componentDidMount()}catch(te){$n(u,T,te)}}var P=u.return;try{Yv(u)}catch(te){$n(u,P,te)}break;case 5:var O=u.return;try{Yv(u)}catch(te){$n(u,O,te)}}}catch(te){$n(u,u.return,te)}if(u===a){_t=null;break}var Q=u.sibling;if(Q!==null){Q.return=u.return,_t=Q;break}_t=u.return}}var QR=Math.ceil,Im=B.ReactCurrentDispatcher,Zv=B.ReactCurrentOwner,Ms=B.ReactCurrentBatchConfig,vn=0,Li=null,gi=null,Ji=0,is=0,Bf=On(0),Ti=0,Th=null,Tu=0,Dm=0,$v=0,Ch=null,Or=null,e0=0,If=1/0,_a=null,Lm=!1,t0=null,yl=null,Fm=!1,vl=null,Nm=0,bh=0,n0=null,Um=-1,Om=0;function Mr(){return(vn&6)!==0?he():Um!==-1?Um:Um=he()}function xl(a){return(a.mode&1)===0?1:(vn&2)!==0&&Ji!==0?Ji&-Ji:Wv.transition!==null?(Om===0&&(Om=on()),Om):(a=an,a!==0||(a=window.event,a=a===void 0?16:im(a.type)),a)}function no(a,u,m,_){if(50<bh)throw bh=0,n0=null,Error(t(185));ci(a,m,_),((vn&2)===0||a!==Li)&&(a===Li&&((vn&2)===0&&(Dm|=m),Ti===4&&_l(a,Ji)),kr(a,_),m===1&&vn===0&&(u.mode&1)===0&&(If=he()+500,cu&&xs()))}function kr(a,u){var m=a.callbackNode;ui(a,u);var _=vi(a,a===Li?Ji:0);if(_===0)m!==null&&G(m),a.callbackNode=null,a.callbackPriority=0;else if(u=_&-_,a.callbackPriority!==u){if(m!=null&&G(m),u===1)a.tag===0?ym(MS.bind(null,a)):fu(MS.bind(null,a)),Vv(function(){(vn&6)===0&&xs()}),m=null;else{switch(qi(_)){case 1:m=Ge;break;case 4:m=it;break;case 16:m=dt;break;case 536870912:m=It;break;default:m=dt}m=BS(m,SS.bind(null,a))}a.callbackPriority=u,a.callbackNode=m}}function SS(a,u){if(Um=-1,Om=0,(vn&6)!==0)throw Error(t(327));var m=a.callbackNode;if(Df()&&a.callbackNode!==m)return null;var _=vi(a,a===Li?Ji:0);if(_===0)return null;if((_&30)!==0||(_&a.expiredLanes)!==0||u)u=km(a,_);else{u=_;var T=vn;vn|=2;var P=wS();(Li!==a||Ji!==u)&&(_a=null,If=he()+500,bu(a,u));do try{$R();break}catch(Q){ES(a,Q)}while(!0);da(),Im.current=P,vn=T,gi!==null?u=0:(Li=null,Ji=0,u=Ti)}if(u!==0){if(u===2&&(T=ps(a),T!==0&&(_=T,u=i0(a,T))),u===1)throw m=Th,bu(a,0),_l(a,_),kr(a,he()),m;if(u===6)_l(a,_);else{if(T=a.current.alternate,(_&30)===0&&!qR(T)&&(u=km(a,_),u===2&&(P=ps(a),P!==0&&(_=P,u=i0(a,P))),u===1))throw m=Th,bu(a,0),_l(a,_),kr(a,he()),m;switch(a.finishedWork=T,a.finishedLanes=_,u){case 0:case 1:throw Error(t(345));case 2:Ru(a,Or,_a);break;case 3:if(_l(a,_),(_&130023424)===_&&(u=e0+500-he(),10<u)){if(vi(a,0)!==0)break;if(T=a.suspendedLanes,(T&_)!==_){Mr(),a.pingedLanes|=a.suspendedLanes&T;break}a.timeoutHandle=th(Ru.bind(null,a,Or,_a),u);break}Ru(a,Or,_a);break;case 4:if(_l(a,_),(_&4194240)===_)break;for(u=a.eventTimes,T=-1;0<_;){var O=31-kt(_);P=1<<O,O=u[O],O>T&&(T=O),_&=~P}if(_=T,_=he()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*QR(_/1960))-_,10<_){a.timeoutHandle=th(Ru.bind(null,a,Or,_a),_);break}Ru(a,Or,_a);break;case 5:Ru(a,Or,_a);break;default:throw Error(t(329))}}}return kr(a,he()),a.callbackNode===m?SS.bind(null,a):null}function i0(a,u){var m=Ch;return a.current.memoizedState.isDehydrated&&(bu(a,u).flags|=256),a=km(a,u),a!==2&&(u=Or,Or=m,u!==null&&r0(u)),a}function r0(a){Or===null?Or=a:Or.push.apply(Or,a)}function qR(a){for(var u=a;;){if(u.flags&16384){var m=u.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var _=0;_<m.length;_++){var T=m[_],P=T.getSnapshot;T=T.value;try{if(!mr(P(),T))return!1}catch{return!1}}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function _l(a,u){for(u&=~$v,u&=~Dm,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var m=31-kt(u),_=1<<m;a[m]=-1,u&=~_}}function MS(a){if((vn&6)!==0)throw Error(t(327));Df();var u=vi(a,0);if((u&1)===0)return kr(a,he()),null;var m=km(a,u);if(a.tag!==0&&m===2){var _=ps(a);_!==0&&(u=_,m=i0(a,_))}if(m===1)throw m=Th,bu(a,0),_l(a,u),kr(a,he()),m;if(m===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,Ru(a,Or,_a),kr(a,he()),null}function s0(a,u){var m=vn;vn|=1;try{return a(u)}finally{vn=m,vn===0&&(If=he()+500,cu&&xs())}}function Cu(a){vl!==null&&vl.tag===0&&(vn&6)===0&&Df();var u=vn;vn|=1;var m=Ms.transition,_=an;try{if(Ms.transition=null,an=1,a)return a()}finally{an=_,Ms.transition=m,vn=u,(vn&6)===0&&xs()}}function o0(){is=Bf.current,bn(Bf)}function bu(a,u){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,nh(m)),gi!==null)for(m=gi.return;m!==null;){var _=m;switch(Xs(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&lu();break;case 3:Ro(),bn(Gi),bn(Ai),As();break;case 5:hl(_);break;case 4:Ro();break;case 13:bn(Bn);break;case 19:bn(Bn);break;case 10:mu(_.type._context);break;case 22:case 23:o0()}m=m.return}if(Li=a,gi=a=Al(a.current,null),Ji=is=u,Ti=0,Th=null,$v=Dm=Tu=0,Or=Ch=null,Ks!==null){for(u=0;u<Ks.length;u++)if(m=Ks[u],_=m.interleaved,_!==null){m.interleaved=null;var T=_.next,P=m.pending;if(P!==null){var O=P.next;P.next=T,_.next=O}m.pending=_}Ks=null}return a}function ES(a,u){do{var m=gi;try{if(da(),ga.current=bf,ts){for(var _=Rn.memoizedState;_!==null;){var T=_.queue;T!==null&&(T.pending=null),_=_.next}ts=!1}if(Qs=0,mn=Hn=Rn=null,Di=!1,Po=0,Zv.current=null,m===null||m.return===null){Ti=1,Th=u,gi=null;break}e:{var P=a,O=m.return,Q=m,te=u;if(u=Ji,Q.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var Se=te,He=Q,We=He.tag;if((He.mode&1)===0&&(We===0||We===11||We===15)){var Oe=He.alternate;Oe?(He.updateQueue=Oe.updateQueue,He.memoizedState=Oe.memoizedState,He.lanes=Oe.lanes):(He.updateQueue=null,He.memoizedState=null)}var pt=vt(O);if(pt!==null){pt.flags&=-257,Vt(pt,O,Q,P,u),pt.mode&1&&Ke(P,Se,u),u=pt,te=Se;var At=u.updateQueue;if(At===null){var Et=new Set;Et.add(te),u.updateQueue=Et}else At.add(te);break e}else{if((u&1)===0){Ke(P,Se,u),a0();break e}te=Error(t(426))}}else if(Pn&&Q.mode&1){var ri=vt(O);if(ri!==null){(ri.flags&65536)===0&&(ri.flags|=256),Vt(ri,O,Q,P,u),cl(E(te,Q));break e}}P=te=E(te,Q),Ti!==4&&(Ti=2),Ch===null?Ch=[P]:Ch.push(P),P=O;do{switch(P.tag){case 3:P.flags|=65536,u&=-u,P.lanes|=u;var me=se(P,te,u);ha(P,me);break e;case 1:Q=te;var ne=P.type,ve=P.stateNode;if((P.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||ve!==null&&typeof ve.componentDidCatch=="function"&&(yl===null||!yl.has(ve)))){P.flags|=65536,u&=-u,P.lanes|=u;var Qe=Ce(P,Q,u);ha(P,Qe);break e}}P=P.return}while(P!==null)}CS(m)}catch(bt){u=bt,gi===m&&m!==null&&(gi=m=m.return);continue}break}while(!0)}function wS(){var a=Im.current;return Im.current=bf,a===null?bf:a}function a0(){(Ti===0||Ti===3||Ti===2)&&(Ti=4),Li===null||(Tu&268435455)===0&&(Dm&268435455)===0||_l(Li,Ji)}function km(a,u){var m=vn;vn|=2;var _=wS();(Li!==a||Ji!==u)&&(_a=null,bu(a,u));do try{ZR();break}catch(T){ES(a,T)}while(!0);if(da(),vn=m,Im.current=_,gi!==null)throw Error(t(261));return Li=null,Ji=0,Ti}function ZR(){for(;gi!==null;)TS(gi)}function $R(){for(;gi!==null&&!le();)TS(gi)}function TS(a){var u=PS(a.alternate,a,is);a.memoizedProps=a.pendingProps,u===null?CS(a):gi=u,Zv.current=null}function CS(a){var u=a;do{var m=u.alternate;if(a=u.return,(u.flags&32768)===0){if(m=jR(m,u,is),m!==null){gi=m;return}}else{if(m=XR(m,u),m!==null){m.flags&=32767,gi=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Ti=6,gi=null;return}}if(u=u.sibling,u!==null){gi=u;return}gi=u=a}while(u!==null);Ti===0&&(Ti=5)}function Ru(a,u,m){var _=an,T=Ms.transition;try{Ms.transition=null,an=1,eP(a,u,m,_)}finally{Ms.transition=T,an=_}return null}function eP(a,u,m,_){do Df();while(vl!==null);if((vn&6)!==0)throw Error(t(327));m=a.finishedWork;var T=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var P=m.lanes|m.childLanes;if(xi(a,P),a===Li&&(gi=Li=null,Ji=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Fm||(Fm=!0,BS(dt,function(){return Df(),null})),P=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||P){P=Ms.transition,Ms.transition=null;var O=an;an=1;var Q=vn;vn|=4,Zv.current=null,KR(a,m),yS(m,a),di($d),Rr=!!al,$d=al=null,a.current=m,YR(m),Ae(),vn=Q,an=O,Ms.transition=P}else a.current=m;if(Fm&&(Fm=!1,vl=a,Nm=T),P=a.pendingLanes,P===0&&(yl=null),Mt(m.stateNode),kr(a,he()),u!==null)for(_=a.onRecoverableError,m=0;m<u.length;m++)T=u[m],_(T.value,{componentStack:T.stack,digest:T.digest});if(Lm)throw Lm=!1,a=t0,t0=null,a;return(Nm&1)!==0&&a.tag!==0&&Df(),P=a.pendingLanes,(P&1)!==0?a===n0?bh++:(bh=0,n0=a):bh=0,xs(),null}function Df(){if(vl!==null){var a=qi(Nm),u=Ms.transition,m=an;try{if(Ms.transition=null,an=16>a?16:a,vl===null)var _=!1;else{if(a=vl,vl=null,Nm=0,(vn&6)!==0)throw Error(t(331));var T=vn;for(vn|=4,_t=a.current;_t!==null;){var P=_t,O=P.child;if((_t.flags&16)!==0){var Q=P.deletions;if(Q!==null){for(var te=0;te<Q.length;te++){var Se=Q[te];for(_t=Se;_t!==null;){var He=_t;switch(He.tag){case 0:case 11:case 15:wh(8,He,P)}var We=He.child;if(We!==null)We.return=He,_t=We;else for(;_t!==null;){He=_t;var Oe=He.sibling,pt=He.return;if(dS(He),He===Se){_t=null;break}if(Oe!==null){Oe.return=pt,_t=Oe;break}_t=pt}}}var At=P.alternate;if(At!==null){var Et=At.child;if(Et!==null){At.child=null;do{var ri=Et.sibling;Et.sibling=null,Et=ri}while(Et!==null)}}_t=P}}if((P.subtreeFlags&2064)!==0&&O!==null)O.return=P,_t=O;else e:for(;_t!==null;){if(P=_t,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:wh(9,P,P.return)}var me=P.sibling;if(me!==null){me.return=P.return,_t=me;break e}_t=P.return}}var ne=a.current;for(_t=ne;_t!==null;){O=_t;var ve=O.child;if((O.subtreeFlags&2064)!==0&&ve!==null)ve.return=O,_t=ve;else e:for(O=ne;_t!==null;){if(Q=_t,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:Bm(9,Q)}}catch(bt){$n(Q,Q.return,bt)}if(Q===O){_t=null;break e}var Qe=Q.sibling;if(Qe!==null){Qe.return=Q.return,_t=Qe;break e}_t=Q.return}}if(vn=T,xs(),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Rt,a)}catch{}_=!0}return _}finally{an=m,Ms.transition=u}}return!1}function bS(a,u,m){u=E(m,u),u=se(a,u,1),a=Dn(a,u,1),u=Mr(),a!==null&&(ci(a,1,u),kr(a,u))}function $n(a,u,m){if(a.tag===3)bS(a,a,m);else for(;u!==null;){if(u.tag===3){bS(u,a,m);break}else if(u.tag===1){var _=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(yl===null||!yl.has(_))){a=E(m,a),a=Ce(u,a,1),u=Dn(u,a,1),a=Mr(),u!==null&&(ci(u,1,a),kr(u,a));break}}u=u.return}}function tP(a,u,m){var _=a.pingCache;_!==null&&_.delete(u),u=Mr(),a.pingedLanes|=a.suspendedLanes&m,Li===a&&(Ji&m)===m&&(Ti===4||Ti===3&&(Ji&130023424)===Ji&&500>he()-e0?bu(a,0):$v|=m),kr(a,u)}function RS(a,u){u===0&&((a.mode&1)===0?u=1:(u=cn,cn<<=1,(cn&130023424)===0&&(cn=4194304)));var m=Mr();a=$r(a,u),a!==null&&(ci(a,u,m),kr(a,m))}function nP(a){var u=a.memoizedState,m=0;u!==null&&(m=u.retryLane),RS(a,m)}function iP(a,u){var m=0;switch(a.tag){case 13:var _=a.stateNode,T=a.memoizedState;T!==null&&(m=T.retryLane);break;case 19:_=a.stateNode;break;default:throw Error(t(314))}_!==null&&_.delete(u),RS(a,m)}var PS;PS=function(a,u,m){if(a!==null)if(a.memoizedProps!==u.pendingProps||Gi.current)Zt=!0;else{if((a.lanes&m)===0&&(u.flags&128)===0)return Zt=!1,WR(a,u,m);Zt=(a.flags&131072)!==0}else Zt=!1,Pn&&(u.flags&1048576)!==0&&ah(u,vf,u.index);switch(u.lanes=0,u.tag){case 2:var _=u.type;Rm(a,u),a=u.pendingProps;var T=sa(u,Ai.current);bo(u,m),T=_u(null,u,_,a,T,m);var P=mh();return u.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Bi(_)?(P=!0,oa(u)):P=!1,u.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Jt(u),T.updater=Rf,u.stateNode=T,T._reactInternals=u,x(u,_,a,m),u=jt(null,u,_,!0,P,m)):(u.tag=0,Pn&&P&&lh(u),ft(null,u,T,m),u=u.child),u;case 16:_=u.elementType;e:{switch(Rm(a,u),a=u.pendingProps,T=_._init,_=T(_._payload),u.type=_,T=u.tag=sP(_),a=Ur(_,a),T){case 0:u=ot(null,u,_,a,m);break e;case 1:u=Tt(null,u,_,a,m);break e;case 11:u=wi(null,u,_,a,m);break e;case 14:u=Sr(null,u,_,Ur(_.type,a),m);break e}throw Error(t(306,_,""))}return u;case 0:return _=u.type,T=u.pendingProps,T=u.elementType===_?T:Ur(_,T),ot(a,u,_,T,m);case 1:return _=u.type,T=u.pendingProps,T=u.elementType===_?T:Ur(_,T),Tt(a,u,_,T,m);case 3:e:{if(Wt(u),a===null)throw Error(t(387));_=u.pendingProps,P=u.memoizedState,T=P.element,Xn(a,u),kn(u,_,null,m);var O=u.memoizedState;if(_=O.element,P.isDehydrated)if(P={element:_,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},u.updateQueue.baseState=P,u.memoizedState=P,u.flags&256){T=E(Error(t(423)),u),u=hn(a,u,_,m,T);break e}else if(_!==T){T=E(Error(t(424)),u),u=hn(a,u,_,m,T);break e}else for(Wi=zs(u.stateNode.containerInfo.firstChild),Si=u,Pn=!0,Nr=null,m=pu(u,null,_,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Co(),_===T){u=xa(a,u,m);break e}ft(a,u,_,m)}u=u.child}return u;case 5:return ma(u),a===null&&_f(u),_=u.type,T=u.pendingProps,P=a!==null?a.memoizedProps:null,O=T.children,eh(_,T)?O=null:P!==null&&eh(_,P)&&(u.flags|=32),Ee(a,u),ft(a,u,O,m),u.child;case 6:return a===null&&_f(u),null;case 13:return $s(a,u,m);case 4:return vu(u,u.stateNode.containerInfo),_=u.pendingProps,a===null?u.child=ua(u,null,_,m):ft(a,u,_,m),u.child;case 11:return _=u.type,T=u.pendingProps,T=u.elementType===_?T:Ur(_,T),wi(a,u,_,T,m);case 7:return ft(a,u,u.pendingProps,m),u.child;case 8:return ft(a,u,u.pendingProps.children,m),u.child;case 12:return ft(a,u,u.pendingProps.children,m),u.child;case 10:e:{if(_=u.type._context,T=u.pendingProps,P=u.memoizedProps,O=T.value,En(ca,_._currentValue),_._currentValue=O,P!==null)if(mr(P.value,O)){if(P.children===T.children&&!Gi.current){u=xa(a,u,m);break e}}else for(P=u.child,P!==null&&(P.return=u);P!==null;){var Q=P.dependencies;if(Q!==null){O=P.child;for(var te=Q.firstContext;te!==null;){if(te.context===_){if(P.tag===1){te=Mn(-1,m&-m),te.tag=2;var Se=P.updateQueue;if(Se!==null){Se=Se.shared;var He=Se.pending;He===null?te.next=te:(te.next=He.next,He.next=te),Se.pending=te}}P.lanes|=m,te=P.alternate,te!==null&&(te.lanes|=m),gu(P.return,m,u),Q.lanes|=m;break}te=te.next}}else if(P.tag===10)O=P.type===u.type?null:P.child;else if(P.tag===18){if(O=P.return,O===null)throw Error(t(341));O.lanes|=m,Q=O.alternate,Q!==null&&(Q.lanes|=m),gu(O,m,u),O=P.sibling}else O=P.child;if(O!==null)O.return=P;else for(O=P;O!==null;){if(O===u){O=null;break}if(P=O.sibling,P!==null){P.return=O.return,O=P;break}O=O.return}P=O}ft(a,u,T.children,m),u=u.child}return u;case 9:return T=u.type,_=u.pendingProps.children,bo(u,m),T=vr(T),_=_(T),u.flags|=1,ft(a,u,_,m),u.child;case 14:return _=u.type,T=Ur(_,u.pendingProps),T=Ur(_.type,T),Sr(a,u,_,T,m);case 15:return _e(a,u,u.type,u.pendingProps,m);case 17:return _=u.type,T=u.pendingProps,T=u.elementType===_?T:Ur(_,T),Rm(a,u),u.tag=1,Bi(_)?(a=!0,oa(u)):a=!1,bo(u,m),f(u,_,T),x(u,_,T,m),jt(null,u,_,!0,a,m);case 19:return aS(a,u,m);case 22:return ue(a,u,m)}throw Error(t(156,u.tag))};function BS(a,u){return Fc(a,u)}function rP(a,u,m,_){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Es(a,u,m,_){return new rP(a,u,m,_)}function l0(a){return a=a.prototype,!(!a||!a.isReactComponent)}function sP(a){if(typeof a=="function")return l0(a)?1:0;if(a!=null){if(a=a.$$typeof,a===oe)return 11;if(a===xe)return 14}return 2}function Al(a,u){var m=a.alternate;return m===null?(m=Es(a.tag,u,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=u,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&14680064,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,u=a.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function Hm(a,u,m,_,T,P){var O=2;if(_=a,typeof a=="function")l0(a)&&(O=1);else if(typeof a=="string")O=5;else e:switch(a){case k:return Pu(m.children,T,P,u);case z:O=8,T|=8;break;case L:return a=Es(12,m,u,T|2),a.elementType=L,a.lanes=P,a;case ie:return a=Es(13,m,u,T),a.elementType=ie,a.lanes=P,a;case ye:return a=Es(19,m,u,T),a.elementType=ye,a.lanes=P,a;case de:return zm(m,T,P,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case D:O=10;break e;case V:O=9;break e;case oe:O=11;break e;case xe:O=14;break e;case ge:O=16,_=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return u=Es(O,m,u,T),u.elementType=a,u.type=_,u.lanes=P,u}function Pu(a,u,m,_){return a=Es(7,a,_,u),a.lanes=m,a}function zm(a,u,m,_){return a=Es(22,a,_,u),a.elementType=de,a.lanes=m,a.stateNode={isHidden:!1},a}function u0(a,u,m){return a=Es(6,a,null,u),a.lanes=m,a}function c0(a,u,m){return u=Es(4,a.children!==null?a.children:[],a.key,u),u.lanes=m,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function oP(a,u,m,_,T){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pi(0),this.expirationTimes=Pi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.identifierPrefix=_,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function f0(a,u,m,_,T,P,O,Q,te){return a=new oP(a,u,m,Q,te),u===1?(u=1,P===!0&&(u|=8)):u=0,P=Es(3,null,null,u),a.current=P,P.stateNode=a,P.memoizedState={element:_,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jt(P),a}function aP(a,u,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:_==null?null:""+_,children:a,containerInfo:u,implementation:m}}function IS(a){if(!a)return Vs;a=a._reactInternals;e:{if(hs(a)!==a||a.tag!==1)throw Error(t(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Bi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(a.tag===1){var m=a.type;if(Bi(m))return uu(a,m,u)}return u}function DS(a,u,m,_,T,P,O,Q,te){return a=f0(m,_,!0,a,T,P,O,Q,te),a.context=IS(null),m=a.current,_=Mr(),T=xl(m),P=Mn(_,T),P.callback=u??null,Dn(m,P,T),a.current.lanes=T,ci(a,T,_),kr(a,_),a}function Gm(a,u,m,_){var T=u.current,P=Mr(),O=xl(T);return m=IS(m),u.context===null?u.context=m:u.pendingContext=m,u=Mn(P,O),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Dn(T,u,O),a!==null&&(no(a,T,O,P),Ii(a,T,O)),O}function Vm(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function LS(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<u?m:u}}function d0(a,u){LS(a,u),(a=a.alternate)&&LS(a,u)}function lP(){return null}var FS=typeof reportError=="function"?reportError:function(a){console.error(a)};function h0(a){this._internalRoot=a}Wm.prototype.render=h0.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(t(409));Gm(a,u,null,null)},Wm.prototype.unmount=h0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;Cu(function(){Gm(null,a,null,null)}),u[yr]=null}};function Wm(a){this._internalRoot=a}Wm.prototype.unstable_scheduleHydration=function(a){if(a){var u=Nc();a={blockedOn:null,target:a,priority:u};for(var m=0;m<xo.length&&u!==0&&u<xo[m].priority;m++);xo.splice(m,0,a),m===0&&kc(a)}};function p0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function jm(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function NS(){}function uP(a,u,m,_,T){if(T){if(typeof _=="function"){var P=_;_=function(){var Se=Vm(O);P.call(Se)}}var O=DS(u,_,a,0,null,!1,!1,"",NS);return a._reactRootContainer=O,a[yr]=O.current,sl(a.nodeType===8?a.parentNode:a),Cu(),O}for(;T=a.lastChild;)a.removeChild(T);if(typeof _=="function"){var Q=_;_=function(){var Se=Vm(te);Q.call(Se)}}var te=f0(a,0,!1,null,null,!1,!1,"",NS);return a._reactRootContainer=te,a[yr]=te.current,sl(a.nodeType===8?a.parentNode:a),Cu(function(){Gm(u,te,m,_)}),te}function Xm(a,u,m,_,T){var P=m._reactRootContainer;if(P){var O=P;if(typeof T=="function"){var Q=T;T=function(){var te=Vm(O);Q.call(te)}}Gm(u,O,a,T)}else O=uP(m,u,a,T,_);return Vm(O)}Xl=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var m=en(u.pendingLanes);m!==0&&(Wn(u,m|1),kr(u,he()),(vn&6)===0&&(If=he()+500,xs()))}break;case 13:Cu(function(){var _=$r(a,1);if(_!==null){var T=Mr();no(_,a,1,T)}}),d0(a,1)}},Nd=function(a){if(a.tag===13){var u=$r(a,134217728);if(u!==null){var m=Mr();no(u,a,134217728,m)}d0(a,134217728)}},nm=function(a){if(a.tag===13){var u=xl(a),m=$r(a,u);if(m!==null){var _=Mr();no(m,a,u,_)}d0(a,u)}},Nc=function(){return an},Uc=function(a,u){var m=an;try{return an=a,u()}finally{an=m}},Ve=function(a,u,m){switch(u){case"input":if(et(a,m),u=m.name,m.type==="radio"&&u!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<m.length;u++){var _=m[u];if(_!==a&&_.form===a.form){var T=mf(_);if(!T)throw Error(t(90));Fe(_),et(_,T)}}}break;case"textarea":Te(a,m);break;case"select":u=m.value,u!=null&&X(a,!!m.multiple,u,!1)}},un=s0,Tn=Cu;var cP={usingClientEntryPoint:!1,Events:[Gs,jn,mf,nt,Pt,s0]},Rh={findFiberByHostInstance:To,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fP={bundleType:Rh.bundleType,version:Rh.version,rendererPackageName:Rh.rendererPackageName,rendererConfig:Rh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Dc(a),a===null?null:a.stateNode},findFiberByHostInstance:Rh.findFiberByHostInstance||lP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jm.isDisabled&&Jm.supportsFiber)try{Rt=Jm.inject(fP),Ye=Jm}catch{}}return Hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cP,Hr.createPortal=function(a,u){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p0(u))throw Error(t(200));return aP(a,u,null,m)},Hr.createRoot=function(a,u){if(!p0(a))throw Error(t(299));var m=!1,_="",T=FS;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),u=f0(a,1,!1,null,null,m,!1,_,T),a[yr]=u.current,sl(a.nodeType===8?a.parentNode:a),new h0(u)},Hr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Dc(u),a=a===null?null:a.stateNode,a},Hr.flushSync=function(a){return Cu(a)},Hr.hydrate=function(a,u,m){if(!jm(u))throw Error(t(200));return Xm(null,a,u,!0,m)},Hr.hydrateRoot=function(a,u,m){if(!p0(a))throw Error(t(405));var _=m!=null&&m.hydratedSources||null,T=!1,P="",O=FS;if(m!=null&&(m.unstable_strictMode===!0&&(T=!0),m.identifierPrefix!==void 0&&(P=m.identifierPrefix),m.onRecoverableError!==void 0&&(O=m.onRecoverableError)),u=DS(u,null,a,1,m??null,T,!1,P,O),a[yr]=u.current,sl(a),_)for(a=0;a<_.length;a++)m=_[a],T=m._getVersion,T=T(m._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[m,T]:u.mutableSourceEagerHydrationData.push(m,T);return new Wm(u)},Hr.render=function(a,u,m){if(!jm(u))throw Error(t(200));return Xm(null,a,u,!1,m)},Hr.unmountComponentAtNode=function(a){if(!jm(a))throw Error(t(40));return a._reactRootContainer?(Cu(function(){Xm(null,null,a,!1,function(){a._reactRootContainer=null,a[yr]=null})}),!0):!1},Hr.unstable_batchedUpdates=s0,Hr.unstable_renderSubtreeIntoContainer=function(a,u,m,_){if(!jm(m))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Xm(a,u,m,!1,_)},Hr.version="18.3.1-next-f1338f8080-20240426",Hr}var WS;function _P(){if(WS)return y0.exports;WS=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),y0.exports=xP(),y0.exports}var jS;function AP(){if(jS)return Km;jS=1;var i=_P();return Km.createRoot=i.createRoot,Km.hydrateRoot=i.hydrateRoot,Km}var S1=AP(),Bh={},XS;function SP(){if(XS)return Bh;XS=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.parse=o,Bh.serialize=h;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,s=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function o(y,v){const S=new s,w=y.length;if(w<2)return S;const M=(v==null?void 0:v.decode)||p;let A=0;do{const C=y.indexOf("=",A);if(C===-1)break;const b=y.indexOf(";",A),B=b===-1?w:b;if(C>B){A=y.lastIndexOf(";",C-1)+1;continue}const N=l(y,A,C),F=c(y,C,N),k=y.slice(N,F);if(S[k]===void 0){let z=l(y,C+1,B),L=c(y,B,z);const D=M(y.slice(z,L));S[k]=D}A=B+1}while(A<w);return S}function l(y,v,S){do{const w=y.charCodeAt(v);if(w!==32&&w!==9)return v}while(++v<S);return S}function c(y,v,S){for(;v>S;){const w=y.charCodeAt(--v);if(w!==32&&w!==9)return v+1}return S}function h(y,v,S){const w=(S==null?void 0:S.encode)||encodeURIComponent;if(!i.test(y))throw new TypeError(`argument name is invalid: ${y}`);const M=w(v);if(!e.test(M))throw new TypeError(`argument val is invalid: ${v}`);let A=y+"="+M;if(!S)return A;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);A+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);A+="; Domain="+S.domain}if(S.path){if(!n.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);A+="; Path="+S.path}if(S.expires){if(!g(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);A+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(A+="; HttpOnly"),S.secure&&(A+="; Secure"),S.partitioned&&(A+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":A+="; Priority=Low";break;case"medium":A+="; Priority=Medium";break;case"high":A+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":A+="; SameSite=Strict";break;case"lax":A+="; SameSite=Lax";break;case"none":A+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return A}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function g(y){return r.call(y)==="[object Date]"}return Bh}SP();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var JS="popstate";function MP(i={}){function e(n,r){let{pathname:s,search:o,hash:l}=n.location;return kx("",{pathname:s,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:dp(r)}return wP(e,t,null,i)}function Yn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Uo(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EP(){return Math.random().toString(36).substring(2,10)}function KS(i,e){return{usr:i.state,key:i.key,idx:e}}function kx(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Td(e):e,state:t,key:e&&e.key||n||EP()}}function dp({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Td(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function wP(i,e,t,n={}){let{window:r=document.defaultView,v5Compat:s=!1}=n,o=r.history,l="POP",c=null,h=p();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function p(){return(o.state||{idx:null}).idx}function g(){l="POP";let M=p(),A=M==null?null:M-h;h=M,c&&c({action:l,location:w.location,delta:A})}function y(M,A){l="PUSH";let C=kx(w.location,M,A);h=p()+1;let b=KS(C,h),B=w.createHref(C);try{o.pushState(b,"",B)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(B)}s&&c&&c({action:l,location:w.location,delta:1})}function v(M,A){l="REPLACE";let C=kx(w.location,M,A);h=p();let b=KS(C,h),B=w.createHref(C);o.replaceState(b,"",B),s&&c&&c({action:l,location:w.location,delta:0})}function S(M){let A=r.location.origin!=="null"?r.location.origin:r.location.href,C=typeof M=="string"?M:dp(M);return C=C.replace(/ $/,"%20"),Yn(A,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,A)}let w={get action(){return l},get location(){return i(r,o)},listen(M){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(JS,g),c=M,()=>{r.removeEventListener(JS,g),c=null}},createHref(M){return e(r,M)},createURL:S,encodeLocation(M){let A=S(M);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:v,go(M){return o.go(M)}};return w}function M1(i,e,t="/"){return TP(i,e,t,!1)}function TP(i,e,t,n){let r=typeof e=="string"?Td(e):e,s=Nl(r.pathname||"/",t);if(s==null)return null;let o=E1(i);CP(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let h=OP(s);l=NP(o[c],h,n)}return l}function E1(i,e=[],t=[],n=""){let r=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Yn(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let h=La([n,c.relativePath]),p=t.concat(c);s.children&&s.children.length>0&&(Yn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),E1(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:LP(h,s.index),routesMeta:p})};return i.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,o);else for(let c of w1(s.path))r(s,o,c)}),e}function w1(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return r?[s,""]:[s];let o=w1(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),r&&l.push(...o),l.map(c=>i.startsWith("/")&&c===""?"/":c)}function CP(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:FP(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var bP=/^:[\w-]+$/,RP=3,PP=2,BP=1,IP=10,DP=-2,YS=i=>i==="*";function LP(i,e){let t=i.split("/"),n=t.length;return t.some(YS)&&(n+=DP),e&&(n+=PP),t.filter(r=>!YS(r)).reduce((r,s)=>r+(bP.test(s)?RP:s===""?BP:IP),n)}function FP(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function NP(i,e,t=!1){let{routesMeta:n}=i,r={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],h=l===n.length-1,p=s==="/"?e:e.slice(s.length)||"/",g=ry({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),y=c.route;if(!g&&h&&t&&!n[n.length-1].route.index&&(g=ry({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!g)return null;Object.assign(r,g.params),o.push({params:r,pathname:La([s,g.pathname]),pathnameBase:GP(La([s,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(s=La([s,g.pathnameBase]))}return o}function ry(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=UP(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:g},y)=>{if(p==="*"){let S=l[y]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const v=l[y];return g&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:i}}function UP(i,e=!1,t=!0){Uo(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function OP(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uo(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Nl(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function kP(i,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?Td(i):i;return{pathname:t?t.startsWith("/")?t:HP(t,e):e,search:VP(n),hash:WP(r)}}function HP(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function _0(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zP(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function T1(i){let e=zP(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function C1(i,e,t,n=!1){let r;typeof i=="string"?r=Td(i):(r={...i},Yn(!r.pathname||!r.pathname.includes("?"),_0("?","pathname","search",r)),Yn(!r.pathname||!r.pathname.includes("#"),_0("#","pathname","hash",r)),Yn(!r.search||!r.search.includes("#"),_0("#","search","hash",r)));let s=i===""||r.pathname==="",o=s?"/":r.pathname,l;if(o==null)l=t;else{let g=e.length-1;if(!n&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),g-=1;r.pathname=y.join("/")}l=g>=0?e[g]:"/"}let c=kP(r,l),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}var La=i=>i.join("/").replace(/\/\/+/g,"/"),GP=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),VP=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,WP=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function jP(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var b1=["POST","PUT","PATCH","DELETE"];new Set(b1);var XP=["GET",...b1];new Set(XP);var Cd=q.createContext(null);Cd.displayName="DataRouter";var ev=q.createContext(null);ev.displayName="DataRouterState";var R1=q.createContext({isTransitioning:!1});R1.displayName="ViewTransition";var JP=q.createContext(new Map);JP.displayName="Fetchers";var KP=q.createContext(null);KP.displayName="Await";var Ho=q.createContext(null);Ho.displayName="Navigation";var Ip=q.createContext(null);Ip.displayName="Location";var Wa=q.createContext({outlet:null,matches:[],isDataRoute:!1});Wa.displayName="Route";var E_=q.createContext(null);E_.displayName="RouteError";function YP(i,{relative:e}={}){Yn(Dp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=q.useContext(Ho),{hash:r,pathname:s,search:o}=Lp(i,{relative:e}),l=s;return t!=="/"&&(l=s==="/"?t:La([t,s])),n.createHref({pathname:l,search:o,hash:r})}function Dp(){return q.useContext(Ip)!=null}function Sc(){return Yn(Dp(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(Ip).location}var P1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function B1(i){q.useContext(Ho).static||q.useLayoutEffect(i)}function I1(){let{isDataRoute:i}=q.useContext(Wa);return i?lB():QP()}function QP(){Yn(Dp(),"useNavigate() may be used only in the context of a <Router> component.");let i=q.useContext(Cd),{basename:e,navigator:t}=q.useContext(Ho),{matches:n}=q.useContext(Wa),{pathname:r}=Sc(),s=JSON.stringify(T1(n)),o=q.useRef(!1);return B1(()=>{o.current=!0}),q.useCallback((c,h={})=>{if(Uo(o.current,P1),!o.current)return;if(typeof c=="number"){t.go(c);return}let p=C1(c,JSON.parse(s),r,h.relative==="path");i==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:La([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,s,r,i])}q.createContext(null);function Lp(i,{relative:e}={}){let{matches:t}=q.useContext(Wa),{pathname:n}=Sc(),r=JSON.stringify(T1(t));return q.useMemo(()=>C1(i,JSON.parse(r),n,e==="path"),[i,r,n,e])}function qP(i,e){return D1(i,e)}function D1(i,e,t,n){var C;Yn(Dp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r,static:s}=q.useContext(Ho),{matches:o}=q.useContext(Wa),l=o[o.length-1],c=l?l.params:{},h=l?l.pathname:"/",p=l?l.pathnameBase:"/",g=l&&l.route;{let b=g&&g.path||"";L1(h,!g||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let y=Sc(),v;if(e){let b=typeof e=="string"?Td(e):e;Yn(p==="/"||((C=b.pathname)==null?void 0:C.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${b.pathname}" was given in the \`location\` prop.`),v=b}else v=y;let S=v.pathname||"/",w=S;if(p!=="/"){let b=p.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(b.length).join("/")}let M=!s&&t&&t.matches&&t.matches.length>0?t.matches:M1(i,{pathname:w});Uo(g||M!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Uo(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=nB(M&&M.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:La([p,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?p:La([p,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,t,n);return e&&A?q.createElement(Ip.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},A):A}function ZP(){let i=aB(),e=jP(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",i),o=q.createElement(q.Fragment,null,q.createElement("p",null,"💿 Hey developer 👋"),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:s},"ErrorBoundary")," or"," ",q.createElement("code",{style:s},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:r},t):null,o)}var $P=q.createElement(ZP,null),eB=class extends q.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?q.createElement(Wa.Provider,{value:this.props.routeContext},q.createElement(E_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tB({routeContext:i,match:e,children:t}){let n=q.useContext(Cd);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Wa.Provider,{value:i},t)}function nB(i,e=[],t=null,n=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let r=i,s=t==null?void 0:t.errors;if(s!=null){let c=r.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);Yn(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let o=!1,l=-1;if(t)for(let c=0;c<r.length;c++){let h=r[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=c),h.route.id){let{loaderData:p,errors:g}=t,y=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!g||g[h.route.id]===void 0);if(h.route.lazy||y){o=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,h,p)=>{let g,y=!1,v=null,S=null;t&&(g=s&&h.route.id?s[h.route.id]:void 0,v=h.route.errorElement||$P,o&&(l<0&&p===0?(L1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,S=null):l===p&&(y=!0,S=h.route.hydrateFallbackElement||null)));let w=e.concat(r.slice(0,p+1)),M=()=>{let A;return g?A=v:y?A=S:h.route.Component?A=q.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=c,q.createElement(tB,{match:h,routeContext:{outlet:c,matches:w,isDataRoute:t!=null},children:A})};return t&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?q.createElement(eB,{location:t.location,revalidation:t.revalidation,component:v,error:g,children:M(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):M()},null)}function w_(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iB(i){let e=q.useContext(Cd);return Yn(e,w_(i)),e}function rB(i){let e=q.useContext(ev);return Yn(e,w_(i)),e}function sB(i){let e=q.useContext(Wa);return Yn(e,w_(i)),e}function T_(i){let e=sB(i),t=e.matches[e.matches.length-1];return Yn(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function oB(){return T_("useRouteId")}function aB(){var n;let i=q.useContext(E_),e=rB("useRouteError"),t=T_("useRouteError");return i!==void 0?i:(n=e.errors)==null?void 0:n[t]}function lB(){let{router:i}=iB("useNavigate"),e=T_("useNavigate"),t=q.useRef(!1);return B1(()=>{t.current=!0}),q.useCallback(async(r,s={})=>{Uo(t.current,P1),t.current&&(typeof r=="number"?i.navigate(r):await i.navigate(r,{fromRouteId:e,...s}))},[i,e])}var QS={};function L1(i,e,t){!e&&!QS[i]&&(QS[i]=!0,Uo(!1,t))}q.memo(uB);function uB({routes:i,future:e,state:t}){return D1(i,void 0,t,e)}function Xu(i){Yn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cB({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:s=!1}){Yn(!Dp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=i.replace(/^\/*/,"/"),l=q.useMemo(()=>({basename:o,navigator:r,static:s,future:{}}),[o,r,s]);typeof t=="string"&&(t=Td(t));let{pathname:c="/",search:h="",hash:p="",state:g=null,key:y="default"}=t,v=q.useMemo(()=>{let S=Nl(c,o);return S==null?null:{location:{pathname:S,search:h,hash:p,state:g,key:y},navigationType:n}},[o,c,h,p,g,y,n]);return Uo(v!=null,`<Router basename="${o}"> is not able to match the URL "${c}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:q.createElement(Ho.Provider,{value:l},q.createElement(Ip.Provider,{children:e,value:v}))}function fB({children:i,location:e}){return qP(Hx(i),e)}function Hx(i,e=[]){let t=[];return q.Children.forEach(i,(n,r)=>{if(!q.isValidElement(n))return;let s=[...e,r];if(n.type===q.Fragment){t.push.apply(t,Hx(n.props.children,s));return}Yn(n.type===Xu,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Yn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Hx(n.props.children,s)),t.push(o)}),t}var Yg="get",Qg="application/x-www-form-urlencoded";function tv(i){return i!=null&&typeof i.tagName=="string"}function dB(i){return tv(i)&&i.tagName.toLowerCase()==="button"}function hB(i){return tv(i)&&i.tagName.toLowerCase()==="form"}function pB(i){return tv(i)&&i.tagName.toLowerCase()==="input"}function mB(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function gB(i,e){return i.button===0&&(!e||e==="_self")&&!mB(i)}var Ym=null;function yB(){if(Ym===null)try{new FormData(document.createElement("form"),0),Ym=!1}catch{Ym=!0}return Ym}var vB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function A0(i){return i!=null&&!vB.has(i)?(Uo(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qg}"`),null):i}function xB(i,e){let t,n,r,s,o;if(hB(i)){let l=i.getAttribute("action");n=l?Nl(l,e):null,t=i.getAttribute("method")||Yg,r=A0(i.getAttribute("enctype"))||Qg,s=new FormData(i)}else if(dB(i)||pB(i)&&(i.type==="submit"||i.type==="image")){let l=i.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=i.getAttribute("formaction")||l.getAttribute("action");if(n=c?Nl(c,e):null,t=i.getAttribute("formmethod")||l.getAttribute("method")||Yg,r=A0(i.getAttribute("formenctype"))||A0(l.getAttribute("enctype"))||Qg,s=new FormData(l,i),!yB()){let{name:h,type:p,value:g}=i;if(p==="image"){let y=h?`${h}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else h&&s.append(h,g)}}else{if(tv(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Yg,n=null,r=Qg,o=i}return s&&r==="text/plain"&&(o=s,s=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:s,body:o}}function C_(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function _B(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AB(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function SB(i,e,t){let n=await Promise.all(i.map(async r=>{let s=e.routes[r.route.id];if(s){let o=await _B(s,t);return o.links?o.links():[]}return[]}));return TB(n.flat(1).filter(AB).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function qS(i,e,t,n,r,s){let o=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,l=(c,h)=>{var p;return t[h].pathname!==c.pathname||((p=t[h].route.path)==null?void 0:p.endsWith("*"))&&t[h].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,h)=>o(c,h)||l(c,h)):s==="data"?e.filter((c,h)=>{var g;let p=n.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(o(c,h)||l(c,h))return!0;if(c.route.shouldRevalidate){let y=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(i,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function MB(i,e){return EB(i.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let r=[n.module];return n.imports&&(r=r.concat(n.imports)),r}).flat(1))}function EB(i){return[...new Set(i)]}function wB(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function TB(i,e){let t=new Set;return new Set(e),i.reduce((n,r)=>{let s=JSON.stringify(wB(r));return t.has(s)||(t.add(s),n.push({key:s,link:r})),n},[])}function CB(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function bB(){let i=q.useContext(Cd);return C_(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function RB(){let i=q.useContext(ev);return C_(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var b_=q.createContext(void 0);b_.displayName="FrameworkContext";function F1(){let i=q.useContext(b_);return C_(i,"You must render this element inside a <HydratedRouter> element"),i}function PB(i,e){let t=q.useContext(b_),[n,r]=q.useState(!1),[s,o]=q.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,y=q.useRef(null);q.useEffect(()=>{if(i==="render"&&o(!0),i==="viewport"){let w=A=>{A.forEach(C=>{o(C.isIntersecting)})},M=new IntersectionObserver(w,{threshold:.5});return y.current&&M.observe(y.current),()=>{M.disconnect()}}},[i]),q.useEffect(()=>{if(n){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[n]);let v=()=>{r(!0)},S=()=>{r(!1),o(!1)};return t?i!=="intent"?[s,y,{}]:[s,y,{onFocus:Ih(l,v),onBlur:Ih(c,S),onMouseEnter:Ih(h,v),onMouseLeave:Ih(p,S),onTouchStart:Ih(g,v)}]:[!1,y,{}]}function Ih(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function BB({page:i,...e}){let{router:t}=bB(),n=q.useMemo(()=>M1(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?q.createElement(DB,{page:i,matches:n,...e}):null}function IB(i){let{manifest:e,routeModules:t}=F1(),[n,r]=q.useState([]);return q.useEffect(()=>{let s=!1;return SB(i,e,t).then(o=>{s||r(o)}),()=>{s=!0}},[i,e,t]),n}function DB({page:i,matches:e,...t}){let n=Sc(),{manifest:r,routeModules:s}=F1(),{loaderData:o,matches:l}=RB(),c=q.useMemo(()=>qS(i,e,l,r,n,"data"),[i,e,l,r,n]),h=q.useMemo(()=>qS(i,e,l,r,n,"assets"),[i,e,l,r,n]),p=q.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let v=new Set,S=!1;if(e.forEach(M=>{var C;let A=r.routes[M.route.id];!A||!A.hasLoader||(!c.some(b=>b.route.id===M.route.id)&&M.route.id in o&&((C=s[M.route.id])!=null&&C.shouldRevalidate)||A.hasClientLoader?S=!0:v.add(M.route.id))}),v.size===0)return[];let w=CB(i);return S&&v.size>0&&w.searchParams.set("_routes",e.filter(M=>v.has(M.route.id)).map(M=>M.route.id).join(",")),[w.pathname+w.search]},[o,n,r,c,e,i,s]),g=q.useMemo(()=>MB(h,r),[h,r]),y=IB(h);return q.createElement(q.Fragment,null,p.map(v=>q.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),g.map(v=>q.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),y.map(({key:v,link:S})=>q.createElement("link",{key:v,...S})))}function LB(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var N1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{N1&&(window.__reactRouterVersion="7.1.5")}catch{}function FB({basename:i,children:e,window:t}){let n=q.useRef();n.current==null&&(n.current=MP({window:t,v5Compat:!0}));let r=n.current,[s,o]=q.useState({action:r.action,location:r.location}),l=q.useCallback(c=>{q.startTransition(()=>o(c))},[o]);return q.useLayoutEffect(()=>r.listen(l),[r,l]),q.createElement(cB,{basename:i,children:e,location:s.location,navigationType:s.action,navigator:r})}var U1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rs=q.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:s,replace:o,state:l,target:c,to:h,preventScrollReset:p,viewTransition:g,...y},v){let{basename:S}=q.useContext(Ho),w=typeof h=="string"&&U1.test(h),M,A=!1;if(typeof h=="string"&&w&&(M=h,N1))try{let L=new URL(window.location.href),D=h.startsWith("//")?new URL(L.protocol+h):new URL(h),V=Nl(D.pathname,S);D.origin===L.origin&&V!=null?h=V+D.search+D.hash:A=!0}catch{Uo(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=YP(h,{relative:r}),[b,B,N]=PB(n,y),F=kB(h,{replace:o,state:l,target:c,preventScrollReset:p,relative:r,viewTransition:g});function k(L){e&&e(L),L.defaultPrevented||F(L)}let z=q.createElement("a",{...y,...N,href:M||C,onClick:A||s?e:k,ref:LB(v,B),target:c,"data-discover":!w&&t==="render"?"true":void 0});return b&&!w?q.createElement(q.Fragment,null,z,q.createElement(BB,{page:C})):z});Rs.displayName="Link";var NB=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:s,to:o,viewTransition:l,children:c,...h},p){let g=Lp(o,{relative:h.relative}),y=Sc(),v=q.useContext(ev),{navigator:S,basename:w}=q.useContext(Ho),M=v!=null&&WB(g)&&l===!0,A=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,C=y.pathname,b=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(C=C.toLowerCase(),b=b?b.toLowerCase():null,A=A.toLowerCase()),b&&w&&(b=Nl(b,w)||b);const B=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let N=C===A||!r&&C.startsWith(A)&&C.charAt(B)==="/",F=b!=null&&(b===A||!r&&b.startsWith(A)&&b.charAt(A.length)==="/"),k={isActive:N,isPending:F,isTransitioning:M},z=N?e:void 0,L;typeof n=="function"?L=n(k):L=[n,N?"active":null,F?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let D=typeof s=="function"?s(k):s;return q.createElement(Rs,{...h,"aria-current":z,className:L,ref:p,style:D,to:o,viewTransition:l},typeof c=="function"?c(k):c)});NB.displayName="NavLink";var UB=q.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:s,method:o=Yg,action:l,onSubmit:c,relative:h,preventScrollReset:p,viewTransition:g,...y},v)=>{let S=GB(),w=VB(l,{relative:h}),M=o.toLowerCase()==="get"?"get":"post",A=typeof l=="string"&&U1.test(l),C=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let B=b.nativeEvent.submitter,N=(B==null?void 0:B.getAttribute("formmethod"))||o;S(B||b.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:r,state:s,relative:h,preventScrollReset:p,viewTransition:g})};return q.createElement("form",{ref:v,method:M,action:w,onSubmit:n?c:C,...y,"data-discover":!A&&i==="render"?"true":void 0})});UB.displayName="Form";function OB(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O1(i){let e=q.useContext(Cd);return Yn(e,OB(i)),e}function kB(i,{target:e,replace:t,state:n,preventScrollReset:r,relative:s,viewTransition:o}={}){let l=I1(),c=Sc(),h=Lp(i,{relative:s});return q.useCallback(p=>{if(gB(p,e)){p.preventDefault();let g=t!==void 0?t:dp(c)===dp(h);l(i,{replace:g,state:n,preventScrollReset:r,relative:s,viewTransition:o})}},[c,l,h,t,n,e,i,r,s,o])}var HB=0,zB=()=>`__${String(++HB)}__`;function GB(){let{router:i}=O1("useSubmit"),{basename:e}=q.useContext(Ho),t=oB();return q.useCallback(async(n,r={})=>{let{action:s,method:o,encType:l,formData:c,body:h}=xB(n,e);if(r.navigate===!1){let p=r.fetcherKey||zB();await i.fetch(p,t,r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:h,formMethod:r.method||o,formEncType:r.encType||l,flushSync:r.flushSync})}else await i.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:h,formMethod:r.method||o,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,e,t])}function VB(i,{relative:e}={}){let{basename:t}=q.useContext(Ho),n=q.useContext(Wa);Yn(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),s={...Lp(i||".",{relative:e})},o=Sc();if(i==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(p=>p==="")){l.delete("index"),c.filter(g=>g).forEach(g=>l.append("index",g));let p=l.toString();s.search=p?`?${p}`:""}}return(!i||i===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:La([t,s.pathname])),dp(s)}function WB(i,e={}){let t=q.useContext(R1);Yn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=O1("useViewTransitionState"),r=Lp(i,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Nl(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=Nl(t.nextLocation.pathname,n)||t.nextLocation.pathname;return ry(r.pathname,o)!=null||ry(r.pathname,s)!=null}new TextEncoder;const k1=q.createContext({});function jB(i){const e=q.useRef(null);return e.current===null&&(e.current=i()),e.current}const R_=q.createContext(null),H1=q.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function XB(i=!0){const e=q.useContext(R_);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=q.useId();q.useEffect(()=>{i&&r(s)},[i]);const o=q.useCallback(()=>i&&n&&n(s),[s,n,i]);return!t&&n?[!1,o]:[!0]}const P_=typeof window<"u",JB=P_?q.useLayoutEffect:q.useEffect,ls=i=>i;let z1=ls;function B_(i){let e;return()=>(e===void 0&&(e=i()),e)}const md=(i,e,t)=>{const n=e-i;return n===0?1:(t-i)/n},Fa=i=>i*1e3,Na=i=>i/1e3,KB={useManualTiming:!1},Qm=["read","resolveKeyframes","update","preRender","render","postRender"],ZS={value:null};function YB(i,e){let t=new Set,n=new Set,r=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function h(g){o.has(g)&&(p.schedule(g),i()),c++,g(l)}const p={schedule:(g,y=!1,v=!1)=>{const w=v&&r?t:n;return y&&o.add(g),w.has(g)||w.add(g),g},cancel:g=>{n.delete(g),o.delete(g)},process:g=>{if(l=g,r){s=!0;return}r=!0,[t,n]=[n,t],t.forEach(h),e&&ZS.value&&ZS.value.frameloop[e].push(c),c=0,t.clear(),r=!1,s&&(s=!1,p.process(g))}};return p}const QB=40;function G1(i,e){let t=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Qm.reduce((A,C)=>(A[C]=YB(s,e?C:void 0),A),{}),{read:l,resolveKeyframes:c,update:h,preRender:p,render:g,postRender:y}=o,v=()=>{const A=performance.now();t=!1,r.delta=n?1e3/60:Math.max(Math.min(A-r.timestamp,QB),1),r.timestamp=A,r.isProcessing=!0,l.process(r),c.process(r),h.process(r),p.process(r),g.process(r),y.process(r),r.isProcessing=!1,t&&e&&(n=!1,i(v))},S=()=>{t=!0,n=!0,r.isProcessing||i(v)};return{schedule:Qm.reduce((A,C)=>{const b=o[C];return A[C]=(B,N=!1,F=!1)=>(t||S(),b.schedule(B,N,F)),A},{}),cancel:A=>{for(let C=0;C<Qm.length;C++)o[Qm[C]].cancel(A)},state:r,steps:o}}const{schedule:Fn,cancel:Ul,state:Ki,steps:S0}=G1(typeof requestAnimationFrame<"u"?requestAnimationFrame:ls,!0),V1=q.createContext({strict:!1}),$S={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gd={};for(const i in $S)gd[i]={isEnabled:e=>$S[i].some(t=>!!e[t])};function qB(i){for(const e in i)gd[e]={...gd[e],...i[e]}}const ZB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sy(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||ZB.has(i)}let W1=i=>!sy(i);function $B(i){i&&(W1=e=>e.startsWith("on")?!sy(e):i(e))}try{$B(require("@emotion/is-prop-valid").default)}catch{}function eI(i,e,t){const n={};for(const r in i)r==="values"&&typeof i.values=="object"||(W1(r)||t===!0&&sy(r)||!e&&!sy(r)||i.draggable&&r.startsWith("onDrag"))&&(n[r]=i[r]);return n}function tI(i){if(typeof Proxy>"u")return i;const e=new Map,t=(...n)=>i(...n);return new Proxy(t,{get:(n,r)=>r==="create"?i:(e.has(r)||e.set(r,i(r)),e.get(r))})}const nv=q.createContext({});function iv(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function hp(i){return typeof i=="string"||Array.isArray(i)}const I_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],D_=["initial",...I_];function rv(i){return iv(i.animate)||D_.some(e=>hp(i[e]))}function j1(i){return!!(rv(i)||i.variants)}function nI(i,e){if(rv(i)){const{initial:t,animate:n}=i;return{initial:t===!1||hp(t)?t:void 0,animate:hp(n)?n:void 0}}return i.inherit!==!1?e:{}}function iI(i){const{initial:e,animate:t}=nI(i,q.useContext(nv));return q.useMemo(()=>({initial:e,animate:t}),[eM(e),eM(t)])}function eM(i){return Array.isArray(i)?i.join(" "):i}const rI=Symbol.for("motionComponentSymbol");function id(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function sI(i,e,t){return q.useCallback(n=>{n&&i.onMount&&i.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):id(t)&&(t.current=n))},[e])}const L_=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),oI="framerAppearId",X1="data-"+L_(oI),{schedule:F_}=G1(queueMicrotask,!1),J1=q.createContext({});function aI(i,e,t,n,r){var s,o;const{visualElement:l}=q.useContext(nv),c=q.useContext(V1),h=q.useContext(R_),p=q.useContext(H1).reducedMotion,g=q.useRef(null);n=n||c.renderer,!g.current&&n&&(g.current=n(i,{visualState:e,parent:l,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p}));const y=g.current,v=q.useContext(J1);y&&!y.projection&&r&&(y.type==="html"||y.type==="svg")&&lI(g.current,t,r,v);const S=q.useRef(!1);q.useInsertionEffect(()=>{y&&S.current&&y.update(t,h)});const w=t[X1],M=q.useRef(!!w&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,w))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,w)));return JB(()=>{y&&(S.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),F_.render(y.render),M.current&&y.animationState&&y.animationState.animateChanges())}),q.useEffect(()=>{y&&(!M.current&&y.animationState&&y.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var A;(A=window.MotionHandoffMarkAsComplete)===null||A===void 0||A.call(window,w)}),M.current=!1))}),y}function lI(i,e,t,n){const{layoutId:r,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:h}=e;i.projection=new t(i.latestValues,e["data-framer-portal-id"]?void 0:K1(i.parent)),i.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||l&&id(l),visualElement:i,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:h})}function K1(i){if(i)return i.options.allowProjection!==!1?i.projection:K1(i.parent)}function uI({preloadedFeatures:i,createVisualElement:e,useRender:t,useVisualState:n,Component:r}){var s,o;i&&qB(i);function l(h,p){let g;const y={...q.useContext(H1),...h,layoutId:cI(h)},{isStatic:v}=y,S=iI(h),w=n(h,v);if(!v&&P_){fI();const M=dI(y);g=M.MeasureLayout,S.visualElement=aI(r,w,y,e,M.ProjectionNode)}return U.jsxs(nv.Provider,{value:S,children:[g&&S.visualElement?U.jsx(g,{visualElement:S.visualElement,...y}):null,t(r,h,sI(w,S.visualElement,p),w,v,S.visualElement)]})}l.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const c=q.forwardRef(l);return c[rI]=r,c}function cI({layoutId:i}){const e=q.useContext(k1).id;return e&&i!==void 0?e+"-"+i:i}function fI(i,e){q.useContext(V1).strict}function dI(i){const{drag:e,layout:t}=gd;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(i)||t!=null&&t.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Y1=i=>e=>typeof e=="string"&&e.startsWith(i),N_=Y1("--"),hI=Y1("var(--"),U_=i=>hI(i)?pI.test(i.split("/*")[0].trim()):!1,pI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,pp={};function mI(i){for(const e in i)pp[e]=i[e],N_(e)&&(pp[e].isCSSVariable=!0)}const bd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mc=new Set(bd);function Q1(i,{layout:e,layoutId:t}){return Mc.has(i)||i.startsWith("origin")||(e||t!==void 0)&&(!!pp[i]||i==="opacity")}const ur=i=>!!(i&&i.getVelocity),q1=(i,e)=>e&&typeof i=="number"?e.transform(i):i,Ha=(i,e,t)=>t>e?e:t<i?i:t,Rd={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},mp={...Rd,transform:i=>Ha(0,1,i)},qm={...Rd,default:1},Fp=i=>({test:e=>typeof e=="string"&&e.endsWith(i)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${i}`}),Il=Fp("deg"),Io=Fp("%"),Ht=Fp("px"),gI=Fp("vh"),yI=Fp("vw"),tM={...Io,parse:i=>Io.parse(i)/100,transform:i=>Io.transform(i*100)},vI={borderWidth:Ht,borderTopWidth:Ht,borderRightWidth:Ht,borderBottomWidth:Ht,borderLeftWidth:Ht,borderRadius:Ht,radius:Ht,borderTopLeftRadius:Ht,borderTopRightRadius:Ht,borderBottomRightRadius:Ht,borderBottomLeftRadius:Ht,width:Ht,maxWidth:Ht,height:Ht,maxHeight:Ht,top:Ht,right:Ht,bottom:Ht,left:Ht,padding:Ht,paddingTop:Ht,paddingRight:Ht,paddingBottom:Ht,paddingLeft:Ht,margin:Ht,marginTop:Ht,marginRight:Ht,marginBottom:Ht,marginLeft:Ht,backgroundPositionX:Ht,backgroundPositionY:Ht},xI={rotate:Il,rotateX:Il,rotateY:Il,rotateZ:Il,scale:qm,scaleX:qm,scaleY:qm,scaleZ:qm,skew:Il,skewX:Il,skewY:Il,distance:Ht,translateX:Ht,translateY:Ht,translateZ:Ht,x:Ht,y:Ht,z:Ht,perspective:Ht,transformPerspective:Ht,opacity:mp,originX:tM,originY:tM,originZ:Ht},nM={...Rd,transform:Math.round},O_={...vI,...xI,zIndex:nM,size:Ht,fillOpacity:mp,strokeOpacity:mp,numOctaves:nM},_I={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},AI=bd.length;function SI(i,e,t){let n="",r=!0;for(let s=0;s<AI;s++){const o=bd[s],l=i[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||t){const h=q1(l,O_[o]);if(!c){r=!1;const p=_I[o]||o;n+=`${p}(${h}) `}t&&(e[o]=h)}}return n=n.trim(),t?n=t(e,r?"":n):r&&(n="none"),n}function k_(i,e,t){const{style:n,vars:r,transformOrigin:s}=i;let o=!1,l=!1;for(const c in e){const h=e[c];if(Mc.has(c)){o=!0;continue}else if(N_(c)){r[c]=h;continue}else{const p=q1(h,O_[c]);c.startsWith("origin")?(l=!0,s[c]=p):n[c]=p}}if(e.transform||(o||t?n.transform=SI(e,i.transform,t):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:h="50%",originZ:p=0}=s;n.transformOrigin=`${c} ${h} ${p}`}}const H_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Z1(i,e,t){for(const n in e)!ur(e[n])&&!Q1(n,t)&&(i[n]=e[n])}function MI({transformTemplate:i},e){return q.useMemo(()=>{const t=H_();return k_(t,e,i),Object.assign({},t.vars,t.style)},[e])}function EI(i,e){const t=i.style||{},n={};return Z1(n,t,i),Object.assign(n,MI(i,e)),n}function wI(i,e){const t={},n=EI(i,e);return i.drag&&i.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(t.tabIndex=0),t.style=n,t}const TI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function z_(i){return typeof i!="string"||i.includes("-")?!1:!!(TI.indexOf(i)>-1||/[A-Z]/u.test(i))}const CI={offset:"stroke-dashoffset",array:"stroke-dasharray"},bI={offset:"strokeDashoffset",array:"strokeDasharray"};function RI(i,e,t=1,n=0,r=!0){i.pathLength=1;const s=r?CI:bI;i[s.offset]=Ht.transform(-n);const o=Ht.transform(e),l=Ht.transform(t);i[s.array]=`${o} ${l}`}function iM(i,e,t){return typeof i=="string"?i:Ht.transform(e+t*i)}function PI(i,e,t){const n=iM(e,i.x,i.width),r=iM(t,i.y,i.height);return`${n} ${r}`}function G_(i,{attrX:e,attrY:t,attrScale:n,originX:r,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...h},p,g){if(k_(i,h,g),p){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:y,style:v,dimensions:S}=i;y.transform&&(S&&(v.transform=y.transform),delete y.transform),S&&(r!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=PI(S,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),n!==void 0&&(y.scale=n),o!==void 0&&RI(y,o,l,c,!1)}const $1=()=>({...H_(),attrs:{}}),V_=i=>typeof i=="string"&&i.toLowerCase()==="svg";function BI(i,e,t,n){const r=q.useMemo(()=>{const s=$1();return G_(s,e,V_(n),i.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(i.style){const s={};Z1(s,i.style,i),r.style={...s,...r.style}}return r}function II(i=!1){return(t,n,r,{latestValues:s},o)=>{const c=(z_(t)?BI:wI)(n,s,o,t),h=eI(n,typeof t=="string",i),p=t!==q.Fragment?{...h,...c,ref:r}:{},{children:g}=n,y=q.useMemo(()=>ur(g)?g.get():g,[g]);return q.createElement(t,{...p,children:y})}}function rM(i){const e=[{},{}];return i==null||i.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function W_(i,e,t,n){if(typeof e=="function"){const[r,s]=rM(n);e=e(t!==void 0?t:i.custom,r,s)}if(typeof e=="string"&&(e=i.variants&&i.variants[e]),typeof e=="function"){const[r,s]=rM(n);e=e(t!==void 0?t:i.custom,r,s)}return e}const zx=i=>Array.isArray(i),DI=i=>!!(i&&typeof i=="object"&&i.mix&&i.toValue),LI=i=>zx(i)?i[i.length-1]||0:i;function qg(i){const e=ur(i)?i.get():i;return DI(e)?e.toValue():e}function FI({scrapeMotionValuesFromProps:i,createRenderState:e,onUpdate:t},n,r,s){const o={latestValues:NI(n,r,s,i),renderState:e()};return t&&(o.onMount=l=>t({props:n,current:l,...o}),o.onUpdate=l=>t(l)),o}const eT=i=>(e,t)=>{const n=q.useContext(nv),r=q.useContext(R_),s=()=>FI(i,e,n,r);return t?s():jB(s)};function NI(i,e,t,n){const r={},s=n(i,{});for(const y in s)r[y]=qg(s[y]);let{initial:o,animate:l}=i;const c=rv(i),h=j1(i);e&&h&&!c&&i.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let p=t?t.initial===!1:!1;p=p||o===!1;const g=p?l:o;if(g&&typeof g!="boolean"&&!iv(g)){const y=Array.isArray(g)?g:[g];for(let v=0;v<y.length;v++){const S=W_(i,y[v]);if(S){const{transitionEnd:w,transition:M,...A}=S;for(const C in A){let b=A[C];if(Array.isArray(b)){const B=p?b.length-1:0;b=b[B]}b!==null&&(r[C]=b)}for(const C in w)r[C]=w[C]}}}return r}function j_(i,e,t){var n;const{style:r}=i,s={};for(const o in r)(ur(r[o])||e.style&&ur(e.style[o])||Q1(o,i)||((n=t==null?void 0:t.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const UI={useVisualState:eT({scrapeMotionValuesFromProps:j_,createRenderState:H_})};function tT(i,e){try{e.dimensions=typeof i.getBBox=="function"?i.getBBox():i.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function nT(i,{style:e,vars:t},n,r){Object.assign(i.style,e,r&&r.getProjectionStyles(n));for(const s in t)i.style.setProperty(s,t[s])}const iT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rT(i,e,t,n){nT(i,e,void 0,n);for(const r in e.attrs)i.setAttribute(iT.has(r)?r:L_(r),e.attrs[r])}function sT(i,e,t){const n=j_(i,e,t);for(const r in i)if(ur(i[r])||ur(e[r])){const s=bd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=i[r]}return n}const sM=["x","y","width","height","cx","cy","r"],OI={useVisualState:eT({scrapeMotionValuesFromProps:sT,createRenderState:$1,onUpdate:({props:i,prevProps:e,current:t,renderState:n,latestValues:r})=>{if(!t)return;let s=!!i.drag;if(!s){for(const l in r)if(Mc.has(l)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let l=0;l<sM.length;l++){const c=sM[l];i[c]!==e[c]&&(o=!0)}o&&Fn.read(()=>{tT(t,n),Fn.render(()=>{G_(n,r,V_(t.tagName),i.transformTemplate),rT(t,n)})})}})};function kI(i,e){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...z_(n)?OI:UI,preloadedFeatures:i,useRender:II(r),createVisualElement:e,Component:n};return uI(o)}}function gp(i,e,t){const n=i.getProps();return W_(n,e,t!==void 0?t:n.custom,i)}const HI=B_(()=>window.ScrollTimeline!==void 0);class zI{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map(r=>{if(HI()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class GI extends zI{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function X_(i,e){return i?i[e]||i.default||i:void 0}const Gx=2e4;function oT(i){let e=0;const t=50;let n=i.next(e);for(;!n.done&&e<Gx;)e+=t,n=i.next(e);return e>=Gx?1/0:e}function J_(i){return typeof i=="function"}function oM(i,e){i.timeline=e,i.onfinish=null}const K_=i=>Array.isArray(i)&&typeof i[0]=="number",VI={linearEasing:void 0};function WI(i,e){const t=B_(i);return()=>{var n;return(n=VI[e])!==null&&n!==void 0?n:t()}}const oy=WI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),aT=(i,e,t=10)=>{let n="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)n+=i(md(0,r-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function lT(i){return!!(typeof i=="function"&&oy()||!i||typeof i=="string"&&(i in Vx||oy())||K_(i)||Array.isArray(i)&&i.every(lT))}const Yh=([i,e,t,n])=>`cubic-bezier(${i}, ${e}, ${t}, ${n})`,Vx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yh([0,.65,.55,1]),circOut:Yh([.55,0,1,.45]),backIn:Yh([.31,.01,.66,-.59]),backOut:Yh([.33,1.53,.69,.99])};function uT(i,e){if(i)return typeof i=="function"&&oy()?aT(i,e):K_(i)?Yh(i):Array.isArray(i)?i.map(t=>uT(t,e)||Vx.easeOut):Vx[i]}const oo={x:!1,y:!1};function cT(){return oo.x||oo.y}function jI(i,e,t){var n;if(i instanceof Element)return[i];if(typeof i=="string"){let r=document;const s=(n=void 0)!==null&&n!==void 0?n:r.querySelectorAll(i);return s?Array.from(s):[]}return Array.from(i)}function fT(i,e){const t=jI(i),n=new AbortController,r={passive:!0,...e,signal:n.signal};return[t,r,()=>n.abort()]}function aM(i){return!(i.pointerType==="touch"||cT())}function XI(i,e,t={}){const[n,r,s]=fT(i,t),o=l=>{if(!aM(l))return;const{target:c}=l,h=e(c,l);if(typeof h!="function"||!c)return;const p=g=>{aM(g)&&(h(g),c.removeEventListener("pointerleave",p))};c.addEventListener("pointerleave",p,r)};return n.forEach(l=>{l.addEventListener("pointerenter",o,r)}),s}const dT=(i,e)=>e?i===e?!0:dT(i,e.parentElement):!1,Y_=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,JI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function KI(i){return JI.has(i.tagName)||i.tabIndex!==-1}const Qh=new WeakSet;function lM(i){return e=>{e.key==="Enter"&&i(e)}}function M0(i,e){i.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const YI=(i,e)=>{const t=i.currentTarget;if(!t)return;const n=lM(()=>{if(Qh.has(t))return;M0(t,"down");const r=lM(()=>{M0(t,"up")}),s=()=>M0(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function uM(i){return Y_(i)&&!cT()}function QI(i,e,t={}){const[n,r,s]=fT(i,t),o=l=>{const c=l.currentTarget;if(!uM(l)||Qh.has(c))return;Qh.add(c);const h=e(c,l),p=(v,S)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),!(!uM(v)||!Qh.has(c))&&(Qh.delete(c),typeof h=="function"&&h(v,{success:S}))},g=v=>{p(v,t.useGlobalTarget||dT(c,v.target))},y=v=>{p(v,!1)};window.addEventListener("pointerup",g,r),window.addEventListener("pointercancel",y,r)};return n.forEach(l=>{!KI(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(t.useGlobalTarget?window:l).addEventListener("pointerdown",o,r),l.addEventListener("focus",h=>YI(h,r),r)}),s}function qI(i){return i==="x"||i==="y"?oo[i]?null:(oo[i]=!0,()=>{oo[i]=!1}):oo.x||oo.y?null:(oo.x=oo.y=!0,()=>{oo.x=oo.y=!1})}const hT=new Set(["width","height","top","left","right","bottom",...bd]);let Zg;function ZI(){Zg=void 0}const Do={now:()=>(Zg===void 0&&Do.set(Ki.isProcessing||KB.useManualTiming?Ki.timestamp:performance.now()),Zg),set:i=>{Zg=i,queueMicrotask(ZI)}};function Q_(i,e){i.indexOf(e)===-1&&i.push(e)}function q_(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}class Z_{constructor(){this.subscriptions=[]}add(e){return Q_(this.subscriptions,e),()=>q_(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function pT(i,e){return e?i*(1e3/e):0}const cM=30,$I=i=>!isNaN(parseFloat(i));class eD{constructor(e,t={}){this.version="12.4.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,r=!0)=>{const s=Do.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Do.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=$I(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Z_);const n=this.events[e].add(t);return e==="change"?()=>{n(),Fn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Do.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>cM)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,cM);return pT(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yp(i,e){return new eD(i,e)}function tD(i,e,t){i.hasValue(e)?i.getValue(e).set(t):i.addValue(e,yp(t))}function nD(i,e){const t=gp(i,e);let{transitionEnd:n={},transition:r={},...s}=t||{};s={...s,...n};for(const o in s){const l=LI(s[o]);tD(i,o,l)}}function iD(i){return!!(ur(i)&&i.add)}function Wx(i,e){const t=i.getValue("willChange");if(iD(t))return t.add(e)}function mT(i){return i.props[X1]}const gT=(i,e,t)=>(((1-3*t+3*e)*i+(3*t-6*e))*i+3*e)*i,rD=1e-7,sD=12;function oD(i,e,t,n,r){let s,o,l=0;do o=e+(t-e)/2,s=gT(o,n,r)-i,s>0?t=o:e=o;while(Math.abs(s)>rD&&++l<sD);return o}function Np(i,e,t,n){if(i===e&&t===n)return ls;const r=s=>oD(s,0,1,i,t);return s=>s===0||s===1?s:gT(r(s),e,n)}const yT=i=>e=>e<=.5?i(2*e)/2:(2-i(2*(1-e)))/2,vT=i=>e=>1-i(1-e),xT=Np(.33,1.53,.69,.99),$_=vT(xT),_T=yT($_),AT=i=>(i*=2)<1?.5*$_(i):.5*(2-Math.pow(2,-10*(i-1))),eA=i=>1-Math.sin(Math.acos(i)),ST=vT(eA),MT=yT(eA),ET=i=>/^0[^.\s]+$/u.test(i);function aD(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||ET(i):!0}const $h=i=>Math.round(i*1e5)/1e5,tA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lD(i){return i==null}const uD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nA=(i,e)=>t=>!!(typeof t=="string"&&uD.test(t)&&t.startsWith(i)||e&&!lD(t)&&Object.prototype.hasOwnProperty.call(t,e)),wT=(i,e,t)=>n=>{if(typeof n!="string")return n;const[r,s,o,l]=n.match(tA);return{[i]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},cD=i=>Ha(0,255,i),E0={...Rd,transform:i=>Math.round(cD(i))},$u={test:nA("rgb","red"),parse:wT("red","green","blue"),transform:({red:i,green:e,blue:t,alpha:n=1})=>"rgba("+E0.transform(i)+", "+E0.transform(e)+", "+E0.transform(t)+", "+$h(mp.transform(n))+")"};function fD(i){let e="",t="",n="",r="";return i.length>5?(e=i.substring(1,3),t=i.substring(3,5),n=i.substring(5,7),r=i.substring(7,9)):(e=i.substring(1,2),t=i.substring(2,3),n=i.substring(3,4),r=i.substring(4,5),e+=e,t+=t,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const jx={test:nA("#"),parse:fD,transform:$u.transform},rd={test:nA("hsl","hue"),parse:wT("hue","saturation","lightness"),transform:({hue:i,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(i)+", "+Io.transform($h(e))+", "+Io.transform($h(t))+", "+$h(mp.transform(n))+")"},lr={test:i=>$u.test(i)||jx.test(i)||rd.test(i),parse:i=>$u.test(i)?$u.parse(i):rd.test(i)?rd.parse(i):jx.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?$u.transform(i):rd.transform(i)},dD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function hD(i){var e,t;return isNaN(i)&&typeof i=="string"&&(((e=i.match(tA))===null||e===void 0?void 0:e.length)||0)+(((t=i.match(dD))===null||t===void 0?void 0:t.length)||0)>0}const TT="number",CT="color",pD="var",mD="var(",fM="${}",gD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vp(i){const e=i.toString(),t=[],n={color:[],number:[],var:[]},r=[];let s=0;const l=e.replace(gD,c=>(lr.test(c)?(n.color.push(s),r.push(CT),t.push(lr.parse(c))):c.startsWith(mD)?(n.var.push(s),r.push(pD),t.push(c)):(n.number.push(s),r.push(TT),t.push(parseFloat(c))),++s,fM)).split(fM);return{values:t,split:l,indexes:n,types:r}}function bT(i){return vp(i).values}function RT(i){const{split:e,types:t}=vp(i),n=e.length;return r=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],r[o]!==void 0){const l=t[o];l===TT?s+=$h(r[o]):l===CT?s+=lr.transform(r[o]):s+=r[o]}return s}}const yD=i=>typeof i=="number"?0:i;function vD(i){const e=bT(i);return RT(i)(e.map(yD))}const Ol={test:hD,parse:bT,createTransformer:RT,getAnimatableNone:vD},xD=new Set(["brightness","contrast","saturate","opacity"]);function _D(i){const[e,t]=i.slice(0,-1).split("(");if(e==="drop-shadow")return i;const[n]=t.match(tA)||[];if(!n)return i;const r=t.replace(n,"");let s=xD.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+r+")"}const AD=/\b([a-z-]*)\(.*?\)/gu,Xx={...Ol,getAnimatableNone:i=>{const e=i.match(AD);return e?e.map(_D).join(" "):i}},SD={...O_,color:lr,backgroundColor:lr,outlineColor:lr,fill:lr,stroke:lr,borderColor:lr,borderTopColor:lr,borderRightColor:lr,borderBottomColor:lr,borderLeftColor:lr,filter:Xx,WebkitFilter:Xx},iA=i=>SD[i];function PT(i,e){let t=iA(i);return t!==Xx&&(t=Ol),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const MD=new Set(["auto","none","0"]);function ED(i,e,t){let n=0,r;for(;n<i.length&&!r;){const s=i[n];typeof s=="string"&&!MD.has(s)&&vp(s).values.length&&(r=i[n]),n++}if(r&&t)for(const s of e)i[s]=PT(t,r)}const dM=i=>i===Rd||i===Ht,hM=(i,e)=>parseFloat(i.split(", ")[e]),pM=(i,e)=>(t,{transform:n})=>{if(n==="none"||!n)return 0;const r=n.match(/^matrix3d\((.+)\)$/u);if(r)return hM(r[1],e);{const s=n.match(/^matrix\((.+)\)$/u);return s?hM(s[1],i):0}},wD=new Set(["x","y","z"]),TD=bd.filter(i=>!wD.has(i));function CD(i){const e=[];return TD.forEach(t=>{const n=i.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const yd={width:({x:i},{paddingLeft:e="0",paddingRight:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),height:({y:i},{paddingTop:e="0",paddingBottom:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),top:(i,{top:e})=>parseFloat(e),left:(i,{left:e})=>parseFloat(e),bottom:({y:i},{top:e})=>parseFloat(e)+(i.max-i.min),right:({x:i},{left:e})=>parseFloat(e)+(i.max-i.min),x:pM(4,13),y:pM(5,14)};yd.translateX=yd.x;yd.translateY=yd.y;const ac=new Set;let Jx=!1,Kx=!1;function BT(){if(Kx){const i=Array.from(ac).filter(n=>n.needsMeasurement),e=new Set(i.map(n=>n.element)),t=new Map;e.forEach(n=>{const r=CD(n);r.length&&(t.set(n,r),n.render())}),i.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=t.get(n);r&&r.forEach(([s,o])=>{var l;(l=n.getValue(s))===null||l===void 0||l.set(o)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Kx=!1,Jx=!1,ac.forEach(i=>i.complete()),ac.clear()}function IT(){ac.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(Kx=!0)})}function bD(){IT(),BT()}class rA{constructor(e,t,n,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ac.add(this),Jx||(Jx=!0,Fn.read(IT),Fn.resolveKeyframes(BT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&t){const c=n.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ac.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ac.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const DT=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i),RD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function PD(i){const e=RD.exec(i);if(!e)return[,];const[,t,n,r]=e;return[`--${t??n}`,r]}function LT(i,e,t=1){const[n,r]=PD(i);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return DT(o)?parseFloat(o):o}return U_(r)?LT(r,e,t+1):r}const FT=i=>e=>e.test(i),BD={test:i=>i==="auto",parse:i=>i},NT=[Rd,Ht,Io,Il,yI,gI,BD],mM=i=>NT.find(FT(i));class UT extends rA{constructor(e,t,n,r,s){super(e,t,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let h=e[c];if(typeof h=="string"&&(h=h.trim(),U_(h))){const p=LT(h,t.current);p!==void 0&&(e[c]=p),c===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!hT.has(n)||e.length!==2)return;const[r,s]=e,o=mM(r),l=mM(s);if(o!==l)if(dM(o)&&dM(l))for(let c=0;c<e.length;c++){const h=e[c];typeof h=="string"&&(e[c]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)aD(e[r])&&n.push(r);n.length&&ED(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yd[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=yd[n](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,h])=>{t.getValue(c).set(h)}),this.resolveNoneKeyframes()}}const gM=(i,e)=>e==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Ol.test(i)||i==="0")&&!i.startsWith("url("));function ID(i){const e=i[0];if(i.length===1)return!0;for(let t=0;t<i.length;t++)if(i[t]!==e)return!0}function DD(i,e,t,n){const r=i[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=i[i.length-1],o=gM(r,e),l=gM(s,e);return!o||!l?!1:ID(i)||(t==="spring"||J_(t))&&n}const LD=i=>i!==null;function sv(i,{repeat:e,repeatType:t="loop"},n){const r=i.filter(LD),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||n===void 0?r[s]:n}const FD=40;class OT{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Do.now(),this.options={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:s,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>FD?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&bD(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Do.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:s,delay:o,onComplete:l,onUpdate:c,isGenerator:h}=this.options;if(!h&&!DD(e,n,r,s))if(o)this.options.duration=0;else{c&&c(sv(e,this.options,t)),l&&l(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,t);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...p},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Jn=(i,e,t)=>i+(e-i)*t;function w0(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function ND({hue:i,saturation:e,lightness:t,alpha:n}){i/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;r=w0(c,l,i+1/3),s=w0(c,l,i),o=w0(c,l,i-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function ay(i,e){return t=>t>0?e:i}const T0=(i,e,t)=>{const n=i*i,r=t*(e*e-n)+n;return r<0?0:Math.sqrt(r)},UD=[jx,$u,rd],OD=i=>UD.find(e=>e.test(i));function yM(i){const e=OD(i);if(!e)return!1;let t=e.parse(i);return e===rd&&(t=ND(t)),t}const vM=(i,e)=>{const t=yM(i),n=yM(e);if(!t||!n)return ay(i,e);const r={...t};return s=>(r.red=T0(t.red,n.red,s),r.green=T0(t.green,n.green,s),r.blue=T0(t.blue,n.blue,s),r.alpha=Jn(t.alpha,n.alpha,s),$u.transform(r))},kD=(i,e)=>t=>e(i(t)),Up=(...i)=>i.reduce(kD),Yx=new Set(["none","hidden"]);function HD(i,e){return Yx.has(i)?t=>t<=0?i:e:t=>t>=1?e:i}function zD(i,e){return t=>Jn(i,e,t)}function sA(i){return typeof i=="number"?zD:typeof i=="string"?U_(i)?ay:lr.test(i)?vM:WD:Array.isArray(i)?kT:typeof i=="object"?lr.test(i)?vM:GD:ay}function kT(i,e){const t=[...i],n=t.length,r=i.map((s,o)=>sA(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)t[o]=r[o](s);return t}}function GD(i,e){const t={...i,...e},n={};for(const r in t)i[r]!==void 0&&e[r]!==void 0&&(n[r]=sA(i[r])(i[r],e[r]));return r=>{for(const s in n)t[s]=n[s](r);return t}}function VD(i,e){var t;const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=i.indexes[o][r[o]],c=(t=i.values[l])!==null&&t!==void 0?t:0;n[s]=c,r[o]++}return n}const WD=(i,e)=>{const t=Ol.createTransformer(e),n=vp(i),r=vp(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?Yx.has(i)&&!r.values.length||Yx.has(e)&&!n.values.length?HD(i,e):Up(kT(VD(n,r),r.values),t):ay(i,e)};function HT(i,e,t){return typeof i=="number"&&typeof e=="number"&&typeof t=="number"?Jn(i,e,t):sA(i)(i,e)}const jD=5;function zT(i,e,t){const n=Math.max(e-jD,0);return pT(t-i(n),e-n)}const ti={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xM=.001;function XD({duration:i=ti.duration,bounce:e=ti.bounce,velocity:t=ti.velocity,mass:n=ti.mass}){let r,s,o=1-e;o=Ha(ti.minDamping,ti.maxDamping,o),i=Ha(ti.minDuration,ti.maxDuration,Na(i)),o<1?(r=h=>{const p=h*o,g=p*i,y=p-t,v=Qx(h,o),S=Math.exp(-g);return xM-y/v*S},s=h=>{const g=h*o*i,y=g*t+t,v=Math.pow(o,2)*Math.pow(h,2)*i,S=Math.exp(-g),w=Qx(Math.pow(h,2),o);return(-r(h)+xM>0?-1:1)*((y-v)*S)/w}):(r=h=>{const p=Math.exp(-h*i),g=(h-t)*i+1;return-.001+p*g},s=h=>{const p=Math.exp(-h*i),g=(t-h)*(i*i);return p*g});const l=5/i,c=KD(r,s,l);if(i=Fa(i),isNaN(c))return{stiffness:ti.stiffness,damping:ti.damping,duration:i};{const h=Math.pow(c,2)*n;return{stiffness:h,damping:o*2*Math.sqrt(n*h),duration:i}}}const JD=12;function KD(i,e,t){let n=t;for(let r=1;r<JD;r++)n=n-i(n)/e(n);return n}function Qx(i,e){return i*Math.sqrt(1-e*e)}const YD=["duration","bounce"],QD=["stiffness","damping","mass"];function _M(i,e){return e.some(t=>i[t]!==void 0)}function qD(i){let e={velocity:ti.velocity,stiffness:ti.stiffness,damping:ti.damping,mass:ti.mass,isResolvedFromDuration:!1,...i};if(!_M(i,QD)&&_M(i,YD))if(i.visualDuration){const t=i.visualDuration,n=2*Math.PI/(t*1.2),r=n*n,s=2*Ha(.05,1,1-(i.bounce||0))*Math.sqrt(r);e={...e,mass:ti.mass,stiffness:r,damping:s}}else{const t=XD(i);e={...e,...t,mass:ti.mass},e.isResolvedFromDuration=!0}return e}function GT(i=ti.visualDuration,e=ti.bounce){const t=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:e}:i;let{restSpeed:n,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:h,mass:p,duration:g,velocity:y,isResolvedFromDuration:v}=qD({...t,velocity:-Na(t.velocity||0)}),S=y||0,w=h/(2*Math.sqrt(c*p)),M=o-s,A=Na(Math.sqrt(c/p)),C=Math.abs(M)<5;n||(n=C?ti.restSpeed.granular:ti.restSpeed.default),r||(r=C?ti.restDelta.granular:ti.restDelta.default);let b;if(w<1){const N=Qx(A,w);b=F=>{const k=Math.exp(-w*A*F);return o-k*((S+w*A*M)/N*Math.sin(N*F)+M*Math.cos(N*F))}}else if(w===1)b=N=>o-Math.exp(-A*N)*(M+(S+A*M)*N);else{const N=A*Math.sqrt(w*w-1);b=F=>{const k=Math.exp(-w*A*F),z=Math.min(N*F,300);return o-k*((S+w*A*M)*Math.sinh(z)+N*M*Math.cosh(z))/N}}const B={calculatedDuration:v&&g||null,next:N=>{const F=b(N);if(v)l.done=N>=g;else{let k=0;w<1&&(k=N===0?Fa(S):zT(b,N,F));const z=Math.abs(k)<=n,L=Math.abs(o-F)<=r;l.done=z&&L}return l.value=l.done?o:F,l},toString:()=>{const N=Math.min(oT(B),Gx),F=aT(k=>B.next(N*k).value,N,30);return N+"ms "+F}};return B}function AM({keyframes:i,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:h=.5,restSpeed:p}){const g=i[0],y={done:!1,value:g},v=z=>l!==void 0&&z<l||c!==void 0&&z>c,S=z=>l===void 0?c:c===void 0||Math.abs(l-z)<Math.abs(c-z)?l:c;let w=t*e;const M=g+w,A=o===void 0?M:o(M);A!==M&&(w=A-g);const C=z=>-w*Math.exp(-z/n),b=z=>A+C(z),B=z=>{const L=C(z),D=b(z);y.done=Math.abs(L)<=h,y.value=y.done?A:D};let N,F;const k=z=>{v(y.value)&&(N=z,F=GT({keyframes:[y.value,S(y.value)],velocity:zT(b,z,y.value),damping:r,stiffness:s,restDelta:h,restSpeed:p}))};return k(0),{calculatedDuration:null,next:z=>{let L=!1;return!F&&N===void 0&&(L=!0,B(z),k(z)),N!==void 0&&z>=N?F.next(z-N):(!L&&B(z),y)}}}const ZD=Np(.42,0,1,1),$D=Np(0,0,.58,1),VT=Np(.42,0,.58,1),eL=i=>Array.isArray(i)&&typeof i[0]!="number",tL={linear:ls,easeIn:ZD,easeInOut:VT,easeOut:$D,circIn:eA,circInOut:MT,circOut:ST,backIn:$_,backInOut:_T,backOut:xT,anticipate:AT},SM=i=>{if(K_(i)){z1(i.length===4);const[e,t,n,r]=i;return Np(e,t,n,r)}else if(typeof i=="string")return tL[i];return i};function nL(i,e,t){const n=[],r=t||HT,s=i.length-1;for(let o=0;o<s;o++){let l=r(i[o],i[o+1]);if(e){const c=Array.isArray(e)?e[o]||ls:e;l=Up(c,l)}n.push(l)}return n}function iL(i,e,{clamp:t=!0,ease:n,mixer:r}={}){const s=i.length;if(z1(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=i[0]===i[1];i[0]>i[s-1]&&(i=[...i].reverse(),e=[...e].reverse());const l=nL(e,n,r),c=l.length,h=p=>{if(o&&p<i[0])return e[0];let g=0;if(c>1)for(;g<i.length-2&&!(p<i[g+1]);g++);const y=md(i[g],i[g+1],p);return l[g](y)};return t?p=>h(Ha(i[0],i[s-1],p)):h}function rL(i,e){const t=i[i.length-1];for(let n=1;n<=e;n++){const r=md(0,e,n);i.push(Jn(t,1,r))}}function sL(i){const e=[0];return rL(e,i.length-1),e}function oL(i,e){return i.map(t=>t*e)}function aL(i,e){return i.map(()=>e||VT).splice(0,i.length-1)}function ly({duration:i=300,keyframes:e,times:t,ease:n="easeInOut"}){const r=eL(n)?n.map(SM):SM(n),s={done:!1,value:e[0]},o=oL(t&&t.length===e.length?t:sL(e),i),l=iL(o,e,{ease:Array.isArray(r)?r:aL(e,r)});return{calculatedDuration:i,next:c=>(s.value=l(c),s.done=c>=i,s)}}const lL=i=>{const e=({timestamp:t})=>i(t);return{start:()=>Fn.update(e,!0),stop:()=>Ul(e),now:()=>Ki.isProcessing?Ki.timestamp:Do.now()}},uL={decay:AM,inertia:AM,tween:ly,keyframes:ly,spring:GT},cL=i=>i/100;class oA extends OT{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:t,motionValue:n,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||rA,l=(c,h)=>this.onKeyframesResolved(c,h);this.resolver=new o(s,l,t,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,l=J_(t)?t:uL[t]||ly;let c,h;l!==ly&&typeof e[0]!="number"&&(c=Up(cL,HT(e[0],e[1])),e=[0,100]);const p=l({...this.options,keyframes:e});s==="mirror"&&(h=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),p.calculatedDuration===null&&(p.calculatedDuration=oT(p));const{calculatedDuration:g}=p,y=g+r,v=y*(n+1)-r;return{generator:p,mirroredGenerator:h,mapPercentToKeyframes:c,calculatedDuration:g,resolvedDuration:y,totalDuration:v}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:n}=this;if(!n){const{keyframes:z}=this.options;return{done:!0,value:z[z.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:h,totalDuration:p,resolvedDuration:g}=n;if(this.startTime===null)return s.next(0);const{delay:y,repeat:v,repeatType:S,repeatDelay:w,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const A=this.currentTime-y*(this.speed>=0?1:-1),C=this.speed>=0?A<0:A>p;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let b=this.currentTime,B=s;if(v){const z=Math.min(this.currentTime,p)/g;let L=Math.floor(z),D=z%1;!D&&z>=1&&(D=1),D===1&&L--,L=Math.min(L,v+1),!!(L%2)&&(S==="reverse"?(D=1-D,w&&(D-=w/g)):S==="mirror"&&(B=o)),b=Ha(0,1,D)*g}const N=C?{done:!1,value:c[0]}:B.next(b);l&&(N.value=l(N.value));let{done:F}=N;!C&&h!==null&&(F=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return k&&r!==void 0&&(N.value=sv(c,this.options,r)),M&&M(N.value),k&&this.finish(),N}get duration(){const{resolved:e}=this;return e?Na(e.calculatedDuration):0}get time(){return Na(this.currentTime)}set time(e){e=Fa(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Na(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=lL,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const fL=new Set(["opacity","clipPath","filter","transform"]);function dL(i,e,t,{delay:n=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const h={[e]:t};c&&(h.offset=c);const p=uT(l,r);return Array.isArray(p)&&(h.easing=p),i.animate(h,{delay:n,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const hL=B_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),uy=10,pL=2e4;function mL(i){return J_(i.type)||i.type==="spring"||!lT(i.ease)}function gL(i,e){const t=new oA({...e,keyframes:i,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:i[0]};const r=[];let s=0;for(;!n.done&&s<pL;)n=t.sample(s),r.push(n.value),s+=uy;return{times:void 0,keyframes:r,duration:s-uy,ease:"linear"}}const WT={anticipate:AT,backInOut:_T,circInOut:MT};function yL(i){return i in WT}class MM extends OT{constructor(e){super(e);const{name:t,motionValue:n,element:r,keyframes:s}=this.options;this.resolver=new UT(s,(o,l)=>this.onKeyframesResolved(o,l),t,n,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:r,ease:s,type:o,motionValue:l,name:c,startTime:h}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof s=="string"&&oy()&&yL(s)&&(s=WT[s]),mL(this.options)){const{onComplete:g,onUpdate:y,motionValue:v,element:S,...w}=this.options,M=gL(e,w);e=M.keyframes,e.length===1&&(e[1]=e[0]),n=M.duration,r=M.times,s=M.ease,o="keyframes"}const p=dL(l.owner.current,c,e,{...this.options,duration:n,times:r,ease:s});return p.startTime=h??this.calcStartTime(),this.pendingTimeline?(oM(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:g}=this.options;l.set(sv(e,this.options,t)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:n,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Na(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Na(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=Fa(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return ls;const{animation:n}=t;oM(n,e)}return ls}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:r,type:s,ease:o,times:l}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:p,onComplete:g,element:y,...v}=this.options,S=new oA({...v,keyframes:n,duration:r,type:s,ease:o,times:l,isGenerator:!0}),w=Fa(this.time);h.setWithVelocity(S.sample(w-uy).value,S.sample(w).value,uy)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:o,type:l}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:h}=t.owner.getProps();return hL()&&n&&fL.has(n)&&!c&&!h&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}}const vL={type:"spring",stiffness:500,damping:25,restSpeed:10},xL=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),_L={type:"keyframes",duration:.8},AL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SL=(i,{keyframes:e})=>e.length>2?_L:Mc.has(i)?i.startsWith("scale")?xL(e[1]):vL:AL;function ML({when:i,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:h,...p}){return!!Object.keys(p).length}const aA=(i,e,t,n={},r,s)=>o=>{const l=X_(n,i)||{},c=l.delay||n.delay||0;let{elapsed:h=0}=n;h=h-Fa(c);let p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-h,onUpdate:y=>{e.set(y),l.onUpdate&&l.onUpdate(y)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:i,motionValue:e,element:s?void 0:r};ML(l)||(p={...p,...SL(i,p)}),p.duration&&(p.duration=Fa(p.duration)),p.repeatDelay&&(p.repeatDelay=Fa(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),g&&!s&&e.get()!==void 0){const y=sv(p.keyframes,l);if(y!==void 0)return Fn.update(()=>{p.onUpdate(y),p.onComplete()}),new GI([])}return!s&&MM.supports(p)?new MM(p):new oA(p)};function EL({protectedKeys:i,needsAnimating:e},t){const n=i.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function jT(i,e,{delay:t=0,transitionOverride:n,type:r}={}){var s;let{transition:o=i.getDefaultTransition(),transitionEnd:l,...c}=e;n&&(o=n);const h=[],p=r&&i.animationState&&i.animationState.getState()[r];for(const g in c){const y=i.getValue(g,(s=i.latestValues[g])!==null&&s!==void 0?s:null),v=c[g];if(v===void 0||p&&EL(p,g))continue;const S={delay:t,...X_(o||{},g)};let w=!1;if(window.MotionHandoffAnimation){const A=mT(i);if(A){const C=window.MotionHandoffAnimation(A,g,Fn);C!==null&&(S.startTime=C,w=!0)}}Wx(i,g),y.start(aA(g,y,v,i.shouldReduceMotion&&hT.has(g)?{type:!1}:S,i,w));const M=y.animation;M&&h.push(M)}return l&&Promise.all(h).then(()=>{Fn.update(()=>{l&&nD(i,l)})}),h}function qx(i,e,t={}){var n;const r=gp(i,e,t.type==="exit"?(n=i.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=i.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(jT(i,r,t)):()=>Promise.resolve(),l=i.variantChildren&&i.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:y}=s;return wL(i,e,p+h,g,y,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[h,p]=c==="beforeChildren"?[o,l]:[l,o];return h().then(()=>p())}else return Promise.all([o(),l(t.delay)])}function wL(i,e,t=0,n=0,r=1,s){const o=[],l=(i.variantChildren.size-1)*n,c=r===1?(h=0)=>h*n:(h=0)=>l-h*n;return Array.from(i.variantChildren).sort(TL).forEach((h,p)=>{h.notify("AnimationStart",e),o.push(qx(h,e,{...s,delay:t+c(p)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(o)}function TL(i,e){return i.sortNodePosition(e)}function CL(i,e,t={}){i.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(s=>qx(i,s,t));n=Promise.all(r)}else if(typeof e=="string")n=qx(i,e,t);else{const r=typeof e=="function"?gp(i,e,t.custom):e;n=Promise.all(jT(i,r,t))}return n.then(()=>{i.notify("AnimationComplete",e)})}function XT(i,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==i.length)return!1;for(let n=0;n<t;n++)if(e[n]!==i[n])return!1;return!0}const bL=D_.length;function JT(i){if(!i)return;if(!i.isControllingVariants){const t=i.parent?JT(i.parent)||{}:{};return i.props.initial!==void 0&&(t.initial=i.props.initial),t}const e={};for(let t=0;t<bL;t++){const n=D_[t],r=i.props[n];(hp(r)||r===!1)&&(e[n]=r)}return e}const RL=[...I_].reverse(),PL=I_.length;function BL(i){return e=>Promise.all(e.map(({animation:t,options:n})=>CL(i,t,n)))}function IL(i){let e=BL(i),t=EM(),n=!0;const r=c=>(h,p)=>{var g;const y=gp(i,p,c==="exit"?(g=i.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(y){const{transition:v,transitionEnd:S,...w}=y;h={...h,...w,...S}}return h};function s(c){e=c(i)}function o(c){const{props:h}=i,p=JT(i.parent)||{},g=[],y=new Set;let v={},S=1/0;for(let M=0;M<PL;M++){const A=RL[M],C=t[A],b=h[A]!==void 0?h[A]:p[A],B=hp(b),N=A===c?C.isActive:null;N===!1&&(S=M);let F=b===p[A]&&b!==h[A]&&B;if(F&&n&&i.manuallyAnimateOnMount&&(F=!1),C.protectedKeys={...v},!C.isActive&&N===null||!b&&!C.prevProp||iv(b)||typeof b=="boolean")continue;const k=DL(C.prevProp,b);let z=k||A===c&&C.isActive&&!F&&B||M>S&&B,L=!1;const D=Array.isArray(b)?b:[b];let V=D.reduce(r(A),{});N===!1&&(V={});const{prevResolvedValues:oe={}}=C,ie={...oe,...V},ye=de=>{z=!0,y.has(de)&&(L=!0,y.delete(de)),C.needsAnimating[de]=!0;const W=i.getValue(de);W&&(W.liveStyle=!1)};for(const de in ie){const W=V[de],re=oe[de];if(v.hasOwnProperty(de))continue;let $=!1;zx(W)&&zx(re)?$=!XT(W,re):$=W!==re,$?W!=null?ye(de):y.add(de):W!==void 0&&y.has(de)?ye(de):C.protectedKeys[de]=!0}C.prevProp=b,C.prevResolvedValues=V,C.isActive&&(v={...v,...V}),n&&i.blockInitialAnimation&&(z=!1),z&&(!(F&&k)||L)&&g.push(...D.map(de=>({animation:de,options:{type:A}})))}if(y.size){const M={};if(typeof h.initial!="boolean"){const A=gp(i,Array.isArray(h.initial)?h.initial[0]:h.initial);A&&A.transition&&(M.transition=A.transition)}y.forEach(A=>{const C=i.getBaseTarget(A),b=i.getValue(A);b&&(b.liveStyle=!0),M[A]=C??null}),g.push({animation:M})}let w=!!g.length;return n&&(h.initial===!1||h.initial===h.animate)&&!i.manuallyAnimateOnMount&&(w=!1),n=!1,w?e(g):Promise.resolve()}function l(c,h){var p;if(t[c].isActive===h)return Promise.resolve();(p=i.variantChildren)===null||p===void 0||p.forEach(y=>{var v;return(v=y.animationState)===null||v===void 0?void 0:v.setActive(c,h)}),t[c].isActive=h;const g=o(c);for(const y in t)t[y].protectedKeys={};return g}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>t,reset:()=>{t=EM(),n=!0}}}function DL(i,e){return typeof e=="string"?e!==i:Array.isArray(e)?!XT(e,i):!1}function Bu(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function EM(){return{animate:Bu(!0),whileInView:Bu(),whileHover:Bu(),whileTap:Bu(),whileDrag:Bu(),whileFocus:Bu(),exit:Bu()}}class Gl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class LL extends Gl{constructor(e){super(e),e.animationState||(e.animationState=IL(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();iv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let FL=0;class NL extends Gl{constructor(){super(...arguments),this.id=FL++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const UL={animation:{Feature:LL},exit:{Feature:NL}};function xp(i,e,t,n={passive:!0}){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t)}function Op(i){return{point:{x:i.pageX,y:i.pageY}}}const OL=i=>e=>Y_(e)&&i(e,Op(e));function ep(i,e,t,n){return xp(i,e,OL(t),n)}const wM=(i,e)=>Math.abs(i-e);function kL(i,e){const t=wM(i.x,e.x),n=wM(i.y,e.y);return Math.sqrt(t**2+n**2)}class KT{constructor(e,t,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=b0(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,v=kL(g.offset,{x:0,y:0})>=3;if(!y&&!v)return;const{point:S}=g,{timestamp:w}=Ki;this.history.push({...S,timestamp:w});const{onStart:M,onMove:A}=this.handlers;y||(M&&M(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=C0(y,this.transformPagePoint),Fn.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:v,onSessionEnd:S,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=b0(g.type==="pointercancel"?this.lastMoveEventInfo:C0(y,this.transformPagePoint),this.history);this.startEvent&&v&&v(g,M),S&&S(g,M)},!Y_(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const o=Op(e),l=C0(o,this.transformPagePoint),{point:c}=l,{timestamp:h}=Ki;this.history=[{...c,timestamp:h}];const{onSessionStart:p}=t;p&&p(e,b0(l,this.history)),this.removeListeners=Up(ep(this.contextWindow,"pointermove",this.handlePointerMove),ep(this.contextWindow,"pointerup",this.handlePointerUp),ep(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ul(this.updatePoint)}}function C0(i,e){return e?{point:e(i.point)}:i}function TM(i,e){return{x:i.x-e.x,y:i.y-e.y}}function b0({point:i},e){return{point:i,delta:TM(i,YT(e)),offset:TM(i,HL(e)),velocity:zL(e,.1)}}function HL(i){return i[0]}function YT(i){return i[i.length-1]}function zL(i,e){if(i.length<2)return{x:0,y:0};let t=i.length-1,n=null;const r=YT(i);for(;t>=0&&(n=i[t],!(r.timestamp-n.timestamp>Fa(e)));)t--;if(!n)return{x:0,y:0};const s=Na(r.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-n.x)/s,y:(r.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const QT=1e-4,GL=1-QT,VL=1+QT,qT=.01,WL=0-qT,jL=0+qT;function Cr(i){return i.max-i.min}function XL(i,e,t){return Math.abs(i-e)<=t}function CM(i,e,t,n=.5){i.origin=n,i.originPoint=Jn(e.min,e.max,i.origin),i.scale=Cr(t)/Cr(e),i.translate=Jn(t.min,t.max,i.origin)-i.originPoint,(i.scale>=GL&&i.scale<=VL||isNaN(i.scale))&&(i.scale=1),(i.translate>=WL&&i.translate<=jL||isNaN(i.translate))&&(i.translate=0)}function tp(i,e,t,n){CM(i.x,e.x,t.x,n?n.originX:void 0),CM(i.y,e.y,t.y,n?n.originY:void 0)}function bM(i,e,t){i.min=t.min+e.min,i.max=i.min+Cr(e)}function JL(i,e,t){bM(i.x,e.x,t.x),bM(i.y,e.y,t.y)}function RM(i,e,t){i.min=e.min-t.min,i.max=i.min+Cr(e)}function np(i,e,t){RM(i.x,e.x,t.x),RM(i.y,e.y,t.y)}function KL(i,{min:e,max:t},n){return e!==void 0&&i<e?i=n?Jn(e,i,n.min):Math.max(i,e):t!==void 0&&i>t&&(i=n?Jn(t,i,n.max):Math.min(i,t)),i}function PM(i,e,t){return{min:e!==void 0?i.min+e:void 0,max:t!==void 0?i.max+t-(i.max-i.min):void 0}}function YL(i,{top:e,left:t,bottom:n,right:r}){return{x:PM(i.x,t,r),y:PM(i.y,e,n)}}function BM(i,e){let t=e.min-i.min,n=e.max-i.max;return e.max-e.min<i.max-i.min&&([t,n]=[n,t]),{min:t,max:n}}function QL(i,e){return{x:BM(i.x,e.x),y:BM(i.y,e.y)}}function qL(i,e){let t=.5;const n=Cr(i),r=Cr(e);return r>n?t=md(e.min,e.max-n,i.min):n>r&&(t=md(i.min,i.max-r,e.min)),Ha(0,1,t)}function ZL(i,e){const t={};return e.min!==void 0&&(t.min=e.min-i.min),e.max!==void 0&&(t.max=e.max-i.min),t}const Zx=.35;function $L(i=Zx){return i===!1?i=0:i===!0&&(i=Zx),{x:IM(i,"left","right"),y:IM(i,"top","bottom")}}function IM(i,e,t){return{min:DM(i,e),max:DM(i,t)}}function DM(i,e){return typeof i=="number"?i:i[e]||0}const LM=()=>({translate:0,scale:1,origin:0,originPoint:0}),sd=()=>({x:LM(),y:LM()}),FM=()=>({min:0,max:0}),oi=()=>({x:FM(),y:FM()});function Cs(i){return[i("x"),i("y")]}function ZT({top:i,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:i,max:n}}}function e2({x:i,y:e}){return{top:e.min,right:i.max,bottom:e.max,left:i.min}}function t2(i,e){if(!e)return i;const t=e({x:i.left,y:i.top}),n=e({x:i.right,y:i.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function R0(i){return i===void 0||i===1}function $x({scale:i,scaleX:e,scaleY:t}){return!R0(i)||!R0(e)||!R0(t)}function Ju(i){return $x(i)||$T(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function $T(i){return NM(i.x)||NM(i.y)}function NM(i){return i&&i!=="0%"}function cy(i,e,t){const n=i-t,r=e*n;return t+r}function UM(i,e,t,n,r){return r!==void 0&&(i=cy(i,r,n)),cy(i,t,n)+e}function e_(i,e=0,t=1,n,r){i.min=UM(i.min,e,t,n,r),i.max=UM(i.max,e,t,n,r)}function eC(i,{x:e,y:t}){e_(i.x,e.translate,e.scale,e.originPoint),e_(i.y,t.translate,t.scale,t.originPoint)}const OM=.999999999999,kM=1.0000000000001;function n2(i,e,t,n=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let l=0;l<r;l++){s=t[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ad(i,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,eC(i,o)),n&&Ju(s.latestValues)&&ad(i,s.latestValues))}e.x<kM&&e.x>OM&&(e.x=1),e.y<kM&&e.y>OM&&(e.y=1)}function od(i,e){i.min=i.min+e,i.max=i.max+e}function HM(i,e,t,n,r=.5){const s=Jn(i.min,i.max,r);e_(i,e,t,s,n)}function ad(i,e){HM(i.x,e.x,e.scaleX,e.scale,e.originX),HM(i.y,e.y,e.scaleY,e.scale,e.originY)}function tC(i,e){return ZT(t2(i.getBoundingClientRect(),e))}function i2(i,e,t){const n=tC(i,t),{scroll:r}=e;return r&&(od(n.x,r.offset.x),od(n.y,r.offset.y)),n}const nC=({current:i})=>i?i.ownerDocument.defaultView:null,r2=new WeakMap;class s2{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=oi(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Op(p).point)},s=(p,g)=>{const{drag:y,dragPropagation:v,onDragStart:S}=this.getProps();if(y&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=qI(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Cs(M=>{let A=this.getAxisMotionValue(M).get()||0;if(Io.test(A)){const{projection:C}=this.visualElement;if(C&&C.layout){const b=C.layout.layoutBox[M];b&&(A=Cr(b)*(parseFloat(A)/100))}}this.originPoint[M]=A}),S&&Fn.postRender(()=>S(p,g)),Wx(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(p,g)=>{const{dragPropagation:y,dragDirectionLock:v,onDirectionLock:S,onDrag:w}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:M}=g;if(v&&this.currentDirection===null){this.currentDirection=o2(M),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,M),this.updateAxis("y",g.point,M),this.visualElement.render(),w&&w(p,g)},l=(p,g)=>this.stop(p,g),c=()=>Cs(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new KT(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:nC(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Fn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Zm(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=KL(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&id(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=YL(r.layoutBox,t):this.constraints=!1,this.elastic=$L(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Cs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=ZL(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!id(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=i2(n,r.root,this.visualElement.getTransformPagePoint());let o=QL(r.layout.layoutBox,s);if(t){const l=t(e2(o));this.hasMutatedConstraints=!!l,l&&(o=ZT(l))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},h=Cs(p=>{if(!Zm(p,t,this.currentDirection))return;let g=c&&c[p]||{};o&&(g={min:0,max:0});const y=r?200:1e6,v=r?40:1e7,S={type:"inertia",velocity:n?e[p]:0,bounceStiffness:y,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(p,S)});return Promise.all(h).then(l)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Wx(this.visualElement,e),n.start(aA(e,n,0,t,this.visualElement,!1))}stopAnimation(){Cs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Cs(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Cs(t=>{const{drag:n}=this.getProps();if(!Zm(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[t];s.set(e[t]-Jn(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!id(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Cs(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();r[o]=qL({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Cs(o=>{if(!Zm(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:h}=this.constraints[o];l.set(Jn(c,h,r[o]))})}addListeners(){if(!this.visualElement.current)return;r2.set(this.visualElement,this);const e=this.visualElement.current,t=ep(e,"pointerdown",c=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();id(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Fn.read(n);const o=xp(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(Cs(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=c[p].translate,g.set(g.get()+c[p].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=Zx,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function Zm(i,e,t){return(e===!0||e===i)&&(t===null||t===i)}function o2(i,e=10){let t=null;return Math.abs(i.y)>e?t="y":Math.abs(i.x)>e&&(t="x"),t}class a2 extends Gl{constructor(e){super(e),this.removeGroupControls=ls,this.removeListeners=ls,this.controls=new s2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ls}unmount(){this.removeGroupControls(),this.removeListeners()}}const zM=i=>(e,t)=>{i&&Fn.postRender(()=>i(e,t))};class l2 extends Gl{constructor(){super(...arguments),this.removePointerDownListener=ls}onPointerDown(e){this.session=new KT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:zM(e),onStart:zM(t),onMove:n,onEnd:(s,o)=>{delete this.session,r&&Fn.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=ep(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $g={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function GM(i,e){return e.max===e.min?0:i/(e.max-e.min)*100}const Dh={correct:(i,e)=>{if(!e.target)return i;if(typeof i=="string")if(Ht.test(i))i=parseFloat(i);else return i;const t=GM(i,e.target.x),n=GM(i,e.target.y);return`${t}% ${n}%`}},u2={correct:(i,{treeScale:e,projectionDelta:t})=>{const n=i,r=Ol.parse(i);if(r.length>5)return n;const s=Ol.createTransformer(i),o=typeof r[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;r[0+o]/=l,r[1+o]/=c;const h=Jn(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=h),typeof r[3+o]=="number"&&(r[3+o]/=h),s(r)}};class c2 extends q.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;mI(f2),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),$g.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Fn.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),F_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function iC(i){const[e,t]=XB(),n=q.useContext(k1);return U.jsx(c2,{...i,layoutGroup:n,switchLayoutGroup:q.useContext(J1),isPresent:e,safeToRemove:t})}const f2={borderRadius:{...Dh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dh,borderTopRightRadius:Dh,borderBottomLeftRadius:Dh,borderBottomRightRadius:Dh,boxShadow:u2};function d2(i,e,t){const n=ur(i)?i:yp(i);return n.start(aA("",n,e,t)),n.animation}function h2(i){return i instanceof SVGElement&&i.tagName!=="svg"}const p2=(i,e)=>i.depth-e.depth;class m2{constructor(){this.children=[],this.isDirty=!1}add(e){Q_(this.children,e),this.isDirty=!0}remove(e){q_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(p2),this.isDirty=!1,this.children.forEach(e)}}function g2(i,e){const t=Do.now(),n=({timestamp:r})=>{const s=r-t;s>=e&&(Ul(n),i(s-e))};return Fn.read(n,!0),()=>Ul(n)}const rC=["TopLeft","TopRight","BottomLeft","BottomRight"],y2=rC.length,VM=i=>typeof i=="string"?parseFloat(i):i,WM=i=>typeof i=="number"||Ht.test(i);function v2(i,e,t,n,r,s){r?(i.opacity=Jn(0,t.opacity!==void 0?t.opacity:1,x2(n)),i.opacityExit=Jn(e.opacity!==void 0?e.opacity:1,0,_2(n))):s&&(i.opacity=Jn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,n));for(let o=0;o<y2;o++){const l=`border${rC[o]}Radius`;let c=jM(e,l),h=jM(t,l);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||WM(c)===WM(h)?(i[l]=Math.max(Jn(VM(c),VM(h),n),0),(Io.test(h)||Io.test(c))&&(i[l]+="%")):i[l]=h}(e.rotate||t.rotate)&&(i.rotate=Jn(e.rotate||0,t.rotate||0,n))}function jM(i,e){return i[e]!==void 0?i[e]:i.borderRadius}const x2=sC(0,.5,ST),_2=sC(.5,.95,ls);function sC(i,e,t){return n=>n<i?0:n>e?1:t(md(i,e,n))}function XM(i,e){i.min=e.min,i.max=e.max}function ws(i,e){XM(i.x,e.x),XM(i.y,e.y)}function JM(i,e){i.translate=e.translate,i.scale=e.scale,i.originPoint=e.originPoint,i.origin=e.origin}function KM(i,e,t,n,r){return i-=e,i=cy(i,1/t,n),r!==void 0&&(i=cy(i,1/r,n)),i}function A2(i,e=0,t=1,n=.5,r,s=i,o=i){if(Io.test(e)&&(e=parseFloat(e),e=Jn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Jn(s.min,s.max,n);i===s&&(l-=e),i.min=KM(i.min,e,t,l,r),i.max=KM(i.max,e,t,l,r)}function YM(i,e,[t,n,r],s,o){A2(i,e[t],e[n],e[r],e.scale,s,o)}const S2=["x","scaleX","originX"],M2=["y","scaleY","originY"];function QM(i,e,t,n){YM(i.x,e,S2,t?t.x:void 0,n?n.x:void 0),YM(i.y,e,M2,t?t.y:void 0,n?n.y:void 0)}function qM(i){return i.translate===0&&i.scale===1}function oC(i){return qM(i.x)&&qM(i.y)}function ZM(i,e){return i.min===e.min&&i.max===e.max}function E2(i,e){return ZM(i.x,e.x)&&ZM(i.y,e.y)}function $M(i,e){return Math.round(i.min)===Math.round(e.min)&&Math.round(i.max)===Math.round(e.max)}function aC(i,e){return $M(i.x,e.x)&&$M(i.y,e.y)}function eE(i){return Cr(i.x)/Cr(i.y)}function tE(i,e){return i.translate===e.translate&&i.scale===e.scale&&i.originPoint===e.originPoint}class w2{constructor(){this.members=[]}add(e){Q_(this.members,e),e.scheduleRender()}remove(e){if(q_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let n;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function T2(i,e,t){let n="";const r=i.x.translate/e.x,s=i.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(n=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:p,rotateX:g,rotateY:y,skewX:v,skewY:S}=t;h&&(n=`perspective(${h}px) ${n}`),p&&(n+=`rotate(${p}deg) `),g&&(n+=`rotateX(${g}deg) `),y&&(n+=`rotateY(${y}deg) `),v&&(n+=`skewX(${v}deg) `),S&&(n+=`skewY(${S}deg) `)}const l=i.x.scale*e.x,c=i.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const P0=["","X","Y","Z"],C2={visibility:"hidden"},nE=1e3;let b2=0;function B0(i,e,t,n){const{latestValues:r}=e;r[i]&&(t[i]=r[i],e.setStaticValue(i,0),n&&(n[i]=0))}function lC(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:e}=i.options;if(!e)return;const t=mT(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=i.options;window.MotionCancelOptimisedAnimation(t,"transform",Fn,!(r||s))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&lC(n)}function uC({attachResizeListener:i,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(o={},l=e==null?void 0:e()){this.id=b2++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(B2),this.nodes.forEach(N2),this.nodes.forEach(U2),this.nodes.forEach(I2)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new m2)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Z_),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=h2(o),this.instance=o;const{layoutId:c,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(h||c)&&(this.isLayoutDirty=!0),i){let g;const y=()=>this.root.updateBlockedByResize=!1;i(o,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=g2(y,250),$g.hasAnimatedSinceResize&&($g.hasAnimatedSinceResize=!1,this.nodes.forEach(rE))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||p.getDefaultTransition()||G2,{onLayoutAnimationStart:M,onLayoutAnimationComplete:A}=p.getProps(),C=!this.targetLayout||!aC(this.targetLayout,S),b=!y&&v;if(this.options.layoutRoot||this.resumeFrom||b||y&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,b);const B={...X_(w,"layout"),onPlay:M,onComplete:A};(p.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else y||rE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ul(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(O2),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iE);return}this.isUpdating||this.nodes.forEach(L2),this.isUpdating=!1,this.nodes.forEach(F2),this.nodes.forEach(R2),this.nodes.forEach(P2),this.clearAllSnapshots();const l=Do.now();Ki.delta=Ha(0,1e3/60,l-Ki.timestamp),Ki.timestamp=l,Ki.isProcessing=!0,S0.update.process(Ki),S0.preRender.process(Ki),S0.render.process(Ki),Ki.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,F_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(D2),this.sharedNodes.forEach(k2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Cr(this.snapshot.measuredBox.x)&&!Cr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=oi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!oC(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;o&&(l||Ju(this.latestValues)||p)&&(r(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),V2(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return oi();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(W2))){const{scroll:p}=this.root;p&&(od(c.x,p.offset.x),od(c.y,p.offset.y))}return c}removeElementScroll(o){var l;const c=oi();if(ws(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:g,options:y}=p;p!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&ws(c,o),od(c.x,g.offset.x),od(c.y,g.offset.y))}return c}applyTransform(o,l=!1){const c=oi();ws(c,o);for(let h=0;h<this.path.length;h++){const p=this.path[h];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&ad(c,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Ju(p.latestValues)&&ad(c,p.latestValues)}return Ju(this.latestValues)&&ad(c,this.latestValues),c}removeTransform(o){const l=oi();ws(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!Ju(h.latestValues))continue;$x(h.latestValues)&&h.updateSnapshot();const p=oi(),g=h.measurePageBox();ws(p,g),QM(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return Ju(this.latestValues)&&QM(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ki.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=Ki.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=oi(),this.relativeTargetOrigin=oi(),np(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=oi(),this.targetWithTransforms=oi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ws(this.target,this.layout.layoutBox),eC(this.target,this.targetDelta)):ws(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=oi(),this.relativeTargetOrigin=oi(),np(this.relativeTargetOrigin,this.target,v.target),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$x(this.parent.latestValues)||$T(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Ki.timestamp&&(h=!1),h)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;ws(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;n2(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=oi());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(JM(this.prevProjectionDelta.x,this.projectionDelta.x),JM(this.prevProjectionDelta.y,this.projectionDelta.y)),tp(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!tE(this.projectionDelta.x,this.prevProjectionDelta.x)||!tE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sd(),this.projectionDelta=sd(),this.projectionDeltaWithTransform=sd()}setAnimationOrigin(o,l=!1){const c=this.snapshot,h=c?c.latestValues:{},p={...this.latestValues},g=sd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=oi(),v=c?c.source:void 0,S=this.layout?this.layout.source:void 0,w=v!==S,M=this.getStack(),A=!M||M.members.length<=1,C=!!(w&&!A&&this.options.crossfade===!0&&!this.path.some(z2));this.animationProgress=0;let b;this.mixTargetDelta=B=>{const N=B/1e3;sE(g.x,o.x,N),sE(g.y,o.y,N),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(np(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),H2(this.relativeTarget,this.relativeTargetOrigin,y,N),b&&E2(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=oi()),ws(b,this.relativeTarget)),w&&(this.animationValues=p,v2(p,h,this.latestValues,N,C,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ul(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fn.update(()=>{$g.hasAnimatedSinceResize=!0,this.currentAnimation=d2(0,nE,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:h,latestValues:p}=o;if(!(!l||!c||!h)){if(this!==o&&this.layout&&h&&cC(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||oi();const g=Cr(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+g;const y=Cr(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+y}ws(l,c),ad(l,p),tp(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new w2),this.sharedNodes.get(o).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const h={};c.z&&B0("z",o,h,this.animationValues);for(let p=0;p<P0.length;p++)B0(`rotate${P0[p]}`,o,h,this.animationValues),B0(`skew${P0[p]}`,o,h,this.animationValues);o.render();for(const p in h)o.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return C2;const h={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=qg(o==null?void 0:o.pointerEvents)||"",h.transform=p?p(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=qg(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ju(this.latestValues)&&(w.transform=p?p({},""):"none",this.hasProjected=!1),w}const y=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=T2(this.projectionDeltaWithTransform,this.treeScale,y),p&&(h.transform=p(y,h.transform));const{x:v,y:S}=this.projectionDelta;h.transformOrigin=`${v.origin*100}% ${S.origin*100}% 0`,g.animationValues?h.opacity=g===this?(c=(l=y.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:h.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const w in pp){if(y[w]===void 0)continue;const{correct:M,applyTo:A,isCSSVariable:C}=pp[w],b=h.transform==="none"?y[w]:M(y[w],g);if(A){const B=A.length;for(let N=0;N<B;N++)h[A[N]]=b}else C?this.options.visualElement.renderState.vars[w]=b:h[w]=b}return this.options.layoutId&&(h.pointerEvents=g===this?qg(o==null?void 0:o.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(iE),this.root.sharedNodes.clear()}}}function R2(i){i.updateLayout()}function P2(i){var e;const t=((e=i.resumeFrom)===null||e===void 0?void 0:e.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&t&&i.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=i.layout,{animationType:s}=i.options,o=t.source!==i.layout.source;s==="size"?Cs(g=>{const y=o?t.measuredBox[g]:t.layoutBox[g],v=Cr(y);y.min=n[g].min,y.max=y.min+v}):cC(s,t.layoutBox,n)&&Cs(g=>{const y=o?t.measuredBox[g]:t.layoutBox[g],v=Cr(n[g]);y.max=y.min+v,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[g].max=i.relativeTarget[g].min+v)});const l=sd();tp(l,n,t.layoutBox);const c=sd();o?tp(c,i.applyTransform(r,!0),t.measuredBox):tp(c,n,t.layoutBox);const h=!oC(l);let p=!1;if(!i.resumeFrom){const g=i.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:v}=g;if(y&&v){const S=oi();np(S,t.layoutBox,y.layoutBox);const w=oi();np(w,n,v.layoutBox),aC(S,w)||(p=!0),g.options.layoutRoot&&(i.relativeTarget=w,i.relativeTargetOrigin=S,i.relativeParent=g)}}}i.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(i.isLead()){const{onExitComplete:n}=i.options;n&&n()}i.options.transition=void 0}function B2(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function I2(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function D2(i){i.clearSnapshot()}function iE(i){i.clearMeasurements()}function L2(i){i.isLayoutDirty=!1}function F2(i){const{visualElement:e}=i.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),i.resetTransform()}function rE(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function N2(i){i.resolveTargetDelta()}function U2(i){i.calcProjection()}function O2(i){i.resetSkewAndRotation()}function k2(i){i.removeLeadSnapshot()}function sE(i,e,t){i.translate=Jn(e.translate,0,t),i.scale=Jn(e.scale,1,t),i.origin=e.origin,i.originPoint=e.originPoint}function oE(i,e,t,n){i.min=Jn(e.min,t.min,n),i.max=Jn(e.max,t.max,n)}function H2(i,e,t,n){oE(i.x,e.x,t.x,n),oE(i.y,e.y,t.y,n)}function z2(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const G2={duration:.45,ease:[.4,0,.1,1]},aE=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),lE=aE("applewebkit/")&&!aE("chrome/")?Math.round:ls;function uE(i){i.min=lE(i.min),i.max=lE(i.max)}function V2(i){uE(i.x),uE(i.y)}function cC(i,e,t){return i==="position"||i==="preserve-aspect"&&!XL(eE(e),eE(t),.2)}function W2(i){var e;return i!==i.root&&((e=i.scroll)===null||e===void 0?void 0:e.wasRoot)}const j2=uC({attachResizeListener:(i,e)=>xp(i,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),I0={current:void 0},fC=uC({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!I0.current){const i=new j2({});i.mount(window),i.setOptions({layoutScroll:!0}),I0.current=i}return I0.current},resetTransform:(i,e)=>{i.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),X2={pan:{Feature:l2},drag:{Feature:a2,ProjectionNode:fC,MeasureLayout:iC}};function cE(i,e,t){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=n[r];s&&Fn.postRender(()=>s(e,Op(e)))}class J2 extends Gl{mount(){const{current:e}=this.node;e&&(this.unmount=XI(e,(t,n)=>(cE(this.node,n,"Start"),r=>cE(this.node,r,"End"))))}unmount(){}}class K2 extends Gl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Up(xp(this.node.current,"focus",()=>this.onFocus()),xp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function fE(i,e,t){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=n[r];s&&Fn.postRender(()=>s(e,Op(e)))}class Y2 extends Gl{mount(){const{current:e}=this.node;e&&(this.unmount=QI(e,(t,n)=>(fE(this.node,n,"Start"),(r,{success:s})=>fE(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const t_=new WeakMap,D0=new WeakMap,Q2=i=>{const e=t_.get(i.target);e&&e(i)},q2=i=>{i.forEach(Q2)};function Z2({root:i,...e}){const t=i||document;D0.has(t)||D0.set(t,{});const n=D0.get(t),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(q2,{root:i,...e})),n[r]}function $2(i,e,t){const n=Z2(e);return t_.set(i,t),n.observe(i),()=>{t_.delete(i),n.unobserve(i)}}const eF={some:0,all:1};class tF extends Gl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:eF[r]},l=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=h?p:g;y&&y(c)};return $2(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(nF(e,t))&&this.startObserver()}unmount(){}}function nF({viewport:i={}},{viewport:e={}}={}){return t=>i[t]!==e[t]}const iF={inView:{Feature:tF},tap:{Feature:Y2},focus:{Feature:K2},hover:{Feature:J2}},rF={layout:{ProjectionNode:fC,MeasureLayout:iC}},n_={current:null},dC={current:!1};function sF(){if(dC.current=!0,!!P_)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),e=()=>n_.current=i.matches;i.addListener(e),e()}else n_.current=!1}const oF=[...NT,lr,Ol],aF=i=>oF.find(FT(i)),lF=new WeakMap;function uF(i,e,t){for(const n in e){const r=e[n],s=t[n];if(ur(r))i.addValue(n,r);else if(ur(s))i.addValue(n,yp(r,{owner:i}));else if(s!==r)if(i.hasValue(n)){const o=i.getValue(n);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=i.getStaticValue(n);i.addValue(n,yp(o!==void 0?o:r,{owner:i}))}}for(const n in t)e[n]===void 0&&i.removeValue(n);return e}const dE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class cF{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=rA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Do.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Fn.render(this.render,!1,!0))};const{latestValues:c,renderState:h,onUpdate:p}=o;this.onUpdate=p,this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=rv(t),this.isVariantNode=j1(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in y){const S=y[v];c[v]!==void 0&&ur(S)&&S.set(c[v],!1)}}mount(e){this.current=e,lF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),dC.current||sF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:n_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ul(this.notifyUpdate),Ul(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Mc.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Fn.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gd){const t=gd[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):oi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<dE.length;n++){const r=dE[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=uF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=yp(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(DT(r)||ET(r))?r=parseFloat(r):!aF(r)&&Ol.test(t)&&(r=PT(e,t)),this.setBaseTarget(e,ur(r)?r.get():r)),ur(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=W_(this.props,n,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ur(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Z_),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class hC extends cF{constructor(){super(...arguments),this.KeyframeResolver=UT}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ur(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function fF(i){return window.getComputedStyle(i)}class dF extends hC{constructor(){super(...arguments),this.type="html",this.renderInstance=nT}readValueFromInstance(e,t){if(Mc.has(t)){const n=iA(t);return n&&n.default||0}else{const n=fF(e),r=(N_(t)?n.getPropertyValue(t):n[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return tC(e,t)}build(e,t,n){k_(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return j_(e,t,n)}}class hF extends hC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=oi,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&tT(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Mc.has(t)){const n=iA(t);return n&&n.default||0}return t=iT.has(t)?t:L_(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return sT(e,t,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&Fn.postRender(this.updateDimensions)}build(e,t,n){G_(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,r){rT(e,t,n,r)}mount(e){this.isSVGTag=V_(e.tagName),super.mount(e)}}const pF=(i,e)=>z_(i)?new hF(e):new dF(e,{allowProjection:i!==q.Fragment}),mF=kI({...UL,...iF,...X2,...rF},pF),Ll=tI(mF);function fy(){return fy=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},fy.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const kp="173",Ku={ROTATE:0,DOLLY:1,PAN:2},Yu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},pC=0,i_=1,mC=2,gF=3,gC=0,ov=1,ip=2,ao=3,Oo=0,br=1,Ps=2,Ua=0,lc=1,r_=2,s_=3,o_=4,yC=5,Dl=100,vC=101,xC=102,_C=103,AC=104,SC=200,MC=201,EC=202,wC=203,dy=204,hy=205,TC=206,CC=207,bC=208,RC=209,PC=210,BC=211,IC=212,DC=213,LC=214,py=0,my=1,gy=2,hc=3,yy=4,vy=5,xy=6,_y=7,Hp=0,FC=1,NC=2,Lo=0,UC=1,OC=2,kC=3,lA=4,HC=5,zC=6,GC=7,a_="attached",VC="detached",av=300,za=301,kl=302,_p=303,Ap=304,Pd=306,Hl=1e3,os=1001,vd=1002,Ui=1003,lv=1004,yF=1004,ec=1005,vF=1005,ai=1006,dd=1007,xF=1007,Bs=1008,_F=1008,fo=1009,uA=1010,cA=1011,xd=1012,uv=1013,Ga=1014,jr=1015,Bd=1016,cv=1017,fv=1018,pc=1020,fA=35902,dA=1021,hA=1022,cr=1023,pA=1024,mA=1025,uc=1026,mc=1027,dv=1028,zp=1029,gA=1030,hv=1031,AF=1032,pv=1033,rp=33776,sp=33777,op=33778,ap=33779,Ay=35840,Sy=35841,My=35842,Ey=35843,wy=36196,Ty=37492,Cy=37496,by=37808,Ry=37809,Py=37810,By=37811,Iy=37812,Dy=37813,Ly=37814,Fy=37815,Ny=37816,Uy=37817,Oy=37818,ky=37819,Hy=37820,zy=37821,lp=36492,Gy=36494,Vy=36495,yA=36283,Wy=36284,jy=36285,Xy=36286,WC=2200,jC=2201,XC=2202,_d=2300,Ad=2301,ey=2302,tc=2400,nc=2401,Sp=2402,mv=2500,vA=2501,JC=0,xA=1,Jy=2,KC=3200,YC=3201,SF=3202,MF=3203,Vl=0,QC=1,Pa="",Vr="srgb",gc="srgb-linear",Mp="linear",wn="srgb",EF=0,Qu=7680,wF=7681,TF=7682,CF=7683,bF=34055,RF=34056,PF=5386,BF=512,IF=513,DF=514,LF=515,FF=516,NF=517,UF=518,l_=519,qC=512,ZC=513,$C=514,_A=515,eb=516,tb=517,nb=518,ib=519,Ep=35044,OF=35048,kF=35040,HF=35045,zF=35049,GF=35041,VF=35046,WF=35050,jF=35042,XF="100",u_="300 es",uo=2e3,wp=2001,JF={COMPUTE:"compute",RENDER:"render"};let zo=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const sr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let hE=1234567;const cc=Math.PI/180,Sd=180/Math.PI;function us(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(sr[i&255]+sr[i>>8&255]+sr[i>>16&255]+sr[i>>24&255]+"-"+sr[e&255]+sr[e>>8&255]+"-"+sr[e>>16&15|64]+sr[e>>24&255]+"-"+sr[t&63|128]+sr[t>>8&255]+"-"+sr[t>>16&255]+sr[t>>24&255]+sr[n&255]+sr[n>>8&255]+sr[n>>16&255]+sr[n>>24&255]).toLowerCase()}function Xt(i,e,t){return Math.max(e,Math.min(t,i))}function AA(i,e){return(i%e+e)%e}function KF(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function YF(i,e,t){return i!==e?(t-i)/(e-i):0}function up(i,e,t){return(1-t)*i+t*e}function QF(i,e,t,n){return up(i,e,1-Math.exp(-t*n))}function qF(i,e=1){return e-Math.abs(AA(i,e*2)-e)}function ZF(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function $F(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function eN(i,e){return i+Math.floor(Math.random()*(e-i+1))}function tN(i,e){return i+Math.random()*(e-i)}function nN(i){return i*(.5-Math.random())}function iN(i){i!==void 0&&(hE=i);let e=hE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function rN(i){return i*cc}function sN(i){return i*Sd}function oN(i){return(i&i-1)===0&&i!==0}function aN(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function lN(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function uN(i,e,t,n,r){const s=Math.cos,o=Math.sin,l=s(t/2),c=o(t/2),h=s((e+n)/2),p=o((e+n)/2),g=s((e-n)/2),y=o((e-n)/2),v=s((n-e)/2),S=o((n-e)/2);switch(r){case"XYX":i.set(l*p,c*g,c*y,l*h);break;case"YZY":i.set(c*y,l*p,c*g,l*h);break;case"ZXZ":i.set(c*g,c*y,l*p,l*h);break;case"XZX":i.set(l*p,c*S,c*v,l*h);break;case"YXY":i.set(c*v,l*p,c*S,l*h);break;case"ZYZ":i.set(c*S,c*v,l*p,l*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Tr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function $t(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const rb={DEG2RAD:cc,RAD2DEG:Sd,generateUUID:us,clamp:Xt,euclideanModulo:AA,mapLinear:KF,inverseLerp:YF,lerp:up,damp:QF,pingpong:qF,smoothstep:ZF,smootherstep:$F,randInt:eN,randFloat:tN,randFloatSpread:nN,seededRandom:iN,degToRad:rN,radToDeg:sN,isPowerOfTwo:oN,ceilPowerOfTwo:aN,floorPowerOfTwo:lN,setQuaternionFromProperEuler:uN,normalize:$t,denormalize:Tr};class Ie{constructor(e=0,t=0){Ie.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Xt(this.x,e.x,t.x),this.y=Xt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Xt(this.x,e,t),this.y=Xt(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Xt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Xt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Kt{constructor(e,t,n,r,s,o,l,c,h){Kt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,l,c,h)}set(e,t,n,r,s,o,l,c,h){const p=this.elements;return p[0]=e,p[1]=r,p[2]=l,p[3]=t,p[4]=s,p[5]=c,p[6]=n,p[7]=o,p[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],l=n[3],c=n[6],h=n[1],p=n[4],g=n[7],y=n[2],v=n[5],S=n[8],w=r[0],M=r[3],A=r[6],C=r[1],b=r[4],B=r[7],N=r[2],F=r[5],k=r[8];return s[0]=o*w+l*C+c*N,s[3]=o*M+l*b+c*F,s[6]=o*A+l*B+c*k,s[1]=h*w+p*C+g*N,s[4]=h*M+p*b+g*F,s[7]=h*A+p*B+g*k,s[2]=y*w+v*C+S*N,s[5]=y*M+v*b+S*F,s[8]=y*A+v*B+S*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],h=e[7],p=e[8];return t*o*p-t*l*h-n*s*p+n*l*c+r*s*h-r*o*c}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],h=e[7],p=e[8],g=p*o-l*h,y=l*c-p*s,v=h*s-o*c,S=t*g+n*y+r*v;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/S;return e[0]=g*w,e[1]=(r*h-p*n)*w,e[2]=(l*n-r*o)*w,e[3]=y*w,e[4]=(p*t-r*c)*w,e[5]=(r*s-l*t)*w,e[6]=v*w,e[7]=(n*c-h*t)*w,e[8]=(o*t-n*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,l){const c=Math.cos(s),h=Math.sin(s);return this.set(n*c,n*h,-n*(c*o+h*l)+o+e,-r*h,r*c,-r*(-h*o+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(L0.makeScale(e,t)),this}rotate(e){return this.premultiply(L0.makeRotation(-e)),this}translate(e,t){return this.premultiply(L0.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const L0=new Kt;function sb(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const cN={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ld(i,e){return new cN[i](e)}function Tp(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function ob(){const i=Tp("canvas");return i.style.display="block",i}const pE={};function ed(i){i in pE||(pE[i]=!0,console.warn(i))}function fN(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function dN(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function hN(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const mE=new Kt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),gE=new Kt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function pN(){const i={enabled:!0,workingColorSpace:gc,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===wn&&(r.r=Oa(r.r),r.g=Oa(r.g),r.b=Oa(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===wn&&(r.r=hd(r.r),r.g=hd(r.g),r.b=hd(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Pa?Mp:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[gc]:{primaries:e,whitePoint:n,transfer:Mp,toXYZ:mE,fromXYZ:gE,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Vr},outputColorSpaceConfig:{drawingBufferColorSpace:Vr}},[Vr]:{primaries:e,whitePoint:n,transfer:wn,toXYZ:mE,fromXYZ:gE,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Vr}}}),i}const yn=pN();function Oa(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function hd(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Lf;class ab{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Lf===void 0&&(Lf=Tp("canvas")),Lf.width=e.width,Lf.height=e.height;const n=Lf.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Lf}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Tp("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Oa(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Oa(t[n]/255)*255):t[n]=Oa(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let mN=0;class ic{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:mN++}),this.uuid=us(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)r[o].isDataTexture?s.push(F0(r[o].image)):s.push(F0(r[o]))}else s=F0(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function F0(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?ab.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let gN=0;class Gn extends zo{constructor(e=Gn.DEFAULT_IMAGE,t=Gn.DEFAULT_MAPPING,n=os,r=os,s=ai,o=Bs,l=cr,c=fo,h=Gn.DEFAULT_ANISOTROPY,p=Pa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:gN++}),this.uuid=us(),this.name="",this.source=new ic(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Ie(0,0),this.repeat=new Ie(1,1),this.center=new Ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==av)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Hl:e.x=e.x-Math.floor(e.x);break;case os:e.x=e.x<0?0:1;break;case vd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Hl:e.y=e.y-Math.floor(e.y);break;case os:e.y=e.y<0?0:1;break;case vd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Gn.DEFAULT_IMAGE=null;Gn.DEFAULT_MAPPING=av;Gn.DEFAULT_ANISOTROPY=1;class xn{constructor(e=0,t=0,n=0,r=1){xn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const c=e.elements,h=c[0],p=c[4],g=c[8],y=c[1],v=c[5],S=c[9],w=c[2],M=c[6],A=c[10];if(Math.abs(p-y)<.01&&Math.abs(g-w)<.01&&Math.abs(S-M)<.01){if(Math.abs(p+y)<.1&&Math.abs(g+w)<.1&&Math.abs(S+M)<.1&&Math.abs(h+v+A-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(h+1)/2,B=(v+1)/2,N=(A+1)/2,F=(p+y)/4,k=(g+w)/4,z=(S+M)/4;return b>B&&b>N?b<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(b),r=F/n,s=k/n):B>N?B<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(B),n=F/r,s=z/r):N<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(N),n=k/s,r=z/s),this.set(n,r,s,t),this}let C=Math.sqrt((M-S)*(M-S)+(g-w)*(g-w)+(y-p)*(y-p));return Math.abs(C)<.001&&(C=1),this.x=(M-S)/C,this.y=(g-w)/C,this.z=(y-p)/C,this.w=Math.acos((h+v+A-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Xt(this.x,e.x,t.x),this.y=Xt(this.y,e.y,t.y),this.z=Xt(this.z,e.z,t.z),this.w=Xt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Xt(this.x,e,t),this.y=Xt(this.y,e,t),this.z=Xt(this.z,e,t),this.w=Xt(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Xt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class gv extends zo{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new xn(0,0,e,t),this.scissorTest=!1,this.viewport=new xn(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ai,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new Gn(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let l=0;l<o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new ic(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ko extends gv{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Gp extends Gn{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ui,this.minFilter=Ui,this.wrapR=os,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class yN extends ko{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Gp(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class yv extends Gn{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ui,this.minFilter=Ui,this.wrapR=os,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class vN extends ko{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new yv(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Oi{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,l){let c=n[r+0],h=n[r+1],p=n[r+2],g=n[r+3];const y=s[o+0],v=s[o+1],S=s[o+2],w=s[o+3];if(l===0){e[t+0]=c,e[t+1]=h,e[t+2]=p,e[t+3]=g;return}if(l===1){e[t+0]=y,e[t+1]=v,e[t+2]=S,e[t+3]=w;return}if(g!==w||c!==y||h!==v||p!==S){let M=1-l;const A=c*y+h*v+p*S+g*w,C=A>=0?1:-1,b=1-A*A;if(b>Number.EPSILON){const N=Math.sqrt(b),F=Math.atan2(N,A*C);M=Math.sin(M*F)/N,l=Math.sin(l*F)/N}const B=l*C;if(c=c*M+y*B,h=h*M+v*B,p=p*M+S*B,g=g*M+w*B,M===1-l){const N=1/Math.sqrt(c*c+h*h+p*p+g*g);c*=N,h*=N,p*=N,g*=N}}e[t]=c,e[t+1]=h,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,r,s,o){const l=n[r],c=n[r+1],h=n[r+2],p=n[r+3],g=s[o],y=s[o+1],v=s[o+2],S=s[o+3];return e[t]=l*S+p*g+c*v-h*y,e[t+1]=c*S+p*y+h*g-l*v,e[t+2]=h*S+p*v+l*y-c*g,e[t+3]=p*S-l*g-c*y-h*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,c=Math.sin,h=l(n/2),p=l(r/2),g=l(s/2),y=c(n/2),v=c(r/2),S=c(s/2);switch(o){case"XYZ":this._x=y*p*g+h*v*S,this._y=h*v*g-y*p*S,this._z=h*p*S+y*v*g,this._w=h*p*g-y*v*S;break;case"YXZ":this._x=y*p*g+h*v*S,this._y=h*v*g-y*p*S,this._z=h*p*S-y*v*g,this._w=h*p*g+y*v*S;break;case"ZXY":this._x=y*p*g-h*v*S,this._y=h*v*g+y*p*S,this._z=h*p*S+y*v*g,this._w=h*p*g-y*v*S;break;case"ZYX":this._x=y*p*g-h*v*S,this._y=h*v*g+y*p*S,this._z=h*p*S-y*v*g,this._w=h*p*g+y*v*S;break;case"YZX":this._x=y*p*g+h*v*S,this._y=h*v*g+y*p*S,this._z=h*p*S-y*v*g,this._w=h*p*g-y*v*S;break;case"XZY":this._x=y*p*g-h*v*S,this._y=h*v*g-y*p*S,this._z=h*p*S+y*v*g,this._w=h*p*g+y*v*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],l=t[5],c=t[9],h=t[2],p=t[6],g=t[10],y=n+l+g;if(y>0){const v=.5/Math.sqrt(y+1);this._w=.25/v,this._x=(p-c)*v,this._y=(s-h)*v,this._z=(o-r)*v}else if(n>l&&n>g){const v=2*Math.sqrt(1+n-l-g);this._w=(p-c)/v,this._x=.25*v,this._y=(r+o)/v,this._z=(s+h)/v}else if(l>g){const v=2*Math.sqrt(1+l-n-g);this._w=(s-h)/v,this._x=(r+o)/v,this._y=.25*v,this._z=(c+p)/v}else{const v=2*Math.sqrt(1+g-n-l);this._w=(o-r)/v,this._x=(s+h)/v,this._y=(c+p)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Xt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,l=t._x,c=t._y,h=t._z,p=t._w;return this._x=n*p+o*l+r*h-s*c,this._y=r*p+o*c+s*l-n*h,this._z=s*p+o*h+n*c-r*l,this._w=o*p-n*l-r*c-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+n*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const v=1-t;return this._w=v*o+t*this._w,this._x=v*n+t*this._x,this._y=v*r+t*this._y,this._z=v*s+t*this._z,this.normalize(),this}const h=Math.sqrt(c),p=Math.atan2(h,l),g=Math.sin((1-t)*p)/h,y=Math.sin(t*p)/h;return this._w=o*g+this._w*y,this._x=n*g+this._x*y,this._y=r*g+this._y*y,this._z=s*g+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,n=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(yE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(yE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,l=e.z,c=e.w,h=2*(o*r-l*n),p=2*(l*t-s*r),g=2*(s*n-o*t);return this.x=t+c*h+o*g-l*p,this.y=n+c*p+l*h-s*g,this.z=r+c*g+s*p-o*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Xt(this.x,e.x,t.x),this.y=Xt(this.y,e.y,t.y),this.z=Xt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Xt(this.x,e,t),this.y=Xt(this.y,e,t),this.z=Xt(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Xt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,l=t.y,c=t.z;return this.x=r*c-s*l,this.y=s*o-n*c,this.z=n*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return N0.copy(this).projectOnVector(e),this.sub(N0)}reflect(e){return this.sub(N0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Xt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const N0=new j,yE=new Oi;class fr{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(io.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(io.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=io.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,io):io.fromBufferAttribute(s,o),io.applyMatrix4(e.matrixWorld),this.expandByPoint(io);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),$m.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),$m.copy(n.boundingBox)),$m.applyMatrix4(e.matrixWorld),this.union($m)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,io),io.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Lh),eg.subVectors(this.max,Lh),Ff.subVectors(e.a,Lh),Nf.subVectors(e.b,Lh),Uf.subVectors(e.c,Lh),Ml.subVectors(Nf,Ff),El.subVectors(Uf,Nf),Iu.subVectors(Ff,Uf);let t=[0,-Ml.z,Ml.y,0,-El.z,El.y,0,-Iu.z,Iu.y,Ml.z,0,-Ml.x,El.z,0,-El.x,Iu.z,0,-Iu.x,-Ml.y,Ml.x,0,-El.y,El.x,0,-Iu.y,Iu.x,0];return!U0(t,Ff,Nf,Uf,eg)||(t=[1,0,0,0,1,0,0,0,1],!U0(t,Ff,Nf,Uf,eg))?!1:(tg.crossVectors(Ml,El),t=[tg.x,tg.y,tg.z],U0(t,Ff,Nf,Uf,eg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,io).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(io).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Aa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Aa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Aa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Aa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Aa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Aa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Aa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Aa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Aa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Aa=[new j,new j,new j,new j,new j,new j,new j,new j],io=new j,$m=new fr,Ff=new j,Nf=new j,Uf=new j,Ml=new j,El=new j,Iu=new j,Lh=new j,eg=new j,tg=new j,Du=new j;function U0(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Du.fromArray(i,s);const l=r.x*Math.abs(Du.x)+r.y*Math.abs(Du.y)+r.z*Math.abs(Du.z),c=e.dot(Du),h=t.dot(Du),p=n.dot(Du);if(Math.max(-Math.max(c,h,p),Math.min(c,h,p))>l)return!1}return!0}const xN=new fr,Fh=new j,O0=new j;class Qi{constructor(e=new j,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):xN.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Fh.subVectors(e,this.center);const t=Fh.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(Fh,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(O0.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Fh.copy(e.center).add(O0)),this.expandByPoint(Fh.copy(e.center).sub(O0))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Sa=new j,k0=new j,ng=new j,wl=new j,H0=new j,ig=new j,z0=new j;class Ec{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Sa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Sa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Sa.copy(this.origin).addScaledVector(this.direction,t),Sa.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){k0.copy(e).add(t).multiplyScalar(.5),ng.copy(t).sub(e).normalize(),wl.copy(this.origin).sub(k0);const s=e.distanceTo(t)*.5,o=-this.direction.dot(ng),l=wl.dot(this.direction),c=-wl.dot(ng),h=wl.lengthSq(),p=Math.abs(1-o*o);let g,y,v,S;if(p>0)if(g=o*c-l,y=o*l-c,S=s*p,g>=0)if(y>=-S)if(y<=S){const w=1/p;g*=w,y*=w,v=g*(g+o*y+2*l)+y*(o*g+y+2*c)+h}else y=s,g=Math.max(0,-(o*y+l)),v=-g*g+y*(y+2*c)+h;else y=-s,g=Math.max(0,-(o*y+l)),v=-g*g+y*(y+2*c)+h;else y<=-S?(g=Math.max(0,-(-o*s+l)),y=g>0?-s:Math.min(Math.max(-s,-c),s),v=-g*g+y*(y+2*c)+h):y<=S?(g=0,y=Math.min(Math.max(-s,-c),s),v=y*(y+2*c)+h):(g=Math.max(0,-(o*s+l)),y=g>0?s:Math.min(Math.max(-s,-c),s),v=-g*g+y*(y+2*c)+h);else y=o>0?-s:s,g=Math.max(0,-(o*y+l)),v=-g*g+y*(y+2*c)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(k0).addScaledVector(ng,y),v}intersectSphere(e,t){Sa.subVectors(e.center,this.origin);const n=Sa.dot(this.direction),r=Sa.dot(Sa)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=n-o,c=n+o;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,l,c;const h=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,y=this.origin;return h>=0?(n=(e.min.x-y.x)*h,r=(e.max.x-y.x)*h):(n=(e.max.x-y.x)*h,r=(e.min.x-y.x)*h),p>=0?(s=(e.min.y-y.y)*p,o=(e.max.y-y.y)*p):(s=(e.max.y-y.y)*p,o=(e.min.y-y.y)*p),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),g>=0?(l=(e.min.z-y.z)*g,c=(e.max.z-y.z)*g):(l=(e.max.z-y.z)*g,c=(e.min.z-y.z)*g),n>c||l>r)||((l>n||n!==n)&&(n=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Sa)!==null}intersectTriangle(e,t,n,r,s){H0.subVectors(t,e),ig.subVectors(n,e),z0.crossVectors(H0,ig);let o=this.direction.dot(z0),l;if(o>0){if(r)return null;l=1}else if(o<0)l=-1,o=-o;else return null;wl.subVectors(this.origin,e);const c=l*this.direction.dot(ig.crossVectors(wl,ig));if(c<0)return null;const h=l*this.direction.dot(H0.cross(wl));if(h<0||c+h>o)return null;const p=-l*wl.dot(z0);return p<0?null:this.at(p/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ot{constructor(e,t,n,r,s,o,l,c,h,p,g,y,v,S,w,M){Ot.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,l,c,h,p,g,y,v,S,w,M)}set(e,t,n,r,s,o,l,c,h,p,g,y,v,S,w,M){const A=this.elements;return A[0]=e,A[4]=t,A[8]=n,A[12]=r,A[1]=s,A[5]=o,A[9]=l,A[13]=c,A[2]=h,A[6]=p,A[10]=g,A[14]=y,A[3]=v,A[7]=S,A[11]=w,A[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ot().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Of.setFromMatrixColumn(e,0).length(),s=1/Of.setFromMatrixColumn(e,1).length(),o=1/Of.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),l=Math.sin(n),c=Math.cos(r),h=Math.sin(r),p=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const y=o*p,v=o*g,S=l*p,w=l*g;t[0]=c*p,t[4]=-c*g,t[8]=h,t[1]=v+S*h,t[5]=y-w*h,t[9]=-l*c,t[2]=w-y*h,t[6]=S+v*h,t[10]=o*c}else if(e.order==="YXZ"){const y=c*p,v=c*g,S=h*p,w=h*g;t[0]=y+w*l,t[4]=S*l-v,t[8]=o*h,t[1]=o*g,t[5]=o*p,t[9]=-l,t[2]=v*l-S,t[6]=w+y*l,t[10]=o*c}else if(e.order==="ZXY"){const y=c*p,v=c*g,S=h*p,w=h*g;t[0]=y-w*l,t[4]=-o*g,t[8]=S+v*l,t[1]=v+S*l,t[5]=o*p,t[9]=w-y*l,t[2]=-o*h,t[6]=l,t[10]=o*c}else if(e.order==="ZYX"){const y=o*p,v=o*g,S=l*p,w=l*g;t[0]=c*p,t[4]=S*h-v,t[8]=y*h+w,t[1]=c*g,t[5]=w*h+y,t[9]=v*h-S,t[2]=-h,t[6]=l*c,t[10]=o*c}else if(e.order==="YZX"){const y=o*c,v=o*h,S=l*c,w=l*h;t[0]=c*p,t[4]=w-y*g,t[8]=S*g+v,t[1]=g,t[5]=o*p,t[9]=-l*p,t[2]=-h*p,t[6]=v*g+S,t[10]=y-w*g}else if(e.order==="XZY"){const y=o*c,v=o*h,S=l*c,w=l*h;t[0]=c*p,t[4]=-g,t[8]=h*p,t[1]=y*g+w,t[5]=o*p,t[9]=v*g-S,t[2]=S*g-v,t[6]=l*p,t[10]=w*g+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_N,e,AN)}lookAt(e,t,n){const r=this.elements;return rs.subVectors(e,t),rs.lengthSq()===0&&(rs.z=1),rs.normalize(),Tl.crossVectors(n,rs),Tl.lengthSq()===0&&(Math.abs(n.z)===1?rs.x+=1e-4:rs.z+=1e-4,rs.normalize(),Tl.crossVectors(n,rs)),Tl.normalize(),rg.crossVectors(rs,Tl),r[0]=Tl.x,r[4]=rg.x,r[8]=rs.x,r[1]=Tl.y,r[5]=rg.y,r[9]=rs.y,r[2]=Tl.z,r[6]=rg.z,r[10]=rs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],l=n[4],c=n[8],h=n[12],p=n[1],g=n[5],y=n[9],v=n[13],S=n[2],w=n[6],M=n[10],A=n[14],C=n[3],b=n[7],B=n[11],N=n[15],F=r[0],k=r[4],z=r[8],L=r[12],D=r[1],V=r[5],oe=r[9],ie=r[13],ye=r[2],xe=r[6],ge=r[10],de=r[14],W=r[3],re=r[7],$=r[11],J=r[15];return s[0]=o*F+l*D+c*ye+h*W,s[4]=o*k+l*V+c*xe+h*re,s[8]=o*z+l*oe+c*ge+h*$,s[12]=o*L+l*ie+c*de+h*J,s[1]=p*F+g*D+y*ye+v*W,s[5]=p*k+g*V+y*xe+v*re,s[9]=p*z+g*oe+y*ge+v*$,s[13]=p*L+g*ie+y*de+v*J,s[2]=S*F+w*D+M*ye+A*W,s[6]=S*k+w*V+M*xe+A*re,s[10]=S*z+w*oe+M*ge+A*$,s[14]=S*L+w*ie+M*de+A*J,s[3]=C*F+b*D+B*ye+N*W,s[7]=C*k+b*V+B*xe+N*re,s[11]=C*z+b*oe+B*ge+N*$,s[15]=C*L+b*ie+B*de+N*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],l=e[5],c=e[9],h=e[13],p=e[2],g=e[6],y=e[10],v=e[14],S=e[3],w=e[7],M=e[11],A=e[15];return S*(+s*c*g-r*h*g-s*l*y+n*h*y+r*l*v-n*c*v)+w*(+t*c*v-t*h*y+s*o*y-r*o*v+r*h*p-s*c*p)+M*(+t*h*g-t*l*v-s*o*g+n*o*v+s*l*p-n*h*p)+A*(-r*l*p-t*c*g+t*l*y+r*o*g-n*o*y+n*c*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],h=e[7],p=e[8],g=e[9],y=e[10],v=e[11],S=e[12],w=e[13],M=e[14],A=e[15],C=g*M*h-w*y*h+w*c*v-l*M*v-g*c*A+l*y*A,b=S*y*h-p*M*h-S*c*v+o*M*v+p*c*A-o*y*A,B=p*w*h-S*g*h+S*l*v-o*w*v-p*l*A+o*g*A,N=S*g*c-p*w*c-S*l*y+o*w*y+p*l*M-o*g*M,F=t*C+n*b+r*B+s*N;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/F;return e[0]=C*k,e[1]=(w*y*s-g*M*s-w*r*v+n*M*v+g*r*A-n*y*A)*k,e[2]=(l*M*s-w*c*s+w*r*h-n*M*h-l*r*A+n*c*A)*k,e[3]=(g*c*s-l*y*s-g*r*h+n*y*h+l*r*v-n*c*v)*k,e[4]=b*k,e[5]=(p*M*s-S*y*s+S*r*v-t*M*v-p*r*A+t*y*A)*k,e[6]=(S*c*s-o*M*s-S*r*h+t*M*h+o*r*A-t*c*A)*k,e[7]=(o*y*s-p*c*s+p*r*h-t*y*h-o*r*v+t*c*v)*k,e[8]=B*k,e[9]=(S*g*s-p*w*s-S*n*v+t*w*v+p*n*A-t*g*A)*k,e[10]=(o*w*s-S*l*s+S*n*h-t*w*h-o*n*A+t*l*A)*k,e[11]=(p*l*s-o*g*s-p*n*h+t*g*h+o*n*v-t*l*v)*k,e[12]=N*k,e[13]=(p*w*r-S*g*r+S*n*y-t*w*y-p*n*M+t*g*M)*k,e[14]=(S*l*r-o*w*r-S*n*c+t*w*c+o*n*M-t*l*M)*k,e[15]=(o*g*r-p*l*r+p*n*c-t*g*c-o*n*y+t*l*y)*k,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,l=e.y,c=e.z,h=s*o,p=s*l;return this.set(h*o+n,h*l-r*c,h*c+r*l,0,h*l+r*c,p*l+n,p*c-r*o,0,h*c-r*l,p*c+r*o,s*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,l=t._z,c=t._w,h=s+s,p=o+o,g=l+l,y=s*h,v=s*p,S=s*g,w=o*p,M=o*g,A=l*g,C=c*h,b=c*p,B=c*g,N=n.x,F=n.y,k=n.z;return r[0]=(1-(w+A))*N,r[1]=(v+B)*N,r[2]=(S-b)*N,r[3]=0,r[4]=(v-B)*F,r[5]=(1-(y+A))*F,r[6]=(M+C)*F,r[7]=0,r[8]=(S+b)*k,r[9]=(M-C)*k,r[10]=(1-(y+w))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=Of.set(r[0],r[1],r[2]).length();const o=Of.set(r[4],r[5],r[6]).length(),l=Of.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ro.copy(this);const h=1/s,p=1/o,g=1/l;return ro.elements[0]*=h,ro.elements[1]*=h,ro.elements[2]*=h,ro.elements[4]*=p,ro.elements[5]*=p,ro.elements[6]*=p,ro.elements[8]*=g,ro.elements[9]*=g,ro.elements[10]*=g,t.setFromRotationMatrix(ro),n.x=s,n.y=o,n.z=l,this}makePerspective(e,t,n,r,s,o,l=uo){const c=this.elements,h=2*s/(t-e),p=2*s/(n-r),g=(t+e)/(t-e),y=(n+r)/(n-r);let v,S;if(l===uo)v=-(o+s)/(o-s),S=-2*o*s/(o-s);else if(l===wp)v=-o/(o-s),S=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=h,c[4]=0,c[8]=g,c[12]=0,c[1]=0,c[5]=p,c[9]=y,c[13]=0,c[2]=0,c[6]=0,c[10]=v,c[14]=S,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,r,s,o,l=uo){const c=this.elements,h=1/(t-e),p=1/(n-r),g=1/(o-s),y=(t+e)*h,v=(n+r)*p;let S,w;if(l===uo)S=(o+s)*g,w=-2*g;else if(l===wp)S=s*g,w=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*h,c[4]=0,c[8]=0,c[12]=-y,c[1]=0,c[5]=2*p,c[9]=0,c[13]=-v,c[2]=0,c[6]=0,c[10]=w,c[14]=-S,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Of=new j,ro=new Ot,_N=new j(0,0,0),AN=new j(1,1,1),Tl=new j,rg=new j,rs=new j,vE=new Ot,xE=new Oi;class cs{constructor(e=0,t=0,n=0,r=cs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],c=r[1],h=r[5],p=r[9],g=r[2],y=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin(Xt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(y,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Xt(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(Xt(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-g,v),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Xt(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(y,v),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,h));break;case"YZX":this._z=Math.asin(Xt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,h),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-Xt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(y,h),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-p,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return vE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(vE,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return xE.setFromEuler(this),this.setFromQuaternion(xE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}cs.DEFAULT_ORDER="XYZ";class fc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let SN=0;const _E=new j,kf=new Oi,Ma=new Ot,sg=new j,Nh=new j,MN=new j,EN=new Oi,AE=new j(1,0,0),SE=new j(0,1,0),ME=new j(0,0,1),EE={type:"added"},wN={type:"removed"},Hf={type:"childadded",child:null},G0={type:"childremoved",child:null};class pn extends zo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:SN++}),this.uuid=us(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pn.DEFAULT_UP.clone();const e=new j,t=new cs,n=new Oi,r=new j(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ot},normalMatrix:{value:new Kt}}),this.matrix=new Ot,this.matrixWorld=new Ot,this.matrixAutoUpdate=pn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=pn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new fc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return kf.setFromAxisAngle(e,t),this.quaternion.multiply(kf),this}rotateOnWorldAxis(e,t){return kf.setFromAxisAngle(e,t),this.quaternion.premultiply(kf),this}rotateX(e){return this.rotateOnAxis(AE,e)}rotateY(e){return this.rotateOnAxis(SE,e)}rotateZ(e){return this.rotateOnAxis(ME,e)}translateOnAxis(e,t){return _E.copy(e).applyQuaternion(this.quaternion),this.position.add(_E.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(AE,e)}translateY(e){return this.translateOnAxis(SE,e)}translateZ(e){return this.translateOnAxis(ME,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ma.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?sg.copy(e):sg.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Nh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ma.lookAt(Nh,sg,this.up):Ma.lookAt(sg,Nh,this.up),this.quaternion.setFromRotationMatrix(Ma),r&&(Ma.extractRotation(r.matrixWorld),kf.setFromRotationMatrix(Ma),this.quaternion.premultiply(kf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(EE),Hf.child=e,this.dispatchEvent(Hf),Hf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(wN),G0.child=e,this.dispatchEvent(G0),G0.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ma.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ma.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ma),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(EE),Hf.child=e,this.dispatchEvent(Hf),Hf.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nh,e,MN),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nh,EN,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let h=0,p=c.length;h<p;h++){const g=c[h];s(e.shapes,g)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,h=this.material.length;c<h;c++)l.push(s(e.materials,this.material[c]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];r.animations.push(s(e.animations,c))}}if(t){const l=o(e.geometries),c=o(e.materials),h=o(e.textures),p=o(e.images),g=o(e.shapes),y=o(e.skeletons),v=o(e.animations),S=o(e.nodes);l.length>0&&(n.geometries=l),c.length>0&&(n.materials=c),h.length>0&&(n.textures=h),p.length>0&&(n.images=p),g.length>0&&(n.shapes=g),y.length>0&&(n.skeletons=y),v.length>0&&(n.animations=v),S.length>0&&(n.nodes=S)}return n.object=r,n;function o(l){const c=[];for(const h in l){const p=l[h];delete p.metadata,c.push(p)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}pn.DEFAULT_UP=new j(0,1,0);pn.DEFAULT_MATRIX_AUTO_UPDATE=!0;pn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const so=new j,Ea=new j,V0=new j,wa=new j,zf=new j,Gf=new j,wE=new j,W0=new j,j0=new j,X0=new j,J0=new xn,K0=new xn,Y0=new xn;class Wr{constructor(e=new j,t=new j,n=new j){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),so.subVectors(e,t),r.cross(so);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){so.subVectors(r,t),Ea.subVectors(n,t),V0.subVectors(e,t);const o=so.dot(so),l=so.dot(Ea),c=so.dot(V0),h=Ea.dot(Ea),p=Ea.dot(V0),g=o*h-l*l;if(g===0)return s.set(0,0,0),null;const y=1/g,v=(h*c-l*p)*y,S=(o*p-l*c)*y;return s.set(1-v-S,S,v)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,wa)===null?!1:wa.x>=0&&wa.y>=0&&wa.x+wa.y<=1}static getInterpolation(e,t,n,r,s,o,l,c){return this.getBarycoord(e,t,n,r,wa)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,wa.x),c.addScaledVector(o,wa.y),c.addScaledVector(l,wa.z),c)}static getInterpolatedAttribute(e,t,n,r,s,o){return J0.setScalar(0),K0.setScalar(0),Y0.setScalar(0),J0.fromBufferAttribute(e,t),K0.fromBufferAttribute(e,n),Y0.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(J0,s.x),o.addScaledVector(K0,s.y),o.addScaledVector(Y0,s.z),o}static isFrontFacing(e,t,n,r){return so.subVectors(n,t),Ea.subVectors(e,t),so.cross(Ea).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return so.subVectors(this.c,this.b),Ea.subVectors(this.a,this.b),so.cross(Ea).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Wr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Wr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return Wr.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Wr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Wr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,l;zf.subVectors(r,n),Gf.subVectors(s,n),W0.subVectors(e,n);const c=zf.dot(W0),h=Gf.dot(W0);if(c<=0&&h<=0)return t.copy(n);j0.subVectors(e,r);const p=zf.dot(j0),g=Gf.dot(j0);if(p>=0&&g<=p)return t.copy(r);const y=c*g-p*h;if(y<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(n).addScaledVector(zf,o);X0.subVectors(e,s);const v=zf.dot(X0),S=Gf.dot(X0);if(S>=0&&v<=S)return t.copy(s);const w=v*h-c*S;if(w<=0&&h>=0&&S<=0)return l=h/(h-S),t.copy(n).addScaledVector(Gf,l);const M=p*S-v*g;if(M<=0&&g-p>=0&&v-S>=0)return wE.subVectors(s,r),l=(g-p)/(g-p+(v-S)),t.copy(r).addScaledVector(wE,l);const A=1/(M+w+y);return o=w*A,l=y*A,t.copy(n).addScaledVector(zf,o).addScaledVector(Gf,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const lb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cl={h:0,s:0,l:0},og={h:0,s:0,l:0};function Q0(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class lt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Vr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,yn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=yn.workingColorSpace){return this.r=e,this.g=t,this.b=n,yn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=yn.workingColorSpace){if(e=AA(e,1),t=Xt(t,0,1),n=Xt(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=Q0(o,s,e+1/3),this.g=Q0(o,s,e),this.b=Q0(o,s,e-1/3)}return yn.toWorkingColorSpace(this,r),this}setStyle(e,t=Vr){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Vr){const n=lb[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Oa(e.r),this.g=Oa(e.g),this.b=Oa(e.b),this}copyLinearToSRGB(e){return this.r=hd(e.r),this.g=hd(e.g),this.b=hd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Vr){return yn.fromWorkingColorSpace(or.copy(this),e),Math.round(Xt(or.r*255,0,255))*65536+Math.round(Xt(or.g*255,0,255))*256+Math.round(Xt(or.b*255,0,255))}getHexString(e=Vr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=yn.workingColorSpace){yn.fromWorkingColorSpace(or.copy(this),t);const n=or.r,r=or.g,s=or.b,o=Math.max(n,r,s),l=Math.min(n,r,s);let c,h;const p=(l+o)/2;if(l===o)c=0,h=0;else{const g=o-l;switch(h=p<=.5?g/(o+l):g/(2-o-l),o){case n:c=(r-s)/g+(r<s?6:0);break;case r:c=(s-n)/g+2;break;case s:c=(n-r)/g+4;break}c/=6}return e.h=c,e.s=h,e.l=p,e}getRGB(e,t=yn.workingColorSpace){return yn.fromWorkingColorSpace(or.copy(this),t),e.r=or.r,e.g=or.g,e.b=or.b,e}getStyle(e=Vr){yn.fromWorkingColorSpace(or.copy(this),e);const t=or.r,n=or.g,r=or.b;return e!==Vr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Cl),this.setHSL(Cl.h+e,Cl.s+t,Cl.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Cl),e.getHSL(og);const n=up(Cl.h,og.h,t),r=up(Cl.s,og.s,t),s=up(Cl.l,og.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const or=new lt;lt.NAMES=lb;let TN=0;class Ci extends zo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:TN++}),this.uuid=us(),this.name="",this.type="Material",this.blending=lc,this.side=Oo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=dy,this.blendDst=hy,this.blendEquation=Dl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new lt(0,0,0),this.blendAlpha=0,this.depthFunc=hc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=l_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Qu,this.stencilZFail=Qu,this.stencilZPass=Qu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==lc&&(n.blending=this.blending),this.side!==Oo&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==dy&&(n.blendSrc=this.blendSrc),this.blendDst!==hy&&(n.blendDst=this.blendDst),this.blendEquation!==Dl&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==hc&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==l_&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Qu&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Qu&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Qu&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const l in s){const c=s[l];delete c.metadata,o.push(c)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class as extends Ci{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new cs,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ba=CN();function CN(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const h=c-127;h<-27?(n[c]=0,n[c|256]=32768,r[c]=24,r[c|256]=24):h<-14?(n[c]=1024>>-h-14,n[c|256]=1024>>-h-14|32768,r[c]=-h-1,r[c|256]=-h-1):h<=15?(n[c]=h+15<<10,n[c|256]=h+15<<10|32768,r[c]=13,r[c|256]=13):h<128?(n[c]=31744,n[c|256]=64512,r[c]=24,r[c|256]=24):(n[c]=31744,n[c|256]=64512,r[c]=13,r[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let h=c<<13,p=0;for(;(h&8388608)===0;)h<<=1,p-=8388608;h&=-8388609,p+=947912704,s[c]=h|p}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:l}}function Gr(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Xt(i,-65504,65504),Ba.floatView[0]=i;const e=Ba.uint32View[0],t=e>>23&511;return Ba.baseTable[t]+((e&8388607)>>Ba.shiftTable[t])}function qh(i){const e=i>>10;return Ba.uint32View[0]=Ba.mantissaTable[Ba.offsetTable[e]+(i&1023)]+Ba.exponentTable[e],Ba.floatView[0]}const bN={toHalfFloat:Gr,fromHalfFloat:qh},yi=new j,ag=new Ie;let RN=0;class _n{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:RN++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Ep,this.updateRanges=[],this.gpuType=jr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)ag.fromBufferAttribute(this,t),ag.applyMatrix3(e),this.setXY(t,ag.x,ag.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)yi.fromBufferAttribute(this,t),yi.applyMatrix3(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)yi.fromBufferAttribute(this,t),yi.applyMatrix4(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)yi.fromBufferAttribute(this,t),yi.applyNormalMatrix(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)yi.fromBufferAttribute(this,t),yi.transformDirection(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Tr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=$t(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Tr(t,this.array)),t}setX(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Tr(t,this.array)),t}setY(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Tr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Tr(t,this.array)),t}setW(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),r=$t(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),r=$t(r,this.array),s=$t(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ep&&(e.usage=this.usage),e}}class PN extends _n{constructor(e,t,n){super(new Int8Array(e),t,n)}}class BN extends _n{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class IN extends _n{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class DN extends _n{constructor(e,t,n){super(new Int16Array(e),t,n)}}class SA extends _n{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class LN extends _n{constructor(e,t,n){super(new Int32Array(e),t,n)}}class MA extends _n{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class FN extends _n{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=qh(this.array[e*this.itemSize]);return this.normalized&&(t=Tr(t,this.array)),t}setX(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize]=Gr(t),this}getY(e){let t=qh(this.array[e*this.itemSize+1]);return this.normalized&&(t=Tr(t,this.array)),t}setY(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+1]=Gr(t),this}getZ(e){let t=qh(this.array[e*this.itemSize+2]);return this.normalized&&(t=Tr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+2]=Gr(t),this}getW(e){let t=qh(this.array[e*this.itemSize+3]);return this.normalized&&(t=Tr(t,this.array)),t}setW(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+3]=Gr(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array)),this.array[e+0]=Gr(t),this.array[e+1]=Gr(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),r=$t(r,this.array)),this.array[e+0]=Gr(t),this.array[e+1]=Gr(n),this.array[e+2]=Gr(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),r=$t(r,this.array),s=$t(s,this.array)),this.array[e+0]=Gr(t),this.array[e+1]=Gr(n),this.array[e+2]=Gr(r),this.array[e+3]=Gr(s),this}}class Ct extends _n{constructor(e,t,n){super(new Float32Array(e),t,n)}}let NN=0;const Ts=new Ot,q0=new pn,Vf=new j,ss=new fr,Uh=new fr,Ni=new j;class Yt extends zo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:NN++}),this.uuid=us(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(sb(e)?MA:SA)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Kt().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ts.makeRotationFromQuaternion(e),this.applyMatrix4(Ts),this}rotateX(e){return Ts.makeRotationX(e),this.applyMatrix4(Ts),this}rotateY(e){return Ts.makeRotationY(e),this.applyMatrix4(Ts),this}rotateZ(e){return Ts.makeRotationZ(e),this.applyMatrix4(Ts),this}translate(e,t,n){return Ts.makeTranslation(e,t,n),this.applyMatrix4(Ts),this}scale(e,t,n){return Ts.makeScale(e,t,n),this.applyMatrix4(Ts),this}lookAt(e){return q0.lookAt(e),q0.updateMatrix(),this.applyMatrix4(q0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vf).negate(),this.translate(Vf.x,Vf.y,Vf.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ct(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];ss.setFromBufferAttribute(s),this.morphTargetsRelative?(Ni.addVectors(this.boundingBox.min,ss.min),this.boundingBox.expandByPoint(Ni),Ni.addVectors(this.boundingBox.max,ss.max),this.boundingBox.expandByPoint(Ni)):(this.boundingBox.expandByPoint(ss.min),this.boundingBox.expandByPoint(ss.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new j,1/0);return}if(e){const n=this.boundingSphere.center;if(ss.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];Uh.setFromBufferAttribute(l),this.morphTargetsRelative?(Ni.addVectors(ss.min,Uh.min),ss.expandByPoint(Ni),Ni.addVectors(ss.max,Uh.max),ss.expandByPoint(Ni)):(ss.expandByPoint(Uh.min),ss.expandByPoint(Uh.max))}ss.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)Ni.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Ni));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],c=this.morphTargetsRelative;for(let h=0,p=l.count;h<p;h++)Ni.fromBufferAttribute(l,h),c&&(Vf.fromBufferAttribute(e,h),Ni.add(Vf)),r=Math.max(r,n.distanceToSquared(Ni))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _n(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),l=[],c=[];for(let z=0;z<n.count;z++)l[z]=new j,c[z]=new j;const h=new j,p=new j,g=new j,y=new Ie,v=new Ie,S=new Ie,w=new j,M=new j;function A(z,L,D){h.fromBufferAttribute(n,z),p.fromBufferAttribute(n,L),g.fromBufferAttribute(n,D),y.fromBufferAttribute(s,z),v.fromBufferAttribute(s,L),S.fromBufferAttribute(s,D),p.sub(h),g.sub(h),v.sub(y),S.sub(y);const V=1/(v.x*S.y-S.x*v.y);isFinite(V)&&(w.copy(p).multiplyScalar(S.y).addScaledVector(g,-v.y).multiplyScalar(V),M.copy(g).multiplyScalar(v.x).addScaledVector(p,-S.x).multiplyScalar(V),l[z].add(w),l[L].add(w),l[D].add(w),c[z].add(M),c[L].add(M),c[D].add(M))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let z=0,L=C.length;z<L;++z){const D=C[z],V=D.start,oe=D.count;for(let ie=V,ye=V+oe;ie<ye;ie+=3)A(e.getX(ie+0),e.getX(ie+1),e.getX(ie+2))}const b=new j,B=new j,N=new j,F=new j;function k(z){N.fromBufferAttribute(r,z),F.copy(N);const L=l[z];b.copy(L),b.sub(N.multiplyScalar(N.dot(L))).normalize(),B.crossVectors(F,L);const V=B.dot(c[z])<0?-1:1;o.setXYZW(z,b.x,b.y,b.z,V)}for(let z=0,L=C.length;z<L;++z){const D=C[z],V=D.start,oe=D.count;for(let ie=V,ye=V+oe;ie<ye;ie+=3)k(e.getX(ie+0)),k(e.getX(ie+1)),k(e.getX(ie+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new _n(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let y=0,v=n.count;y<v;y++)n.setXYZ(y,0,0,0);const r=new j,s=new j,o=new j,l=new j,c=new j,h=new j,p=new j,g=new j;if(e)for(let y=0,v=e.count;y<v;y+=3){const S=e.getX(y+0),w=e.getX(y+1),M=e.getX(y+2);r.fromBufferAttribute(t,S),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,M),p.subVectors(o,s),g.subVectors(r,s),p.cross(g),l.fromBufferAttribute(n,S),c.fromBufferAttribute(n,w),h.fromBufferAttribute(n,M),l.add(p),c.add(p),h.add(p),n.setXYZ(S,l.x,l.y,l.z),n.setXYZ(w,c.x,c.y,c.z),n.setXYZ(M,h.x,h.y,h.z)}else for(let y=0,v=t.count;y<v;y+=3)r.fromBufferAttribute(t,y+0),s.fromBufferAttribute(t,y+1),o.fromBufferAttribute(t,y+2),p.subVectors(o,s),g.subVectors(r,s),p.cross(g),n.setXYZ(y+0,p.x,p.y,p.z),n.setXYZ(y+1,p.x,p.y,p.z),n.setXYZ(y+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ni.fromBufferAttribute(e,t),Ni.normalize(),e.setXYZ(t,Ni.x,Ni.y,Ni.z)}toNonIndexed(){function e(l,c){const h=l.array,p=l.itemSize,g=l.normalized,y=new h.constructor(c.length*p);let v=0,S=0;for(let w=0,M=c.length;w<M;w++){l.isInterleavedBufferAttribute?v=c[w]*l.data.stride+l.offset:v=c[w]*p;for(let A=0;A<p;A++)y[S++]=h[v++]}return new _n(y,p,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Yt,n=this.index.array,r=this.attributes;for(const l in r){const c=r[l],h=e(c,n);t.setAttribute(l,h)}const s=this.morphAttributes;for(const l in s){const c=[],h=s[l];for(let p=0,g=h.length;p<g;p++){const y=h[p],v=e(y,n);c.push(v)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const h=o[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(e[h]=c[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const h=n[c];e.data.attributes[c]=h.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],p=[];for(let g=0,y=h.length;g<y;g++){const v=h[g];p.push(v.toJSON(e.data))}p.length>0&&(r[c]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const h in r){const p=r[h];this.setAttribute(h,p.clone(t))}const s=e.morphAttributes;for(const h in s){const p=[],g=s[h];for(let y=0,v=g.length;y<v;y++)p.push(g[y].clone(t));this.morphAttributes[h]=p}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,p=o.length;h<p;h++){const g=o[h];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const TE=new Ot,Lu=new Ec,lg=new Qi,CE=new j,ug=new j,cg=new j,fg=new j,Z0=new j,dg=new j,bE=new j,hg=new j;class li extends pn{constructor(e=new Yt,t=new as){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){dg.set(0,0,0);for(let c=0,h=s.length;c<h;c++){const p=l[c],g=s[c];p!==0&&(Z0.fromBufferAttribute(g,e),o?dg.addScaledVector(Z0,p):dg.addScaledVector(Z0.sub(t),p))}t.add(dg)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),lg.copy(n.boundingSphere),lg.applyMatrix4(s),Lu.copy(e.ray).recast(e.near),!(lg.containsPoint(Lu.origin)===!1&&(Lu.intersectSphere(lg,CE)===null||Lu.origin.distanceToSquared(CE)>(e.far-e.near)**2))&&(TE.copy(s).invert(),Lu.copy(e.ray).applyMatrix4(TE),!(n.boundingBox!==null&&Lu.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Lu)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,l=s.index,c=s.attributes.position,h=s.attributes.uv,p=s.attributes.uv1,g=s.attributes.normal,y=s.groups,v=s.drawRange;if(l!==null)if(Array.isArray(o))for(let S=0,w=y.length;S<w;S++){const M=y[S],A=o[M.materialIndex],C=Math.max(M.start,v.start),b=Math.min(l.count,Math.min(M.start+M.count,v.start+v.count));for(let B=C,N=b;B<N;B+=3){const F=l.getX(B),k=l.getX(B+1),z=l.getX(B+2);r=pg(this,A,e,n,h,p,g,F,k,z),r&&(r.faceIndex=Math.floor(B/3),r.face.materialIndex=M.materialIndex,t.push(r))}}else{const S=Math.max(0,v.start),w=Math.min(l.count,v.start+v.count);for(let M=S,A=w;M<A;M+=3){const C=l.getX(M),b=l.getX(M+1),B=l.getX(M+2);r=pg(this,o,e,n,h,p,g,C,b,B),r&&(r.faceIndex=Math.floor(M/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(o))for(let S=0,w=y.length;S<w;S++){const M=y[S],A=o[M.materialIndex],C=Math.max(M.start,v.start),b=Math.min(c.count,Math.min(M.start+M.count,v.start+v.count));for(let B=C,N=b;B<N;B+=3){const F=B,k=B+1,z=B+2;r=pg(this,A,e,n,h,p,g,F,k,z),r&&(r.faceIndex=Math.floor(B/3),r.face.materialIndex=M.materialIndex,t.push(r))}}else{const S=Math.max(0,v.start),w=Math.min(c.count,v.start+v.count);for(let M=S,A=w;M<A;M+=3){const C=M,b=M+1,B=M+2;r=pg(this,o,e,n,h,p,g,C,b,B),r&&(r.faceIndex=Math.floor(M/3),t.push(r))}}}}function UN(i,e,t,n,r,s,o,l){let c;if(e.side===br?c=n.intersectTriangle(o,s,r,!0,l):c=n.intersectTriangle(r,s,o,e.side===Oo,l),c===null)return null;hg.copy(l),hg.applyMatrix4(i.matrixWorld);const h=t.ray.origin.distanceTo(hg);return h<t.near||h>t.far?null:{distance:h,point:hg.clone(),object:i}}function pg(i,e,t,n,r,s,o,l,c,h){i.getVertexPosition(l,ug),i.getVertexPosition(c,cg),i.getVertexPosition(h,fg);const p=UN(i,e,t,n,ug,cg,fg,bE);if(p){const g=new j;Wr.getBarycoord(bE,ug,cg,fg,g),r&&(p.uv=Wr.getInterpolatedAttribute(r,l,c,h,g,new Ie)),s&&(p.uv1=Wr.getInterpolatedAttribute(s,l,c,h,g,new Ie)),o&&(p.normal=Wr.getInterpolatedAttribute(o,l,c,h,g,new j),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const y={a:l,b:c,c:h,normal:new j,materialIndex:0};Wr.getNormal(ug,cg,fg,y.normal),p.face=y,p.barycoord=g}return p}class wc extends Yt{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],h=[],p=[],g=[];let y=0,v=0;S("z","y","x",-1,-1,n,t,e,o,s,0),S("z","y","x",1,-1,n,t,-e,o,s,1),S("x","z","y",1,1,e,n,t,r,o,2),S("x","z","y",1,-1,e,n,-t,r,o,3),S("x","y","z",1,-1,e,t,n,r,s,4),S("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(c),this.setAttribute("position",new Ct(h,3)),this.setAttribute("normal",new Ct(p,3)),this.setAttribute("uv",new Ct(g,2));function S(w,M,A,C,b,B,N,F,k,z,L){const D=B/k,V=N/z,oe=B/2,ie=N/2,ye=F/2,xe=k+1,ge=z+1;let de=0,W=0;const re=new j;for(let $=0;$<ge;$++){const J=$*V-ie;for(let ae=0;ae<xe;ae++){const Le=ae*D-oe;re[w]=Le*C,re[M]=J*b,re[A]=ye,h.push(re.x,re.y,re.z),re[w]=0,re[M]=0,re[A]=F>0?1:-1,p.push(re.x,re.y,re.z),g.push(ae/k),g.push(1-$/z),de+=1}}for(let $=0;$<z;$++)for(let J=0;J<k;J++){const ae=y+J+xe*$,Le=y+J+xe*($+1),fe=y+(J+1)+xe*($+1),we=y+(J+1)+xe*$;c.push(ae,Le,we),c.push(Le,fe,we),W+=6}l.addGroup(v,W,L),v+=W,y+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Md(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function wr(i){const e={};for(let t=0;t<i.length;t++){const n=Md(i[t]);for(const r in n)e[r]=n[r]}return e}function ON(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function ub(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:yn.workingColorSpace}const cb={clone:Md,merge:wr};var kN=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,HN=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ho extends Ci{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=kN,this.fragmentShader=HN,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Md(e.uniforms),this.uniformsGroups=ON(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Vp extends pn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ot,this.projectionMatrix=new Ot,this.projectionMatrixInverse=new Ot,this.coordinateSystem=uo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const bl=new j,RE=new Ie,PE=new Ie;class zn extends Vp{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Sd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(cc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Sd*2*Math.atan(Math.tan(cc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){bl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(bl.x,bl.y).multiplyScalar(-e/bl.z),bl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(bl.x,bl.y).multiplyScalar(-e/bl.z)}getViewSize(e,t){return this.getViewBounds(e,RE,PE),t.subVectors(PE,RE)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(cc*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,h=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*n/h,r*=o.width/c,n*=o.height/h}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Wf=-90,jf=1;class fb extends pn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new zn(Wf,jf,e,t);r.layers=this.layers,this.add(r);const s=new zn(Wf,jf,e,t);s.layers=this.layers,this.add(s);const o=new zn(Wf,jf,e,t);o.layers=this.layers,this.add(o);const l=new zn(Wf,jf,e,t);l.layers=this.layers,this.add(l);const c=new zn(Wf,jf,e,t);c.layers=this.layers,this.add(c);const h=new zn(Wf,jf,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,l,c]=t;for(const h of t)this.remove(h);if(e===uo)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===wp)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,c,h,p]=this.children,g=e.getRenderTarget(),y=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const w=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,l),e.setRenderTarget(n,3,r),e.render(t,c),e.setRenderTarget(n,4,r),e.render(t,h),n.texture.generateMipmaps=w,e.setRenderTarget(n,5,r),e.render(t,p),e.setRenderTarget(g,y,v),e.xr.enabled=S,n.texture.needsPMREMUpdate=!0}}class Wp extends Gn{constructor(e,t,n,r,s,o,l,c,h,p){e=e!==void 0?e:[],t=t!==void 0?t:za,super(e,t,n,r,s,o,l,c,h,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class db extends ko{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Wp(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ai}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new wc(5,5,5),s=new ho({name:"CubemapFromEquirect",uniforms:Md(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:br,blending:Ua});s.uniforms.tEquirect.value=t;const o=new li(r,s),l=t.minFilter;return t.minFilter===Bs&&(t.minFilter=ai),new fb(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}class Ia extends pn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const zN={type:"move"};class ty{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ia,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ia,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ia,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const l=this._targetRay,c=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){o=!0;for(const w of e.hand.values()){const M=t.getJointPose(w,n),A=this._getHandJoint(h,w);M!==null&&(A.matrix.fromArray(M.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,A.jointRadius=M.radius),A.visible=M!==null}const p=h.joints["index-finger-tip"],g=h.joints["thumb-tip"],y=p.position.distanceTo(g.position),v=.02,S=.005;h.inputState.pinching&&y>v+S?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&y<=v-S&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(zN)))}return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=s!==null),h!==null&&(h.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Ia;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class vv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new lt(e),this.density=t}clone(){return new vv(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class xv{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new lt(e),this.near=t,this.far=n}clone(){return new xv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class EA extends pn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new cs,this.environmentIntensity=1,this.environmentRotation=new cs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class jp{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Ep,this.updateRanges=[],this.version=0,this.uuid=us()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=us()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=us()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Er=new j;class zl{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Er.fromBufferAttribute(this,t),Er.applyMatrix4(e),this.setXYZ(t,Er.x,Er.y,Er.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Er.fromBufferAttribute(this,t),Er.applyNormalMatrix(e),this.setXYZ(t,Er.x,Er.y,Er.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Er.fromBufferAttribute(this,t),Er.transformDirection(e),this.setXYZ(t,Er.x,Er.y,Er.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Tr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=$t(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Tr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Tr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Tr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Tr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),r=$t(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),r=$t(r,this.array),s=$t(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new _n(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new zl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class wA extends Ci{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new lt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Xf;const Oh=new j,Jf=new j,Kf=new j,Yf=new Ie,kh=new Ie,hb=new Ot,mg=new j,Hh=new j,gg=new j,BE=new Ie,$0=new Ie,IE=new Ie;class pb extends pn{constructor(e=new wA){if(super(),this.isSprite=!0,this.type="Sprite",Xf===void 0){Xf=new Yt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new jp(t,5);Xf.setIndex([0,1,2,0,2,3]),Xf.setAttribute("position",new zl(n,3,0,!1)),Xf.setAttribute("uv",new zl(n,2,3,!1))}this.geometry=Xf,this.material=e,this.center=new Ie(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Jf.setFromMatrixScale(this.matrixWorld),hb.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Kf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Jf.multiplyScalar(-Kf.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;yg(mg.set(-.5,-.5,0),Kf,o,Jf,r,s),yg(Hh.set(.5,-.5,0),Kf,o,Jf,r,s),yg(gg.set(.5,.5,0),Kf,o,Jf,r,s),BE.set(0,0),$0.set(1,0),IE.set(1,1);let l=e.ray.intersectTriangle(mg,Hh,gg,!1,Oh);if(l===null&&(yg(Hh.set(-.5,.5,0),Kf,o,Jf,r,s),$0.set(0,1),l=e.ray.intersectTriangle(mg,gg,Hh,!1,Oh),l===null))return;const c=e.ray.origin.distanceTo(Oh);c<e.near||c>e.far||t.push({distance:c,point:Oh.clone(),uv:Wr.getInterpolation(Oh,mg,Hh,gg,BE,$0,IE,new Ie),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function yg(i,e,t,n,r,s){Yf.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(kh.x=s*Yf.x-r*Yf.y,kh.y=r*Yf.x+s*Yf.y):kh.copy(Yf),i.copy(e),i.x+=kh.x,i.y+=kh.y,i.applyMatrix4(hb)}const vg=new j,DE=new j;class mb extends pn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){vg.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(vg);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){vg.setFromMatrixPosition(e.matrixWorld),DE.setFromMatrixPosition(this.matrixWorld);const n=vg.distanceTo(DE)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),n>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const LE=new j,FE=new xn,NE=new xn,GN=new j,UE=new Ot,xg=new j,ex=new Qi,OE=new Ot,tx=new Ec;class TA extends li{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=a_,this.bindMatrix=new Ot,this.bindMatrixInverse=new Ot,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new fr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,xg),this.boundingBox.expandByPoint(xg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Qi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,xg),this.boundingSphere.expandByPoint(xg)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ex.copy(this.boundingSphere),ex.applyMatrix4(r),e.ray.intersectsSphere(ex)!==!1&&(OE.copy(r).invert(),tx.copy(e.ray).applyMatrix4(OE),!(this.boundingBox!==null&&tx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,tx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new xn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===a_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===VC?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;FE.fromBufferAttribute(r.attributes.skinIndex,e),NE.fromBufferAttribute(r.attributes.skinWeight,e),LE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=NE.getComponent(s);if(o!==0){const l=FE.getComponent(s);UE.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(GN.copy(LE).applyMatrix4(UE),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class _v extends pn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fo extends Gn{constructor(e=null,t=1,n=1,r,s,o,l,c,h=Ui,p=Ui,g,y){super(null,o,l,c,h,p,r,s,g,y),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const kE=new Ot,VN=new Ot;class Xp{constructor(e=[],t=[]){this.uuid=us(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Ot)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ot;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:VN;kE.multiplyMatrices(l,t[s]),kE.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Xp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Fo(t,e,e,cr,jr);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new _v),this.bones.push(o),this.boneInverses.push(new Ot().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const l=n[r];e.boneInverses.push(l.toArray())}return e}}class yc extends _n{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Qf=new Ot,HE=new Ot,_g=[],zE=new fr,WN=new Ot,zh=new li,Gh=new Qi;class CA extends li{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new yc(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,WN)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new fr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Qf),zE.copy(e.boundingBox).applyMatrix4(Qf),this.boundingBox.union(zE)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Qi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Qf),Gh.copy(e.boundingSphere).applyMatrix4(Qf),this.boundingSphere.union(Gh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let l=0;l<n.length;l++)n[l]=r[o+l]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(zh.geometry=this.geometry,zh.material=this.material,zh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Gh.copy(this.boundingSphere),Gh.applyMatrix4(n),e.ray.intersectsSphere(Gh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Qf),HE.multiplyMatrices(n,Qf),zh.matrixWorld=HE,zh.raycast(e,_g);for(let o=0,l=_g.length;o<l;o++){const c=_g[o];c.instanceId=s,c.object=this,t.push(c)}_g.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new yc(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new Fo(new Float32Array(r*this.count),r,this.count,dv,jr));const s=this.morphTexture.source.data.data;let o=0;for(let h=0;h<n.length;h++)o+=n[h];const l=this.geometry.morphTargetsRelative?1:1-o,c=r*e;s[c]=l,s.set(n,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const nx=new j,jN=new j,XN=new Kt;class Ra{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=nx.subVectors(n,t).cross(jN.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(nx),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||XN.getNormalMatrix(e),r=this.coplanarPoint(nx).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Fu=new Qi,Ag=new j;class Jp{constructor(e=new Ra,t=new Ra,n=new Ra,r=new Ra,s=new Ra,o=new Ra){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=uo){const n=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],c=r[3],h=r[4],p=r[5],g=r[6],y=r[7],v=r[8],S=r[9],w=r[10],M=r[11],A=r[12],C=r[13],b=r[14],B=r[15];if(n[0].setComponents(c-s,y-h,M-v,B-A).normalize(),n[1].setComponents(c+s,y+h,M+v,B+A).normalize(),n[2].setComponents(c+o,y+p,M+S,B+C).normalize(),n[3].setComponents(c-o,y-p,M-S,B-C).normalize(),n[4].setComponents(c-l,y-g,M-w,B-b).normalize(),t===uo)n[5].setComponents(c+l,y+g,M+w,B+b).normalize();else if(t===wp)n[5].setComponents(l,g,w,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Fu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Fu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Fu)}intersectsSprite(e){return Fu.center.set(0,0,0),Fu.radius=.7071067811865476,Fu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Fu)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Ag.x=r.normal.x>0?e.max.x:e.min.x,Ag.y=r.normal.y>0?e.max.y:e.min.y,Ag.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Ag)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ix(i,e){return i-e}function JN(i,e){return i.z-e.z}function KN(i,e){return e.z-i.z}class YN{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];o.push(l),this.index++,l.start=e,l.count=t,l.z=n,l.index=r}reset(){this.list.length=0,this.index=0}}const zr=new Ot,QN=new lt(1,1,1),rx=new Jp,Sg=new fr,Nu=new Qi,Vh=new j,GE=new j,qN=new j,sx=new YN,ar=new li,Mg=[];function ZN(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,i.getComponent(s,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function Uu(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class gb extends li{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,n=t*2,r){super(new Yt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Fo(t,e,e,cr,jr);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Fo(t,e,e,zp,Ga);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Fo(t,e,e,cr,jr);n.colorSpace=yn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:l,itemSize:c,normalized:h}=o,p=new l.constructor(n*c),g=new _n(p,c,h);t.setAttribute(s,g)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new _n(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,zr),this.getBoundingBoxAt(s,Sg).applyMatrix4(zr),e.union(Sg)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qi);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,zr),this.getBoundingSphereAt(s,Nu).applyMatrix4(zr),e.union(Nu)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ix),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=n):(r=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;zr.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(QN.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=n===-1?o.count:n),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ix),c=this._availableGeometryIds.shift(),s[c]=r):(c=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(c,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),l=this._geometryInfo[e];if(r&&o.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,h=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const p in n.attributes){const g=t.getAttribute(p),y=n.getAttribute(p);ZN(g,y,c);const v=g.itemSize;for(let S=g.count,w=h;S<w;S++){const M=c+S;for(let A=0;A<v;A++)y.setComponent(M,A,0)}y.needsUpdate=!0,y.addUpdateRange(c*v,h*v)}if(r){const p=l.indexStart,g=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let y=0;y<o.count;y++)s.setX(p+y,c+o.getX(y));for(let y=o.count,v=g;y<v;y++)s.setX(p+y,c);s.needsUpdate=!0,s.addUpdateRange(p,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let r=0,s=n.length;r<s;r++)n[r].active&&n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((o,l)=>l).sort((o,l)=>n[o].vertexStart-n[l].vertexStart),s=this.geometry;for(let o=0,l=n.length;o<l;o++){const c=r[o],h=n[c];if(h.active!==!1){if(s.index!==null){if(h.indexStart!==t){const{indexStart:p,vertexStart:g,reservedIndexCount:y}=h,v=s.index,S=v.array,w=e-g;for(let M=p;M<p+y;M++)S[M]=S[M]+w;v.array.copyWithin(t,p,p+y),v.addUpdateRange(t,y),h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:p,reservedVertexCount:g}=h,y=s.attributes;for(const v in y){const S=y[v],{array:w,itemSize:M}=S;w.copyWithin(e*M,p*M,(p+g)*M),S.addUpdateRange(e*M,g*M)}h.vertexStart=e}e+=h.reservedVertexCount,h.start=s.index?h.indexStart:h.vertexStart,this._nextIndexStart=s.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new fr,o=n.index,l=n.attributes.position;for(let c=r.start,h=r.start+r.count;c<h;c++){let p=c;o&&(p=o.getX(p)),s.expandByPoint(Vh.fromBufferAttribute(l,p))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Qi;this.getBoundingBoxAt(e,Sg),Sg.getCenter(s.center);const o=n.index,l=n.attributes.position;let c=0;for(let h=r.start,p=r.start+r.count;h<p;h++){let g=h;o&&(g=o.getX(g)),Vh.fromBufferAttribute(l,g),c=Math.max(c,s.center.distanceToSquared(Vh))}s.radius=Math.sqrt(c),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(ix);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Uu(this._multiDrawCounts,r),Uu(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,l=this._matricesTexture,c=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Uu(o.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),Uu(l.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Uu(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...n.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Yt,this._initializeGeometry(s));const o=this.geometry;s.index&&Uu(s.index.array,o.index.array);for(const l in s.attributes)Uu(s.attributes[l].array,o.attributes[l].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;ar.material=this.material,ar.geometry.index=o.index,ar.geometry.attributes=o.attributes,ar.geometry.boundingBox===null&&(ar.geometry.boundingBox=new fr),ar.geometry.boundingSphere===null&&(ar.geometry.boundingSphere=new Qi);for(let l=0,c=n.length;l<c;l++){if(!n[l].visible||!n[l].active)continue;const h=n[l].geometryIndex,p=r[h];ar.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(l,ar.matrixWorld).premultiply(s),this.getBoundingBoxAt(h,ar.geometry.boundingBox),this.getBoundingSphereAt(h,ar.geometry.boundingSphere),ar.raycast(e,Mg);for(let g=0,y=Mg.length;g<y;g++){const v=Mg[g];v.object=this,v.batchId=l,t.push(v)}Mg.length=0}ar.material=null,ar.geometry.index=null,ar.geometry.attributes={},ar.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,c=this._instanceInfo,h=this._multiDrawStarts,p=this._multiDrawCounts,g=this._geometryInfo,y=this.perObjectFrustumCulled,v=this._indirectTexture,S=v.image.data;y&&(zr.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),rx.setFromProjectionMatrix(zr,e.coordinateSystem));let w=0;if(this.sortObjects){zr.copy(this.matrixWorld).invert(),Vh.setFromMatrixPosition(n.matrixWorld).applyMatrix4(zr),GE.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(zr);for(let C=0,b=c.length;C<b;C++)if(c[C].visible&&c[C].active){const B=c[C].geometryIndex;this.getMatrixAt(C,zr),this.getBoundingSphereAt(B,Nu).applyMatrix4(zr);let N=!1;if(y&&(N=!rx.intersectsSphere(Nu)),!N){const F=g[B],k=qN.subVectors(Nu.center,Vh).dot(GE);sx.push(F.start,F.count,k,C)}}const M=sx.list,A=this.customSort;A===null?M.sort(s.transparent?KN:JN):A.call(this,M,n);for(let C=0,b=M.length;C<b;C++){const B=M[C];h[w]=B.start*l,p[w]=B.count,S[w]=B.index,w++}sx.reset()}else for(let M=0,A=c.length;M<A;M++)if(c[M].visible&&c[M].active){const C=c[M].geometryIndex;let b=!1;if(y&&(this.getMatrixAt(M,zr),this.getBoundingSphereAt(C,Nu).applyMatrix4(zr),b=!rx.intersectsSphere(Nu)),!b){const B=g[C];h[w]=B.start*l,p[w]=B.count,S[w]=M,w++}}v.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class dr extends Ci{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new lt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Ky=new j,Yy=new j,VE=new Ot,Wh=new Ec,Eg=new Qi,ox=new j,WE=new j;class Va extends pn{constructor(e=new Yt,t=new dr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)Ky.fromBufferAttribute(t,r-1),Yy.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Ky.distanceTo(Yy);e.setAttribute("lineDistance",new Ct(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Eg.copy(n.boundingSphere),Eg.applyMatrix4(r),Eg.radius+=s,e.ray.intersectsSphere(Eg)===!1)return;VE.copy(r).invert(),Wh.copy(e.ray).applyMatrix4(VE);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=this.isLineSegments?2:1,p=n.index,y=n.attributes.position;if(p!==null){const v=Math.max(0,o.start),S=Math.min(p.count,o.start+o.count);for(let w=v,M=S-1;w<M;w+=h){const A=p.getX(w),C=p.getX(w+1),b=wg(this,e,Wh,c,A,C,w);b&&t.push(b)}if(this.isLineLoop){const w=p.getX(S-1),M=p.getX(v),A=wg(this,e,Wh,c,w,M,S-1);A&&t.push(A)}}else{const v=Math.max(0,o.start),S=Math.min(y.count,o.start+o.count);for(let w=v,M=S-1;w<M;w+=h){const A=wg(this,e,Wh,c,w,w+1,w);A&&t.push(A)}if(this.isLineLoop){const w=wg(this,e,Wh,c,S-1,v,S-1);w&&t.push(w)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function wg(i,e,t,n,r,s,o){const l=i.geometry.attributes.position;if(Ky.fromBufferAttribute(l,r),Yy.fromBufferAttribute(l,s),t.distanceSqToSegment(Ky,Yy,ox,WE)>n)return;ox.applyMatrix4(i.matrixWorld);const h=e.ray.origin.distanceTo(ox);if(!(h<e.near||h>e.far))return{distance:h,point:WE.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const jE=new j,XE=new j;class po extends Va{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)jE.fromBufferAttribute(t,r),XE.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+jE.distanceTo(XE);e.setAttribute("lineDistance",new Ct(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class bA extends Va{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Av extends Ci{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new lt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const JE=new Ot,c_=new Ec,Tg=new Qi,Cg=new j;class RA extends pn{constructor(e=new Yt,t=new Av){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Tg.copy(n.boundingSphere),Tg.applyMatrix4(r),Tg.radius+=s,e.ray.intersectsSphere(Tg)===!1)return;JE.copy(r).invert(),c_.copy(e.ray).applyMatrix4(JE);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=n.index,g=n.attributes.position;if(h!==null){const y=Math.max(0,o.start),v=Math.min(h.count,o.start+o.count);for(let S=y,w=v;S<w;S++){const M=h.getX(S);Cg.fromBufferAttribute(g,M),KE(Cg,M,c,r,e,t,this)}}else{const y=Math.max(0,o.start),v=Math.min(g.count,o.start+o.count);for(let S=y,w=v;S<w;S++)Cg.fromBufferAttribute(g,S),KE(Cg,S,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function KE(i,e,t,n,r,s,o){const l=c_.distanceSqToPoint(i);if(l<t){const c=new j;c_.closestPointToPoint(i,c),c.applyMatrix4(n);const h=r.ray.origin.distanceTo(c);if(h<r.near||h>r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class yb extends Gn{constructor(e,t,n,r,s,o,l,c,h){super(e,t,n,r,s,o,l,c,h),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:ai,this.magFilter=s!==void 0?s:ai,this.generateMipmaps=!1;const p=this;function g(){p.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class $N extends yb{constructor(e,t,n,r,s,o,l,c){super({},e,t,n,r,s,o,l,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class e3 extends Gn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ui,this.minFilter=Ui,this.generateMipmaps=!1,this.needsUpdate=!0}}class Sv extends Gn{constructor(e,t,n,r,s,o,l,c,h,p,g,y){super(null,o,l,c,h,p,r,s,g,y),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class t3 extends Sv{constructor(e,t,n,r,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=os,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class n3 extends Sv{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,za),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class i3 extends Gn{constructor(e,t,n,r,s,o,l,c,h){super(e,t,n,r,s,o,l,c,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class PA extends Gn{constructor(e,t,n,r,s,o,l,c,h,p=uc){if(p!==uc&&p!==mc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&p===uc&&(n=Ga),n===void 0&&p===mc&&(n=pc),super(null,r,s,o,l,c,p,n,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:Ui,this.minFilter=c!==void 0?c:Ui,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class mo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let l=0,c=s-1,h;for(;l<=c;)if(r=Math.floor(l+(c-l)/2),h=n[r]-o,h<0)l=r+1;else if(h>0)c=r-1;else{c=r;break}if(r=c,n[r]===o)return r/(s-1);const p=n[r],y=n[r+1]-p,v=(o-p)/y;return(r+v)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),c=t||(o.isVector2?new Ie:new j);return c.copy(l).sub(o).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new j,r=[],s=[],o=[],l=new j,c=new Ot;for(let v=0;v<=e;v++){const S=v/e;r[v]=this.getTangentAt(S,new j)}s[0]=new j,o[0]=new j;let h=Number.MAX_VALUE;const p=Math.abs(r[0].x),g=Math.abs(r[0].y),y=Math.abs(r[0].z);p<=h&&(h=p,n.set(1,0,0)),g<=h&&(h=g,n.set(0,1,0)),y<=h&&n.set(0,0,1),l.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),l.crossVectors(r[v-1],r[v]),l.length()>Number.EPSILON){l.normalize();const S=Math.acos(Xt(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(c.makeRotationAxis(l,S))}o[v].crossVectors(r[v],s[v])}if(t===!0){let v=Math.acos(Xt(s[0].dot(s[e]),-1,1));v/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(v=-v);for(let S=1;S<=e;S++)s[S].applyMatrix4(c.makeRotationAxis(r[S],v*S)),o[S].crossVectors(r[S],s[S])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Mv extends mo{constructor(e=0,t=0,n=1,r=1,s=0,o=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=c}getPoint(e,t=new Ie){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),g=Math.sin(this.aRotation),y=c-this.aX,v=h-this.aY;c=y*p-v*g+this.aX,h=y*g+v*p+this.aY}return n.set(c,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class vb extends Mv{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function BA(){let i=0,e=0,t=0,n=0;function r(s,o,l,c){i=s,e=l,t=-3*s+3*o-2*l-c,n=2*s-2*o+l+c}return{initCatmullRom:function(s,o,l,c,h){r(o,l,h*(l-s),h*(c-o))},initNonuniformCatmullRom:function(s,o,l,c,h,p,g){let y=(o-s)/h-(l-s)/(h+p)+(l-o)/p,v=(l-o)/p-(c-o)/(p+g)+(c-l)/g;y*=p,v*=p,r(o,l,y,v)},calc:function(s){const o=s*s,l=o*s;return i+e*s+t*o+n*l}}}const bg=new j,ax=new BA,lx=new BA,ux=new BA;class xb extends mo{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new j){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let h,p;this.closed||l>0?h=r[(l-1)%s]:(bg.subVectors(r[0],r[1]).add(r[0]),h=bg);const g=r[l%s],y=r[(l+1)%s];if(this.closed||l+2<s?p=r[(l+2)%s]:(bg.subVectors(r[s-1],r[s-2]).add(r[s-1]),p=bg),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let S=Math.pow(h.distanceToSquared(g),v),w=Math.pow(g.distanceToSquared(y),v),M=Math.pow(y.distanceToSquared(p),v);w<1e-4&&(w=1),S<1e-4&&(S=w),M<1e-4&&(M=w),ax.initNonuniformCatmullRom(h.x,g.x,y.x,p.x,S,w,M),lx.initNonuniformCatmullRom(h.y,g.y,y.y,p.y,S,w,M),ux.initNonuniformCatmullRom(h.z,g.z,y.z,p.z,S,w,M)}else this.curveType==="catmullrom"&&(ax.initCatmullRom(h.x,g.x,y.x,p.x,this.tension),lx.initCatmullRom(h.y,g.y,y.y,p.y,this.tension),ux.initCatmullRom(h.z,g.z,y.z,p.z,this.tension));return n.set(ax.calc(c),lx.calc(c),ux.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new j().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function YE(i,e,t,n,r){const s=(n-e)*.5,o=(r-t)*.5,l=i*i,c=i*l;return(2*t-2*n+s+o)*c+(-3*t+3*n-2*s-o)*l+s*i+t}function r3(i,e){const t=1-i;return t*t*e}function s3(i,e){return 2*(1-i)*i*e}function o3(i,e){return i*i*e}function cp(i,e,t,n){return r3(i,e)+s3(i,t)+o3(i,n)}function a3(i,e){const t=1-i;return t*t*t*e}function l3(i,e){const t=1-i;return 3*t*t*i*e}function u3(i,e){return 3*(1-i)*i*i*e}function c3(i,e){return i*i*i*e}function fp(i,e,t,n,r){return a3(i,e)+l3(i,t)+u3(i,n)+c3(i,r)}class IA extends mo{constructor(e=new Ie,t=new Ie,n=new Ie,r=new Ie){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Ie){const n=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(fp(e,r.x,s.x,o.x,l.x),fp(e,r.y,s.y,o.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class _b extends mo{constructor(e=new j,t=new j,n=new j,r=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new j){const n=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(fp(e,r.x,s.x,o.x,l.x),fp(e,r.y,s.y,o.y,l.y),fp(e,r.z,s.z,o.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class DA extends mo{constructor(e=new Ie,t=new Ie){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ie){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ie){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ab extends mo{constructor(e=new j,t=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new j){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new j){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LA extends mo{constructor(e=new Ie,t=new Ie,n=new Ie){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ie){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(cp(e,r.x,s.x,o.x),cp(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FA extends mo{constructor(e=new j,t=new j,n=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new j){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(cp(e,r.x,s.x,o.x),cp(e,r.y,s.y,o.y),cp(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class NA extends mo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ie){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),l=s-o,c=r[o===0?o:o-1],h=r[o],p=r[o>r.length-2?r.length-1:o+1],g=r[o>r.length-3?r.length-1:o+2];return n.set(YE(l,c.x,h.x,p.x,g.x),YE(l,c.y,h.y,p.y,g.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new Ie().fromArray(r))}return this}}var Qy=Object.freeze({__proto__:null,ArcCurve:vb,CatmullRomCurve3:xb,CubicBezierCurve:IA,CubicBezierCurve3:_b,EllipseCurve:Mv,LineCurve:DA,LineCurve3:Ab,QuadraticBezierCurve:LA,QuadraticBezierCurve3:FA,SplineCurve:NA});class Sb extends mo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Qy[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,l=this.curves[s],c=l.getLength(),h=c===0?0:1-o/c;return l.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(l);for(let h=0;h<c.length;h++){const p=c[h];n&&n.equals(p)||(t.push(p),n=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new Qy[r.type]().fromJSON(r))}return this}}class Cp extends Sb{constructor(e){super(),this.type="Path",this.currentPoint=new Ie,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new DA(this.currentPoint.clone(),new Ie(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new LA(this.currentPoint.clone(),new Ie(e,t),new Ie(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const l=new IA(this.currentPoint.clone(),new Ie(e,t),new Ie(n,r),new Ie(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new NA(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,l,c){const h=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+h,t+p,n,r,s,o,l,c),this}absellipse(e,t,n,r,s,o,l,c){const h=new Mv(e,t,n,r,s,o,l,c);if(this.curves.length>0){const g=h.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(h);const p=h.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Kp extends Yt{constructor(e=[new Ie(0,-.5),new Ie(.5,0),new Ie(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Xt(r,0,Math.PI*2);const s=[],o=[],l=[],c=[],h=[],p=1/t,g=new j,y=new Ie,v=new j,S=new j,w=new j;let M=0,A=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:M=e[C+1].x-e[C].x,A=e[C+1].y-e[C].y,v.x=A*1,v.y=-M,v.z=A*0,w.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case e.length-1:c.push(w.x,w.y,w.z);break;default:M=e[C+1].x-e[C].x,A=e[C+1].y-e[C].y,v.x=A*1,v.y=-M,v.z=A*0,S.copy(v),v.x+=w.x,v.y+=w.y,v.z+=w.z,v.normalize(),c.push(v.x,v.y,v.z),w.copy(S)}for(let C=0;C<=t;C++){const b=n+C*p*r,B=Math.sin(b),N=Math.cos(b);for(let F=0;F<=e.length-1;F++){g.x=e[F].x*B,g.y=e[F].y,g.z=e[F].x*N,o.push(g.x,g.y,g.z),y.x=C/t,y.y=F/(e.length-1),l.push(y.x,y.y);const k=c[3*F+0]*B,z=c[3*F+1],L=c[3*F+0]*N;h.push(k,z,L)}}for(let C=0;C<t;C++)for(let b=0;b<e.length-1;b++){const B=b+C*e.length,N=B,F=B+e.length,k=B+e.length+1,z=B+1;s.push(N,F,z),s.push(k,z,F)}this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("uv",new Ct(l,2)),this.setAttribute("normal",new Ct(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kp(e.points,e.segments,e.phiStart,e.phiLength)}}class Ev extends Kp{constructor(e=1,t=1,n=4,r=8){const s=new Cp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new Ev(e.radius,e.length,e.capSegments,e.radialSegments)}}class wv extends Yt{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],l=[],c=[],h=new j,p=new Ie;o.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let g=0,y=3;g<=t;g++,y+=3){const v=n+g/t*r;h.x=e*Math.cos(v),h.y=e*Math.sin(v),o.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(o[y]/e+1)/2,p.y=(o[y+1]/e+1)/2,c.push(p.x,p.y)}for(let g=1;g<=t;g++)s.push(g,g+1,0);this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("normal",new Ct(l,3)),this.setAttribute("uv",new Ct(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Id extends Yt{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c};const h=this;r=Math.floor(r),s=Math.floor(s);const p=[],g=[],y=[],v=[];let S=0;const w=[],M=n/2;let A=0;C(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(p),this.setAttribute("position",new Ct(g,3)),this.setAttribute("normal",new Ct(y,3)),this.setAttribute("uv",new Ct(v,2));function C(){const B=new j,N=new j;let F=0;const k=(t-e)/n;for(let z=0;z<=s;z++){const L=[],D=z/s,V=D*(t-e)+e;for(let oe=0;oe<=r;oe++){const ie=oe/r,ye=ie*c+l,xe=Math.sin(ye),ge=Math.cos(ye);N.x=V*xe,N.y=-D*n+M,N.z=V*ge,g.push(N.x,N.y,N.z),B.set(xe,k,ge).normalize(),y.push(B.x,B.y,B.z),v.push(ie,1-D),L.push(S++)}w.push(L)}for(let z=0;z<r;z++)for(let L=0;L<s;L++){const D=w[L][z],V=w[L+1][z],oe=w[L+1][z+1],ie=w[L][z+1];(e>0||L!==0)&&(p.push(D,V,ie),F+=3),(t>0||L!==s-1)&&(p.push(V,oe,ie),F+=3)}h.addGroup(A,F,0),A+=F}function b(B){const N=S,F=new Ie,k=new j;let z=0;const L=B===!0?e:t,D=B===!0?1:-1;for(let oe=1;oe<=r;oe++)g.push(0,M*D,0),y.push(0,D,0),v.push(.5,.5),S++;const V=S;for(let oe=0;oe<=r;oe++){const ye=oe/r*c+l,xe=Math.cos(ye),ge=Math.sin(ye);k.x=L*ge,k.y=M*D,k.z=L*xe,g.push(k.x,k.y,k.z),y.push(0,D,0),F.x=xe*.5+.5,F.y=ge*.5*D+.5,v.push(F.x,F.y),S++}for(let oe=0;oe<r;oe++){const ie=N+oe,ye=V+oe;B===!0?p.push(ye,ye+1,ie):p.push(ye+1,ye,ie),z+=3}h.addGroup(A,z,B===!0?1:2),A+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Id(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Tv extends Id{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,n,r,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new Tv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Wl extends Yt{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],o=[];l(r),h(n),p(),this.setAttribute("position",new Ct(s,3)),this.setAttribute("normal",new Ct(s.slice(),3)),this.setAttribute("uv",new Ct(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(C){const b=new j,B=new j,N=new j;for(let F=0;F<t.length;F+=3)v(t[F+0],b),v(t[F+1],B),v(t[F+2],N),c(b,B,N,C)}function c(C,b,B,N){const F=N+1,k=[];for(let z=0;z<=F;z++){k[z]=[];const L=C.clone().lerp(B,z/F),D=b.clone().lerp(B,z/F),V=F-z;for(let oe=0;oe<=V;oe++)oe===0&&z===F?k[z][oe]=L:k[z][oe]=L.clone().lerp(D,oe/V)}for(let z=0;z<F;z++)for(let L=0;L<2*(F-z)-1;L++){const D=Math.floor(L/2);L%2===0?(y(k[z][D+1]),y(k[z+1][D]),y(k[z][D])):(y(k[z][D+1]),y(k[z+1][D+1]),y(k[z+1][D]))}}function h(C){const b=new j;for(let B=0;B<s.length;B+=3)b.x=s[B+0],b.y=s[B+1],b.z=s[B+2],b.normalize().multiplyScalar(C),s[B+0]=b.x,s[B+1]=b.y,s[B+2]=b.z}function p(){const C=new j;for(let b=0;b<s.length;b+=3){C.x=s[b+0],C.y=s[b+1],C.z=s[b+2];const B=M(C)/2/Math.PI+.5,N=A(C)/Math.PI+.5;o.push(B,1-N)}S(),g()}function g(){for(let C=0;C<o.length;C+=6){const b=o[C+0],B=o[C+2],N=o[C+4],F=Math.max(b,B,N),k=Math.min(b,B,N);F>.9&&k<.1&&(b<.2&&(o[C+0]+=1),B<.2&&(o[C+2]+=1),N<.2&&(o[C+4]+=1))}}function y(C){s.push(C.x,C.y,C.z)}function v(C,b){const B=C*3;b.x=e[B+0],b.y=e[B+1],b.z=e[B+2]}function S(){const C=new j,b=new j,B=new j,N=new j,F=new Ie,k=new Ie,z=new Ie;for(let L=0,D=0;L<s.length;L+=9,D+=6){C.set(s[L+0],s[L+1],s[L+2]),b.set(s[L+3],s[L+4],s[L+5]),B.set(s[L+6],s[L+7],s[L+8]),F.set(o[D+0],o[D+1]),k.set(o[D+2],o[D+3]),z.set(o[D+4],o[D+5]),N.copy(C).add(b).add(B).divideScalar(3);const V=M(N);w(F,D+0,C,V),w(k,D+2,b,V),w(z,D+4,B,V)}}function w(C,b,B,N){N<0&&C.x===1&&(o[b]=C.x-1),B.x===0&&B.z===0&&(o[b]=N/2/Math.PI+.5)}function M(C){return Math.atan2(C.z,-C.x)}function A(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wl(e.vertices,e.indices,e.radius,e.details)}}class Cv extends Wl{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Cv(e.radius,e.detail)}}const Rg=new j,Pg=new j,cx=new j,Bg=new Wr;class Mb extends Yt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(cc*t),o=e.getIndex(),l=e.getAttribute("position"),c=o?o.count:l.count,h=[0,0,0],p=["a","b","c"],g=new Array(3),y={},v=[];for(let S=0;S<c;S+=3){o?(h[0]=o.getX(S),h[1]=o.getX(S+1),h[2]=o.getX(S+2)):(h[0]=S,h[1]=S+1,h[2]=S+2);const{a:w,b:M,c:A}=Bg;if(w.fromBufferAttribute(l,h[0]),M.fromBufferAttribute(l,h[1]),A.fromBufferAttribute(l,h[2]),Bg.getNormal(cx),g[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,g[1]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,g[2]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let C=0;C<3;C++){const b=(C+1)%3,B=g[C],N=g[b],F=Bg[p[C]],k=Bg[p[b]],z=`${B}_${N}`,L=`${N}_${B}`;L in y&&y[L]?(cx.dot(y[L].normal)<=s&&(v.push(F.x,F.y,F.z),v.push(k.x,k.y,k.z)),y[L]=null):z in y||(y[z]={index0:h[C],index1:h[b],normal:cx.clone()})}}for(const S in y)if(y[S]){const{index0:w,index1:M}=y[S];Rg.fromBufferAttribute(l,w),Pg.fromBufferAttribute(l,M),v.push(Rg.x,Rg.y,Rg.z),v.push(Pg.x,Pg.y,Pg.z)}this.setAttribute("position",new Ct(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class dc extends Cp{constructor(e){super(e),this.uuid=us(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new Cp().fromJSON(r))}return this}}const f3={triangulate:function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=Eb(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,c,h,p,g,y,v;if(n&&(s=g3(i,e,s,t)),i.length>80*t){l=h=i[0],c=p=i[1];for(let S=t;S<r;S+=t)g=i[S],y=i[S+1],g<l&&(l=g),y<c&&(c=y),g>h&&(h=g),y>p&&(p=y);v=Math.max(h-l,p-c),v=v!==0?32767/v:0}return bp(s,o,t,l,c,v,0),o}};function Eb(i,e,t,n,r){let s,o;if(r===C3(i,e,t,n)>0)for(s=e;s<t;s+=n)o=QE(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=QE(s,i[s],i[s+1],o);return o&&bv(o,o.next)&&(Pp(o),o=o.next),o}function vc(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(bv(t,t.next)||Kn(t.prev,t,t.next)===0)){if(Pp(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function bp(i,e,t,n,r,s,o){if(!i)return;!o&&s&&A3(i,n,r,s);let l=i,c,h;for(;i.prev!==i.next;){if(c=i.prev,h=i.next,s?h3(i,n,r,s):d3(i)){e.push(c.i/t|0),e.push(i.i/t|0),e.push(h.i/t|0),Pp(i),i=h.next,l=h.next;continue}if(i=h,i===l){o?o===1?(i=p3(vc(i),e,t),bp(i,e,t,n,r,s,2)):o===2&&m3(i,e,t,n,r,s):bp(vc(i),e,t,n,r,s,1);break}}}function d3(i){const e=i.prev,t=i,n=i.next;if(Kn(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,l=e.y,c=t.y,h=n.y,p=r<s?r<o?r:o:s<o?s:o,g=l<c?l<h?l:h:c<h?c:h,y=r>s?r>o?r:o:s>o?s:o,v=l>c?l>h?l:h:c>h?c:h;let S=n.next;for(;S!==e;){if(S.x>=p&&S.x<=y&&S.y>=g&&S.y<=v&&ud(r,l,s,c,o,h,S.x,S.y)&&Kn(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function h3(i,e,t,n){const r=i.prev,s=i,o=i.next;if(Kn(r,s,o)>=0)return!1;const l=r.x,c=s.x,h=o.x,p=r.y,g=s.y,y=o.y,v=l<c?l<h?l:h:c<h?c:h,S=p<g?p<y?p:y:g<y?g:y,w=l>c?l>h?l:h:c>h?c:h,M=p>g?p>y?p:y:g>y?g:y,A=f_(v,S,e,t,n),C=f_(w,M,e,t,n);let b=i.prevZ,B=i.nextZ;for(;b&&b.z>=A&&B&&B.z<=C;){if(b.x>=v&&b.x<=w&&b.y>=S&&b.y<=M&&b!==r&&b!==o&&ud(l,p,c,g,h,y,b.x,b.y)&&Kn(b.prev,b,b.next)>=0||(b=b.prevZ,B.x>=v&&B.x<=w&&B.y>=S&&B.y<=M&&B!==r&&B!==o&&ud(l,p,c,g,h,y,B.x,B.y)&&Kn(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;b&&b.z>=A;){if(b.x>=v&&b.x<=w&&b.y>=S&&b.y<=M&&b!==r&&b!==o&&ud(l,p,c,g,h,y,b.x,b.y)&&Kn(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;B&&B.z<=C;){if(B.x>=v&&B.x<=w&&B.y>=S&&B.y<=M&&B!==r&&B!==o&&ud(l,p,c,g,h,y,B.x,B.y)&&Kn(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function p3(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!bv(r,s)&&wb(r,n,n.next,s)&&Rp(r,s)&&Rp(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),Pp(n),Pp(n.next),n=i=s),n=n.next}while(n!==i);return vc(n)}function m3(i,e,t,n,r,s){let o=i;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&E3(o,l)){let c=Tb(o,l);o=vc(o,o.next),c=vc(c,c.next),bp(o,e,t,n,r,s,0),bp(c,e,t,n,r,s,0);return}l=l.next}o=o.next}while(o!==i)}function g3(i,e,t,n){const r=[];let s,o,l,c,h;for(s=0,o=e.length;s<o;s++)l=e[s]*n,c=s<o-1?e[s+1]*n:i.length,h=Eb(i,l,c,n,!1),h===h.next&&(h.steiner=!0),r.push(M3(h));for(r.sort(y3),s=0;s<r.length;s++)t=v3(r[s],t);return t}function y3(i,e){return i.x-e.x}function v3(i,e){const t=x3(i,e);if(!t)return e;const n=Tb(t,i);return vc(n,n.next),vc(t,t.next)}function x3(i,e){let t=e,n=-1/0,r;const s=i.x,o=i.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const y=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>n&&(n=y,r=t.x<t.next.x?t:t.next,y===s))return r}t=t.next}while(t!==e);if(!r)return null;const l=r,c=r.x,h=r.y;let p=1/0,g;t=r;do s>=t.x&&t.x>=c&&s!==t.x&&ud(o<h?s:n,o,c,h,o<h?n:s,o,t.x,t.y)&&(g=Math.abs(o-t.y)/(s-t.x),Rp(t,i)&&(g<p||g===p&&(t.x>r.x||t.x===r.x&&_3(r,t)))&&(r=t,p=g)),t=t.next;while(t!==l);return r}function _3(i,e){return Kn(i.prev,i,e.prev)<0&&Kn(e.next,i,i.next)<0}function A3(i,e,t,n){let r=i;do r.z===0&&(r.z=f_(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,S3(r)}function S3(i){let e,t,n,r,s,o,l,c,h=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,l=0,e=0;e<h&&(l++,n=n.nextZ,!!n);e++);for(c=h;l>0||c>0&&n;)l!==0&&(c===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,l--):(r=n,n=n.nextZ,c--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,h*=2}while(o>1);return i}function f_(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function M3(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function ud(i,e,t,n,r,s,o,l){return(r-o)*(e-l)>=(i-o)*(s-l)&&(i-o)*(n-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(r-o)*(n-l)}function E3(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!w3(i,e)&&(Rp(i,e)&&Rp(e,i)&&T3(i,e)&&(Kn(i.prev,i,e.prev)||Kn(i,e.prev,e))||bv(i,e)&&Kn(i.prev,i,i.next)>0&&Kn(e.prev,e,e.next)>0)}function Kn(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function bv(i,e){return i.x===e.x&&i.y===e.y}function wb(i,e,t,n){const r=Dg(Kn(i,e,t)),s=Dg(Kn(i,e,n)),o=Dg(Kn(t,n,i)),l=Dg(Kn(t,n,e));return!!(r!==s&&o!==l||r===0&&Ig(i,t,e)||s===0&&Ig(i,n,e)||o===0&&Ig(t,i,n)||l===0&&Ig(t,e,n))}function Ig(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Dg(i){return i>0?1:i<0?-1:0}function w3(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&wb(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Rp(i,e){return Kn(i.prev,i,i.next)<0?Kn(i,e,i.next)>=0&&Kn(i,i.prev,e)>=0:Kn(i,e,i.prev)<0||Kn(i,i.next,e)<0}function T3(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function Tb(i,e){const t=new d_(i.i,i.x,i.y),n=new d_(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function QE(i,e,t,n){const r=new d_(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Pp(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function d_(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C3(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}class No{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return No.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];qE(e),ZE(n,e);let o=e.length;t.forEach(qE);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,ZE(n,t[c]);const l=f3.triangulate(n,r);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function qE(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function ZE(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class Rv extends Yt{constructor(e=new dc([new Ie(.5,.5),new Ie(-.5,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let l=0,c=e.length;l<c;l++){const h=e[l];o(h)}this.setAttribute("position",new Ct(r,3)),this.setAttribute("uv",new Ct(s,2)),this.computeVertexNormals();function o(l){const c=[],h=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:v-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const A=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:b3;let b,B=!1,N,F,k,z;A&&(b=A.getSpacedPoints(p),B=!0,y=!1,N=A.computeFrenetFrames(p,!1),F=new j,k=new j,z=new j),y||(M=0,v=0,S=0,w=0);const L=l.extractPoints(h);let D=L.shape;const V=L.holes;if(!No.isClockWise(D)){D=D.reverse();for(let Fe=0,be=V.length;Fe<be;Fe++){const K=V[Fe];No.isClockWise(K)&&(V[Fe]=K.reverse())}}const ie=No.triangulateShape(D,V),ye=D;for(let Fe=0,be=V.length;Fe<be;Fe++){const K=V[Fe];D=D.concat(K)}function xe(Fe,be,K){return be||console.error("THREE.ExtrudeGeometry: vec does not exist"),Fe.clone().addScaledVector(be,K)}const ge=D.length,de=ie.length;function W(Fe,be,K){let mt,ke,et;const Xe=Fe.x-be.x,wt=Fe.y-be.y,qe=K.x-Fe.x,X=K.y-Fe.y,H=Xe*Xe+wt*wt,pe=Xe*X-wt*qe;if(Math.abs(pe)>Number.EPSILON){const Te=Math.sqrt(H),Ue=Math.sqrt(qe*qe+X*X),Pe=be.x-wt/Te,st=be.y+Xe/Te,Ze=K.x-X/Ue,ct=K.y+qe/Ue,Gt=((Ze-Pe)*X-(ct-st)*qe)/(Xe*X-wt*qe);mt=Pe+Xe*Gt-Fe.x,ke=st+wt*Gt-Fe.y;const ze=mt*mt+ke*ke;if(ze<=2)return new Ie(mt,ke);et=Math.sqrt(ze/2)}else{let Te=!1;Xe>Number.EPSILON?qe>Number.EPSILON&&(Te=!0):Xe<-Number.EPSILON?qe<-Number.EPSILON&&(Te=!0):Math.sign(wt)===Math.sign(X)&&(Te=!0),Te?(mt=-wt,ke=Xe,et=Math.sqrt(H)):(mt=Xe,ke=wt,et=Math.sqrt(H/2))}return new Ie(mt/et,ke/et)}const re=[];for(let Fe=0,be=ye.length,K=be-1,mt=Fe+1;Fe<be;Fe++,K++,mt++)K===be&&(K=0),mt===be&&(mt=0),re[Fe]=W(ye[Fe],ye[K],ye[mt]);const $=[];let J,ae=re.concat();for(let Fe=0,be=V.length;Fe<be;Fe++){const K=V[Fe];J=[];for(let mt=0,ke=K.length,et=ke-1,Xe=mt+1;mt<ke;mt++,et++,Xe++)et===ke&&(et=0),Xe===ke&&(Xe=0),J[mt]=W(K[mt],K[et],K[Xe]);$.push(J),ae=ae.concat(J)}for(let Fe=0;Fe<M;Fe++){const be=Fe/M,K=v*Math.cos(be*Math.PI/2),mt=S*Math.sin(be*Math.PI/2)+w;for(let ke=0,et=ye.length;ke<et;ke++){const Xe=xe(ye[ke],re[ke],mt);De(Xe.x,Xe.y,-K)}for(let ke=0,et=V.length;ke<et;ke++){const Xe=V[ke];J=$[ke];for(let wt=0,qe=Xe.length;wt<qe;wt++){const X=xe(Xe[wt],J[wt],mt);De(X.x,X.y,-K)}}}const Le=S+w;for(let Fe=0;Fe<ge;Fe++){const be=y?xe(D[Fe],ae[Fe],Le):D[Fe];B?(k.copy(N.normals[0]).multiplyScalar(be.x),F.copy(N.binormals[0]).multiplyScalar(be.y),z.copy(b[0]).add(k).add(F),De(z.x,z.y,z.z)):De(be.x,be.y,0)}for(let Fe=1;Fe<=p;Fe++)for(let be=0;be<ge;be++){const K=y?xe(D[be],ae[be],Le):D[be];B?(k.copy(N.normals[Fe]).multiplyScalar(K.x),F.copy(N.binormals[Fe]).multiplyScalar(K.y),z.copy(b[Fe]).add(k).add(F),De(z.x,z.y,z.z)):De(K.x,K.y,g/p*Fe)}for(let Fe=M-1;Fe>=0;Fe--){const be=Fe/M,K=v*Math.cos(be*Math.PI/2),mt=S*Math.sin(be*Math.PI/2)+w;for(let ke=0,et=ye.length;ke<et;ke++){const Xe=xe(ye[ke],re[ke],mt);De(Xe.x,Xe.y,g+K)}for(let ke=0,et=V.length;ke<et;ke++){const Xe=V[ke];J=$[ke];for(let wt=0,qe=Xe.length;wt<qe;wt++){const X=xe(Xe[wt],J[wt],mt);B?De(X.x,X.y+b[p-1].y,b[p-1].x+K):De(X.x,X.y,g+K)}}}fe(),we();function fe(){const Fe=r.length/3;if(y){let be=0,K=ge*be;for(let mt=0;mt<de;mt++){const ke=ie[mt];je(ke[2]+K,ke[1]+K,ke[0]+K)}be=p+M*2,K=ge*be;for(let mt=0;mt<de;mt++){const ke=ie[mt];je(ke[0]+K,ke[1]+K,ke[2]+K)}}else{for(let be=0;be<de;be++){const K=ie[be];je(K[2],K[1],K[0])}for(let be=0;be<de;be++){const K=ie[be];je(K[0]+ge*p,K[1]+ge*p,K[2]+ge*p)}}n.addGroup(Fe,r.length/3-Fe,0)}function we(){const Fe=r.length/3;let be=0;Ne(ye,be),be+=ye.length;for(let K=0,mt=V.length;K<mt;K++){const ke=V[K];Ne(ke,be),be+=ke.length}n.addGroup(Fe,r.length/3-Fe,1)}function Ne(Fe,be){let K=Fe.length;for(;--K>=0;){const mt=K;let ke=K-1;ke<0&&(ke=Fe.length-1);for(let et=0,Xe=p+M*2;et<Xe;et++){const wt=ge*et,qe=ge*(et+1),X=be+mt+wt,H=be+ke+wt,pe=be+ke+qe,Te=be+mt+qe;xt(X,H,pe,Te)}}}function De(Fe,be,K){c.push(Fe),c.push(be),c.push(K)}function je(Fe,be,K){Je(Fe),Je(be),Je(K);const mt=r.length/3,ke=C.generateTopUV(n,r,mt-3,mt-2,mt-1);rt(ke[0]),rt(ke[1]),rt(ke[2])}function xt(Fe,be,K,mt){Je(Fe),Je(be),Je(mt),Je(be),Je(K),Je(mt);const ke=r.length/3,et=C.generateSideWallUV(n,r,ke-6,ke-3,ke-2,ke-1);rt(et[0]),rt(et[1]),rt(et[3]),rt(et[1]),rt(et[2]),rt(et[3])}function Je(Fe){r.push(c[Fe*3+0]),r.push(c[Fe*3+1]),r.push(c[Fe*3+2])}function rt(Fe){s.push(Fe.x),s.push(Fe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return R3(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];n.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Qy[r.type]().fromJSON(r)),new Rv(n,e.options)}}const b3={generateTopUV:function(i,e,t,n,r){const s=e[t*3],o=e[t*3+1],l=e[n*3],c=e[n*3+1],h=e[r*3],p=e[r*3+1];return[new Ie(s,o),new Ie(l,c),new Ie(h,p)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[t*3],l=e[t*3+1],c=e[t*3+2],h=e[n*3],p=e[n*3+1],g=e[n*3+2],y=e[r*3],v=e[r*3+1],S=e[r*3+2],w=e[s*3],M=e[s*3+1],A=e[s*3+2];return Math.abs(l-p)<Math.abs(o-h)?[new Ie(o,1-c),new Ie(h,1-g),new Ie(y,1-S),new Ie(w,1-A)]:[new Ie(l,1-c),new Ie(p,1-g),new Ie(v,1-S),new Ie(M,1-A)]}};function R3(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Pv extends Wl{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Pv(e.radius,e.detail)}}class Yp extends Wl{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Yp(e.radius,e.detail)}}class Dd extends Yt{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,l=Math.floor(n),c=Math.floor(r),h=l+1,p=c+1,g=e/l,y=t/c,v=[],S=[],w=[],M=[];for(let A=0;A<p;A++){const C=A*y-o;for(let b=0;b<h;b++){const B=b*g-s;S.push(B,-C,0),w.push(0,0,1),M.push(b/l),M.push(1-A/c)}}for(let A=0;A<c;A++)for(let C=0;C<l;C++){const b=C+h*A,B=C+h*(A+1),N=C+1+h*(A+1),F=C+1+h*A;v.push(b,B,F),v.push(B,N,F)}this.setIndex(v),this.setAttribute("position",new Ct(S,3)),this.setAttribute("normal",new Ct(w,3)),this.setAttribute("uv",new Ct(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dd(e.width,e.height,e.widthSegments,e.heightSegments)}}class Bv extends Yt{constructor(e=.5,t=1,n=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const l=[],c=[],h=[],p=[];let g=e;const y=(t-e)/r,v=new j,S=new Ie;for(let w=0;w<=r;w++){for(let M=0;M<=n;M++){const A=s+M/n*o;v.x=g*Math.cos(A),v.y=g*Math.sin(A),c.push(v.x,v.y,v.z),h.push(0,0,1),S.x=(v.x/t+1)/2,S.y=(v.y/t+1)/2,p.push(S.x,S.y)}g+=y}for(let w=0;w<r;w++){const M=w*(n+1);for(let A=0;A<n;A++){const C=A+M,b=C,B=C+n+1,N=C+n+2,F=C+1;l.push(b,B,F),l.push(B,N,F)}}this.setIndex(l),this.setAttribute("position",new Ct(c,3)),this.setAttribute("normal",new Ct(h,3)),this.setAttribute("uv",new Ct(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Iv extends Yt{constructor(e=new dc([new Ie(0,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let l=0,c=0;if(Array.isArray(e)===!1)h(e);else for(let p=0;p<e.length;p++)h(e[p]),this.addGroup(l,c,p),l+=c,c=0;this.setIndex(n),this.setAttribute("position",new Ct(r,3)),this.setAttribute("normal",new Ct(s,3)),this.setAttribute("uv",new Ct(o,2));function h(p){const g=r.length/3,y=p.extractPoints(t);let v=y.shape;const S=y.holes;No.isClockWise(v)===!1&&(v=v.reverse());for(let M=0,A=S.length;M<A;M++){const C=S[M];No.isClockWise(C)===!0&&(S[M]=C.reverse())}const w=No.triangulateShape(v,S);for(let M=0,A=S.length;M<A;M++){const C=S[M];v=v.concat(C)}for(let M=0,A=v.length;M<A;M++){const C=v[M];r.push(C.x,C.y,0),s.push(0,0,1),o.push(C.x,C.y)}for(let M=0,A=w.length;M<A;M++){const C=w[M],b=C[0]+g,B=C[1]+g,N=C[2]+g;n.push(b,B,N),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return P3(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];n.push(o)}return new Iv(n,e.curveSegments)}}function P3(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class Qp extends Yt{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const c=Math.min(o+l,Math.PI);let h=0;const p=[],g=new j,y=new j,v=[],S=[],w=[],M=[];for(let A=0;A<=n;A++){const C=[],b=A/n;let B=0;A===0&&o===0?B=.5/t:A===n&&c===Math.PI&&(B=-.5/t);for(let N=0;N<=t;N++){const F=N/t;g.x=-e*Math.cos(r+F*s)*Math.sin(o+b*l),g.y=e*Math.cos(o+b*l),g.z=e*Math.sin(r+F*s)*Math.sin(o+b*l),S.push(g.x,g.y,g.z),y.copy(g).normalize(),w.push(y.x,y.y,y.z),M.push(F+B,1-b),C.push(h++)}p.push(C)}for(let A=0;A<n;A++)for(let C=0;C<t;C++){const b=p[A][C+1],B=p[A][C],N=p[A+1][C],F=p[A+1][C+1];(A!==0||o>0)&&v.push(b,B,F),(A!==n-1||c<Math.PI)&&v.push(B,N,F)}this.setIndex(v),this.setAttribute("position",new Ct(S,3)),this.setAttribute("normal",new Ct(w,3)),this.setAttribute("uv",new Ct(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Dv extends Wl{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Dv(e.radius,e.detail)}}class Lv extends Yt{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],l=[],c=[],h=[],p=new j,g=new j,y=new j;for(let v=0;v<=n;v++)for(let S=0;S<=r;S++){const w=S/r*s,M=v/n*Math.PI*2;g.x=(e+t*Math.cos(M))*Math.cos(w),g.y=(e+t*Math.cos(M))*Math.sin(w),g.z=t*Math.sin(M),l.push(g.x,g.y,g.z),p.x=e*Math.cos(w),p.y=e*Math.sin(w),y.subVectors(g,p).normalize(),c.push(y.x,y.y,y.z),h.push(S/r),h.push(v/n)}for(let v=1;v<=n;v++)for(let S=1;S<=r;S++){const w=(r+1)*v+S-1,M=(r+1)*(v-1)+S-1,A=(r+1)*(v-1)+S,C=(r+1)*v+S;o.push(w,M,C),o.push(M,A,C)}this.setIndex(o),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(c,3)),this.setAttribute("uv",new Ct(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Fv extends Yt{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const l=[],c=[],h=[],p=[],g=new j,y=new j,v=new j,S=new j,w=new j,M=new j,A=new j;for(let b=0;b<=n;++b){const B=b/n*s*Math.PI*2;C(B,s,o,e,v),C(B+.01,s,o,e,S),M.subVectors(S,v),A.addVectors(S,v),w.crossVectors(M,A),A.crossVectors(w,M),w.normalize(),A.normalize();for(let N=0;N<=r;++N){const F=N/r*Math.PI*2,k=-t*Math.cos(F),z=t*Math.sin(F);g.x=v.x+(k*A.x+z*w.x),g.y=v.y+(k*A.y+z*w.y),g.z=v.z+(k*A.z+z*w.z),c.push(g.x,g.y,g.z),y.subVectors(g,v).normalize(),h.push(y.x,y.y,y.z),p.push(b/n),p.push(N/r)}}for(let b=1;b<=n;b++)for(let B=1;B<=r;B++){const N=(r+1)*(b-1)+(B-1),F=(r+1)*b+(B-1),k=(r+1)*b+B,z=(r+1)*(b-1)+B;l.push(N,F,z),l.push(F,k,z)}this.setIndex(l),this.setAttribute("position",new Ct(c,3)),this.setAttribute("normal",new Ct(h,3)),this.setAttribute("uv",new Ct(p,2));function C(b,B,N,F,k){const z=Math.cos(b),L=Math.sin(b),D=N/B*b,V=Math.cos(D);k.x=F*(2+V)*.5*z,k.y=F*(2+V)*L*.5,k.z=F*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Nv extends Yt{constructor(e=new FA(new j(-1,-1,0),new j(-1,1,0),new j(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new j,c=new j,h=new Ie;let p=new j;const g=[],y=[],v=[],S=[];w(),this.setIndex(S),this.setAttribute("position",new Ct(g,3)),this.setAttribute("normal",new Ct(y,3)),this.setAttribute("uv",new Ct(v,2));function w(){for(let b=0;b<t;b++)M(b);M(s===!1?t:0),C(),A()}function M(b){p=e.getPointAt(b/t,p);const B=o.normals[b],N=o.binormals[b];for(let F=0;F<=r;F++){const k=F/r*Math.PI*2,z=Math.sin(k),L=-Math.cos(k);c.x=L*B.x+z*N.x,c.y=L*B.y+z*N.y,c.z=L*B.z+z*N.z,c.normalize(),y.push(c.x,c.y,c.z),l.x=p.x+n*c.x,l.y=p.y+n*c.y,l.z=p.z+n*c.z,g.push(l.x,l.y,l.z)}}function A(){for(let b=1;b<=t;b++)for(let B=1;B<=r;B++){const N=(r+1)*(b-1)+(B-1),F=(r+1)*b+(B-1),k=(r+1)*b+B,z=(r+1)*(b-1)+B;S.push(N,F,z),S.push(F,k,z)}}function C(){for(let b=0;b<=t;b++)for(let B=0;B<=r;B++)h.x=b/t,h.y=B/r,v.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Nv(new Qy[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Cb extends Yt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new j,s=new j;if(e.index!==null){const o=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let h=0,p=c.length;h<p;++h){const g=c[h],y=g.start,v=g.count;for(let S=y,w=y+v;S<w;S+=3)for(let M=0;M<3;M++){const A=l.getX(S+M),C=l.getX(S+(M+1)%3);r.fromBufferAttribute(o,A),s.fromBufferAttribute(o,C),$E(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,c=o.count/3;l<c;l++)for(let h=0;h<3;h++){const p=3*l+h,g=3*l+(h+1)%3;r.fromBufferAttribute(o,p),s.fromBufferAttribute(o,g),$E(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ct(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function $E(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var ew=Object.freeze({__proto__:null,BoxGeometry:wc,CapsuleGeometry:Ev,CircleGeometry:wv,ConeGeometry:Tv,CylinderGeometry:Id,DodecahedronGeometry:Cv,EdgesGeometry:Mb,ExtrudeGeometry:Rv,IcosahedronGeometry:Pv,LatheGeometry:Kp,OctahedronGeometry:Yp,PlaneGeometry:Dd,PolyhedronGeometry:Wl,RingGeometry:Bv,ShapeGeometry:Iv,SphereGeometry:Qp,TetrahedronGeometry:Dv,TorusGeometry:Lv,TorusKnotGeometry:Fv,TubeGeometry:Nv,WireframeGeometry:Cb});class bb extends Ci{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new lt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Rb extends ho{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class qp extends Ci{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new lt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new cs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Is extends qp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ie(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Xt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new lt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new lt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new lt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Pb extends Ci{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new lt(16777215),this.specular=new lt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new cs,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Bb extends Ci{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new lt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Ib extends Ci{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Db extends Ci{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new cs,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class UA extends Ci{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=KC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class OA extends Ci{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Lb extends Ci{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new lt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Fb extends dr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function rc(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function Nb(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Ub(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function h_(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const l=t[s]*e;for(let c=0;c!==e;++c)r[o++]=i[l+c]}return r}function kA(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)}function B3(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const h=s.tracks[c],p=h.getValueSize(),g=[],y=[];for(let v=0;v<h.times.length;++v){const S=h.times[v]*r;if(!(S<t||S>=n)){g.push(h.times[v]);for(let w=0;w<p;++w)y.push(h.values[v*p+w])}}g.length!==0&&(h.times=rc(g,h.times.constructor),h.values=rc(y,h.values.constructor),o.push(h))}s.tracks=o;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s}function I3(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const l=t.tracks[o],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const h=i.tracks.find(function(A){return A.name===l.name&&A.ValueTypeName===c});if(h===void 0)continue;let p=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);let y=0;const v=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=v/3);const S=l.times.length-1;let w;if(s<=l.times[0]){const A=p,C=g-p;w=l.values.slice(A,C)}else if(s>=l.times[S]){const A=S*g+p,C=A+g-p;w=l.values.slice(A,C)}else{const A=l.createInterpolant(),C=p,b=g-p;A.evaluate(s),w=A.resultBuffer.slice(C,b)}c==="quaternion"&&new Oi().fromArray(w).normalize().conjugate().toArray(w);const M=h.times.length;for(let A=0;A<M;++A){const C=A*v+y;if(c==="quaternion")Oi.multiplyQuaternionsFlat(h.values,C,w,0,h.values,C);else{const b=v-y*2;for(let B=0;B<b;++B)h.values[C+B]-=w[B]}}}return i.blendMode=vA,i}const D3={convertArray:rc,isTypedArray:Nb,getKeyframeOrder:Ub,sortedArray:h_,flattenJSON:kA,subclip:B3,makeClipAdditive:I3};class Ld{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let l=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(n=2,s=l);for(let c=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ob extends Ld{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:tc,endingEnd:tc}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],c=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case nc:s=e,l=2*t-n;break;case Sp:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=n}if(c===void 0)switch(this.getSettings_().endingEnd){case nc:o=e,c=2*n-t;break;case Sp:o=1,c=n+r[1]-r[0];break;default:o=e-1,c=t}const h=(n-t)*.5,p=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(c-n),this._offsetPrev=s*p,this._offsetNext=o*p}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,h=c-l,p=this._offsetPrev,g=this._offsetNext,y=this._weightPrev,v=this._weightNext,S=(n-t)/(r-t),w=S*S,M=w*S,A=-y*M+2*y*w-y*S,C=(1+y)*M+(-1.5-2*y)*w+(-.5+y)*S+1,b=(-1-v)*M+(1.5+v)*w+.5*S,B=v*M-v*w;for(let N=0;N!==l;++N)s[N]=A*o[p+N]+C*o[h+N]+b*o[c+N]+B*o[g+N];return s}}class HA extends Ld{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,h=c-l,p=(n-t)/(r-t),g=1-p;for(let y=0;y!==l;++y)s[y]=o[h+y]*g+o[c+y]*p;return s}}class kb extends Ld{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class go{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=rc(t,this.TimeBufferType),this.values=rc(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:rc(e.times,Array),values:rc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new kb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new HA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ob(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case _d:t=this.InterpolantFactoryMethodDiscrete;break;case Ad:t=this.InterpolantFactoryMethodLinear;break;case ey:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _d;case this.InterpolantFactoryMethodLinear:return Ad;case this.InterpolantFactoryMethodSmooth:return ey}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const c=n[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(r!==void 0&&Nb(r))for(let l=0,c=r.length;l!==c;++l){const h=r[l];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===ey,s=e.length-1;let o=1;for(let l=1;l<s;++l){let c=!1;const h=e[l],p=e[l+1];if(h!==p&&(l!==1||h!==e[0]))if(r)c=!0;else{const g=l*n,y=g-n,v=g+n;for(let S=0;S!==n;++S){const w=t[g+S];if(w!==t[y+S]||w!==t[v+S]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];const g=l*n,y=o*n;for(let v=0;v!==n;++v)t[y+v]=t[g+v]}++o}}if(s>0){e[o]=e[s];for(let l=s*n,c=o*n,h=0;h!==n;++h)t[c+h]=t[l+h];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}go.prototype.TimeBufferType=Float32Array;go.prototype.ValueBufferType=Float32Array;go.prototype.DefaultInterpolation=Ad;class Tc extends go{constructor(e,t,n){super(e,t,n)}}Tc.prototype.ValueTypeName="bool";Tc.prototype.ValueBufferType=Array;Tc.prototype.DefaultInterpolation=_d;Tc.prototype.InterpolantFactoryMethodLinear=void 0;Tc.prototype.InterpolantFactoryMethodSmooth=void 0;class zA extends go{}zA.prototype.ValueTypeName="color";class xc extends go{}xc.prototype.ValueTypeName="number";class Hb extends Ld{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(n-t)/(r-t);let h=e*l;for(let p=h+l;h!==p;h+=4)Oi.slerpFlat(s,0,o,h-l,o,h,c);return s}}class _c extends go{InterpolantFactoryMethodLinear(e){return new Hb(this.times,this.values,this.getValueSize(),e)}}_c.prototype.ValueTypeName="quaternion";_c.prototype.InterpolantFactoryMethodSmooth=void 0;class Cc extends go{constructor(e,t,n){super(e,t,n)}}Cc.prototype.ValueTypeName="string";Cc.prototype.ValueBufferType=Array;Cc.prototype.DefaultInterpolation=_d;Cc.prototype.InterpolantFactoryMethodLinear=void 0;Cc.prototype.InterpolantFactoryMethodSmooth=void 0;class Ac extends go{}Ac.prototype.ValueTypeName="vector";class Ed{constructor(e="",t=-1,n=[],r=mv){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=us(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,l=n.length;o!==l;++o)t.push(F3(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(go.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let l=0;l<s;l++){let c=[],h=[];c.push((l+s-1)%s,l,(l+1)%s),h.push(0,1,0);const p=Ub(c);c=h_(c,1,p),h=h_(h,1,p),!r&&c[0]===0&&(c.push(s),h.push(h[0])),o.push(new xc(".morphTargetInfluences["+t[l].name+"]",c,h).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const h=e[l],p=h.name.match(s);if(p&&p.length>1){const g=p[1];let y=r[g];y||(r[g]=y=[]),y.push(h)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,y,v,S,w){if(v.length!==0){const M=[],A=[];kA(v,M,A,S),M.length!==0&&w.push(new g(y,M,A))}},r=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let c=e.length||-1;const h=e.hierarchy||[];for(let g=0;g<h.length;g++){const y=h[g].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const v={};let S;for(S=0;S<y.length;S++)if(y[S].morphTargets)for(let w=0;w<y[S].morphTargets.length;w++)v[y[S].morphTargets[w]]=-1;for(const w in v){const M=[],A=[];for(let C=0;C!==y[S].morphTargets.length;++C){const b=y[S];M.push(b.time),A.push(b.morphTarget===w?1:0)}r.push(new xc(".morphTargetInfluence["+w+"]",M,A))}c=v.length*o}else{const v=".bones["+t[g].name+"]";n(Ac,v+".position",y,"pos",r),n(_c,v+".quaternion",y,"rot",r),n(Ac,v+".scale",y,"scl",r)}}return r.length===0?null:new this(s,c,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function L3(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xc;case"vector":case"vector2":case"vector3":case"vector4":return Ac;case"color":return zA;case"quaternion":return _c;case"bool":case"boolean":return Tc;case"string":return Cc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function F3(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=L3(i.type);if(i.times===void 0){const t=[],n=[];kA(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Da={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class GA{constructor(e,t,n){const r=this;let s=!1,o=0,l=0,c;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(p){l++,s===!1&&r.onStart!==void 0&&r.onStart(p,o,l),s=!0},this.itemEnd=function(p){o++,r.onProgress!==void 0&&r.onProgress(p,o,l),o===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,g){return h.push(p,g),this},this.removeHandler=function(p){const g=h.indexOf(p);return g!==-1&&h.splice(g,2),this},this.getHandler=function(p){for(let g=0,y=h.length;g<y;g+=2){const v=h[g],S=h[g+1];if(v.global&&(v.lastIndex=0),v.test(p))return S}return null}}}const zb=new GA;class hr{constructor(e){this.manager=e!==void 0?e:zb,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}hr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ta={};class N3 extends Error{constructor(e,t){super(e),this.response=t}}class fs extends hr{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Da.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ta[e]!==void 0){Ta[e].push({onLoad:t,onProgress:n,onError:r});return}Ta[e]=[],Ta[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(o).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const p=Ta[e],g=h.body.getReader(),y=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),v=y?parseInt(y):0,S=v!==0;let w=0;const M=new ReadableStream({start(A){C();function C(){g.read().then(({done:b,value:B})=>{if(b)A.close();else{w+=B.byteLength;const N=new ProgressEvent("progress",{lengthComputable:S,loaded:w,total:v});for(let F=0,k=p.length;F<k;F++){const z=p[F];z.onProgress&&z.onProgress(N)}A.enqueue(B),C()}},b=>{A.error(b)})}}});return new Response(M)}else throw new N3(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(c){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return h.json();default:if(l===void 0)return h.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),y=g&&g[1]?g[1].toLowerCase():void 0,v=new TextDecoder(y);return h.arrayBuffer().then(S=>v.decode(S))}}}).then(h=>{Da.add(e,h);const p=Ta[e];delete Ta[e];for(let g=0,y=p.length;g<y;g++){const v=p[g];v.onLoad&&v.onLoad(h)}}).catch(h=>{const p=Ta[e];if(p===void 0)throw this.manager.itemError(e),h;delete Ta[e];for(let g=0,y=p.length;g<y;g++){const v=p[g];v.onError&&v.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class U3 extends hr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new fs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Ed.parse(e[n]);t.push(r)}return t}}class O3 extends hr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=[],l=new Sv,c=new fs(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let h=0;function p(g){c.load(e[g],function(y){const v=s.parse(y,!0);o[g]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},h+=1,h===6&&(v.mipmapCount===1&&(l.minFilter=ai),l.image=o,l.format=v.format,l.needsUpdate=!0,t&&t(l))},n,r)}if(Array.isArray(e))for(let g=0,y=e.length;g<y;++g)p(g);else c.load(e,function(g){const y=s.parse(g,!0);if(y.isCubemap){const v=y.mipmaps.length/y.mipmapCount;for(let S=0;S<v;S++){o[S]={mipmaps:[]};for(let w=0;w<y.mipmapCount;w++)o[S].mipmaps.push(y.mipmaps[S*y.mipmapCount+w]),o[S].format=y.format,o[S].width=y.width,o[S].height=y.height}l.image=o}else l.image.width=y.width,l.image.height=y.height,l.mipmaps=y.mipmaps;y.mipmapCount===1&&(l.minFilter=ai),l.format=y.format,l.needsUpdate=!0,t&&t(l)},n,r);return l}}class Bp extends hr{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Da.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=Tp("img");function c(){p(),Da.add(e,this),t&&t(this),s.manager.itemEnd(e)}function h(g){p(),r&&r(g),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){l.removeEventListener("load",c,!1),l.removeEventListener("error",h,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class k3 extends hr{constructor(e){super(e)}load(e,t,n,r){const s=new Wp;s.colorSpace=Vr;const o=new Bp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function c(h){o.load(e[h],function(p){s.images[h]=p,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let h=0;h<e.length;++h)c(h);return s}}class H3 extends hr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Fo,l=new fs(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(c){let h;try{h=s.parse(c)}catch(p){if(r!==void 0)r(p);else{console.error(p);return}}h.image!==void 0?o.image=h.image:h.data!==void 0&&(o.image.width=h.width,o.image.height=h.height,o.image.data=h.data),o.wrapS=h.wrapS!==void 0?h.wrapS:os,o.wrapT=h.wrapT!==void 0?h.wrapT:os,o.magFilter=h.magFilter!==void 0?h.magFilter:ai,o.minFilter=h.minFilter!==void 0?h.minFilter:ai,o.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(o.colorSpace=h.colorSpace),h.flipY!==void 0&&(o.flipY=h.flipY),h.format!==void 0&&(o.format=h.format),h.type!==void 0&&(o.type=h.type),h.mipmaps!==void 0&&(o.mipmaps=h.mipmaps,o.minFilter=Bs),h.mipmapCount===1&&(o.minFilter=ai),h.generateMipmaps!==void 0&&(o.generateMipmaps=h.generateMipmaps),o.needsUpdate=!0,t&&t(o,h)},n,r),o}}class Gb extends hr{constructor(e){super(e)}load(e,t,n,r){const s=new Gn,o=new Bp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class jl extends pn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new lt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class Vb extends jl{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(pn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new lt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const fx=new Ot,tw=new j,nw=new j;class VA{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ie(512,512),this.map=null,this.mapPass=null,this.matrix=new Ot,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Jp,this._frameExtents=new Ie(1,1),this._viewportCount=1,this._viewports=[new xn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;tw.setFromMatrixPosition(e.matrixWorld),t.position.copy(tw),nw.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(nw),t.updateMatrixWorld(),fx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fx),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(fx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class z3 extends VA{constructor(){super(new zn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Sd*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class WA extends jl{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(pn.DEFAULT_UP),this.updateMatrix(),this.target=new pn,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new z3}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const iw=new Ot,jh=new j,dx=new j;class G3 extends VA{constructor(){super(new zn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ie(4,2),this._viewportCount=6,this._viewports=[new xn(2,1,1,1),new xn(0,1,1,1),new xn(3,1,1,1),new xn(1,1,1,1),new xn(3,0,1,1),new xn(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),jh.setFromMatrixPosition(e.matrixWorld),n.position.copy(jh),dx.copy(n.position),dx.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(dx),n.updateMatrixWorld(),r.makeTranslation(-jh.x,-jh.y,-jh.z),iw.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(iw)}}class jA extends jl{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new G3}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class co extends Vp{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,l=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,l-=p*this.view.offsetY,c=l-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class V3 extends VA{constructor(){super(new co(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class XA extends jl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(pn.DEFAULT_UP),this.updateMatrix(),this.target=new pn,this.shadow=new V3}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Wb extends jl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class jb extends jl{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Xb{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new j)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class Jb extends jl{constructor(e=new Xb,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Uv extends hr{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,o=new fs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new lt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=n(o.value);break;case"c":r.uniforms[s].value=new lt().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ie().fromArray(o.value);break;case"v3":r.uniforms[s].value=new j().fromArray(o.value);break;case"v4":r.uniforms[s].value=new xn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Kt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Ot().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ie().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ie().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Uv.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:bb,SpriteMaterial:wA,RawShaderMaterial:Rb,ShaderMaterial:ho,PointsMaterial:Av,MeshPhysicalMaterial:Is,MeshStandardMaterial:qp,MeshPhongMaterial:Pb,MeshToonMaterial:Bb,MeshNormalMaterial:Ib,MeshLambertMaterial:Db,MeshDepthMaterial:UA,MeshDistanceMaterial:OA,MeshBasicMaterial:as,MeshMatcapMaterial:Lb,LineDashedMaterial:Fb,LineBasicMaterial:dr,Material:Ci};return new t[e]}}class Fl{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Kb extends Yt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Yb extends hr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new fs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(v,S){if(t[S]!==void 0)return t[S];const M=v.interleavedBuffers[S],A=s(v,M.buffer),C=ld(M.type,A),b=new jp(C,M.stride);return b.uuid=M.uuid,t[S]=b,b}function s(v,S){if(n[S]!==void 0)return n[S];const M=v.arrayBuffers[S],A=new Uint32Array(M).buffer;return n[S]=A,A}const o=e.isInstancedBufferGeometry?new Kb:new Yt,l=e.data.index;if(l!==void 0){const v=ld(l.type,l.array);o.setIndex(new _n(v,1))}const c=e.data.attributes;for(const v in c){const S=c[v];let w;if(S.isInterleavedBufferAttribute){const M=r(e.data,S.data);w=new zl(M,S.itemSize,S.offset,S.normalized)}else{const M=ld(S.type,S.array),A=S.isInstancedBufferAttribute?yc:_n;w=new A(M,S.itemSize,S.normalized)}S.name!==void 0&&(w.name=S.name),S.usage!==void 0&&w.setUsage(S.usage),o.setAttribute(v,w)}const h=e.data.morphAttributes;if(h)for(const v in h){const S=h[v],w=[];for(let M=0,A=S.length;M<A;M++){const C=S[M];let b;if(C.isInterleavedBufferAttribute){const B=r(e.data,C.data);b=new zl(B,C.itemSize,C.offset,C.normalized)}else{const B=ld(C.type,C.array);b=new _n(B,C.itemSize,C.normalized)}C.name!==void 0&&(b.name=C.name),w.push(b)}o.morphAttributes[v]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let v=0,S=g.length;v!==S;++v){const w=g[v];o.addGroup(w.start,w.count,w.materialIndex)}const y=e.data.boundingSphere;if(y!==void 0){const v=new j;y.center!==void 0&&v.fromArray(y.center),o.boundingSphere=new Qi(v,y.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class W3 extends hr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=this.path===""?Fl.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new fs(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let h=null;try{h=JSON.parse(c)}catch(g){r!==void 0&&r(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const p=h.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(h,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?Fl.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new fs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(h)}),l=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,c,l,n),p=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,p),this.bindLightTargets(h),t!==void 0){let g=!1;for(const y in o)if(o[y].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,r,l,o,t),h=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,h),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new dc().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new Xp().fromJSON(e[s],r);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new Yb;for(let s=0,o=e.length;s<o;s++){let l;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(c);break;default:c.type in ew?l=ew[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),n[c.uuid]=l}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new Uv;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const c=e[o];n[c.uuid]===void 0&&(n[c.uuid]=s.parse(c)),r[c.uuid]=n[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=Ed.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function o(c){return n.manager.itemStart(c),s.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const h=c,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;return o(p)}else return c.data?{data:ld(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new GA(t);s=new Bp(c),s.setCrossOrigin(this.crossOrigin);for(let h=0,p=e.length;h<p;h++){const g=e[h],y=g.url;if(Array.isArray(y)){const v=[];for(let S=0,w=y.length;S<w;S++){const M=y[S],A=l(M);A!==null&&(A instanceof HTMLImageElement?v.push(A):v.push(new Fo(A.data,A.width,A.height)))}r[g.uuid]=new ic(v)}else{const v=l(g.url);r[g.uuid]=new ic(v)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(o){if(typeof o=="string"){const l=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(c)}else return o.data?{data:ld(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Bp(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const c=e[o],h=c.url;if(Array.isArray(h)){const p=[];for(let g=0,y=h.length;g<y;g++){const v=h[g],S=await s(v);S!==null&&(S instanceof HTMLImageElement?p.push(S):p.push(new Fo(S.data,S.width,S.height)))}n[c.uuid]=new ic(p)}else{const p=await s(c.url);n[c.uuid]=new ic(p)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=t[l.image],h=c.data;let p;Array.isArray(h)?(p=new Wp,h.length===6&&(p.needsUpdate=!0)):(h&&h.data?p=new Fo:p=new Gn,h&&(p.needsUpdate=!0)),p.source=c,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=n(l.mapping,j3)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=n(l.wrap[0],rw),p.wrapT=n(l.wrap[1],rw)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.minFilter!==void 0&&(p.minFilter=n(l.minFilter,sw)),l.magFilter!==void 0&&(p.magFilter=n(l.magFilter,sw)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),r[l.uuid]=p}return r}parseObject(e,t,n,r,s){let o;function l(y){return t[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),t[y]}function c(y){if(y!==void 0){if(Array.isArray(y)){const v=[];for(let S=0,w=y.length;S<w;S++){const M=y[S];n[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),v.push(n[M])}return v}return n[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),n[y]}}function h(y){return r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),r[y]}let p,g;switch(e.type){case"Scene":o=new EA,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new lt(e.background):o.background=h(e.background)),e.environment!==void 0&&(o.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new xv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new vv(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new zn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new co(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Wb(e.color,e.intensity);break;case"DirectionalLight":o=new XA(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new jA(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new jb(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new WA(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new Vb(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Jb().fromJSON(e);break;case"SkinnedMesh":p=l(e.geometry),g=c(e.material),o=new TA(p,g),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),g=c(e.material),o=new li(p,g);break;case"InstancedMesh":p=l(e.geometry),g=c(e.material);const y=e.count,v=e.instanceMatrix,S=e.instanceColor;o=new CA(p,g,y),o.instanceMatrix=new yc(new Float32Array(v.array),16),S!==void 0&&(o.instanceColor=new yc(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":p=l(e.geometry),g=c(e.material),o=new gb(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),o.geometry=p,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(w=>{const M=new fr;M.min.fromArray(w.boxMin),M.max.fromArray(w.boxMax);const A=new Qi;return A.radius=w.sphereRadius,A.center.fromArray(w.sphereCenter),{boxInitialized:w.boxInitialized,box:M,sphereInitialized:w.sphereInitialized,sphere:A}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=h(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=h(e.colorsTexture.uuid));break;case"LOD":o=new mb;break;case"Line":o=new Va(l(e.geometry),c(e.material));break;case"LineLoop":o=new bA(l(e.geometry),c(e.material));break;case"LineSegments":o=new po(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new RA(l(e.geometry),c(e.material));break;case"Sprite":o=new pb(c(e.material));break;case"Group":o=new Ia;break;case"Bone":o=new _v;break;default:o=new pn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let v=0;v<y.length;v++)o.add(this.parseObject(y[v],t,n,r,s))}if(e.animations!==void 0){const y=e.animations;for(let v=0;v<y.length;v++){const S=y[v];o.animations.push(s[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const y=e.levels;for(let v=0;v<y.length;v++){const S=y[v],w=o.getObjectByProperty("uuid",S.object);w!==void 0&&o.addLevel(w,S.distance,S.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new pn}})}}const j3={UVMapping:av,CubeReflectionMapping:za,CubeRefractionMapping:kl,EquirectangularReflectionMapping:_p,EquirectangularRefractionMapping:Ap,CubeUVReflectionMapping:Pd},rw={RepeatWrapping:Hl,ClampToEdgeWrapping:os,MirroredRepeatWrapping:vd},sw={NearestFilter:Ui,NearestMipmapNearestFilter:lv,NearestMipmapLinearFilter:ec,LinearFilter:ai,LinearMipmapNearestFilter:dd,LinearMipmapLinearFilter:Bs};class Qb extends hr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Da.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(h=>{t&&t(h),s.manager.itemEnd(e)}).catch(h=>{r&&r(h)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(e,l).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return Da.add(e,h),t&&t(h),s.manager.itemEnd(e),h}).catch(function(h){r&&r(h),Da.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Da.add(e,c),s.manager.itemStart(e)}}let Lg;class JA{static getContext(){return Lg===void 0&&(Lg=new(window.AudioContext||window.webkitAudioContext)),Lg}static setContext(e){Lg=e}}class X3 extends hr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new fs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const h=c.slice(0);JA.getContext().decodeAudioData(h,function(g){t(g)}).catch(l)}catch(h){l(h)}},n,r);function l(c){r?r(c):console.error(c),s.manager.itemError(e)}}}const ow=new Ot,aw=new Ot,Ou=new Ot;class J3{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new zn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new zn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ou.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(cc*t.fov*.5)/t.zoom;let l,c;aw.elements[12]=-r,ow.elements[12]=r,l=-o*t.aspect+s,c=o*t.aspect+s,Ou.elements[0]=2*t.near/(c-l),Ou.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(Ou),l=-o*t.aspect-s,c=o*t.aspect-s,Ou.elements[0]=2*t.near/(c-l),Ou.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(Ou)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(aw),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ow)}}class qb extends zn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class KA{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=lw(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=lw();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function lw(){return performance.now()}const ku=new j,uw=new Oi,K3=new j,Hu=new j;class Y3 extends pn{constructor(){super(),this.type="AudioListener",this.context=JA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new KA}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ku,uw,K3),Hu.set(0,0,-1).applyQuaternion(uw),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ku.x,r),t.positionY.linearRampToValueAtTime(ku.y,r),t.positionZ.linearRampToValueAtTime(ku.z,r),t.forwardX.linearRampToValueAtTime(Hu.x,r),t.forwardY.linearRampToValueAtTime(Hu.y,r),t.forwardZ.linearRampToValueAtTime(Hu.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(ku.x,ku.y,ku.z),t.setOrientation(Hu.x,Hu.y,Hu.z,n.x,n.y,n.z)}}class Zb extends pn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const zu=new j,cw=new Oi,Q3=new j,Gu=new j;class q3 extends Zb{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(zu,cw,Q3),Gu.set(0,0,1).applyQuaternion(cw);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(zu.x,n),t.positionY.linearRampToValueAtTime(zu.y,n),t.positionZ.linearRampToValueAtTime(zu.z,n),t.orientationX.linearRampToValueAtTime(Gu.x,n),t.orientationY.linearRampToValueAtTime(Gu.y,n),t.orientationZ.linearRampToValueAtTime(Gu.z,n)}else t.setPosition(zu.x,zu.y,zu.z),t.setOrientation(Gu.x,Gu.y,Gu.z)}}class Z3{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class $b{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==r;++l)n[s+l]=n[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(n,s,0,l,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(n,r,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let c=t,h=t+t;c!==h;++c)if(n[c]!==n[c+t]){l.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){Oi.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;Oi.multiplyQuaternionsFlat(e,o,e,t,e,n),Oi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]*o+e[n+l]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[n+o]*r}}}const YA="\\[\\]\\.:\\/",$3=new RegExp("["+YA+"]","g"),QA="[^"+YA+"]",eU="[^"+YA.replace("\\.","")+"]",tU=/((?:WC+[\/:])*)/.source.replace("WC",QA),nU=/(WCOD+)?/.source.replace("WCOD",eU),iU=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",QA),rU=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",QA),sU=new RegExp("^"+tU+nU+iU+rU+"$"),oU=["material","materials","bones","map"];class aU{constructor(e,t,n){const r=n||gn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class gn{constructor(e,t,n){this.path=t,this.parsedPath=n||gn.parseTrackName(t),this.node=gn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new gn.Composite(e,t,n):new gn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace($3,"")}static parseTrackName(e){const t=sU.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);oU.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const c=n(l.children);if(c)return c}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=gn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let h=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===h){h=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const o=e[r];if(o===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}gn.Composite=aU;gn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};gn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};gn.prototype.GetterByBindingType=[gn.prototype._getValue_direct,gn.prototype._getValue_array,gn.prototype._getValue_arrayElement,gn.prototype._getValue_toArray];gn.prototype.SetterByBindingTypeAndVersioning=[[gn.prototype._setValue_direct,gn.prototype._setValue_direct_setNeedsUpdate,gn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gn.prototype._setValue_array,gn.prototype._setValue_array_setNeedsUpdate,gn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gn.prototype._setValue_arrayElement,gn.prototype._setValue_arrayElement_setNeedsUpdate,gn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gn.prototype._setValue_fromArray,gn.prototype._setValue_fromArray_setNeedsUpdate,gn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class lU{constructor(){this.isAnimationObjectGroup=!0,this.uuid=us(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let l,c=e.length,h=this.nCachedObjects_;for(let p=0,g=arguments.length;p!==g;++p){const y=arguments[p],v=y.uuid;let S=t[v];if(S===void 0){S=c++,t[v]=S,e.push(y);for(let w=0,M=o;w!==M;++w)s[w].push(new gn(y,n[w],r[w]))}else if(S<h){l=e[S];const w=--h,M=e[w];t[M.uuid]=S,e[S]=M,t[v]=w,e[w]=y;for(let A=0,C=o;A!==C;++A){const b=s[A],B=b[w];let N=b[S];b[S]=B,N===void 0&&(N=new gn(y,n[A],r[A])),b[w]=N}}else e[S]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],h=c.uuid,p=t[h];if(p!==void 0&&p>=s){const g=s++,y=e[g];t[y.uuid]=p,e[p]=y,t[h]=g,e[g]=c;for(let v=0,S=r;v!==S;++v){const w=n[v],M=w[g],A=w[p];w[p]=M,w[g]=A}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,c=arguments.length;l!==c;++l){const h=arguments[l],p=h.uuid,g=t[p];if(g!==void 0)if(delete t[p],g<s){const y=--s,v=e[y],S=--o,w=e[S];t[v.uuid]=g,e[g]=v,t[w.uuid]=y,e[y]=w,e.pop();for(let M=0,A=r;M!==A;++M){const C=n[M],b=C[y],B=C[S];C[g]=b,C[y]=B,C.pop()}}else{const y=--o,v=e[y];y>0&&(t[v.uuid]=g),e[g]=v,e.pop();for(let S=0,w=r;S!==w;++S){const M=n[S];M[g]=M[y],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,l=this._parsedPaths,c=this._objects,h=c.length,p=this.nCachedObjects_,g=new Array(h);r=s.length,n[e]=r,o.push(e),l.push(t),s.push(g);for(let y=p,v=c.length;y!==v;++y){const S=c[y];g[y]=new gn(S,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,c=o[l],h=e[l];t[h]=n,o[n]=c,o.pop(),s[n]=s[l],s.pop(),r[n]=r[l],r.pop()}}}class eR{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,l=new Array(o),c={endingStart:tc,endingEnd:tc};for(let h=0;h!==o;++h){const p=s[h].createInterpolant(null);l[h]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=jC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,o=s/r,l=r/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,h=l.sampleValues;return c[0]=s,c[1]=s+n,h[0]=e/o,h[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*n;c<0||n===0?t=0:(this._startTime=null,t=n*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case vA:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(o),h[p].accumulateAdditive(l);break;case mv:default:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(o),h[p].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===XC;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(n===WC){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const h=e<0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=nc,r.endingEnd=nc):(e?r.endingStart=this.zeroSlopeAtStart?nc:tc:r.endingStart=Sp,t?r.endingEnd=this.zeroSlopeAtEnd?nc:tc:r.endingEnd=Sp)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,c[0]=t,l[1]=s+e,c[1]=n,this}}const uU=new Float32Array(1);class cU extends zo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,l=e._interpolants,c=n.uuid,h=this._bindingsByRootAndName;let p=h[c];p===void 0&&(p={},h[c]=p);for(let g=0;g!==s;++g){const y=r[g],v=y.name;let S=p[v];if(S!==void 0)++S.referenceCount,o[g]=S;else{if(S=o[g],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,c,v));continue}const w=t&&t._propertyBindings[g].binding.parsedPath;S=new $b(gn.create(n,v,w),y.ValueTypeName,y.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,c,v),o[g]=S}l[g].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],c=l.knownActions,h=c[c.length-1],p=e._byClipCacheIndex;h._byClipCacheIndex=p,c[p]=h,c.pop(),e._byClipCacheIndex=null;const g=l.actionByRoot,y=(e._localRoot||this._root).uuid;delete g[y],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,l=o[r],c=t[t.length-1],h=e._cacheIndex;c._cacheIndex=h,t[h]=c,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new HA(new Float32Array(2),new Float32Array(2),1,uU),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Ed.findByName(r,e):e;const l=o!==null?o.uuid:e,c=this._actionsByClip[l];let h=null;if(n===void 0&&(o!==null?n=o.blendMode:n=mv),c!==void 0){const g=c.actionByRoot[s];if(g!==void 0&&g.blendMode===n)return g;h=c.knownActions[0],o===null&&(o=h._clip)}if(o===null)return null;const p=new eR(this,o,t,n);return this._bindAction(p,h),this._addInactiveAction(p,l,s),p}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?Ed.findByName(n,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let h=0;h!==n;++h)t[h]._update(r,e,s,o);const l=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)l[h].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const o=s.knownActions;for(let l=0,c=o.length;l!==c;++l){const h=o[l];this._deactivateAction(h);const p=h._cacheIndex,g=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,g._cacheIndex=p,t[p]=g,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class fU extends gv{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new yv(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class dU extends gv{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=n,this.texture=new Gp(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class qA{constructor(e){this.value=e}clone(){return new qA(this.value.clone===void 0?this.value:this.value.clone())}}let hU=0;class pU extends zo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:hU++}),this.name="",this.usage=Ep,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class mU extends jp{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class gU{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const fw=new Ot;class tR{constructor(e,t,n=0,r=1/0){this.ray=new Ec(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new fc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return fw.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(fw),this}intersectObject(e,t=!0,n=[]){return p_(e,this,n,t),n.sort(dw),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)p_(e[r],this,n,t);return n.sort(dw),n}}function dw(i,e){return i.distance-e.distance}function p_(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let o=0,l=s.length;o<l;o++)p_(s[o],e,t,!0)}}class m_{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Xt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Xt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class yU{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class ZA{constructor(e,t,n,r){ZA.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const hw=new Ie;class vU{constructor(e=new Ie(1/0,1/0),t=new Ie(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=hw.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,hw).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const pw=new j,Fg=new j;class xU{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){pw.subVectors(e,this.start),Fg.subVectors(this.end,this.start);const n=Fg.dot(Fg);let s=Fg.dot(pw)/n;return t&&(s=Xt(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const mw=new j;class _U extends pn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Yt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,c=32;o<c;o++,l++){const h=o/c*Math.PI*2,p=l/c*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(p),Math.sin(p),1)}n.setAttribute("position",new Ct(r,3));const s=new dr({fog:!1,toneMapped:!1});this.cone=new po(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),mw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(mw),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Rl=new j,Ng=new Ot,hx=new Ot;class AU extends po{constructor(e){const t=nR(e),n=new Yt,r=[],s=[],o=new lt(0,0,1),l=new lt(0,1,0);for(let h=0;h<t.length;h++){const p=t[h];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}n.setAttribute("position",new Ct(r,3)),n.setAttribute("color",new Ct(s,3));const c=new dr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");hx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Ng.multiplyMatrices(hx,l.matrixWorld),Rl.setFromMatrixPosition(Ng),r.setXYZ(o,Rl.x,Rl.y,Rl.z),Ng.multiplyMatrices(hx,l.parent.matrixWorld),Rl.setFromMatrixPosition(Ng),r.setXYZ(o+1,Rl.x,Rl.y,Rl.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function nR(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,nR(i.children[t]));return e}class SU extends li{constructor(e,t,n){const r=new Qp(t,4,2),s=new as({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const MU=new j,gw=new lt,yw=new lt;class EU extends pn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new Yp(t);r.rotateY(Math.PI*.5),this.material=new as({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new _n(o,3)),this.add(new li(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");gw.copy(this.light.color),yw.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?gw:yw;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(MU.setFromMatrixPosition(this.light.matrixWorld).negate())}}class wU extends po{constructor(e=10,t=10,n=4473924,r=8947848){n=new lt(n),r=new lt(r);const s=t/2,o=e/t,l=e/2,c=[],h=[];for(let y=0,v=0,S=-l;y<=t;y++,S+=o){c.push(-l,0,S,l,0,S),c.push(S,0,-l,S,0,l);const w=y===s?n:r;w.toArray(h,v),v+=3,w.toArray(h,v),v+=3,w.toArray(h,v),v+=3,w.toArray(h,v),v+=3}const p=new Yt;p.setAttribute("position",new Ct(c,3)),p.setAttribute("color",new Ct(h,3));const g=new dr({vertexColors:!0,toneMapped:!1});super(p,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class TU extends po{constructor(e=10,t=16,n=8,r=64,s=4473924,o=8947848){s=new lt(s),o=new lt(o);const l=[],c=[];if(t>1)for(let g=0;g<t;g++){const y=g/t*(Math.PI*2),v=Math.sin(y)*e,S=Math.cos(y)*e;l.push(0,0,0),l.push(v,0,S);const w=g&1?s:o;c.push(w.r,w.g,w.b),c.push(w.r,w.g,w.b)}for(let g=0;g<n;g++){const y=g&1?s:o,v=e-e/n*g;for(let S=0;S<r;S++){let w=S/r*(Math.PI*2),M=Math.sin(w)*v,A=Math.cos(w)*v;l.push(M,0,A),c.push(y.r,y.g,y.b),w=(S+1)/r*(Math.PI*2),M=Math.sin(w)*v,A=Math.cos(w)*v,l.push(M,0,A),c.push(y.r,y.g,y.b)}}const h=new Yt;h.setAttribute("position",new Ct(l,3)),h.setAttribute("color",new Ct(c,3));const p=new dr({vertexColors:!0,toneMapped:!1});super(h,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const vw=new j,Ug=new j,xw=new j;class CU extends pn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Yt;r.setAttribute("position",new Ct([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new dr({fog:!1,toneMapped:!1});this.lightPlane=new Va(r,s),this.add(this.lightPlane),r=new Yt,r.setAttribute("position",new Ct([0,0,0,0,0,1],3)),this.targetLine=new Va(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),vw.setFromMatrixPosition(this.light.matrixWorld),Ug.setFromMatrixPosition(this.light.target.matrixWorld),xw.subVectors(Ug,vw),this.lightPlane.lookAt(Ug),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ug),this.targetLine.scale.z=xw.length()}}const Og=new j,ei=new Vp;class bU extends po{constructor(e){const t=new Yt,n=new dr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(S,w){c(S),c(w)}function c(S){r.push(0,0,0),s.push(0,0,0),o[S]===void 0&&(o[S]=[]),o[S].push(r.length/3-1)}t.setAttribute("position",new Ct(r,3)),t.setAttribute("color",new Ct(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const h=new lt(16755200),p=new lt(16711680),g=new lt(43775),y=new lt(16777215),v=new lt(3355443);this.setColors(h,p,g,y,v)}setColors(e,t,n,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;ei.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===uo?-1:0;si("c",t,e,ei,0,0,s),si("t",t,e,ei,0,0,1),si("n1",t,e,ei,-1,-1,s),si("n2",t,e,ei,n,-1,s),si("n3",t,e,ei,-1,r,s),si("n4",t,e,ei,n,r,s),si("f1",t,e,ei,-1,-1,1),si("f2",t,e,ei,n,-1,1),si("f3",t,e,ei,-1,r,1),si("f4",t,e,ei,n,r,1),si("u1",t,e,ei,n*.7,r*1.1,s),si("u2",t,e,ei,-1*.7,r*1.1,s),si("u3",t,e,ei,0,r*2,s),si("cf1",t,e,ei,-1,0,1),si("cf2",t,e,ei,n,0,1),si("cf3",t,e,ei,0,-1,1),si("cf4",t,e,ei,0,r,1),si("cn1",t,e,ei,-1,0,s),si("cn2",t,e,ei,n,0,s),si("cn3",t,e,ei,0,-1,s),si("cn4",t,e,ei,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function si(i,e,t,n,r,s,o){Og.set(r,s,o).unproject(n);const l=e[i];if(l!==void 0){const c=t.getAttribute("position");for(let h=0,p=l.length;h<p;h++)c.setXYZ(l[h],Og.x,Og.y,Og.z)}}const kg=new fr;class RU extends po{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Yt;s.setIndex(new _n(n,1)),s.setAttribute("position",new _n(r,3)),super(s,new dr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&kg.setFromObject(this.object),kg.isEmpty())return;const t=kg.min,n=kg.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class PU extends po{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Yt;s.setIndex(new _n(n,1)),s.setAttribute("position",new Ct(r,3)),super(s,new dr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class BU extends Va{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Yt;o.setAttribute("position",new Ct(s,3)),o.computeBoundingSphere(),super(o,new dr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new Yt;c.setAttribute("position",new Ct(l,3)),c.computeBoundingSphere(),this.add(new li(c,new as({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _w=new j;let Hg,px;class IU extends pn{constructor(e=new j(0,0,1),t=new j(0,0,0),n=1,r=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",Hg===void 0&&(Hg=new Yt,Hg.setAttribute("position",new Ct([0,0,0,0,1,0],3)),px=new Id(0,.5,1,5,1),px.translate(0,-.5,0)),this.position.copy(t),this.line=new Va(Hg,new dr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new li(px,new as({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{_w.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(_w,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class DU extends po{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Yt;r.setAttribute("position",new Ct(t,3)),r.setAttribute("color",new Ct(n,3));const s=new dr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new lt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class LU{constructor(){this.type="ShapePath",this.color=new lt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Cp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(A){const C=[];for(let b=0,B=A.length;b<B;b++){const N=A[b],F=new dc;F.curves=N.curves,C.push(F)}return C}function n(A,C){const b=C.length;let B=!1;for(let N=b-1,F=0;F<b;N=F++){let k=C[N],z=C[F],L=z.x-k.x,D=z.y-k.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(k=C[F],L=-L,z=C[N],D=-D),A.y<k.y||A.y>z.y)continue;if(A.y===k.y){if(A.x===k.x)return!0}else{const V=D*(A.x-k.x)-L*(A.y-k.y);if(V===0)return!0;if(V<0)continue;B=!B}}else{if(A.y!==k.y)continue;if(z.x<=A.x&&A.x<=k.x||k.x<=A.x&&A.x<=z.x)return!0}}return B}const r=No.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,c;const h=[];if(s.length===1)return l=s[0],c=new dc,c.curves=l.curves,h.push(c),h;let p=!r(s[0].getPoints());p=e?!p:p;const g=[],y=[];let v=[],S=0,w;y[S]=void 0,v[S]=[];for(let A=0,C=s.length;A<C;A++)l=s[A],w=l.getPoints(),o=r(w),o=e?!o:o,o?(!p&&y[S]&&S++,y[S]={s:new dc,p:w},y[S].s.curves=l.curves,p&&S++,v[S]=[]):v[S].push({h:l,p:w[0]});if(!y[0])return t(s);if(y.length>1){let A=!1,C=0;for(let b=0,B=y.length;b<B;b++)g[b]=[];for(let b=0,B=y.length;b<B;b++){const N=v[b];for(let F=0;F<N.length;F++){const k=N[F];let z=!0;for(let L=0;L<y.length;L++)n(k.p,y[L].p)&&(b!==L&&C++,z?(z=!1,g[L].push(k)):A=!0);z&&g[b].push(k)}}C>0&&A===!1&&(v=g)}let M;for(let A=0,C=y.length;A<C;A++){c=y[A].s,h.push(c),M=v[A];for(let b=0,B=M.length;b<B;b++)c.holes.push(M[b].h)}return h}}class FU extends zo{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function NU(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function UU(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function OU(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function g_(i,e,t,n){const r=kU(n);switch(t){case dA:return i*e;case pA:return i*e;case mA:return i*e*2;case dv:return i*e/r.components*r.byteLength;case zp:return i*e/r.components*r.byteLength;case gA:return i*e*2/r.components*r.byteLength;case hv:return i*e*2/r.components*r.byteLength;case hA:return i*e*3/r.components*r.byteLength;case cr:return i*e*4/r.components*r.byteLength;case pv:return i*e*4/r.components*r.byteLength;case rp:case sp:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case op:case ap:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Sy:case Ey:return Math.max(i,16)*Math.max(e,8)/4;case Ay:case My:return Math.max(i,8)*Math.max(e,8)/2;case wy:case Ty:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Cy:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case by:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Ry:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case Py:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case By:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case Iy:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case Dy:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case Ly:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case Fy:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case Ny:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case Uy:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case Oy:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case ky:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Hy:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case zy:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case lp:case Gy:case Vy:return Math.ceil(i/4)*Math.ceil(e/4)*16;case yA:case Wy:return Math.ceil(i/4)*Math.ceil(e/4)*8;case jy:case Xy:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function kU(i){switch(i){case fo:case uA:return{byteLength:1,components:1};case xd:case cA:case Bd:return{byteLength:2,components:1};case cv:case fv:return{byteLength:2,components:4};case Ga:case uv:case jr:return{byteLength:4,components:1};case fA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}const HU={contain:NU,cover:UU,fill:OU,getByteLength:g_};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:kp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=kp);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function iR(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function zU(i){const e=new WeakMap;function t(l,c){const h=l.array,p=l.usage,g=h.byteLength,y=i.createBuffer();i.bindBuffer(c,y),i.bufferData(c,h,p),l.onUploadCallback();let v;if(h instanceof Float32Array)v=i.FLOAT;else if(h instanceof Uint16Array)l.isFloat16BufferAttribute?v=i.HALF_FLOAT:v=i.UNSIGNED_SHORT;else if(h instanceof Int16Array)v=i.SHORT;else if(h instanceof Uint32Array)v=i.UNSIGNED_INT;else if(h instanceof Int32Array)v=i.INT;else if(h instanceof Int8Array)v=i.BYTE;else if(h instanceof Uint8Array)v=i.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)v=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:y,type:v,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version,size:g}}function n(l,c,h){const p=c.array,g=c.updateRanges;if(i.bindBuffer(h,l),g.length===0)i.bufferSubData(h,0,p);else{g.sort((v,S)=>v.start-S.start);let y=0;for(let v=1;v<g.length;v++){const S=g[y],w=g[v];w.start<=S.start+S.count+1?S.count=Math.max(S.count,w.start+w.count-S.start):(++y,g[y]=w)}g.length=y+1;for(let v=0,S=g.length;v<S;v++){const w=g[v];i.bufferSubData(h,w.start*p.BYTES_PER_ELEMENT,p,w.start,w.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(i.deleteBuffer(c.buffer),e.delete(l))}function o(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const p=e.get(l);(!p||p.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const h=e.get(l);if(h===void 0)e.set(l,t(l,c));else if(h.version<l.version){if(h.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(h.buffer,l,c),h.version=l.version}}return{get:r,remove:s,update:o}}var GU=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,VU=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,WU=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,jU=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,XU=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,JU=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,KU=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,YU=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,QU=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,qU=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,ZU=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,$U=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,eO=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,tO=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,nO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,iO=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,rO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,sO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,oO=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,aO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,lO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,uO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,cO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,fO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,dO=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,hO=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,pO=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,mO=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,gO=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,yO=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,vO="gl_FragColor = linearToOutputTexel( gl_FragColor );",xO=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,_O=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,AO=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,SO=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,MO=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,EO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,wO=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,TO=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,CO=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,bO=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,RO=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,PO=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,BO=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,IO=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,DO=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,LO=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,FO=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,NO=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,UO=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,OO=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,kO=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,HO=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,zO=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,GO=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,VO=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,WO=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,jO=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,XO=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,JO=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,KO=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,YO=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,QO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,qO=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ZO=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,$O=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,ek=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,tk=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,nk=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,ik=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,rk=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,sk=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,ok=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ak=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lk=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uk=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ck=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,fk=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,dk=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,hk=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,pk=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,mk=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,gk=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,yk=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,vk=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,xk=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,_k=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Ak=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Sk=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Mk=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Ek=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,wk=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Tk=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Ck=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,bk=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Rk=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Pk=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Bk=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Ik=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Dk=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Lk=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Fk=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Nk=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Uk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ok=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Hk=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const zk=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Gk=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Vk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Wk=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Xk=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Jk=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Kk=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Yk=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Qk=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,qk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Zk=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$k=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,eH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,tH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,nH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,oH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,lH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,uH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,dH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,gH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yH=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xH=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_H=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nn={alphahash_fragment:GU,alphahash_pars_fragment:VU,alphamap_fragment:WU,alphamap_pars_fragment:jU,alphatest_fragment:XU,alphatest_pars_fragment:JU,aomap_fragment:KU,aomap_pars_fragment:YU,batching_pars_vertex:QU,batching_vertex:qU,begin_vertex:ZU,beginnormal_vertex:$U,bsdfs:eO,iridescence_fragment:tO,bumpmap_pars_fragment:nO,clipping_planes_fragment:iO,clipping_planes_pars_fragment:rO,clipping_planes_pars_vertex:sO,clipping_planes_vertex:oO,color_fragment:aO,color_pars_fragment:lO,color_pars_vertex:uO,color_vertex:cO,common:fO,cube_uv_reflection_fragment:dO,defaultnormal_vertex:hO,displacementmap_pars_vertex:pO,displacementmap_vertex:mO,emissivemap_fragment:gO,emissivemap_pars_fragment:yO,colorspace_fragment:vO,colorspace_pars_fragment:xO,envmap_fragment:_O,envmap_common_pars_fragment:AO,envmap_pars_fragment:SO,envmap_pars_vertex:MO,envmap_physical_pars_fragment:LO,envmap_vertex:EO,fog_vertex:wO,fog_pars_vertex:TO,fog_fragment:CO,fog_pars_fragment:bO,gradientmap_pars_fragment:RO,lightmap_pars_fragment:PO,lights_lambert_fragment:BO,lights_lambert_pars_fragment:IO,lights_pars_begin:DO,lights_toon_fragment:FO,lights_toon_pars_fragment:NO,lights_phong_fragment:UO,lights_phong_pars_fragment:OO,lights_physical_fragment:kO,lights_physical_pars_fragment:HO,lights_fragment_begin:zO,lights_fragment_maps:GO,lights_fragment_end:VO,logdepthbuf_fragment:WO,logdepthbuf_pars_fragment:jO,logdepthbuf_pars_vertex:XO,logdepthbuf_vertex:JO,map_fragment:KO,map_pars_fragment:YO,map_particle_fragment:QO,map_particle_pars_fragment:qO,metalnessmap_fragment:ZO,metalnessmap_pars_fragment:$O,morphinstance_vertex:ek,morphcolor_vertex:tk,morphnormal_vertex:nk,morphtarget_pars_vertex:ik,morphtarget_vertex:rk,normal_fragment_begin:sk,normal_fragment_maps:ok,normal_pars_fragment:ak,normal_pars_vertex:lk,normal_vertex:uk,normalmap_pars_fragment:ck,clearcoat_normal_fragment_begin:fk,clearcoat_normal_fragment_maps:dk,clearcoat_pars_fragment:hk,iridescence_pars_fragment:pk,opaque_fragment:mk,packing:gk,premultiplied_alpha_fragment:yk,project_vertex:vk,dithering_fragment:xk,dithering_pars_fragment:_k,roughnessmap_fragment:Ak,roughnessmap_pars_fragment:Sk,shadowmap_pars_fragment:Mk,shadowmap_pars_vertex:Ek,shadowmap_vertex:wk,shadowmask_pars_fragment:Tk,skinbase_vertex:Ck,skinning_pars_vertex:bk,skinning_vertex:Rk,skinnormal_vertex:Pk,specularmap_fragment:Bk,specularmap_pars_fragment:Ik,tonemapping_fragment:Dk,tonemapping_pars_fragment:Lk,transmission_fragment:Fk,transmission_pars_fragment:Nk,uv_pars_fragment:Uk,uv_pars_vertex:Ok,uv_vertex:kk,worldpos_vertex:Hk,background_vert:zk,background_frag:Gk,backgroundCube_vert:Vk,backgroundCube_frag:Wk,cube_vert:jk,cube_frag:Xk,depth_vert:Jk,depth_frag:Kk,distanceRGBA_vert:Yk,distanceRGBA_frag:Qk,equirect_vert:qk,equirect_frag:Zk,linedashed_vert:$k,linedashed_frag:eH,meshbasic_vert:tH,meshbasic_frag:nH,meshlambert_vert:iH,meshlambert_frag:rH,meshmatcap_vert:sH,meshmatcap_frag:oH,meshnormal_vert:aH,meshnormal_frag:lH,meshphong_vert:uH,meshphong_frag:cH,meshphysical_vert:fH,meshphysical_frag:dH,meshtoon_vert:hH,meshtoon_frag:pH,points_vert:mH,points_frag:gH,shadow_vert:yH,shadow_frag:vH,sprite_vert:xH,sprite_frag:_H},at={common:{diffuse:{value:new lt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Kt},alphaMap:{value:null},alphaMapTransform:{value:new Kt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Kt}},envmap:{envMap:{value:null},envMapRotation:{value:new Kt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Kt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Kt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Kt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Kt},normalScale:{value:new Ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Kt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Kt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Kt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Kt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new lt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Kt},alphaTest:{value:0},uvTransform:{value:new Kt}},sprite:{diffuse:{value:new lt(16777215)},opacity:{value:1},center:{value:new Ie(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Kt},alphaMap:{value:null},alphaMapTransform:{value:new Kt},alphaTest:{value:0}}},lo={basic:{uniforms:wr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:wr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new lt(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:wr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new lt(0)},specular:{value:new lt(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:wr([at.common,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.roughnessmap,at.metalnessmap,at.fog,at.lights,{emissive:{value:new lt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},toon:{uniforms:wr([at.common,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.gradientmap,at.fog,at.lights,{emissive:{value:new lt(0)}}]),vertexShader:nn.meshtoon_vert,fragmentShader:nn.meshtoon_frag},matcap:{uniforms:wr([at.common,at.bumpmap,at.normalmap,at.displacementmap,at.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:wr([at.points,at.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:wr([at.common,at.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:wr([at.common,at.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:wr([at.common,at.bumpmap,at.normalmap,at.displacementmap,{opacity:{value:1}}]),vertexShader:nn.meshnormal_vert,fragmentShader:nn.meshnormal_frag},sprite:{uniforms:wr([at.sprite,at.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{uvTransform:{value:new Kt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Kt}},vertexShader:nn.backgroundCube_vert,fragmentShader:nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distanceRGBA:{uniforms:wr([at.common,at.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distanceRGBA_vert,fragmentShader:nn.distanceRGBA_frag},shadow:{uniforms:wr([at.lights,at.fog,{color:{value:new lt(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};lo.physical={uniforms:wr([lo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Kt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Kt},clearcoatNormalScale:{value:new Ie(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Kt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Kt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Kt},sheen:{value:0},sheenColor:{value:new lt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Kt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Kt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Kt},transmissionSamplerSize:{value:new Ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Kt},attenuationDistance:{value:0},attenuationColor:{value:new lt(0)},specularColor:{value:new lt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Kt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Kt},anisotropyVector:{value:new Ie},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Kt}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag};const zg={r:0,b:0,g:0},Vu=new cs,AH=new Ot;function SH(i,e,t,n,r,s,o){const l=new lt(0);let c=s===!0?0:1,h,p,g=null,y=0,v=null;function S(b){let B=b.isScene===!0?b.background:null;return B&&B.isTexture&&(B=(b.backgroundBlurriness>0?t:e).get(B)),B}function w(b){let B=!1;const N=S(b);N===null?A(l,c):N&&N.isColor&&(A(N,1),B=!0);const F=i.xr.getEnvironmentBlendMode();F==="additive"?n.buffers.color.setClear(0,0,0,1,o):F==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||B)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function M(b,B){const N=S(B);N&&(N.isCubeTexture||N.mapping===Pd)?(p===void 0&&(p=new li(new wc(1,1,1),new ho({name:"BackgroundCubeMaterial",uniforms:Md(lo.backgroundCube.uniforms),vertexShader:lo.backgroundCube.vertexShader,fragmentShader:lo.backgroundCube.fragmentShader,side:br,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(F,k,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),Vu.copy(B.backgroundRotation),Vu.x*=-1,Vu.y*=-1,Vu.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(Vu.y*=-1,Vu.z*=-1),p.material.uniforms.envMap.value=N,p.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=B.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(AH.makeRotationFromEuler(Vu)),p.material.toneMapped=yn.getTransfer(N.colorSpace)!==wn,(g!==N||y!==N.version||v!==i.toneMapping)&&(p.material.needsUpdate=!0,g=N,y=N.version,v=i.toneMapping),p.layers.enableAll(),b.unshift(p,p.geometry,p.material,0,0,null)):N&&N.isTexture&&(h===void 0&&(h=new li(new Dd(2,2),new ho({name:"BackgroundMaterial",uniforms:Md(lo.background.uniforms),vertexShader:lo.background.vertexShader,fragmentShader:lo.background.fragmentShader,side:Oo,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=N,h.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,h.material.toneMapped=yn.getTransfer(N.colorSpace)!==wn,N.matrixAutoUpdate===!0&&N.updateMatrix(),h.material.uniforms.uvTransform.value.copy(N.matrix),(g!==N||y!==N.version||v!==i.toneMapping)&&(h.material.needsUpdate=!0,g=N,y=N.version,v=i.toneMapping),h.layers.enableAll(),b.unshift(h,h.geometry,h.material,0,0,null))}function A(b,B){b.getRGB(zg,ub(i)),n.buffers.color.setClear(zg.r,zg.g,zg.b,B,o)}function C(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return l},setClearColor:function(b,B=1){l.set(b),c=B,A(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(b){c=b,A(l,c)},render:w,addToRenderList:M,dispose:C}}function MH(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=y(null);let s=r,o=!1;function l(D,V,oe,ie,ye){let xe=!1;const ge=g(ie,oe,V);s!==ge&&(s=ge,h(s.object)),xe=v(D,ie,oe,ye),xe&&S(D,ie,oe,ye),ye!==null&&e.update(ye,i.ELEMENT_ARRAY_BUFFER),(xe||o)&&(o=!1,B(D,V,oe,ie),ye!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(ye).buffer))}function c(){return i.createVertexArray()}function h(D){return i.bindVertexArray(D)}function p(D){return i.deleteVertexArray(D)}function g(D,V,oe){const ie=oe.wireframe===!0;let ye=n[D.id];ye===void 0&&(ye={},n[D.id]=ye);let xe=ye[V.id];xe===void 0&&(xe={},ye[V.id]=xe);let ge=xe[ie];return ge===void 0&&(ge=y(c()),xe[ie]=ge),ge}function y(D){const V=[],oe=[],ie=[];for(let ye=0;ye<t;ye++)V[ye]=0,oe[ye]=0,ie[ye]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:oe,attributeDivisors:ie,object:D,attributes:{},index:null}}function v(D,V,oe,ie){const ye=s.attributes,xe=V.attributes;let ge=0;const de=oe.getAttributes();for(const W in de)if(de[W].location>=0){const $=ye[W];let J=xe[W];if(J===void 0&&(W==="instanceMatrix"&&D.instanceMatrix&&(J=D.instanceMatrix),W==="instanceColor"&&D.instanceColor&&(J=D.instanceColor)),$===void 0||$.attribute!==J||J&&$.data!==J.data)return!0;ge++}return s.attributesNum!==ge||s.index!==ie}function S(D,V,oe,ie){const ye={},xe=V.attributes;let ge=0;const de=oe.getAttributes();for(const W in de)if(de[W].location>=0){let $=xe[W];$===void 0&&(W==="instanceMatrix"&&D.instanceMatrix&&($=D.instanceMatrix),W==="instanceColor"&&D.instanceColor&&($=D.instanceColor));const J={};J.attribute=$,$&&$.data&&(J.data=$.data),ye[W]=J,ge++}s.attributes=ye,s.attributesNum=ge,s.index=ie}function w(){const D=s.newAttributes;for(let V=0,oe=D.length;V<oe;V++)D[V]=0}function M(D){A(D,0)}function A(D,V){const oe=s.newAttributes,ie=s.enabledAttributes,ye=s.attributeDivisors;oe[D]=1,ie[D]===0&&(i.enableVertexAttribArray(D),ie[D]=1),ye[D]!==V&&(i.vertexAttribDivisor(D,V),ye[D]=V)}function C(){const D=s.newAttributes,V=s.enabledAttributes;for(let oe=0,ie=V.length;oe<ie;oe++)V[oe]!==D[oe]&&(i.disableVertexAttribArray(oe),V[oe]=0)}function b(D,V,oe,ie,ye,xe,ge){ge===!0?i.vertexAttribIPointer(D,V,oe,ye,xe):i.vertexAttribPointer(D,V,oe,ie,ye,xe)}function B(D,V,oe,ie){w();const ye=ie.attributes,xe=oe.getAttributes(),ge=V.defaultAttributeValues;for(const de in xe){const W=xe[de];if(W.location>=0){let re=ye[de];if(re===void 0&&(de==="instanceMatrix"&&D.instanceMatrix&&(re=D.instanceMatrix),de==="instanceColor"&&D.instanceColor&&(re=D.instanceColor)),re!==void 0){const $=re.normalized,J=re.itemSize,ae=e.get(re);if(ae===void 0)continue;const Le=ae.buffer,fe=ae.type,we=ae.bytesPerElement,Ne=fe===i.INT||fe===i.UNSIGNED_INT||re.gpuType===uv;if(re.isInterleavedBufferAttribute){const De=re.data,je=De.stride,xt=re.offset;if(De.isInstancedInterleavedBuffer){for(let Je=0;Je<W.locationSize;Je++)A(W.location+Je,De.meshPerAttribute);D.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=De.meshPerAttribute*De.count)}else for(let Je=0;Je<W.locationSize;Je++)M(W.location+Je);i.bindBuffer(i.ARRAY_BUFFER,Le);for(let Je=0;Je<W.locationSize;Je++)b(W.location+Je,J/W.locationSize,fe,$,je*we,(xt+J/W.locationSize*Je)*we,Ne)}else{if(re.isInstancedBufferAttribute){for(let De=0;De<W.locationSize;De++)A(W.location+De,re.meshPerAttribute);D.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let De=0;De<W.locationSize;De++)M(W.location+De);i.bindBuffer(i.ARRAY_BUFFER,Le);for(let De=0;De<W.locationSize;De++)b(W.location+De,J/W.locationSize,fe,$,J*we,J/W.locationSize*De*we,Ne)}}else if(ge!==void 0){const $=ge[de];if($!==void 0)switch($.length){case 2:i.vertexAttrib2fv(W.location,$);break;case 3:i.vertexAttrib3fv(W.location,$);break;case 4:i.vertexAttrib4fv(W.location,$);break;default:i.vertexAttrib1fv(W.location,$)}}}}C()}function N(){z();for(const D in n){const V=n[D];for(const oe in V){const ie=V[oe];for(const ye in ie)p(ie[ye].object),delete ie[ye];delete V[oe]}delete n[D]}}function F(D){if(n[D.id]===void 0)return;const V=n[D.id];for(const oe in V){const ie=V[oe];for(const ye in ie)p(ie[ye].object),delete ie[ye];delete V[oe]}delete n[D.id]}function k(D){for(const V in n){const oe=n[V];if(oe[D.id]===void 0)continue;const ie=oe[D.id];for(const ye in ie)p(ie[ye].object),delete ie[ye];delete oe[D.id]}}function z(){L(),o=!0,s!==r&&(s=r,h(s.object))}function L(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:z,resetDefaultState:L,dispose:N,releaseStatesOfGeometry:F,releaseStatesOfProgram:k,initAttributes:w,enableAttribute:M,disableUnusedAttributes:C}}function EH(i,e,t){let n;function r(h){n=h}function s(h,p){i.drawArrays(n,h,p),t.update(p,n,1)}function o(h,p,g){g!==0&&(i.drawArraysInstanced(n,h,p,g),t.update(p,n,g))}function l(h,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,h,0,p,0,g);let v=0;for(let S=0;S<g;S++)v+=p[S];t.update(v,n,1)}function c(h,p,g,y){if(g===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let S=0;S<h.length;S++)o(h[S],p[S],y[S]);else{v.multiDrawArraysInstancedWEBGL(n,h,0,p,0,y,0,g);let S=0;for(let w=0;w<g;w++)S+=p[w]*y[w];t.update(S,n,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function wH(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(k){return!(k!==cr&&n.convert(k)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(k){const z=k===Bd&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==fo&&n.convert(k)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==jr&&!z)}function c(k){if(k==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=t.precision!==void 0?t.precision:"highp";const p=c(h);p!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",p,"instead."),h=p);const g=t.logarithmicDepthBuffer===!0,y=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),v=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),S=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=i.getParameter(i.MAX_TEXTURE_SIZE),M=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),A=i.getParameter(i.MAX_VERTEX_ATTRIBS),C=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),b=i.getParameter(i.MAX_VARYING_VECTORS),B=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),N=S>0,F=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:l,precision:h,logarithmicDepthBuffer:g,reverseDepthBuffer:y,maxTextures:v,maxVertexTextures:S,maxTextureSize:w,maxCubemapSize:M,maxAttributes:A,maxVertexUniforms:C,maxVaryings:b,maxFragmentUniforms:B,vertexTextures:N,maxSamples:F}}function TH(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new Ra,l=new Kt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(g,y){const v=g.length!==0||y||n!==0||r;return r=y,n=g.length,v},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,y){t=p(g,y,0)},this.setState=function(g,y,v){const S=g.clippingPlanes,w=g.clipIntersection,M=g.clipShadows,A=i.get(g);if(!r||S===null||S.length===0||s&&!M)s?p(null):h();else{const C=s?0:n,b=C*4;let B=A.clippingState||null;c.value=B,B=p(S,y,b,v);for(let N=0;N!==b;++N)B[N]=t[N];A.clippingState=B,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=C}};function h(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function p(g,y,v,S){const w=g!==null?g.length:0;let M=null;if(w!==0){if(M=c.value,S!==!0||M===null){const A=v+w*4,C=y.matrixWorldInverse;l.getNormalMatrix(C),(M===null||M.length<A)&&(M=new Float32Array(A));for(let b=0,B=v;b!==w;++b,B+=4)o.copy(g[b]).applyMatrix4(C,l),o.normal.toArray(M,B),M[B+3]=o.constant}c.value=M,c.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,M}}function CH(i){let e=new WeakMap;function t(o,l){return l===_p?o.mapping=za:l===Ap&&(o.mapping=kl),o}function n(o){if(o&&o.isTexture){const l=o.mapping;if(l===_p||l===Ap)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const h=new db(c.height);return h.fromEquirectangularTexture(i,o),e.set(o,h),o.addEventListener("dispose",r),t(h.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const cd=4,Aw=[.125,.215,.35,.446,.526,.582],Zu=20,mx=new co,Sw=new lt;let gx=null,yx=0,vx=0,xx=!1;const qu=(1+Math.sqrt(5))/2,qf=1/qu,Mw=[new j(-qu,qf,0),new j(qu,qf,0),new j(-qf,0,qu),new j(qf,0,qu),new j(0,qu,-qf),new j(0,qu,qf),new j(-1,1,-1),new j(1,1,-1),new j(-1,1,1),new j(1,1,1)];class y_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){gx=this._renderer.getRenderTarget(),yx=this._renderer.getActiveCubeFace(),vx=this._renderer.getActiveMipmapLevel(),xx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Tw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=ww(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(gx,yx,vx),this._renderer.xr.enabled=xx,e.scissorTest=!1,Gg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===za||e.mapping===kl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),gx=this._renderer.getRenderTarget(),yx=this._renderer.getActiveCubeFace(),vx=this._renderer.getActiveMipmapLevel(),xx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ai,minFilter:ai,generateMipmaps:!1,type:Bd,format:cr,colorSpace:gc,depthBuffer:!1},r=Ew(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Ew(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=bH(s)),this._blurMaterial=RH(s,e,t)}return r}_compileMaterial(e){const t=new li(this._lodPlanes[0],e);this._renderer.compile(t,mx)}_sceneToCubeUV(e,t,n,r){const l=new zn(90,1,t,n),c=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],p=this._renderer,g=p.autoClear,y=p.toneMapping;p.getClearColor(Sw),p.toneMapping=Lo,p.autoClear=!1;const v=new as({name:"PMREM.Background",side:br,depthWrite:!1,depthTest:!1}),S=new li(new wc,v);let w=!1;const M=e.background;M?M.isColor&&(v.color.copy(M),e.background=null,w=!0):(v.color.copy(Sw),w=!0);for(let A=0;A<6;A++){const C=A%3;C===0?(l.up.set(0,c[A],0),l.lookAt(h[A],0,0)):C===1?(l.up.set(0,0,c[A]),l.lookAt(0,h[A],0)):(l.up.set(0,c[A],0),l.lookAt(0,0,h[A]));const b=this._cubeSize;Gg(r,C*b,A>2?b:0,b,b),p.setRenderTarget(r),w&&p.render(S,l),p.render(e,l)}S.geometry.dispose(),S.material.dispose(),p.toneMapping=y,p.autoClear=g,e.background=M}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===za||e.mapping===kl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Tw()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=ww());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new li(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;Gg(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(o,mx)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=Mw[(r-s-1)%Mw.length];this._blur(e,s-1,s,o,l)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,l){const c=this._renderer,h=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,g=new li(this._lodPlanes[r],h),y=h.uniforms,v=this._sizeLods[n]-1,S=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*Zu-1),w=s/S,M=isFinite(s)?1+Math.floor(p*w):Zu;M>Zu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${Zu}`);const A=[];let C=0;for(let k=0;k<Zu;++k){const z=k/w,L=Math.exp(-z*z/2);A.push(L),k===0?C+=L:k<M&&(C+=2*L)}for(let k=0;k<A.length;k++)A[k]=A[k]/C;y.envMap.value=e.texture,y.samples.value=M,y.weights.value=A,y.latitudinal.value=o==="latitudinal",l&&(y.poleAxis.value=l);const{_lodMax:b}=this;y.dTheta.value=S,y.mipInt.value=b-n;const B=this._sizeLods[r],N=3*B*(r>b-cd?r-b+cd:0),F=4*(this._cubeSize-B);Gg(t,N,F,3*B,2*B),c.setRenderTarget(t),c.render(g,mx)}}function bH(i){const e=[],t=[],n=[];let r=i;const s=i-cd+1+Aw.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);t.push(l);let c=1/l;o>i-cd?c=Aw[o-i+cd-1]:o===0&&(c=0),n.push(c);const h=1/(l-2),p=-h,g=1+h,y=[p,p,g,p,g,g,p,p,g,g,p,g],v=6,S=6,w=3,M=2,A=1,C=new Float32Array(w*S*v),b=new Float32Array(M*S*v),B=new Float32Array(A*S*v);for(let F=0;F<v;F++){const k=F%3*2/3-1,z=F>2?0:-1,L=[k,z,0,k+2/3,z,0,k+2/3,z+1,0,k,z,0,k+2/3,z+1,0,k,z+1,0];C.set(L,w*S*F),b.set(y,M*S*F);const D=[F,F,F,F,F,F];B.set(D,A*S*F)}const N=new Yt;N.setAttribute("position",new _n(C,w)),N.setAttribute("uv",new _n(b,M)),N.setAttribute("faceIndex",new _n(B,A)),e.push(N),r>cd&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Ew(i,e,t){const n=new ko(i,e,t);return n.texture.mapping=Pd,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Gg(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function RH(i,e,t){const n=new Float32Array(Zu),r=new j(0,1,0);return new ho({name:"SphericalGaussianBlur",defines:{n:Zu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:$A(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ua,depthTest:!1,depthWrite:!1})}function ww(){return new ho({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:$A(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ua,depthTest:!1,depthWrite:!1})}function Tw(){return new ho({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:$A(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ua,depthTest:!1,depthWrite:!1})}function $A(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function PH(i){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const c=l.mapping,h=c===_p||c===Ap,p=c===za||c===kl;if(h||p){let g=e.get(l);const y=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==y)return t===null&&(t=new y_(i)),g=h?t.fromEquirectangular(l,g):t.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),g.texture;if(g!==void 0)return g.texture;{const v=l.image;return h&&v&&v.height>0||p&&v&&r(v)?(t===null&&(t=new y_(i)),g=h?t.fromEquirectangular(l):t.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),l.addEventListener("dispose",s),g.texture):null}}}return l}function r(l){let c=0;const h=6;for(let p=0;p<h;p++)l[p]!==void 0&&c++;return c===h}function s(l){const c=l.target;c.removeEventListener("dispose",s);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function BH(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&ed("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function IH(i,e,t,n){const r={},s=new WeakMap;function o(g){const y=g.target;y.index!==null&&e.remove(y.index);for(const S in y.attributes)e.remove(y.attributes[S]);y.removeEventListener("dispose",o),delete r[y.id];const v=s.get(y);v&&(e.remove(v),s.delete(y)),n.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function l(g,y){return r[y.id]===!0||(y.addEventListener("dispose",o),r[y.id]=!0,t.memory.geometries++),y}function c(g){const y=g.attributes;for(const v in y)e.update(y[v],i.ARRAY_BUFFER)}function h(g){const y=[],v=g.index,S=g.attributes.position;let w=0;if(v!==null){const C=v.array;w=v.version;for(let b=0,B=C.length;b<B;b+=3){const N=C[b+0],F=C[b+1],k=C[b+2];y.push(N,F,F,k,k,N)}}else if(S!==void 0){const C=S.array;w=S.version;for(let b=0,B=C.length/3-1;b<B;b+=3){const N=b+0,F=b+1,k=b+2;y.push(N,F,F,k,k,N)}}else return;const M=new(sb(y)?MA:SA)(y,1);M.version=w;const A=s.get(g);A&&e.remove(A),s.set(g,M)}function p(g){const y=s.get(g);if(y){const v=g.index;v!==null&&y.version<v.version&&h(g)}else h(g);return s.get(g)}return{get:l,update:c,getWireframeAttribute:p}}function DH(i,e,t){let n;function r(y){n=y}let s,o;function l(y){s=y.type,o=y.bytesPerElement}function c(y,v){i.drawElements(n,v,s,y*o),t.update(v,n,1)}function h(y,v,S){S!==0&&(i.drawElementsInstanced(n,v,s,y*o,S),t.update(v,n,S))}function p(y,v,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,v,0,s,y,0,S);let M=0;for(let A=0;A<S;A++)M+=v[A];t.update(M,n,1)}function g(y,v,S,w){if(S===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let A=0;A<y.length;A++)h(y[A]/o,v[A],w[A]);else{M.multiDrawElementsInstancedWEBGL(n,v,0,s,y,0,w,0,S);let A=0;for(let C=0;C<S;C++)A+=v[C]*w[C];t.update(A,n,1)}}this.setMode=r,this.setIndex=l,this.render=c,this.renderInstances=h,this.renderMultiDraw=p,this.renderMultiDrawInstances=g}function LH(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,l){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=l*(s/3);break;case i.LINES:t.lines+=l*(s/2);break;case i.LINE_STRIP:t.lines+=l*(s-1);break;case i.LINE_LOOP:t.lines+=l*s;break;case i.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function FH(i,e,t){const n=new WeakMap,r=new xn;function s(o,l,c){const h=o.morphTargetInfluences,p=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=p!==void 0?p.length:0;let y=n.get(l);if(y===void 0||y.count!==g){let D=function(){z.dispose(),n.delete(l),l.removeEventListener("dispose",D)};var v=D;y!==void 0&&y.texture.dispose();const S=l.morphAttributes.position!==void 0,w=l.morphAttributes.normal!==void 0,M=l.morphAttributes.color!==void 0,A=l.morphAttributes.position||[],C=l.morphAttributes.normal||[],b=l.morphAttributes.color||[];let B=0;S===!0&&(B=1),w===!0&&(B=2),M===!0&&(B=3);let N=l.attributes.position.count*B,F=1;N>e.maxTextureSize&&(F=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const k=new Float32Array(N*F*4*g),z=new Gp(k,N,F,g);z.type=jr,z.needsUpdate=!0;const L=B*4;for(let V=0;V<g;V++){const oe=A[V],ie=C[V],ye=b[V],xe=N*F*4*V;for(let ge=0;ge<oe.count;ge++){const de=ge*L;S===!0&&(r.fromBufferAttribute(oe,ge),k[xe+de+0]=r.x,k[xe+de+1]=r.y,k[xe+de+2]=r.z,k[xe+de+3]=0),w===!0&&(r.fromBufferAttribute(ie,ge),k[xe+de+4]=r.x,k[xe+de+5]=r.y,k[xe+de+6]=r.z,k[xe+de+7]=0),M===!0&&(r.fromBufferAttribute(ye,ge),k[xe+de+8]=r.x,k[xe+de+9]=r.y,k[xe+de+10]=r.z,k[xe+de+11]=ye.itemSize===4?r.w:1)}}y={count:g,texture:z,size:new Ie(N,F)},n.set(l,y),l.addEventListener("dispose",D)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let S=0;for(let M=0;M<h.length;M++)S+=h[M];const w=l.morphTargetsRelative?1:1-S;c.getUniforms().setValue(i,"morphTargetBaseInfluence",w),c.getUniforms().setValue(i,"morphTargetInfluences",h)}c.getUniforms().setValue(i,"morphTargetsTexture",y.texture,t),c.getUniforms().setValue(i,"morphTargetsTextureSize",y.size)}return{update:s}}function NH(i,e,t,n){let r=new WeakMap;function s(c){const h=n.render.frame,p=c.geometry,g=e.get(c,p);if(r.get(g)!==h&&(e.update(g),r.set(g,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),r.get(c)!==h&&(t.update(c.instanceMatrix,i.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,i.ARRAY_BUFFER),r.set(c,h))),c.isSkinnedMesh){const y=c.skeleton;r.get(y)!==h&&(y.update(),r.set(y,h))}return g}function o(){r=new WeakMap}function l(c){const h=c.target;h.removeEventListener("dispose",l),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:s,dispose:o}}const rR=new Gn,Cw=new PA(1,1),sR=new Gp,oR=new yv,aR=new Wp,bw=[],Rw=[],Pw=new Float32Array(16),Bw=new Float32Array(9),Iw=new Float32Array(4);function Fd(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=bw[r];if(s===void 0&&(s=new Float32Array(r),bw[r]=s),e!==0){n.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,i[o].toArray(s,l)}return s}function bi(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Ri(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Ov(i,e){let t=Rw[e];t===void 0&&(t=new Int32Array(e),Rw[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function UH(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function OH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;i.uniform2fv(this.addr,e),Ri(t,e)}}function kH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(bi(t,e))return;i.uniform3fv(this.addr,e),Ri(t,e)}}function HH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;i.uniform4fv(this.addr,e),Ri(t,e)}}function zH(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(bi(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Ri(t,e)}else{if(bi(t,n))return;Iw.set(n),i.uniformMatrix2fv(this.addr,!1,Iw),Ri(t,n)}}function GH(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(bi(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Ri(t,e)}else{if(bi(t,n))return;Bw.set(n),i.uniformMatrix3fv(this.addr,!1,Bw),Ri(t,n)}}function VH(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(bi(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Ri(t,e)}else{if(bi(t,n))return;Pw.set(n),i.uniformMatrix4fv(this.addr,!1,Pw),Ri(t,n)}}function WH(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function jH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;i.uniform2iv(this.addr,e),Ri(t,e)}}function XH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bi(t,e))return;i.uniform3iv(this.addr,e),Ri(t,e)}}function JH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;i.uniform4iv(this.addr,e),Ri(t,e)}}function KH(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function YH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;i.uniform2uiv(this.addr,e),Ri(t,e)}}function QH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bi(t,e))return;i.uniform3uiv(this.addr,e),Ri(t,e)}}function qH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;i.uniform4uiv(this.addr,e),Ri(t,e)}}function ZH(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(Cw.compareFunction=_A,s=Cw):s=rR,t.setTexture2D(e||s,r)}function $H(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||oR,r)}function ez(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||aR,r)}function tz(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||sR,r)}function nz(i){switch(i){case 5126:return UH;case 35664:return OH;case 35665:return kH;case 35666:return HH;case 35674:return zH;case 35675:return GH;case 35676:return VH;case 5124:case 35670:return WH;case 35667:case 35671:return jH;case 35668:case 35672:return XH;case 35669:case 35673:return JH;case 5125:return KH;case 36294:return YH;case 36295:return QH;case 36296:return qH;case 35678:case 36198:case 36298:case 36306:case 35682:return ZH;case 35679:case 36299:case 36307:return $H;case 35680:case 36300:case 36308:case 36293:return ez;case 36289:case 36303:case 36311:case 36292:return tz}}function iz(i,e){i.uniform1fv(this.addr,e)}function rz(i,e){const t=Fd(e,this.size,2);i.uniform2fv(this.addr,t)}function sz(i,e){const t=Fd(e,this.size,3);i.uniform3fv(this.addr,t)}function oz(i,e){const t=Fd(e,this.size,4);i.uniform4fv(this.addr,t)}function az(i,e){const t=Fd(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function lz(i,e){const t=Fd(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function uz(i,e){const t=Fd(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function cz(i,e){i.uniform1iv(this.addr,e)}function fz(i,e){i.uniform2iv(this.addr,e)}function dz(i,e){i.uniform3iv(this.addr,e)}function hz(i,e){i.uniform4iv(this.addr,e)}function pz(i,e){i.uniform1uiv(this.addr,e)}function mz(i,e){i.uniform2uiv(this.addr,e)}function gz(i,e){i.uniform3uiv(this.addr,e)}function yz(i,e){i.uniform4uiv(this.addr,e)}function vz(i,e,t){const n=this.cache,r=e.length,s=Ov(t,r);bi(n,s)||(i.uniform1iv(this.addr,s),Ri(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||rR,s[o])}function xz(i,e,t){const n=this.cache,r=e.length,s=Ov(t,r);bi(n,s)||(i.uniform1iv(this.addr,s),Ri(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||oR,s[o])}function _z(i,e,t){const n=this.cache,r=e.length,s=Ov(t,r);bi(n,s)||(i.uniform1iv(this.addr,s),Ri(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||aR,s[o])}function Az(i,e,t){const n=this.cache,r=e.length,s=Ov(t,r);bi(n,s)||(i.uniform1iv(this.addr,s),Ri(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||sR,s[o])}function Sz(i){switch(i){case 5126:return iz;case 35664:return rz;case 35665:return sz;case 35666:return oz;case 35674:return az;case 35675:return lz;case 35676:return uz;case 5124:case 35670:return cz;case 35667:case 35671:return fz;case 35668:case 35672:return dz;case 35669:case 35673:return hz;case 5125:return pz;case 36294:return mz;case 36295:return gz;case 36296:return yz;case 35678:case 36198:case 36298:case 36306:case 35682:return vz;case 35679:case 36299:case 36307:return xz;case 35680:case 36300:case 36308:case 36293:return _z;case 36289:case 36303:case 36311:case 36292:return Az}}class Mz{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=nz(t.type)}}class Ez{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Sz(t.type)}}class wz{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(e,t[l.id],n)}}}const _x=/(\w+)(\])?(\[|\.)?/g;function Dw(i,e){i.seq.push(e),i.map[e.id]=e}function Tz(i,e,t){const n=i.name,r=n.length;for(_x.lastIndex=0;;){const s=_x.exec(n),o=_x.lastIndex;let l=s[1];const c=s[2]==="]",h=s[3];if(c&&(l=l|0),h===void 0||h==="["&&o+2===r){Dw(t,h===void 0?new Mz(l,i,e):new Ez(l,i,e));break}else{let g=t.map[l];g===void 0&&(g=new wz(l),Dw(t,g)),t=g}}}class ny{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Tz(s,o,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const l=t[s],c=n[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function Lw(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const Cz=37297;let bz=0;function Rz(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const l=o+1;n.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return n.join(`
`)}const Fw=new Kt;function Pz(i){yn._getMatrix(Fw,yn.workingColorSpace,i);const e=`mat3( ${Fw.elements.map(t=>t.toFixed(4))} )`;switch(yn.getTransfer(i)){case Mp:return[e,"LinearTransferOETF"];case wn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function Nw(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Rz(i.getShaderSource(e),o)}else return r}function Bz(i,e){const t=Pz(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Iz(i,e){let t;switch(e){case UC:t="Linear";break;case OC:t="Reinhard";break;case kC:t="Cineon";break;case lA:t="ACESFilmic";break;case zC:t="AgX";break;case GC:t="Neutral";break;case HC:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Vg=new j;function Dz(){yn.getLuminanceCoefficients(Vg);const i=Vg.x.toFixed(4),e=Vg.y.toFixed(4),t=Vg.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Lz(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Zh).join(`
`)}function Fz(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Nz(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let l=1;s.type===i.FLOAT_MAT2&&(l=2),s.type===i.FLOAT_MAT3&&(l=3),s.type===i.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:l}}return t}function Zh(i){return i!==""}function Uw(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Ow(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Uz=/^[ \t]*#include +<([\w\d./]+)>/gm;function v_(i){return i.replace(Uz,kz)}const Oz=new Map;function kz(i,e){let t=nn[e];if(t===void 0){const n=Oz.get(e);if(n!==void 0)t=nn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return v_(t)}const Hz=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function kw(i){return i.replace(Hz,zz)}function zz(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Hw(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Gz(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===ov?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===ip?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===ao&&(e="SHADOWMAP_TYPE_VSM"),e}function Vz(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case za:case kl:e="ENVMAP_TYPE_CUBE";break;case Pd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Wz(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case kl:e="ENVMAP_MODE_REFRACTION";break}return e}function jz(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Hp:e="ENVMAP_BLENDING_MULTIPLY";break;case FC:e="ENVMAP_BLENDING_MIX";break;case NC:e="ENVMAP_BLENDING_ADD";break}return e}function Xz(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function Jz(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const c=Gz(t),h=Vz(t),p=Wz(t),g=jz(t),y=Xz(t),v=Lz(t),S=Fz(s),w=r.createProgram();let M,A,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Zh).join(`
`),M.length>0&&(M+=`
`),A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Zh).join(`
`),A.length>0&&(A+=`
`)):(M=[Hw(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Zh).join(`
`),A=[Hw(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Lo?"#define TONE_MAPPING":"",t.toneMapping!==Lo?nn.tonemapping_pars_fragment:"",t.toneMapping!==Lo?Iz("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",nn.colorspace_pars_fragment,Bz("linearToOutputTexel",t.outputColorSpace),Dz(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Zh).join(`
`)),o=v_(o),o=Uw(o,t),o=Ow(o,t),l=v_(l),l=Uw(l,t),l=Ow(l,t),o=kw(o),l=kw(l),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,M=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,A=["#define varying in",t.glslVersion===u_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===u_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const b=C+M+o,B=C+A+l,N=Lw(r,r.VERTEX_SHADER,b),F=Lw(r,r.FRAGMENT_SHADER,B);r.attachShader(w,N),r.attachShader(w,F),t.index0AttributeName!==void 0?r.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w);function k(V){if(i.debug.checkShaderErrors){const oe=r.getProgramInfoLog(w).trim(),ie=r.getShaderInfoLog(N).trim(),ye=r.getShaderInfoLog(F).trim();let xe=!0,ge=!0;if(r.getProgramParameter(w,r.LINK_STATUS)===!1)if(xe=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,w,N,F);else{const de=Nw(r,N,"vertex"),W=Nw(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+oe+`
`+de+`
`+W)}else oe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",oe):(ie===""||ye==="")&&(ge=!1);ge&&(V.diagnostics={runnable:xe,programLog:oe,vertexShader:{log:ie,prefix:M},fragmentShader:{log:ye,prefix:A}})}r.deleteShader(N),r.deleteShader(F),z=new ny(r,w),L=Nz(r,w)}let z;this.getUniforms=function(){return z===void 0&&k(this),z};let L;this.getAttributes=function(){return L===void 0&&k(this),L};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=r.getProgramParameter(w,Cz)),D},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=bz++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=N,this.fragmentShader=F,this}let Kz=0;class Yz{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Qz(e),t.set(e,n)),n}}class Qz{constructor(e){this.id=Kz++,this.code=e,this.usedTimes=0}}function qz(i,e,t,n,r,s,o){const l=new fc,c=new Yz,h=new Set,p=[],g=r.logarithmicDepthBuffer,y=r.vertexTextures;let v=r.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(L){return h.add(L),L===0?"uv":`uv${L}`}function M(L,D,V,oe,ie){const ye=oe.fog,xe=ie.geometry,ge=L.isMeshStandardMaterial?oe.environment:null,de=(L.isMeshStandardMaterial?t:e).get(L.envMap||ge),W=de&&de.mapping===Pd?de.image.height:null,re=S[L.type];L.precision!==null&&(v=r.getMaxPrecision(L.precision),v!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",v,"instead."));const $=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,J=$!==void 0?$.length:0;let ae=0;xe.morphAttributes.position!==void 0&&(ae=1),xe.morphAttributes.normal!==void 0&&(ae=2),xe.morphAttributes.color!==void 0&&(ae=3);let Le,fe,we,Ne;if(re){const Qt=lo[re];Le=Qt.vertexShader,fe=Qt.fragmentShader}else Le=L.vertexShader,fe=L.fragmentShader,c.update(L),we=c.getVertexShaderID(L),Ne=c.getFragmentShaderID(L);const De=i.getRenderTarget(),je=i.state.buffers.depth.getReversed(),xt=ie.isInstancedMesh===!0,Je=ie.isBatchedMesh===!0,rt=!!L.map,Fe=!!L.matcap,be=!!de,K=!!L.aoMap,mt=!!L.lightMap,ke=!!L.bumpMap,et=!!L.normalMap,Xe=!!L.displacementMap,wt=!!L.emissiveMap,qe=!!L.metalnessMap,X=!!L.roughnessMap,H=L.anisotropy>0,pe=L.clearcoat>0,Te=L.dispersion>0,Ue=L.iridescence>0,Pe=L.sheen>0,st=L.transmission>0,Ze=H&&!!L.anisotropyMap,ct=pe&&!!L.clearcoatMap,Gt=pe&&!!L.clearcoatNormalMap,ze=pe&&!!L.clearcoatRoughnessMap,gt=Ue&&!!L.iridescenceMap,Bt=Ue&&!!L.iridescenceThicknessMap,Lt=Pe&&!!L.sheenColorMap,ht=Pe&&!!L.sheenRoughnessMap,ee=!!L.specularMap,Re=!!L.specularColorMap,tt=!!L.specularIntensityMap,Z=st&&!!L.transmissionMap,Ve=st&&!!L.thicknessMap,Me=!!L.gradientMap,Be=!!L.alphaMap,ut=L.alphaTest>0,nt=!!L.alphaHash,Pt=!!L.extensions;let un=Lo;L.toneMapped&&(De===null||De.isXRRenderTarget===!0)&&(un=i.toneMapping);const Tn={shaderID:re,shaderType:L.type,shaderName:L.name,vertexShader:Le,fragmentShader:fe,defines:L.defines,customVertexShaderID:we,customFragmentShaderID:Ne,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:v,batching:Je,batchingColor:Je&&ie._colorsTexture!==null,instancing:xt,instancingColor:xt&&ie.instanceColor!==null,instancingMorph:xt&&ie.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:De===null?i.outputColorSpace:De.isXRRenderTarget===!0?De.texture.colorSpace:gc,alphaToCoverage:!!L.alphaToCoverage,map:rt,matcap:Fe,envMap:be,envMapMode:be&&de.mapping,envMapCubeUVHeight:W,aoMap:K,lightMap:mt,bumpMap:ke,normalMap:et,displacementMap:y&&Xe,emissiveMap:wt,normalMapObjectSpace:et&&L.normalMapType===QC,normalMapTangentSpace:et&&L.normalMapType===Vl,metalnessMap:qe,roughnessMap:X,anisotropy:H,anisotropyMap:Ze,clearcoat:pe,clearcoatMap:ct,clearcoatNormalMap:Gt,clearcoatRoughnessMap:ze,dispersion:Te,iridescence:Ue,iridescenceMap:gt,iridescenceThicknessMap:Bt,sheen:Pe,sheenColorMap:Lt,sheenRoughnessMap:ht,specularMap:ee,specularColorMap:Re,specularIntensityMap:tt,transmission:st,transmissionMap:Z,thicknessMap:Ve,gradientMap:Me,opaque:L.transparent===!1&&L.blending===lc&&L.alphaToCoverage===!1,alphaMap:Be,alphaTest:ut,alphaHash:nt,combine:L.combine,mapUv:rt&&w(L.map.channel),aoMapUv:K&&w(L.aoMap.channel),lightMapUv:mt&&w(L.lightMap.channel),bumpMapUv:ke&&w(L.bumpMap.channel),normalMapUv:et&&w(L.normalMap.channel),displacementMapUv:Xe&&w(L.displacementMap.channel),emissiveMapUv:wt&&w(L.emissiveMap.channel),metalnessMapUv:qe&&w(L.metalnessMap.channel),roughnessMapUv:X&&w(L.roughnessMap.channel),anisotropyMapUv:Ze&&w(L.anisotropyMap.channel),clearcoatMapUv:ct&&w(L.clearcoatMap.channel),clearcoatNormalMapUv:Gt&&w(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ze&&w(L.clearcoatRoughnessMap.channel),iridescenceMapUv:gt&&w(L.iridescenceMap.channel),iridescenceThicknessMapUv:Bt&&w(L.iridescenceThicknessMap.channel),sheenColorMapUv:Lt&&w(L.sheenColorMap.channel),sheenRoughnessMapUv:ht&&w(L.sheenRoughnessMap.channel),specularMapUv:ee&&w(L.specularMap.channel),specularColorMapUv:Re&&w(L.specularColorMap.channel),specularIntensityMapUv:tt&&w(L.specularIntensityMap.channel),transmissionMapUv:Z&&w(L.transmissionMap.channel),thicknessMapUv:Ve&&w(L.thicknessMap.channel),alphaMapUv:Be&&w(L.alphaMap.channel),vertexTangents:!!xe.attributes.tangent&&(et||H),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,pointsUvs:ie.isPoints===!0&&!!xe.attributes.uv&&(rt||Be),fog:!!ye,useFog:L.fog===!0,fogExp2:!!ye&&ye.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:je,skinning:ie.isSkinnedMesh===!0,morphTargets:xe.morphAttributes.position!==void 0,morphNormals:xe.morphAttributes.normal!==void 0,morphColors:xe.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:ae,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:L.dithering,shadowMapEnabled:i.shadowMap.enabled&&V.length>0,shadowMapType:i.shadowMap.type,toneMapping:un,decodeVideoTexture:rt&&L.map.isVideoTexture===!0&&yn.getTransfer(L.map.colorSpace)===wn,decodeVideoTextureEmissive:wt&&L.emissiveMap.isVideoTexture===!0&&yn.getTransfer(L.emissiveMap.colorSpace)===wn,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Ps,flipSided:L.side===br,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:Pt&&L.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Pt&&L.extensions.multiDraw===!0||Je)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return Tn.vertexUv1s=h.has(1),Tn.vertexUv2s=h.has(2),Tn.vertexUv3s=h.has(3),h.clear(),Tn}function A(L){const D=[];if(L.shaderID?D.push(L.shaderID):(D.push(L.customVertexShaderID),D.push(L.customFragmentShaderID)),L.defines!==void 0)for(const V in L.defines)D.push(V),D.push(L.defines[V]);return L.isRawShaderMaterial===!1&&(C(D,L),b(D,L),D.push(i.outputColorSpace)),D.push(L.customProgramCacheKey),D.join()}function C(L,D){L.push(D.precision),L.push(D.outputColorSpace),L.push(D.envMapMode),L.push(D.envMapCubeUVHeight),L.push(D.mapUv),L.push(D.alphaMapUv),L.push(D.lightMapUv),L.push(D.aoMapUv),L.push(D.bumpMapUv),L.push(D.normalMapUv),L.push(D.displacementMapUv),L.push(D.emissiveMapUv),L.push(D.metalnessMapUv),L.push(D.roughnessMapUv),L.push(D.anisotropyMapUv),L.push(D.clearcoatMapUv),L.push(D.clearcoatNormalMapUv),L.push(D.clearcoatRoughnessMapUv),L.push(D.iridescenceMapUv),L.push(D.iridescenceThicknessMapUv),L.push(D.sheenColorMapUv),L.push(D.sheenRoughnessMapUv),L.push(D.specularMapUv),L.push(D.specularColorMapUv),L.push(D.specularIntensityMapUv),L.push(D.transmissionMapUv),L.push(D.thicknessMapUv),L.push(D.combine),L.push(D.fogExp2),L.push(D.sizeAttenuation),L.push(D.morphTargetsCount),L.push(D.morphAttributeCount),L.push(D.numDirLights),L.push(D.numPointLights),L.push(D.numSpotLights),L.push(D.numSpotLightMaps),L.push(D.numHemiLights),L.push(D.numRectAreaLights),L.push(D.numDirLightShadows),L.push(D.numPointLightShadows),L.push(D.numSpotLightShadows),L.push(D.numSpotLightShadowsWithMaps),L.push(D.numLightProbes),L.push(D.shadowMapType),L.push(D.toneMapping),L.push(D.numClippingPlanes),L.push(D.numClipIntersection),L.push(D.depthPacking)}function b(L,D){l.disableAll(),D.supportsVertexTextures&&l.enable(0),D.instancing&&l.enable(1),D.instancingColor&&l.enable(2),D.instancingMorph&&l.enable(3),D.matcap&&l.enable(4),D.envMap&&l.enable(5),D.normalMapObjectSpace&&l.enable(6),D.normalMapTangentSpace&&l.enable(7),D.clearcoat&&l.enable(8),D.iridescence&&l.enable(9),D.alphaTest&&l.enable(10),D.vertexColors&&l.enable(11),D.vertexAlphas&&l.enable(12),D.vertexUv1s&&l.enable(13),D.vertexUv2s&&l.enable(14),D.vertexUv3s&&l.enable(15),D.vertexTangents&&l.enable(16),D.anisotropy&&l.enable(17),D.alphaHash&&l.enable(18),D.batching&&l.enable(19),D.dispersion&&l.enable(20),D.batchingColor&&l.enable(21),L.push(l.mask),l.disableAll(),D.fog&&l.enable(0),D.useFog&&l.enable(1),D.flatShading&&l.enable(2),D.logarithmicDepthBuffer&&l.enable(3),D.reverseDepthBuffer&&l.enable(4),D.skinning&&l.enable(5),D.morphTargets&&l.enable(6),D.morphNormals&&l.enable(7),D.morphColors&&l.enable(8),D.premultipliedAlpha&&l.enable(9),D.shadowMapEnabled&&l.enable(10),D.doubleSided&&l.enable(11),D.flipSided&&l.enable(12),D.useDepthPacking&&l.enable(13),D.dithering&&l.enable(14),D.transmission&&l.enable(15),D.sheen&&l.enable(16),D.opaque&&l.enable(17),D.pointsUvs&&l.enable(18),D.decodeVideoTexture&&l.enable(19),D.decodeVideoTextureEmissive&&l.enable(20),D.alphaToCoverage&&l.enable(21),L.push(l.mask)}function B(L){const D=S[L.type];let V;if(D){const oe=lo[D];V=cb.clone(oe.uniforms)}else V=L.uniforms;return V}function N(L,D){let V;for(let oe=0,ie=p.length;oe<ie;oe++){const ye=p[oe];if(ye.cacheKey===D){V=ye,++V.usedTimes;break}}return V===void 0&&(V=new Jz(i,D,L,s),p.push(V)),V}function F(L){if(--L.usedTimes===0){const D=p.indexOf(L);p[D]=p[p.length-1],p.pop(),L.destroy()}}function k(L){c.remove(L)}function z(){c.dispose()}return{getParameters:M,getProgramCacheKey:A,getUniforms:B,acquireProgram:N,releaseProgram:F,releaseShaderCache:k,programs:p,dispose:z}}function Zz(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let l=i.get(o);return l===void 0&&(l={},i.set(o,l)),l}function n(o){i.delete(o)}function r(o,l,c){i.get(o)[l]=c}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function $z(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function zw(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function Gw(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function o(g,y,v,S,w,M){let A=i[e];return A===void 0?(A={id:g.id,object:g,geometry:y,material:v,groupOrder:S,renderOrder:g.renderOrder,z:w,group:M},i[e]=A):(A.id=g.id,A.object=g,A.geometry=y,A.material=v,A.groupOrder=S,A.renderOrder=g.renderOrder,A.z=w,A.group=M),e++,A}function l(g,y,v,S,w,M){const A=o(g,y,v,S,w,M);v.transmission>0?n.push(A):v.transparent===!0?r.push(A):t.push(A)}function c(g,y,v,S,w,M){const A=o(g,y,v,S,w,M);v.transmission>0?n.unshift(A):v.transparent===!0?r.unshift(A):t.unshift(A)}function h(g,y){t.length>1&&t.sort(g||$z),n.length>1&&n.sort(y||zw),r.length>1&&r.sort(y||zw)}function p(){for(let g=e,y=i.length;g<y;g++){const v=i[g];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:l,unshift:c,finish:p,sort:h}}function eG(){let i=new WeakMap;function e(n,r){const s=i.get(n);let o;return s===void 0?(o=new Gw,i.set(n,[o])):r>=s.length?(o=new Gw,s.push(o)):o=s[r],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function tG(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new lt};break;case"SpotLight":t={position:new j,direction:new j,color:new lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new lt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new lt,groundColor:new lt};break;case"RectAreaLight":t={color:new lt,position:new j,halfWidth:new j,halfHeight:new j};break}return i[e.id]=t,t}}}function nG(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let iG=0;function rG(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function sG(i){const e=new tG,t=nG(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)n.probe.push(new j);const r=new j,s=new Ot,o=new Ot;function l(h){let p=0,g=0,y=0;for(let L=0;L<9;L++)n.probe[L].set(0,0,0);let v=0,S=0,w=0,M=0,A=0,C=0,b=0,B=0,N=0,F=0,k=0;h.sort(rG);for(let L=0,D=h.length;L<D;L++){const V=h[L],oe=V.color,ie=V.intensity,ye=V.distance,xe=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)p+=oe.r*ie,g+=oe.g*ie,y+=oe.b*ie;else if(V.isLightProbe){for(let ge=0;ge<9;ge++)n.probe[ge].addScaledVector(V.sh.coefficients[ge],ie);k++}else if(V.isDirectionalLight){const ge=e.get(V);if(ge.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const de=V.shadow,W=t.get(V);W.shadowIntensity=de.intensity,W.shadowBias=de.bias,W.shadowNormalBias=de.normalBias,W.shadowRadius=de.radius,W.shadowMapSize=de.mapSize,n.directionalShadow[v]=W,n.directionalShadowMap[v]=xe,n.directionalShadowMatrix[v]=V.shadow.matrix,C++}n.directional[v]=ge,v++}else if(V.isSpotLight){const ge=e.get(V);ge.position.setFromMatrixPosition(V.matrixWorld),ge.color.copy(oe).multiplyScalar(ie),ge.distance=ye,ge.coneCos=Math.cos(V.angle),ge.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),ge.decay=V.decay,n.spot[w]=ge;const de=V.shadow;if(V.map&&(n.spotLightMap[N]=V.map,N++,de.updateMatrices(V),V.castShadow&&F++),n.spotLightMatrix[w]=de.matrix,V.castShadow){const W=t.get(V);W.shadowIntensity=de.intensity,W.shadowBias=de.bias,W.shadowNormalBias=de.normalBias,W.shadowRadius=de.radius,W.shadowMapSize=de.mapSize,n.spotShadow[w]=W,n.spotShadowMap[w]=xe,B++}w++}else if(V.isRectAreaLight){const ge=e.get(V);ge.color.copy(oe).multiplyScalar(ie),ge.halfWidth.set(V.width*.5,0,0),ge.halfHeight.set(0,V.height*.5,0),n.rectArea[M]=ge,M++}else if(V.isPointLight){const ge=e.get(V);if(ge.color.copy(V.color).multiplyScalar(V.intensity),ge.distance=V.distance,ge.decay=V.decay,V.castShadow){const de=V.shadow,W=t.get(V);W.shadowIntensity=de.intensity,W.shadowBias=de.bias,W.shadowNormalBias=de.normalBias,W.shadowRadius=de.radius,W.shadowMapSize=de.mapSize,W.shadowCameraNear=de.camera.near,W.shadowCameraFar=de.camera.far,n.pointShadow[S]=W,n.pointShadowMap[S]=xe,n.pointShadowMatrix[S]=V.shadow.matrix,b++}n.point[S]=ge,S++}else if(V.isHemisphereLight){const ge=e.get(V);ge.skyColor.copy(V.color).multiplyScalar(ie),ge.groundColor.copy(V.groundColor).multiplyScalar(ie),n.hemi[A]=ge,A++}}M>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=at.LTC_FLOAT_1,n.rectAreaLTC2=at.LTC_FLOAT_2):(n.rectAreaLTC1=at.LTC_HALF_1,n.rectAreaLTC2=at.LTC_HALF_2)),n.ambient[0]=p,n.ambient[1]=g,n.ambient[2]=y;const z=n.hash;(z.directionalLength!==v||z.pointLength!==S||z.spotLength!==w||z.rectAreaLength!==M||z.hemiLength!==A||z.numDirectionalShadows!==C||z.numPointShadows!==b||z.numSpotShadows!==B||z.numSpotMaps!==N||z.numLightProbes!==k)&&(n.directional.length=v,n.spot.length=w,n.rectArea.length=M,n.point.length=S,n.hemi.length=A,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=b,n.pointShadowMap.length=b,n.spotShadow.length=B,n.spotShadowMap.length=B,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=b,n.spotLightMatrix.length=B+N-F,n.spotLightMap.length=N,n.numSpotLightShadowsWithMaps=F,n.numLightProbes=k,z.directionalLength=v,z.pointLength=S,z.spotLength=w,z.rectAreaLength=M,z.hemiLength=A,z.numDirectionalShadows=C,z.numPointShadows=b,z.numSpotShadows=B,z.numSpotMaps=N,z.numLightProbes=k,n.version=iG++)}function c(h,p){let g=0,y=0,v=0,S=0,w=0;const M=p.matrixWorldInverse;for(let A=0,C=h.length;A<C;A++){const b=h[A];if(b.isDirectionalLight){const B=n.directional[g];B.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),B.direction.sub(r),B.direction.transformDirection(M),g++}else if(b.isSpotLight){const B=n.spot[v];B.position.setFromMatrixPosition(b.matrixWorld),B.position.applyMatrix4(M),B.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),B.direction.sub(r),B.direction.transformDirection(M),v++}else if(b.isRectAreaLight){const B=n.rectArea[S];B.position.setFromMatrixPosition(b.matrixWorld),B.position.applyMatrix4(M),o.identity(),s.copy(b.matrixWorld),s.premultiply(M),o.extractRotation(s),B.halfWidth.set(b.width*.5,0,0),B.halfHeight.set(0,b.height*.5,0),B.halfWidth.applyMatrix4(o),B.halfHeight.applyMatrix4(o),S++}else if(b.isPointLight){const B=n.point[y];B.position.setFromMatrixPosition(b.matrixWorld),B.position.applyMatrix4(M),y++}else if(b.isHemisphereLight){const B=n.hemi[w];B.direction.setFromMatrixPosition(b.matrixWorld),B.direction.transformDirection(M),w++}}}return{setup:l,setupView:c,state:n}}function Vw(i){const e=new sG(i),t=[],n=[];function r(p){h.camera=p,t.length=0,n.length=0}function s(p){t.push(p)}function o(p){n.push(p)}function l(){e.setup(t)}function c(p){e.setupView(t,p)}const h={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:h,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:o}}function oG(i){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let l;return o===void 0?(l=new Vw(i),e.set(r,[l])):s>=o.length?(l=new Vw(i),o.push(l)):l=o[s],l}function n(){e=new WeakMap}return{get:t,dispose:n}}const aG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,lG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function uG(i,e,t){let n=new Jp;const r=new Ie,s=new Ie,o=new xn,l=new UA({depthPacking:YC}),c=new OA,h={},p=t.maxTextureSize,g={[Oo]:br,[br]:Oo,[Ps]:Ps},y=new ho({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ie},radius:{value:4}},vertexShader:aG,fragmentShader:lG}),v=y.clone();v.defines.HORIZONTAL_PASS=1;const S=new Yt;S.setAttribute("position",new _n(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new li(S,y),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ov;let A=this.type;this.render=function(F,k,z){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||F.length===0)return;const L=i.getRenderTarget(),D=i.getActiveCubeFace(),V=i.getActiveMipmapLevel(),oe=i.state;oe.setBlending(Ua),oe.buffers.color.setClear(1,1,1,1),oe.buffers.depth.setTest(!0),oe.setScissorTest(!1);const ie=A!==ao&&this.type===ao,ye=A===ao&&this.type!==ao;for(let xe=0,ge=F.length;xe<ge;xe++){const de=F[xe],W=de.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",de,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;r.copy(W.mapSize);const re=W.getFrameExtents();if(r.multiply(re),s.copy(W.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/re.x),r.x=s.x*re.x,W.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/re.y),r.y=s.y*re.y,W.mapSize.y=s.y)),W.map===null||ie===!0||ye===!0){const J=this.type!==ao?{minFilter:Ui,magFilter:Ui}:{};W.map!==null&&W.map.dispose(),W.map=new ko(r.x,r.y,J),W.map.texture.name=de.name+".shadowMap",W.camera.updateProjectionMatrix()}i.setRenderTarget(W.map),i.clear();const $=W.getViewportCount();for(let J=0;J<$;J++){const ae=W.getViewport(J);o.set(s.x*ae.x,s.y*ae.y,s.x*ae.z,s.y*ae.w),oe.viewport(o),W.updateMatrices(de,J),n=W.getFrustum(),B(k,z,W.camera,de,this.type)}W.isPointLightShadow!==!0&&this.type===ao&&C(W,z),W.needsUpdate=!1}A=this.type,M.needsUpdate=!1,i.setRenderTarget(L,D,V)};function C(F,k){const z=e.update(w);y.defines.VSM_SAMPLES!==F.blurSamples&&(y.defines.VSM_SAMPLES=F.blurSamples,v.defines.VSM_SAMPLES=F.blurSamples,y.needsUpdate=!0,v.needsUpdate=!0),F.mapPass===null&&(F.mapPass=new ko(r.x,r.y)),y.uniforms.shadow_pass.value=F.map.texture,y.uniforms.resolution.value=F.mapSize,y.uniforms.radius.value=F.radius,i.setRenderTarget(F.mapPass),i.clear(),i.renderBufferDirect(k,null,z,y,w,null),v.uniforms.shadow_pass.value=F.mapPass.texture,v.uniforms.resolution.value=F.mapSize,v.uniforms.radius.value=F.radius,i.setRenderTarget(F.map),i.clear(),i.renderBufferDirect(k,null,z,v,w,null)}function b(F,k,z,L){let D=null;const V=z.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if(V!==void 0)D=V;else if(D=z.isPointLight===!0?c:l,i.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const oe=D.uuid,ie=k.uuid;let ye=h[oe];ye===void 0&&(ye={},h[oe]=ye);let xe=ye[ie];xe===void 0&&(xe=D.clone(),ye[ie]=xe,k.addEventListener("dispose",N)),D=xe}if(D.visible=k.visible,D.wireframe=k.wireframe,L===ao?D.side=k.shadowSide!==null?k.shadowSide:k.side:D.side=k.shadowSide!==null?k.shadowSide:g[k.side],D.alphaMap=k.alphaMap,D.alphaTest=k.alphaTest,D.map=k.map,D.clipShadows=k.clipShadows,D.clippingPlanes=k.clippingPlanes,D.clipIntersection=k.clipIntersection,D.displacementMap=k.displacementMap,D.displacementScale=k.displacementScale,D.displacementBias=k.displacementBias,D.wireframeLinewidth=k.wireframeLinewidth,D.linewidth=k.linewidth,z.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const oe=i.properties.get(D);oe.light=z}return D}function B(F,k,z,L,D){if(F.visible===!1)return;if(F.layers.test(k.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&D===ao)&&(!F.frustumCulled||n.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,F.matrixWorld);const ie=e.update(F),ye=F.material;if(Array.isArray(ye)){const xe=ie.groups;for(let ge=0,de=xe.length;ge<de;ge++){const W=xe[ge],re=ye[W.materialIndex];if(re&&re.visible){const $=b(F,re,L,D);F.onBeforeShadow(i,F,k,z,ie,$,W),i.renderBufferDirect(z,null,ie,$,F,W),F.onAfterShadow(i,F,k,z,ie,$,W)}}}else if(ye.visible){const xe=b(F,ye,L,D);F.onBeforeShadow(i,F,k,z,ie,xe,null),i.renderBufferDirect(z,null,ie,xe,F,null),F.onAfterShadow(i,F,k,z,ie,xe,null)}}const oe=F.children;for(let ie=0,ye=oe.length;ie<ye;ie++)B(oe[ie],k,z,L,D)}function N(F){F.target.removeEventListener("dispose",N);for(const z in h){const L=h[z],D=F.target.uuid;D in L&&(L[D].dispose(),delete L[D])}}}const cG={[py]:my,[gy]:xy,[yy]:_y,[hc]:vy,[my]:py,[xy]:gy,[_y]:yy,[vy]:hc};function fG(i,e){function t(){let Z=!1;const Ve=new xn;let Me=null;const Be=new xn(0,0,0,0);return{setMask:function(ut){Me!==ut&&!Z&&(i.colorMask(ut,ut,ut,ut),Me=ut)},setLocked:function(ut){Z=ut},setClear:function(ut,nt,Pt,un,Tn){Tn===!0&&(ut*=un,nt*=un,Pt*=un),Ve.set(ut,nt,Pt,un),Be.equals(Ve)===!1&&(i.clearColor(ut,nt,Pt,un),Be.copy(Ve))},reset:function(){Z=!1,Me=null,Be.set(-1,0,0,0)}}}function n(){let Z=!1,Ve=!1,Me=null,Be=null,ut=null;return{setReversed:function(nt){if(Ve!==nt){const Pt=e.get("EXT_clip_control");Ve?Pt.clipControlEXT(Pt.LOWER_LEFT_EXT,Pt.ZERO_TO_ONE_EXT):Pt.clipControlEXT(Pt.LOWER_LEFT_EXT,Pt.NEGATIVE_ONE_TO_ONE_EXT);const un=ut;ut=null,this.setClear(un)}Ve=nt},getReversed:function(){return Ve},setTest:function(nt){nt?De(i.DEPTH_TEST):je(i.DEPTH_TEST)},setMask:function(nt){Me!==nt&&!Z&&(i.depthMask(nt),Me=nt)},setFunc:function(nt){if(Ve&&(nt=cG[nt]),Be!==nt){switch(nt){case py:i.depthFunc(i.NEVER);break;case my:i.depthFunc(i.ALWAYS);break;case gy:i.depthFunc(i.LESS);break;case hc:i.depthFunc(i.LEQUAL);break;case yy:i.depthFunc(i.EQUAL);break;case vy:i.depthFunc(i.GEQUAL);break;case xy:i.depthFunc(i.GREATER);break;case _y:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Be=nt}},setLocked:function(nt){Z=nt},setClear:function(nt){ut!==nt&&(Ve&&(nt=1-nt),i.clearDepth(nt),ut=nt)},reset:function(){Z=!1,Me=null,Be=null,ut=null,Ve=!1}}}function r(){let Z=!1,Ve=null,Me=null,Be=null,ut=null,nt=null,Pt=null,un=null,Tn=null;return{setTest:function(Qt){Z||(Qt?De(i.STENCIL_TEST):je(i.STENCIL_TEST))},setMask:function(Qt){Ve!==Qt&&!Z&&(i.stencilMask(Qt),Ve=Qt)},setFunc:function(Qt,Vn,Qn){(Me!==Qt||Be!==Vn||ut!==Qn)&&(i.stencilFunc(Qt,Vn,Qn),Me=Qt,Be=Vn,ut=Qn)},setOp:function(Qt,Vn,Qn){(nt!==Qt||Pt!==Vn||un!==Qn)&&(i.stencilOp(Qt,Vn,Qn),nt=Qt,Pt=Vn,un=Qn)},setLocked:function(Qt){Z=Qt},setClear:function(Qt){Tn!==Qt&&(i.clearStencil(Qt),Tn=Qt)},reset:function(){Z=!1,Ve=null,Me=null,Be=null,ut=null,nt=null,Pt=null,un=null,Tn=null}}}const s=new t,o=new n,l=new r,c=new WeakMap,h=new WeakMap;let p={},g={},y=new WeakMap,v=[],S=null,w=!1,M=null,A=null,C=null,b=null,B=null,N=null,F=null,k=new lt(0,0,0),z=0,L=!1,D=null,V=null,oe=null,ie=null,ye=null;const xe=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ge=!1,de=0;const W=i.getParameter(i.VERSION);W.indexOf("WebGL")!==-1?(de=parseFloat(/^WebGL (\d)/.exec(W)[1]),ge=de>=1):W.indexOf("OpenGL ES")!==-1&&(de=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),ge=de>=2);let re=null,$={};const J=i.getParameter(i.SCISSOR_BOX),ae=i.getParameter(i.VIEWPORT),Le=new xn().fromArray(J),fe=new xn().fromArray(ae);function we(Z,Ve,Me,Be){const ut=new Uint8Array(4),nt=i.createTexture();i.bindTexture(Z,nt),i.texParameteri(Z,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(Z,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Pt=0;Pt<Me;Pt++)Z===i.TEXTURE_3D||Z===i.TEXTURE_2D_ARRAY?i.texImage3D(Ve,0,i.RGBA,1,1,Be,0,i.RGBA,i.UNSIGNED_BYTE,ut):i.texImage2D(Ve+Pt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,ut);return nt}const Ne={};Ne[i.TEXTURE_2D]=we(i.TEXTURE_2D,i.TEXTURE_2D,1),Ne[i.TEXTURE_CUBE_MAP]=we(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ne[i.TEXTURE_2D_ARRAY]=we(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Ne[i.TEXTURE_3D]=we(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),l.setClear(0),De(i.DEPTH_TEST),o.setFunc(hc),ke(!1),et(i_),De(i.CULL_FACE),K(Ua);function De(Z){p[Z]!==!0&&(i.enable(Z),p[Z]=!0)}function je(Z){p[Z]!==!1&&(i.disable(Z),p[Z]=!1)}function xt(Z,Ve){return g[Z]!==Ve?(i.bindFramebuffer(Z,Ve),g[Z]=Ve,Z===i.DRAW_FRAMEBUFFER&&(g[i.FRAMEBUFFER]=Ve),Z===i.FRAMEBUFFER&&(g[i.DRAW_FRAMEBUFFER]=Ve),!0):!1}function Je(Z,Ve){let Me=v,Be=!1;if(Z){Me=y.get(Ve),Me===void 0&&(Me=[],y.set(Ve,Me));const ut=Z.textures;if(Me.length!==ut.length||Me[0]!==i.COLOR_ATTACHMENT0){for(let nt=0,Pt=ut.length;nt<Pt;nt++)Me[nt]=i.COLOR_ATTACHMENT0+nt;Me.length=ut.length,Be=!0}}else Me[0]!==i.BACK&&(Me[0]=i.BACK,Be=!0);Be&&i.drawBuffers(Me)}function rt(Z){return S!==Z?(i.useProgram(Z),S=Z,!0):!1}const Fe={[Dl]:i.FUNC_ADD,[vC]:i.FUNC_SUBTRACT,[xC]:i.FUNC_REVERSE_SUBTRACT};Fe[_C]=i.MIN,Fe[AC]=i.MAX;const be={[SC]:i.ZERO,[MC]:i.ONE,[EC]:i.SRC_COLOR,[dy]:i.SRC_ALPHA,[PC]:i.SRC_ALPHA_SATURATE,[bC]:i.DST_COLOR,[TC]:i.DST_ALPHA,[wC]:i.ONE_MINUS_SRC_COLOR,[hy]:i.ONE_MINUS_SRC_ALPHA,[RC]:i.ONE_MINUS_DST_COLOR,[CC]:i.ONE_MINUS_DST_ALPHA,[BC]:i.CONSTANT_COLOR,[IC]:i.ONE_MINUS_CONSTANT_COLOR,[DC]:i.CONSTANT_ALPHA,[LC]:i.ONE_MINUS_CONSTANT_ALPHA};function K(Z,Ve,Me,Be,ut,nt,Pt,un,Tn,Qt){if(Z===Ua){w===!0&&(je(i.BLEND),w=!1);return}if(w===!1&&(De(i.BLEND),w=!0),Z!==yC){if(Z!==M||Qt!==L){if((A!==Dl||B!==Dl)&&(i.blendEquation(i.FUNC_ADD),A=Dl,B=Dl),Qt)switch(Z){case lc:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case r_:i.blendFunc(i.ONE,i.ONE);break;case s_:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case o_:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}else switch(Z){case lc:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case r_:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case s_:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case o_:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}C=null,b=null,N=null,F=null,k.set(0,0,0),z=0,M=Z,L=Qt}return}ut=ut||Ve,nt=nt||Me,Pt=Pt||Be,(Ve!==A||ut!==B)&&(i.blendEquationSeparate(Fe[Ve],Fe[ut]),A=Ve,B=ut),(Me!==C||Be!==b||nt!==N||Pt!==F)&&(i.blendFuncSeparate(be[Me],be[Be],be[nt],be[Pt]),C=Me,b=Be,N=nt,F=Pt),(un.equals(k)===!1||Tn!==z)&&(i.blendColor(un.r,un.g,un.b,Tn),k.copy(un),z=Tn),M=Z,L=!1}function mt(Z,Ve){Z.side===Ps?je(i.CULL_FACE):De(i.CULL_FACE);let Me=Z.side===br;Ve&&(Me=!Me),ke(Me),Z.blending===lc&&Z.transparent===!1?K(Ua):K(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.blendColor,Z.blendAlpha,Z.premultipliedAlpha),o.setFunc(Z.depthFunc),o.setTest(Z.depthTest),o.setMask(Z.depthWrite),s.setMask(Z.colorWrite);const Be=Z.stencilWrite;l.setTest(Be),Be&&(l.setMask(Z.stencilWriteMask),l.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),l.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),wt(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),Z.alphaToCoverage===!0?De(i.SAMPLE_ALPHA_TO_COVERAGE):je(i.SAMPLE_ALPHA_TO_COVERAGE)}function ke(Z){D!==Z&&(Z?i.frontFace(i.CW):i.frontFace(i.CCW),D=Z)}function et(Z){Z!==pC?(De(i.CULL_FACE),Z!==V&&(Z===i_?i.cullFace(i.BACK):Z===mC?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):je(i.CULL_FACE),V=Z}function Xe(Z){Z!==oe&&(ge&&i.lineWidth(Z),oe=Z)}function wt(Z,Ve,Me){Z?(De(i.POLYGON_OFFSET_FILL),(ie!==Ve||ye!==Me)&&(i.polygonOffset(Ve,Me),ie=Ve,ye=Me)):je(i.POLYGON_OFFSET_FILL)}function qe(Z){Z?De(i.SCISSOR_TEST):je(i.SCISSOR_TEST)}function X(Z){Z===void 0&&(Z=i.TEXTURE0+xe-1),re!==Z&&(i.activeTexture(Z),re=Z)}function H(Z,Ve,Me){Me===void 0&&(re===null?Me=i.TEXTURE0+xe-1:Me=re);let Be=$[Me];Be===void 0&&(Be={type:void 0,texture:void 0},$[Me]=Be),(Be.type!==Z||Be.texture!==Ve)&&(re!==Me&&(i.activeTexture(Me),re=Me),i.bindTexture(Z,Ve||Ne[Z]),Be.type=Z,Be.texture=Ve)}function pe(){const Z=$[re];Z!==void 0&&Z.type!==void 0&&(i.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)}function Te(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ue(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Pe(){try{i.texSubImage2D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function st(){try{i.texSubImage3D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ze(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function ct(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Gt(){try{i.texStorage2D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function ze(){try{i.texStorage3D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function gt(){try{i.texImage2D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Bt(){try{i.texImage3D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Lt(Z){Le.equals(Z)===!1&&(i.scissor(Z.x,Z.y,Z.z,Z.w),Le.copy(Z))}function ht(Z){fe.equals(Z)===!1&&(i.viewport(Z.x,Z.y,Z.z,Z.w),fe.copy(Z))}function ee(Z,Ve){let Me=h.get(Ve);Me===void 0&&(Me=new WeakMap,h.set(Ve,Me));let Be=Me.get(Z);Be===void 0&&(Be=i.getUniformBlockIndex(Ve,Z.name),Me.set(Z,Be))}function Re(Z,Ve){const Be=h.get(Ve).get(Z);c.get(Ve)!==Be&&(i.uniformBlockBinding(Ve,Be,Z.__bindingPointIndex),c.set(Ve,Be))}function tt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),p={},re=null,$={},g={},y=new WeakMap,v=[],S=null,w=!1,M=null,A=null,C=null,b=null,B=null,N=null,F=null,k=new lt(0,0,0),z=0,L=!1,D=null,V=null,oe=null,ie=null,ye=null,Le.set(0,0,i.canvas.width,i.canvas.height),fe.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),l.reset()}return{buffers:{color:s,depth:o,stencil:l},enable:De,disable:je,bindFramebuffer:xt,drawBuffers:Je,useProgram:rt,setBlending:K,setMaterial:mt,setFlipSided:ke,setCullFace:et,setLineWidth:Xe,setPolygonOffset:wt,setScissorTest:qe,activeTexture:X,bindTexture:H,unbindTexture:pe,compressedTexImage2D:Te,compressedTexImage3D:Ue,texImage2D:gt,texImage3D:Bt,updateUBOMapping:ee,uniformBlockBinding:Re,texStorage2D:Gt,texStorage3D:ze,texSubImage2D:Pe,texSubImage3D:st,compressedTexSubImage2D:Ze,compressedTexSubImage3D:ct,scissor:Lt,viewport:ht,reset:tt}}function dG(i,e,t,n,r,s,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Ie,p=new WeakMap;let g;const y=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(X,H){return v?new OffscreenCanvas(X,H):Tp("canvas")}function w(X,H,pe){let Te=1;const Ue=qe(X);if((Ue.width>pe||Ue.height>pe)&&(Te=pe/Math.max(Ue.width,Ue.height)),Te<1)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap||typeof VideoFrame<"u"&&X instanceof VideoFrame){const Pe=Math.floor(Te*Ue.width),st=Math.floor(Te*Ue.height);g===void 0&&(g=S(Pe,st));const Ze=H?S(Pe,st):g;return Ze.width=Pe,Ze.height=st,Ze.getContext("2d").drawImage(X,0,0,Pe,st),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ue.width+"x"+Ue.height+") to ("+Pe+"x"+st+")."),Ze}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ue.width+"x"+Ue.height+")."),X;return X}function M(X){return X.generateMipmaps}function A(X){i.generateMipmap(X)}function C(X){return X.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:X.isWebGL3DRenderTarget?i.TEXTURE_3D:X.isWebGLArrayRenderTarget||X.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function b(X,H,pe,Te,Ue=!1){if(X!==null){if(i[X]!==void 0)return i[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Pe=H;if(H===i.RED&&(pe===i.FLOAT&&(Pe=i.R32F),pe===i.HALF_FLOAT&&(Pe=i.R16F),pe===i.UNSIGNED_BYTE&&(Pe=i.R8)),H===i.RED_INTEGER&&(pe===i.UNSIGNED_BYTE&&(Pe=i.R8UI),pe===i.UNSIGNED_SHORT&&(Pe=i.R16UI),pe===i.UNSIGNED_INT&&(Pe=i.R32UI),pe===i.BYTE&&(Pe=i.R8I),pe===i.SHORT&&(Pe=i.R16I),pe===i.INT&&(Pe=i.R32I)),H===i.RG&&(pe===i.FLOAT&&(Pe=i.RG32F),pe===i.HALF_FLOAT&&(Pe=i.RG16F),pe===i.UNSIGNED_BYTE&&(Pe=i.RG8)),H===i.RG_INTEGER&&(pe===i.UNSIGNED_BYTE&&(Pe=i.RG8UI),pe===i.UNSIGNED_SHORT&&(Pe=i.RG16UI),pe===i.UNSIGNED_INT&&(Pe=i.RG32UI),pe===i.BYTE&&(Pe=i.RG8I),pe===i.SHORT&&(Pe=i.RG16I),pe===i.INT&&(Pe=i.RG32I)),H===i.RGB_INTEGER&&(pe===i.UNSIGNED_BYTE&&(Pe=i.RGB8UI),pe===i.UNSIGNED_SHORT&&(Pe=i.RGB16UI),pe===i.UNSIGNED_INT&&(Pe=i.RGB32UI),pe===i.BYTE&&(Pe=i.RGB8I),pe===i.SHORT&&(Pe=i.RGB16I),pe===i.INT&&(Pe=i.RGB32I)),H===i.RGBA_INTEGER&&(pe===i.UNSIGNED_BYTE&&(Pe=i.RGBA8UI),pe===i.UNSIGNED_SHORT&&(Pe=i.RGBA16UI),pe===i.UNSIGNED_INT&&(Pe=i.RGBA32UI),pe===i.BYTE&&(Pe=i.RGBA8I),pe===i.SHORT&&(Pe=i.RGBA16I),pe===i.INT&&(Pe=i.RGBA32I)),H===i.RGB&&pe===i.UNSIGNED_INT_5_9_9_9_REV&&(Pe=i.RGB9_E5),H===i.RGBA){const st=Ue?Mp:yn.getTransfer(Te);pe===i.FLOAT&&(Pe=i.RGBA32F),pe===i.HALF_FLOAT&&(Pe=i.RGBA16F),pe===i.UNSIGNED_BYTE&&(Pe=st===wn?i.SRGB8_ALPHA8:i.RGBA8),pe===i.UNSIGNED_SHORT_4_4_4_4&&(Pe=i.RGBA4),pe===i.UNSIGNED_SHORT_5_5_5_1&&(Pe=i.RGB5_A1)}return(Pe===i.R16F||Pe===i.R32F||Pe===i.RG16F||Pe===i.RG32F||Pe===i.RGBA16F||Pe===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Pe}function B(X,H){let pe;return X?H===null||H===Ga||H===pc?pe=i.DEPTH24_STENCIL8:H===jr?pe=i.DEPTH32F_STENCIL8:H===xd&&(pe=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):H===null||H===Ga||H===pc?pe=i.DEPTH_COMPONENT24:H===jr?pe=i.DEPTH_COMPONENT32F:H===xd&&(pe=i.DEPTH_COMPONENT16),pe}function N(X,H){return M(X)===!0||X.isFramebufferTexture&&X.minFilter!==Ui&&X.minFilter!==ai?Math.log2(Math.max(H.width,H.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?H.mipmaps.length:1}function F(X){const H=X.target;H.removeEventListener("dispose",F),z(H),H.isVideoTexture&&p.delete(H)}function k(X){const H=X.target;H.removeEventListener("dispose",k),D(H)}function z(X){const H=n.get(X);if(H.__webglInit===void 0)return;const pe=X.source,Te=y.get(pe);if(Te){const Ue=Te[H.__cacheKey];Ue.usedTimes--,Ue.usedTimes===0&&L(X),Object.keys(Te).length===0&&y.delete(pe)}n.remove(X)}function L(X){const H=n.get(X);i.deleteTexture(H.__webglTexture);const pe=X.source,Te=y.get(pe);delete Te[H.__cacheKey],o.memory.textures--}function D(X){const H=n.get(X);if(X.depthTexture&&(X.depthTexture.dispose(),n.remove(X.depthTexture)),X.isWebGLCubeRenderTarget)for(let Te=0;Te<6;Te++){if(Array.isArray(H.__webglFramebuffer[Te]))for(let Ue=0;Ue<H.__webglFramebuffer[Te].length;Ue++)i.deleteFramebuffer(H.__webglFramebuffer[Te][Ue]);else i.deleteFramebuffer(H.__webglFramebuffer[Te]);H.__webglDepthbuffer&&i.deleteRenderbuffer(H.__webglDepthbuffer[Te])}else{if(Array.isArray(H.__webglFramebuffer))for(let Te=0;Te<H.__webglFramebuffer.length;Te++)i.deleteFramebuffer(H.__webglFramebuffer[Te]);else i.deleteFramebuffer(H.__webglFramebuffer);if(H.__webglDepthbuffer&&i.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&&i.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer)for(let Te=0;Te<H.__webglColorRenderbuffer.length;Te++)H.__webglColorRenderbuffer[Te]&&i.deleteRenderbuffer(H.__webglColorRenderbuffer[Te]);H.__webglDepthRenderbuffer&&i.deleteRenderbuffer(H.__webglDepthRenderbuffer)}const pe=X.textures;for(let Te=0,Ue=pe.length;Te<Ue;Te++){const Pe=n.get(pe[Te]);Pe.__webglTexture&&(i.deleteTexture(Pe.__webglTexture),o.memory.textures--),n.remove(pe[Te])}n.remove(X)}let V=0;function oe(){V=0}function ie(){const X=V;return X>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+r.maxTextures),V+=1,X}function ye(X){const H=[];return H.push(X.wrapS),H.push(X.wrapT),H.push(X.wrapR||0),H.push(X.magFilter),H.push(X.minFilter),H.push(X.anisotropy),H.push(X.internalFormat),H.push(X.format),H.push(X.type),H.push(X.generateMipmaps),H.push(X.premultiplyAlpha),H.push(X.flipY),H.push(X.unpackAlignment),H.push(X.colorSpace),H.join()}function xe(X,H){const pe=n.get(X);if(X.isVideoTexture&&Xe(X),X.isRenderTargetTexture===!1&&X.version>0&&pe.__version!==X.version){const Te=X.image;if(Te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{fe(pe,X,H);return}}t.bindTexture(i.TEXTURE_2D,pe.__webglTexture,i.TEXTURE0+H)}function ge(X,H){const pe=n.get(X);if(X.version>0&&pe.__version!==X.version){fe(pe,X,H);return}t.bindTexture(i.TEXTURE_2D_ARRAY,pe.__webglTexture,i.TEXTURE0+H)}function de(X,H){const pe=n.get(X);if(X.version>0&&pe.__version!==X.version){fe(pe,X,H);return}t.bindTexture(i.TEXTURE_3D,pe.__webglTexture,i.TEXTURE0+H)}function W(X,H){const pe=n.get(X);if(X.version>0&&pe.__version!==X.version){we(pe,X,H);return}t.bindTexture(i.TEXTURE_CUBE_MAP,pe.__webglTexture,i.TEXTURE0+H)}const re={[Hl]:i.REPEAT,[os]:i.CLAMP_TO_EDGE,[vd]:i.MIRRORED_REPEAT},$={[Ui]:i.NEAREST,[lv]:i.NEAREST_MIPMAP_NEAREST,[ec]:i.NEAREST_MIPMAP_LINEAR,[ai]:i.LINEAR,[dd]:i.LINEAR_MIPMAP_NEAREST,[Bs]:i.LINEAR_MIPMAP_LINEAR},J={[qC]:i.NEVER,[ib]:i.ALWAYS,[ZC]:i.LESS,[_A]:i.LEQUAL,[$C]:i.EQUAL,[nb]:i.GEQUAL,[eb]:i.GREATER,[tb]:i.NOTEQUAL};function ae(X,H){if(H.type===jr&&e.has("OES_texture_float_linear")===!1&&(H.magFilter===ai||H.magFilter===dd||H.magFilter===ec||H.magFilter===Bs||H.minFilter===ai||H.minFilter===dd||H.minFilter===ec||H.minFilter===Bs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(X,i.TEXTURE_WRAP_S,re[H.wrapS]),i.texParameteri(X,i.TEXTURE_WRAP_T,re[H.wrapT]),(X===i.TEXTURE_3D||X===i.TEXTURE_2D_ARRAY)&&i.texParameteri(X,i.TEXTURE_WRAP_R,re[H.wrapR]),i.texParameteri(X,i.TEXTURE_MAG_FILTER,$[H.magFilter]),i.texParameteri(X,i.TEXTURE_MIN_FILTER,$[H.minFilter]),H.compareFunction&&(i.texParameteri(X,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(X,i.TEXTURE_COMPARE_FUNC,J[H.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(H.magFilter===Ui||H.minFilter!==ec&&H.minFilter!==Bs||H.type===jr&&e.has("OES_texture_float_linear")===!1)return;if(H.anisotropy>1||n.get(H).__currentAnisotropy){const pe=e.get("EXT_texture_filter_anisotropic");i.texParameterf(X,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,r.getMaxAnisotropy())),n.get(H).__currentAnisotropy=H.anisotropy}}}function Le(X,H){let pe=!1;X.__webglInit===void 0&&(X.__webglInit=!0,H.addEventListener("dispose",F));const Te=H.source;let Ue=y.get(Te);Ue===void 0&&(Ue={},y.set(Te,Ue));const Pe=ye(H);if(Pe!==X.__cacheKey){Ue[Pe]===void 0&&(Ue[Pe]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,pe=!0),Ue[Pe].usedTimes++;const st=Ue[X.__cacheKey];st!==void 0&&(Ue[X.__cacheKey].usedTimes--,st.usedTimes===0&&L(H)),X.__cacheKey=Pe,X.__webglTexture=Ue[Pe].texture}return pe}function fe(X,H,pe){let Te=i.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&&(Te=i.TEXTURE_2D_ARRAY),H.isData3DTexture&&(Te=i.TEXTURE_3D);const Ue=Le(X,H),Pe=H.source;t.bindTexture(Te,X.__webglTexture,i.TEXTURE0+pe);const st=n.get(Pe);if(Pe.version!==st.__version||Ue===!0){t.activeTexture(i.TEXTURE0+pe);const Ze=yn.getPrimaries(yn.workingColorSpace),ct=H.colorSpace===Pa?null:yn.getPrimaries(H.colorSpace),Gt=H.colorSpace===Pa||Ze===ct?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,H.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,H.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Gt);let ze=w(H.image,!1,r.maxTextureSize);ze=wt(H,ze);const gt=s.convert(H.format,H.colorSpace),Bt=s.convert(H.type);let Lt=b(H.internalFormat,gt,Bt,H.colorSpace,H.isVideoTexture);ae(Te,H);let ht;const ee=H.mipmaps,Re=H.isVideoTexture!==!0,tt=st.__version===void 0||Ue===!0,Z=Pe.dataReady,Ve=N(H,ze);if(H.isDepthTexture)Lt=B(H.format===mc,H.type),tt&&(Re?t.texStorage2D(i.TEXTURE_2D,1,Lt,ze.width,ze.height):t.texImage2D(i.TEXTURE_2D,0,Lt,ze.width,ze.height,0,gt,Bt,null));else if(H.isDataTexture)if(ee.length>0){Re&&tt&&t.texStorage2D(i.TEXTURE_2D,Ve,Lt,ee[0].width,ee[0].height);for(let Me=0,Be=ee.length;Me<Be;Me++)ht=ee[Me],Re?Z&&t.texSubImage2D(i.TEXTURE_2D,Me,0,0,ht.width,ht.height,gt,Bt,ht.data):t.texImage2D(i.TEXTURE_2D,Me,Lt,ht.width,ht.height,0,gt,Bt,ht.data);H.generateMipmaps=!1}else Re?(tt&&t.texStorage2D(i.TEXTURE_2D,Ve,Lt,ze.width,ze.height),Z&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,ze.width,ze.height,gt,Bt,ze.data)):t.texImage2D(i.TEXTURE_2D,0,Lt,ze.width,ze.height,0,gt,Bt,ze.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){Re&&tt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ve,Lt,ee[0].width,ee[0].height,ze.depth);for(let Me=0,Be=ee.length;Me<Be;Me++)if(ht=ee[Me],H.format!==cr)if(gt!==null)if(Re){if(Z)if(H.layerUpdates.size>0){const ut=g_(ht.width,ht.height,H.format,H.type);for(const nt of H.layerUpdates){const Pt=ht.data.subarray(nt*ut/ht.data.BYTES_PER_ELEMENT,(nt+1)*ut/ht.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Me,0,0,nt,ht.width,ht.height,1,gt,Pt)}H.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Me,0,0,0,ht.width,ht.height,ze.depth,gt,ht.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Me,Lt,ht.width,ht.height,ze.depth,0,ht.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Re?Z&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,Me,0,0,0,ht.width,ht.height,ze.depth,gt,Bt,ht.data):t.texImage3D(i.TEXTURE_2D_ARRAY,Me,Lt,ht.width,ht.height,ze.depth,0,gt,Bt,ht.data)}else{Re&&tt&&t.texStorage2D(i.TEXTURE_2D,Ve,Lt,ee[0].width,ee[0].height);for(let Me=0,Be=ee.length;Me<Be;Me++)ht=ee[Me],H.format!==cr?gt!==null?Re?Z&&t.compressedTexSubImage2D(i.TEXTURE_2D,Me,0,0,ht.width,ht.height,gt,ht.data):t.compressedTexImage2D(i.TEXTURE_2D,Me,Lt,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Re?Z&&t.texSubImage2D(i.TEXTURE_2D,Me,0,0,ht.width,ht.height,gt,Bt,ht.data):t.texImage2D(i.TEXTURE_2D,Me,Lt,ht.width,ht.height,0,gt,Bt,ht.data)}else if(H.isDataArrayTexture)if(Re){if(tt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ve,Lt,ze.width,ze.height,ze.depth),Z)if(H.layerUpdates.size>0){const Me=g_(ze.width,ze.height,H.format,H.type);for(const Be of H.layerUpdates){const ut=ze.data.subarray(Be*Me/ze.data.BYTES_PER_ELEMENT,(Be+1)*Me/ze.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Be,ze.width,ze.height,1,gt,Bt,ut)}H.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,ze.width,ze.height,ze.depth,gt,Bt,ze.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,Lt,ze.width,ze.height,ze.depth,0,gt,Bt,ze.data);else if(H.isData3DTexture)Re?(tt&&t.texStorage3D(i.TEXTURE_3D,Ve,Lt,ze.width,ze.height,ze.depth),Z&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,ze.width,ze.height,ze.depth,gt,Bt,ze.data)):t.texImage3D(i.TEXTURE_3D,0,Lt,ze.width,ze.height,ze.depth,0,gt,Bt,ze.data);else if(H.isFramebufferTexture){if(tt)if(Re)t.texStorage2D(i.TEXTURE_2D,Ve,Lt,ze.width,ze.height);else{let Me=ze.width,Be=ze.height;for(let ut=0;ut<Ve;ut++)t.texImage2D(i.TEXTURE_2D,ut,Lt,Me,Be,0,gt,Bt,null),Me>>=1,Be>>=1}}else if(ee.length>0){if(Re&&tt){const Me=qe(ee[0]);t.texStorage2D(i.TEXTURE_2D,Ve,Lt,Me.width,Me.height)}for(let Me=0,Be=ee.length;Me<Be;Me++)ht=ee[Me],Re?Z&&t.texSubImage2D(i.TEXTURE_2D,Me,0,0,gt,Bt,ht):t.texImage2D(i.TEXTURE_2D,Me,Lt,gt,Bt,ht);H.generateMipmaps=!1}else if(Re){if(tt){const Me=qe(ze);t.texStorage2D(i.TEXTURE_2D,Ve,Lt,Me.width,Me.height)}Z&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,gt,Bt,ze)}else t.texImage2D(i.TEXTURE_2D,0,Lt,gt,Bt,ze);M(H)&&A(Te),st.__version=Pe.version,H.onUpdate&&H.onUpdate(H)}X.__version=H.version}function we(X,H,pe){if(H.image.length!==6)return;const Te=Le(X,H),Ue=H.source;t.bindTexture(i.TEXTURE_CUBE_MAP,X.__webglTexture,i.TEXTURE0+pe);const Pe=n.get(Ue);if(Ue.version!==Pe.__version||Te===!0){t.activeTexture(i.TEXTURE0+pe);const st=yn.getPrimaries(yn.workingColorSpace),Ze=H.colorSpace===Pa?null:yn.getPrimaries(H.colorSpace),ct=H.colorSpace===Pa||st===Ze?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,H.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,H.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ct);const Gt=H.isCompressedTexture||H.image[0].isCompressedTexture,ze=H.image[0]&&H.image[0].isDataTexture,gt=[];for(let Be=0;Be<6;Be++)!Gt&&!ze?gt[Be]=w(H.image[Be],!0,r.maxCubemapSize):gt[Be]=ze?H.image[Be].image:H.image[Be],gt[Be]=wt(H,gt[Be]);const Bt=gt[0],Lt=s.convert(H.format,H.colorSpace),ht=s.convert(H.type),ee=b(H.internalFormat,Lt,ht,H.colorSpace),Re=H.isVideoTexture!==!0,tt=Pe.__version===void 0||Te===!0,Z=Ue.dataReady;let Ve=N(H,Bt);ae(i.TEXTURE_CUBE_MAP,H);let Me;if(Gt){Re&&tt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Ve,ee,Bt.width,Bt.height);for(let Be=0;Be<6;Be++){Me=gt[Be].mipmaps;for(let ut=0;ut<Me.length;ut++){const nt=Me[ut];H.format!==cr?Lt!==null?Re?Z&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ut,0,0,nt.width,nt.height,Lt,nt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ut,ee,nt.width,nt.height,0,nt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Re?Z&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ut,0,0,nt.width,nt.height,Lt,ht,nt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ut,ee,nt.width,nt.height,0,Lt,ht,nt.data)}}}else{if(Me=H.mipmaps,Re&&tt){Me.length>0&&Ve++;const Be=qe(gt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Ve,ee,Be.width,Be.height)}for(let Be=0;Be<6;Be++)if(ze){Re?Z&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,gt[Be].width,gt[Be].height,Lt,ht,gt[Be].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,ee,gt[Be].width,gt[Be].height,0,Lt,ht,gt[Be].data);for(let ut=0;ut<Me.length;ut++){const Pt=Me[ut].image[Be].image;Re?Z&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ut+1,0,0,Pt.width,Pt.height,Lt,ht,Pt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ut+1,ee,Pt.width,Pt.height,0,Lt,ht,Pt.data)}}else{Re?Z&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,Lt,ht,gt[Be]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,ee,Lt,ht,gt[Be]);for(let ut=0;ut<Me.length;ut++){const nt=Me[ut];Re?Z&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ut+1,0,0,Lt,ht,nt.image[Be]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ut+1,ee,Lt,ht,nt.image[Be])}}}M(H)&&A(i.TEXTURE_CUBE_MAP),Pe.__version=Ue.version,H.onUpdate&&H.onUpdate(H)}X.__version=H.version}function Ne(X,H,pe,Te,Ue,Pe){const st=s.convert(pe.format,pe.colorSpace),Ze=s.convert(pe.type),ct=b(pe.internalFormat,st,Ze,pe.colorSpace),Gt=n.get(H),ze=n.get(pe);if(ze.__renderTarget=H,!Gt.__hasExternalTextures){const gt=Math.max(1,H.width>>Pe),Bt=Math.max(1,H.height>>Pe);Ue===i.TEXTURE_3D||Ue===i.TEXTURE_2D_ARRAY?t.texImage3D(Ue,Pe,ct,gt,Bt,H.depth,0,st,Ze,null):t.texImage2D(Ue,Pe,ct,gt,Bt,0,st,Ze,null)}t.bindFramebuffer(i.FRAMEBUFFER,X),et(H)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Te,Ue,ze.__webglTexture,0,ke(H)):(Ue===i.TEXTURE_2D||Ue>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Ue<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Te,Ue,ze.__webglTexture,Pe),t.bindFramebuffer(i.FRAMEBUFFER,null)}function De(X,H,pe){if(i.bindRenderbuffer(i.RENDERBUFFER,X),H.depthBuffer){const Te=H.depthTexture,Ue=Te&&Te.isDepthTexture?Te.type:null,Pe=B(H.stencilBuffer,Ue),st=H.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ze=ke(H);et(H)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ze,Pe,H.width,H.height):pe?i.renderbufferStorageMultisample(i.RENDERBUFFER,Ze,Pe,H.width,H.height):i.renderbufferStorage(i.RENDERBUFFER,Pe,H.width,H.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,st,i.RENDERBUFFER,X)}else{const Te=H.textures;for(let Ue=0;Ue<Te.length;Ue++){const Pe=Te[Ue],st=s.convert(Pe.format,Pe.colorSpace),Ze=s.convert(Pe.type),ct=b(Pe.internalFormat,st,Ze,Pe.colorSpace),Gt=ke(H);pe&&et(H)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Gt,ct,H.width,H.height):et(H)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Gt,ct,H.width,H.height):i.renderbufferStorage(i.RENDERBUFFER,ct,H.width,H.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function je(X,H){if(H&&H.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,X),!(H.depthTexture&&H.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Te=n.get(H.depthTexture);Te.__renderTarget=H,(!Te.__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&&(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),xe(H.depthTexture,0);const Ue=Te.__webglTexture,Pe=ke(H);if(H.depthTexture.format===uc)et(H)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ue,0,Pe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ue,0);else if(H.depthTexture.format===mc)et(H)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ue,0,Pe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ue,0);else throw new Error("Unknown depthTexture format")}function xt(X){const H=n.get(X),pe=X.isWebGLCubeRenderTarget===!0;if(H.__boundDepthTexture!==X.depthTexture){const Te=X.depthTexture;if(H.__depthDisposeCallback&&H.__depthDisposeCallback(),Te){const Ue=()=>{delete H.__boundDepthTexture,delete H.__depthDisposeCallback,Te.removeEventListener("dispose",Ue)};Te.addEventListener("dispose",Ue),H.__depthDisposeCallback=Ue}H.__boundDepthTexture=Te}if(X.depthTexture&&!H.__autoAllocateDepthBuffer){if(pe)throw new Error("target.depthTexture not supported in Cube render targets");je(H.__webglFramebuffer,X)}else if(pe){H.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)if(t.bindFramebuffer(i.FRAMEBUFFER,H.__webglFramebuffer[Te]),H.__webglDepthbuffer[Te]===void 0)H.__webglDepthbuffer[Te]=i.createRenderbuffer(),De(H.__webglDepthbuffer[Te],X,!1);else{const Ue=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Pe=H.__webglDepthbuffer[Te];i.bindRenderbuffer(i.RENDERBUFFER,Pe),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ue,i.RENDERBUFFER,Pe)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer===void 0)H.__webglDepthbuffer=i.createRenderbuffer(),De(H.__webglDepthbuffer,X,!1);else{const Te=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ue=H.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ue),i.framebufferRenderbuffer(i.FRAMEBUFFER,Te,i.RENDERBUFFER,Ue)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Je(X,H,pe){const Te=n.get(X);H!==void 0&&Ne(Te.__webglFramebuffer,X,X.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),pe!==void 0&&xt(X)}function rt(X){const H=X.texture,pe=n.get(X),Te=n.get(H);X.addEventListener("dispose",k);const Ue=X.textures,Pe=X.isWebGLCubeRenderTarget===!0,st=Ue.length>1;if(st||(Te.__webglTexture===void 0&&(Te.__webglTexture=i.createTexture()),Te.__version=H.version,o.memory.textures++),Pe){pe.__webglFramebuffer=[];for(let Ze=0;Ze<6;Ze++)if(H.mipmaps&&H.mipmaps.length>0){pe.__webglFramebuffer[Ze]=[];for(let ct=0;ct<H.mipmaps.length;ct++)pe.__webglFramebuffer[Ze][ct]=i.createFramebuffer()}else pe.__webglFramebuffer[Ze]=i.createFramebuffer()}else{if(H.mipmaps&&H.mipmaps.length>0){pe.__webglFramebuffer=[];for(let Ze=0;Ze<H.mipmaps.length;Ze++)pe.__webglFramebuffer[Ze]=i.createFramebuffer()}else pe.__webglFramebuffer=i.createFramebuffer();if(st)for(let Ze=0,ct=Ue.length;Ze<ct;Ze++){const Gt=n.get(Ue[Ze]);Gt.__webglTexture===void 0&&(Gt.__webglTexture=i.createTexture(),o.memory.textures++)}if(X.samples>0&&et(X)===!1){pe.__webglMultisampledFramebuffer=i.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,pe.__webglMultisampledFramebuffer);for(let Ze=0;Ze<Ue.length;Ze++){const ct=Ue[Ze];pe.__webglColorRenderbuffer[Ze]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,pe.__webglColorRenderbuffer[Ze]);const Gt=s.convert(ct.format,ct.colorSpace),ze=s.convert(ct.type),gt=b(ct.internalFormat,Gt,ze,ct.colorSpace,X.isXRRenderTarget===!0),Bt=ke(X);i.renderbufferStorageMultisample(i.RENDERBUFFER,Bt,gt,X.width,X.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ze,i.RENDERBUFFER,pe.__webglColorRenderbuffer[Ze])}i.bindRenderbuffer(i.RENDERBUFFER,null),X.depthBuffer&&(pe.__webglDepthRenderbuffer=i.createRenderbuffer(),De(pe.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Pe){t.bindTexture(i.TEXTURE_CUBE_MAP,Te.__webglTexture),ae(i.TEXTURE_CUBE_MAP,H);for(let Ze=0;Ze<6;Ze++)if(H.mipmaps&&H.mipmaps.length>0)for(let ct=0;ct<H.mipmaps.length;ct++)Ne(pe.__webglFramebuffer[Ze][ct],X,H,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,ct);else Ne(pe.__webglFramebuffer[Ze],X,H,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,0);M(H)&&A(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(st){for(let Ze=0,ct=Ue.length;Ze<ct;Ze++){const Gt=Ue[Ze],ze=n.get(Gt);t.bindTexture(i.TEXTURE_2D,ze.__webglTexture),ae(i.TEXTURE_2D,Gt),Ne(pe.__webglFramebuffer,X,Gt,i.COLOR_ATTACHMENT0+Ze,i.TEXTURE_2D,0),M(Gt)&&A(i.TEXTURE_2D)}t.unbindTexture()}else{let Ze=i.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(Ze=X.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Ze,Te.__webglTexture),ae(Ze,H),H.mipmaps&&H.mipmaps.length>0)for(let ct=0;ct<H.mipmaps.length;ct++)Ne(pe.__webglFramebuffer[ct],X,H,i.COLOR_ATTACHMENT0,Ze,ct);else Ne(pe.__webglFramebuffer,X,H,i.COLOR_ATTACHMENT0,Ze,0);M(H)&&A(Ze),t.unbindTexture()}X.depthBuffer&&xt(X)}function Fe(X){const H=X.textures;for(let pe=0,Te=H.length;pe<Te;pe++){const Ue=H[pe];if(M(Ue)){const Pe=C(X),st=n.get(Ue).__webglTexture;t.bindTexture(Pe,st),A(Pe),t.unbindTexture()}}}const be=[],K=[];function mt(X){if(X.samples>0){if(et(X)===!1){const H=X.textures,pe=X.width,Te=X.height;let Ue=i.COLOR_BUFFER_BIT;const Pe=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,st=n.get(X),Ze=H.length>1;if(Ze)for(let ct=0;ct<H.length;ct++)t.bindFramebuffer(i.FRAMEBUFFER,st.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,st.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,st.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,st.__webglFramebuffer);for(let ct=0;ct<H.length;ct++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(Ue|=i.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(Ue|=i.STENCIL_BUFFER_BIT)),Ze){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,st.__webglColorRenderbuffer[ct]);const Gt=n.get(H[ct]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Gt,0)}i.blitFramebuffer(0,0,pe,Te,0,0,pe,Te,Ue,i.NEAREST),c===!0&&(be.length=0,K.length=0,be.push(i.COLOR_ATTACHMENT0+ct),X.depthBuffer&&X.resolveDepthBuffer===!1&&(be.push(Pe),K.push(Pe),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,K)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,be))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Ze)for(let ct=0;ct<H.length;ct++){t.bindFramebuffer(i.FRAMEBUFFER,st.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.RENDERBUFFER,st.__webglColorRenderbuffer[ct]);const Gt=n.get(H[ct]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,st.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.TEXTURE_2D,Gt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,st.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&c){const H=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[H])}}}function ke(X){return Math.min(r.maxSamples,X.samples)}function et(X){const H=n.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&H.__useRenderToTexture!==!1}function Xe(X){const H=o.render.frame;p.get(X)!==H&&(p.set(X,H),X.update())}function wt(X,H){const pe=X.colorSpace,Te=X.format,Ue=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||pe!==gc&&pe!==Pa&&(yn.getTransfer(pe)===wn?(Te!==cr||Ue!==fo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",pe)),H}function qe(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(h.width=X.naturalWidth||X.width,h.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceof VideoFrame?(h.width=X.displayWidth,h.height=X.displayHeight):(h.width=X.width,h.height=X.height),h}this.allocateTextureUnit=ie,this.resetTextureUnits=oe,this.setTexture2D=xe,this.setTexture2DArray=ge,this.setTexture3D=de,this.setTextureCube=W,this.rebindTextures=Je,this.setupRenderTarget=rt,this.updateRenderTargetMipmap=Fe,this.updateMultisampleRenderTarget=mt,this.setupDepthRenderbuffer=xt,this.setupFrameBufferTexture=Ne,this.useMultisampledRTT=et}function lR(i,e){function t(n,r=Pa){let s;const o=yn.getTransfer(r);if(n===fo)return i.UNSIGNED_BYTE;if(n===cv)return i.UNSIGNED_SHORT_4_4_4_4;if(n===fv)return i.UNSIGNED_SHORT_5_5_5_1;if(n===fA)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===uA)return i.BYTE;if(n===cA)return i.SHORT;if(n===xd)return i.UNSIGNED_SHORT;if(n===uv)return i.INT;if(n===Ga)return i.UNSIGNED_INT;if(n===jr)return i.FLOAT;if(n===Bd)return i.HALF_FLOAT;if(n===dA)return i.ALPHA;if(n===hA)return i.RGB;if(n===cr)return i.RGBA;if(n===pA)return i.LUMINANCE;if(n===mA)return i.LUMINANCE_ALPHA;if(n===uc)return i.DEPTH_COMPONENT;if(n===mc)return i.DEPTH_STENCIL;if(n===dv)return i.RED;if(n===zp)return i.RED_INTEGER;if(n===gA)return i.RG;if(n===hv)return i.RG_INTEGER;if(n===pv)return i.RGBA_INTEGER;if(n===rp||n===sp||n===op||n===ap)if(o===wn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===rp)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===sp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===op)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===ap)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===rp)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===sp)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===op)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ap)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Ay||n===Sy||n===My||n===Ey)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===Ay)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Sy)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===My)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ey)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===wy||n===Ty||n===Cy)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===wy||n===Ty)return o===wn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Cy)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===by||n===Ry||n===Py||n===By||n===Iy||n===Dy||n===Ly||n===Fy||n===Ny||n===Uy||n===Oy||n===ky||n===Hy||n===zy)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===by)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Ry)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Py)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===By)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Iy)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Dy)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Ly)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Fy)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Ny)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Uy)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Oy)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===ky)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Hy)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===zy)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===lp||n===Gy||n===Vy)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===lp)return o===wn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Gy)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Vy)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===yA||n===Wy||n===jy||n===Xy)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===lp)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Wy)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===jy)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Xy)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===pc?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const hG=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,pG=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class mG{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const r=new Gn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new ho({vertexShader:hG,fragmentShader:pG,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new li(new Dd(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class gG extends zo{constructor(e,t){super();const n=this;let r=null,s=1,o=null,l="local-floor",c=1,h=null,p=null,g=null,y=null,v=null,S=null;const w=new mG,M=t.getContextAttributes();let A=null,C=null;const b=[],B=[],N=new Ie;let F=null;const k=new zn;k.viewport=new xn;const z=new zn;z.viewport=new xn;const L=[k,z],D=new qb;let V=null,oe=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(fe){let we=b[fe];return we===void 0&&(we=new ty,b[fe]=we),we.getTargetRaySpace()},this.getControllerGrip=function(fe){let we=b[fe];return we===void 0&&(we=new ty,b[fe]=we),we.getGripSpace()},this.getHand=function(fe){let we=b[fe];return we===void 0&&(we=new ty,b[fe]=we),we.getHandSpace()};function ie(fe){const we=B.indexOf(fe.inputSource);if(we===-1)return;const Ne=b[we];Ne!==void 0&&(Ne.update(fe.inputSource,fe.frame,h||o),Ne.dispatchEvent({type:fe.type,data:fe.inputSource}))}function ye(){r.removeEventListener("select",ie),r.removeEventListener("selectstart",ie),r.removeEventListener("selectend",ie),r.removeEventListener("squeeze",ie),r.removeEventListener("squeezestart",ie),r.removeEventListener("squeezeend",ie),r.removeEventListener("end",ye),r.removeEventListener("inputsourceschange",xe);for(let fe=0;fe<b.length;fe++){const we=B[fe];we!==null&&(B[fe]=null,b[fe].disconnect(we))}V=null,oe=null,w.reset(),e.setRenderTarget(A),v=null,y=null,g=null,r=null,C=null,Le.stop(),n.isPresenting=!1,e.setPixelRatio(F),e.setSize(N.width,N.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(fe){s=fe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(fe){l=fe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(fe){h=fe},this.getBaseLayer=function(){return y!==null?y:v},this.getBinding=function(){return g},this.getFrame=function(){return S},this.getSession=function(){return r},this.setSession=async function(fe){if(r=fe,r!==null){if(A=e.getRenderTarget(),r.addEventListener("select",ie),r.addEventListener("selectstart",ie),r.addEventListener("selectend",ie),r.addEventListener("squeeze",ie),r.addEventListener("squeezestart",ie),r.addEventListener("squeezeend",ie),r.addEventListener("end",ye),r.addEventListener("inputsourceschange",xe),M.xrCompatible!==!0&&await t.makeXRCompatible(),F=e.getPixelRatio(),e.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ne=null,De=null,je=null;M.depth&&(je=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ne=M.stencil?mc:uc,De=M.stencil?pc:Ga);const xt={colorFormat:t.RGBA8,depthFormat:je,scaleFactor:s};g=new XRWebGLBinding(r,t),y=g.createProjectionLayer(xt),r.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),C=new ko(y.textureWidth,y.textureHeight,{format:cr,type:fo,depthTexture:new PA(y.textureWidth,y.textureHeight,De,void 0,void 0,void 0,void 0,void 0,void 0,Ne),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1})}else{const Ne={antialias:M.antialias,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(r,t,Ne),r.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),C=new ko(v.framebufferWidth,v.framebufferHeight,{format:cr,type:fo,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil})}C.isXRRenderTarget=!0,this.setFoveation(c),h=null,o=await r.requestReferenceSpace(l),Le.setContext(r),Le.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function xe(fe){for(let we=0;we<fe.removed.length;we++){const Ne=fe.removed[we],De=B.indexOf(Ne);De>=0&&(B[De]=null,b[De].disconnect(Ne))}for(let we=0;we<fe.added.length;we++){const Ne=fe.added[we];let De=B.indexOf(Ne);if(De===-1){for(let xt=0;xt<b.length;xt++)if(xt>=B.length){B.push(Ne),De=xt;break}else if(B[xt]===null){B[xt]=Ne,De=xt;break}if(De===-1)break}const je=b[De];je&&je.connect(Ne)}}const ge=new j,de=new j;function W(fe,we,Ne){ge.setFromMatrixPosition(we.matrixWorld),de.setFromMatrixPosition(Ne.matrixWorld);const De=ge.distanceTo(de),je=we.projectionMatrix.elements,xt=Ne.projectionMatrix.elements,Je=je[14]/(je[10]-1),rt=je[14]/(je[10]+1),Fe=(je[9]+1)/je[5],be=(je[9]-1)/je[5],K=(je[8]-1)/je[0],mt=(xt[8]+1)/xt[0],ke=Je*K,et=Je*mt,Xe=De/(-K+mt),wt=Xe*-K;if(we.matrixWorld.decompose(fe.position,fe.quaternion,fe.scale),fe.translateX(wt),fe.translateZ(Xe),fe.matrixWorld.compose(fe.position,fe.quaternion,fe.scale),fe.matrixWorldInverse.copy(fe.matrixWorld).invert(),je[10]===-1)fe.projectionMatrix.copy(we.projectionMatrix),fe.projectionMatrixInverse.copy(we.projectionMatrixInverse);else{const qe=Je+Xe,X=rt+Xe,H=ke-wt,pe=et+(De-wt),Te=Fe*rt/X*qe,Ue=be*rt/X*qe;fe.projectionMatrix.makePerspective(H,pe,Te,Ue,qe,X),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert()}}function re(fe,we){we===null?fe.matrixWorld.copy(fe.matrix):fe.matrixWorld.multiplyMatrices(we.matrixWorld,fe.matrix),fe.matrixWorldInverse.copy(fe.matrixWorld).invert()}this.updateCamera=function(fe){if(r===null)return;let we=fe.near,Ne=fe.far;w.texture!==null&&(w.depthNear>0&&(we=w.depthNear),w.depthFar>0&&(Ne=w.depthFar)),D.near=z.near=k.near=we,D.far=z.far=k.far=Ne,(V!==D.near||oe!==D.far)&&(r.updateRenderState({depthNear:D.near,depthFar:D.far}),V=D.near,oe=D.far),k.layers.mask=fe.layers.mask|2,z.layers.mask=fe.layers.mask|4,D.layers.mask=k.layers.mask|z.layers.mask;const De=fe.parent,je=D.cameras;re(D,De);for(let xt=0;xt<je.length;xt++)re(je[xt],De);je.length===2?W(D,k,z):D.projectionMatrix.copy(k.projectionMatrix),$(fe,D,De)};function $(fe,we,Ne){Ne===null?fe.matrix.copy(we.matrixWorld):(fe.matrix.copy(Ne.matrixWorld),fe.matrix.invert(),fe.matrix.multiply(we.matrixWorld)),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.updateMatrixWorld(!0),fe.projectionMatrix.copy(we.projectionMatrix),fe.projectionMatrixInverse.copy(we.projectionMatrixInverse),fe.isPerspectiveCamera&&(fe.fov=Sd*2*Math.atan(1/fe.projectionMatrix.elements[5]),fe.zoom=1)}this.getCamera=function(){return D},this.getFoveation=function(){if(!(y===null&&v===null))return c},this.setFoveation=function(fe){c=fe,y!==null&&(y.fixedFoveation=fe),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=fe)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(D)};let J=null;function ae(fe,we){if(p=we.getViewerPose(h||o),S=we,p!==null){const Ne=p.views;v!==null&&(e.setRenderTargetFramebuffer(C,v.framebuffer),e.setRenderTarget(C));let De=!1;Ne.length!==D.cameras.length&&(D.cameras.length=0,De=!0);for(let Je=0;Je<Ne.length;Je++){const rt=Ne[Je];let Fe=null;if(v!==null)Fe=v.getViewport(rt);else{const K=g.getViewSubImage(y,rt);Fe=K.viewport,Je===0&&(e.setRenderTargetTextures(C,K.colorTexture,y.ignoreDepthValues?void 0:K.depthStencilTexture),e.setRenderTarget(C))}let be=L[Je];be===void 0&&(be=new zn,be.layers.enable(Je),be.viewport=new xn,L[Je]=be),be.matrix.fromArray(rt.transform.matrix),be.matrix.decompose(be.position,be.quaternion,be.scale),be.projectionMatrix.fromArray(rt.projectionMatrix),be.projectionMatrixInverse.copy(be.projectionMatrix).invert(),be.viewport.set(Fe.x,Fe.y,Fe.width,Fe.height),Je===0&&(D.matrix.copy(be.matrix),D.matrix.decompose(D.position,D.quaternion,D.scale)),De===!0&&D.cameras.push(be)}const je=r.enabledFeatures;if(je&&je.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&g){const Je=g.getDepthInformation(Ne[0]);Je&&Je.isValid&&Je.texture&&w.init(e,Je,r.renderState)}}for(let Ne=0;Ne<b.length;Ne++){const De=B[Ne],je=b[Ne];De!==null&&je!==void 0&&je.update(De,we,h||o)}J&&J(fe,we),we.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:we}),S=null}const Le=new iR;Le.setAnimationLoop(ae),this.setAnimationLoop=function(fe){J=fe},this.dispose=function(){}}}const Wu=new cs,yG=new Ot;function vG(i,e){function t(M,A){M.matrixAutoUpdate===!0&&M.updateMatrix(),A.value.copy(M.matrix)}function n(M,A){A.color.getRGB(M.fogColor.value,ub(i)),A.isFog?(M.fogNear.value=A.near,M.fogFar.value=A.far):A.isFogExp2&&(M.fogDensity.value=A.density)}function r(M,A,C,b,B){A.isMeshBasicMaterial||A.isMeshLambertMaterial?s(M,A):A.isMeshToonMaterial?(s(M,A),g(M,A)):A.isMeshPhongMaterial?(s(M,A),p(M,A)):A.isMeshStandardMaterial?(s(M,A),y(M,A),A.isMeshPhysicalMaterial&&v(M,A,B)):A.isMeshMatcapMaterial?(s(M,A),S(M,A)):A.isMeshDepthMaterial?s(M,A):A.isMeshDistanceMaterial?(s(M,A),w(M,A)):A.isMeshNormalMaterial?s(M,A):A.isLineBasicMaterial?(o(M,A),A.isLineDashedMaterial&&l(M,A)):A.isPointsMaterial?c(M,A,C,b):A.isSpriteMaterial?h(M,A):A.isShadowMaterial?(M.color.value.copy(A.color),M.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function s(M,A){M.opacity.value=A.opacity,A.color&&M.diffuse.value.copy(A.color),A.emissive&&M.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(M.map.value=A.map,t(A.map,M.mapTransform)),A.alphaMap&&(M.alphaMap.value=A.alphaMap,t(A.alphaMap,M.alphaMapTransform)),A.bumpMap&&(M.bumpMap.value=A.bumpMap,t(A.bumpMap,M.bumpMapTransform),M.bumpScale.value=A.bumpScale,A.side===br&&(M.bumpScale.value*=-1)),A.normalMap&&(M.normalMap.value=A.normalMap,t(A.normalMap,M.normalMapTransform),M.normalScale.value.copy(A.normalScale),A.side===br&&M.normalScale.value.negate()),A.displacementMap&&(M.displacementMap.value=A.displacementMap,t(A.displacementMap,M.displacementMapTransform),M.displacementScale.value=A.displacementScale,M.displacementBias.value=A.displacementBias),A.emissiveMap&&(M.emissiveMap.value=A.emissiveMap,t(A.emissiveMap,M.emissiveMapTransform)),A.specularMap&&(M.specularMap.value=A.specularMap,t(A.specularMap,M.specularMapTransform)),A.alphaTest>0&&(M.alphaTest.value=A.alphaTest);const C=e.get(A),b=C.envMap,B=C.envMapRotation;b&&(M.envMap.value=b,Wu.copy(B),Wu.x*=-1,Wu.y*=-1,Wu.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(Wu.y*=-1,Wu.z*=-1),M.envMapRotation.value.setFromMatrix4(yG.makeRotationFromEuler(Wu)),M.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=A.reflectivity,M.ior.value=A.ior,M.refractionRatio.value=A.refractionRatio),A.lightMap&&(M.lightMap.value=A.lightMap,M.lightMapIntensity.value=A.lightMapIntensity,t(A.lightMap,M.lightMapTransform)),A.aoMap&&(M.aoMap.value=A.aoMap,M.aoMapIntensity.value=A.aoMapIntensity,t(A.aoMap,M.aoMapTransform))}function o(M,A){M.diffuse.value.copy(A.color),M.opacity.value=A.opacity,A.map&&(M.map.value=A.map,t(A.map,M.mapTransform))}function l(M,A){M.dashSize.value=A.dashSize,M.totalSize.value=A.dashSize+A.gapSize,M.scale.value=A.scale}function c(M,A,C,b){M.diffuse.value.copy(A.color),M.opacity.value=A.opacity,M.size.value=A.size*C,M.scale.value=b*.5,A.map&&(M.map.value=A.map,t(A.map,M.uvTransform)),A.alphaMap&&(M.alphaMap.value=A.alphaMap,t(A.alphaMap,M.alphaMapTransform)),A.alphaTest>0&&(M.alphaTest.value=A.alphaTest)}function h(M,A){M.diffuse.value.copy(A.color),M.opacity.value=A.opacity,M.rotation.value=A.rotation,A.map&&(M.map.value=A.map,t(A.map,M.mapTransform)),A.alphaMap&&(M.alphaMap.value=A.alphaMap,t(A.alphaMap,M.alphaMapTransform)),A.alphaTest>0&&(M.alphaTest.value=A.alphaTest)}function p(M,A){M.specular.value.copy(A.specular),M.shininess.value=Math.max(A.shininess,1e-4)}function g(M,A){A.gradientMap&&(M.gradientMap.value=A.gradientMap)}function y(M,A){M.metalness.value=A.metalness,A.metalnessMap&&(M.metalnessMap.value=A.metalnessMap,t(A.metalnessMap,M.metalnessMapTransform)),M.roughness.value=A.roughness,A.roughnessMap&&(M.roughnessMap.value=A.roughnessMap,t(A.roughnessMap,M.roughnessMapTransform)),A.envMap&&(M.envMapIntensity.value=A.envMapIntensity)}function v(M,A,C){M.ior.value=A.ior,A.sheen>0&&(M.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),M.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(M.sheenColorMap.value=A.sheenColorMap,t(A.sheenColorMap,M.sheenColorMapTransform)),A.sheenRoughnessMap&&(M.sheenRoughnessMap.value=A.sheenRoughnessMap,t(A.sheenRoughnessMap,M.sheenRoughnessMapTransform))),A.clearcoat>0&&(M.clearcoat.value=A.clearcoat,M.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(M.clearcoatMap.value=A.clearcoatMap,t(A.clearcoatMap,M.clearcoatMapTransform)),A.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap,t(A.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),A.clearcoatNormalMap&&(M.clearcoatNormalMap.value=A.clearcoatNormalMap,t(A.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),A.side===br&&M.clearcoatNormalScale.value.negate())),A.dispersion>0&&(M.dispersion.value=A.dispersion),A.iridescence>0&&(M.iridescence.value=A.iridescence,M.iridescenceIOR.value=A.iridescenceIOR,M.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(M.iridescenceMap.value=A.iridescenceMap,t(A.iridescenceMap,M.iridescenceMapTransform)),A.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=A.iridescenceThicknessMap,t(A.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),A.transmission>0&&(M.transmission.value=A.transmission,M.transmissionSamplerMap.value=C.texture,M.transmissionSamplerSize.value.set(C.width,C.height),A.transmissionMap&&(M.transmissionMap.value=A.transmissionMap,t(A.transmissionMap,M.transmissionMapTransform)),M.thickness.value=A.thickness,A.thicknessMap&&(M.thicknessMap.value=A.thicknessMap,t(A.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=A.attenuationDistance,M.attenuationColor.value.copy(A.attenuationColor)),A.anisotropy>0&&(M.anisotropyVector.value.set(A.anisotropy*Math.cos(A.anisotropyRotation),A.anisotropy*Math.sin(A.anisotropyRotation)),A.anisotropyMap&&(M.anisotropyMap.value=A.anisotropyMap,t(A.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=A.specularIntensity,M.specularColor.value.copy(A.specularColor),A.specularColorMap&&(M.specularColorMap.value=A.specularColorMap,t(A.specularColorMap,M.specularColorMapTransform)),A.specularIntensityMap&&(M.specularIntensityMap.value=A.specularIntensityMap,t(A.specularIntensityMap,M.specularIntensityMapTransform))}function S(M,A){A.matcap&&(M.matcap.value=A.matcap)}function w(M,A){const C=e.get(A).light;M.referencePosition.value.setFromMatrixPosition(C.matrixWorld),M.nearDistance.value=C.shadow.camera.near,M.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function xG(i,e,t,n){let r={},s={},o=[];const l=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function c(C,b){const B=b.program;n.uniformBlockBinding(C,B)}function h(C,b){let B=r[C.id];B===void 0&&(S(C),B=p(C),r[C.id]=B,C.addEventListener("dispose",M));const N=b.program;n.updateUBOMapping(C,N);const F=e.render.frame;s[C.id]!==F&&(y(C),s[C.id]=F)}function p(C){const b=g();C.__bindingPointIndex=b;const B=i.createBuffer(),N=C.__size,F=C.usage;return i.bindBuffer(i.UNIFORM_BUFFER,B),i.bufferData(i.UNIFORM_BUFFER,N,F),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,b,B),B}function g(){for(let C=0;C<l;C++)if(o.indexOf(C)===-1)return o.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(C){const b=r[C.id],B=C.uniforms,N=C.__cache;i.bindBuffer(i.UNIFORM_BUFFER,b);for(let F=0,k=B.length;F<k;F++){const z=Array.isArray(B[F])?B[F]:[B[F]];for(let L=0,D=z.length;L<D;L++){const V=z[L];if(v(V,F,L,N)===!0){const oe=V.__offset,ie=Array.isArray(V.value)?V.value:[V.value];let ye=0;for(let xe=0;xe<ie.length;xe++){const ge=ie[xe],de=w(ge);typeof ge=="number"||typeof ge=="boolean"?(V.__data[0]=ge,i.bufferSubData(i.UNIFORM_BUFFER,oe+ye,V.__data)):ge.isMatrix3?(V.__data[0]=ge.elements[0],V.__data[1]=ge.elements[1],V.__data[2]=ge.elements[2],V.__data[3]=0,V.__data[4]=ge.elements[3],V.__data[5]=ge.elements[4],V.__data[6]=ge.elements[5],V.__data[7]=0,V.__data[8]=ge.elements[6],V.__data[9]=ge.elements[7],V.__data[10]=ge.elements[8],V.__data[11]=0):(ge.toArray(V.__data,ye),ye+=de.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,oe,V.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function v(C,b,B,N){const F=C.value,k=b+"_"+B;if(N[k]===void 0)return typeof F=="number"||typeof F=="boolean"?N[k]=F:N[k]=F.clone(),!0;{const z=N[k];if(typeof F=="number"||typeof F=="boolean"){if(z!==F)return N[k]=F,!0}else if(z.equals(F)===!1)return z.copy(F),!0}return!1}function S(C){const b=C.uniforms;let B=0;const N=16;for(let k=0,z=b.length;k<z;k++){const L=Array.isArray(b[k])?b[k]:[b[k]];for(let D=0,V=L.length;D<V;D++){const oe=L[D],ie=Array.isArray(oe.value)?oe.value:[oe.value];for(let ye=0,xe=ie.length;ye<xe;ye++){const ge=ie[ye],de=w(ge),W=B%N,re=W%de.boundary,$=W+re;B+=re,$!==0&&N-$<de.storage&&(B+=N-$),oe.__data=new Float32Array(de.storage/Float32Array.BYTES_PER_ELEMENT),oe.__offset=B,B+=de.storage}}}const F=B%N;return F>0&&(B+=N-F),C.__size=B,C.__cache={},this}function w(C){const b={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(b.boundary=4,b.storage=4):C.isVector2?(b.boundary=8,b.storage=8):C.isVector3||C.isColor?(b.boundary=16,b.storage=12):C.isVector4?(b.boundary=16,b.storage=16):C.isMatrix3?(b.boundary=48,b.storage=48):C.isMatrix4?(b.boundary=64,b.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),b}function M(C){const b=C.target;b.removeEventListener("dispose",M);const B=o.indexOf(b.__bindingPointIndex);o.splice(B,1),i.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function A(){for(const C in r)i.deleteBuffer(r[C]);o=[],r={},s={}}return{bind:c,update:h,dispose:A}}class uR{constructor(e={}){const{canvas:t=ob(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:y=!1}=e;this.isWebGLRenderer=!0;let v;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");v=n.getContextAttributes().alpha}else v=o;const S=new Uint32Array(4),w=new Int32Array(4);let M=null,A=null;const C=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Vr,this.toneMapping=Lo,this.toneMappingExposure=1;const B=this;let N=!1,F=0,k=0,z=null,L=-1,D=null;const V=new xn,oe=new xn;let ie=null;const ye=new lt(0);let xe=0,ge=t.width,de=t.height,W=1,re=null,$=null;const J=new xn(0,0,ge,de),ae=new xn(0,0,ge,de);let Le=!1;const fe=new Jp;let we=!1,Ne=!1;this.transmissionResolutionScale=1;const De=new Ot,je=new Ot,xt=new j,Je=new xn,rt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Fe=!1;function be(){return z===null?W:1}let K=n;function mt(G,le){return t.getContext(G,le)}try{const G={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${kp}`),t.addEventListener("webglcontextlost",Be,!1),t.addEventListener("webglcontextrestored",ut,!1),t.addEventListener("webglcontextcreationerror",nt,!1),K===null){const le="webgl2";if(K=mt(le,G),K===null)throw mt(le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let ke,et,Xe,wt,qe,X,H,pe,Te,Ue,Pe,st,Ze,ct,Gt,ze,gt,Bt,Lt,ht,ee,Re,tt,Z;function Ve(){ke=new BH(K),ke.init(),Re=new lR(K,ke),et=new wH(K,ke,e,Re),Xe=new fG(K,ke),et.reverseDepthBuffer&&y&&Xe.buffers.depth.setReversed(!0),wt=new LH(K),qe=new Zz,X=new dG(K,ke,Xe,qe,et,Re,wt),H=new CH(B),pe=new PH(B),Te=new zU(K),tt=new MH(K,Te),Ue=new IH(K,Te,wt,tt),Pe=new NH(K,Ue,Te,wt),Lt=new FH(K,et,X),ze=new TH(qe),st=new qz(B,H,pe,ke,et,tt,ze),Ze=new vG(B,qe),ct=new eG,Gt=new oG(ke),Bt=new SH(B,H,pe,Xe,Pe,v,c),gt=new uG(B,Pe,et),Z=new xG(K,wt,et,Xe),ht=new EH(K,ke,wt),ee=new DH(K,ke,wt),wt.programs=st.programs,B.capabilities=et,B.extensions=ke,B.properties=qe,B.renderLists=ct,B.shadowMap=gt,B.state=Xe,B.info=wt}Ve();const Me=new gG(B,K);this.xr=Me,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const G=ke.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=ke.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(G){G!==void 0&&(W=G,this.setSize(ge,de,!1))},this.getSize=function(G){return G.set(ge,de)},this.setSize=function(G,le,Ae=!0){if(Me.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ge=G,de=le,t.width=Math.floor(G*W),t.height=Math.floor(le*W),Ae===!0&&(t.style.width=G+"px",t.style.height=le+"px"),this.setViewport(0,0,G,le)},this.getDrawingBufferSize=function(G){return G.set(ge*W,de*W).floor()},this.setDrawingBufferSize=function(G,le,Ae){ge=G,de=le,W=Ae,t.width=Math.floor(G*Ae),t.height=Math.floor(le*Ae),this.setViewport(0,0,G,le)},this.getCurrentViewport=function(G){return G.copy(V)},this.getViewport=function(G){return G.copy(J)},this.setViewport=function(G,le,Ae,he){G.isVector4?J.set(G.x,G.y,G.z,G.w):J.set(G,le,Ae,he),Xe.viewport(V.copy(J).multiplyScalar(W).round())},this.getScissor=function(G){return G.copy(ae)},this.setScissor=function(G,le,Ae,he){G.isVector4?ae.set(G.x,G.y,G.z,G.w):ae.set(G,le,Ae,he),Xe.scissor(oe.copy(ae).multiplyScalar(W).round())},this.getScissorTest=function(){return Le},this.setScissorTest=function(G){Xe.setScissorTest(Le=G)},this.setOpaqueSort=function(G){re=G},this.setTransparentSort=function(G){$=G},this.getClearColor=function(G){return G.copy(Bt.getClearColor())},this.setClearColor=function(){Bt.setClearColor.apply(Bt,arguments)},this.getClearAlpha=function(){return Bt.getClearAlpha()},this.setClearAlpha=function(){Bt.setClearAlpha.apply(Bt,arguments)},this.clear=function(G=!0,le=!0,Ae=!0){let he=0;if(G){let ce=!1;if(z!==null){const Ge=z.texture.format;ce=Ge===pv||Ge===hv||Ge===zp}if(ce){const Ge=z.texture.type,it=Ge===fo||Ge===Ga||Ge===xd||Ge===pc||Ge===cv||Ge===fv,dt=Bt.getClearColor(),yt=Bt.getClearAlpha(),It=dt.r,Rt=dt.g,Ye=dt.b;it?(S[0]=It,S[1]=Rt,S[2]=Ye,S[3]=yt,K.clearBufferuiv(K.COLOR,0,S)):(w[0]=It,w[1]=Rt,w[2]=Ye,w[3]=yt,K.clearBufferiv(K.COLOR,0,w))}else he|=K.COLOR_BUFFER_BIT}le&&(he|=K.DEPTH_BUFFER_BIT),Ae&&(he|=K.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),K.clear(he)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Be,!1),t.removeEventListener("webglcontextrestored",ut,!1),t.removeEventListener("webglcontextcreationerror",nt,!1),Bt.dispose(),ct.dispose(),Gt.dispose(),qe.dispose(),H.dispose(),pe.dispose(),Pe.dispose(),tt.dispose(),Z.dispose(),st.dispose(),Me.dispose(),Me.removeEventListener("sessionstart",ja),Me.removeEventListener("sessionend",yo),ds.stop()};function Be(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function ut(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const G=wt.autoReset,le=gt.enabled,Ae=gt.autoUpdate,he=gt.needsUpdate,ce=gt.type;Ve(),wt.autoReset=G,gt.enabled=le,gt.autoUpdate=Ae,gt.needsUpdate=he,gt.type=ce}function nt(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function Pt(G){const le=G.target;le.removeEventListener("dispose",Pt),un(le)}function un(G){Tn(G),qe.remove(G)}function Tn(G){const le=qe.get(G).programs;le!==void 0&&(le.forEach(function(Ae){st.releaseProgram(Ae)}),G.isShaderMaterial&&st.releaseShaderCache(G))}this.renderBufferDirect=function(G,le,Ae,he,ce,Ge){le===null&&(le=rt);const it=ce.isMesh&&ce.matrixWorld.determinant()<0,dt=Pc(G,le,Ae,he,ce);Xe.setMaterial(he,it);let yt=Ae.index,It=1;if(he.wireframe===!0){if(yt=Ue.getWireframeAttribute(Ae),yt===void 0)return;It=2}const Rt=Ae.drawRange,Ye=Ae.attributes.position;let Mt=Rt.start*It,kt=(Rt.start+Rt.count)*It;Ge!==null&&(Mt=Math.max(Mt,Ge.start*It),kt=Math.min(kt,(Ge.start+Ge.count)*It)),yt!==null?(Mt=Math.max(Mt,0),kt=Math.min(kt,yt.count)):Ye!=null&&(Mt=Math.max(Mt,0),kt=Math.min(kt,Ye.count));const rn=kt-Mt;if(rn<0||rn===1/0)return;tt.setup(ce,he,dt,Ae,yt);let sn,qt=ht;if(yt!==null&&(sn=Te.get(yt),qt=ee,qt.setIndex(sn)),ce.isMesh)he.wireframe===!0?(Xe.setLineWidth(he.wireframeLinewidth*be()),qt.setMode(K.LINES)):qt.setMode(K.TRIANGLES);else if(ce.isLine){let St=he.linewidth;St===void 0&&(St=1),Xe.setLineWidth(St*be()),ce.isLineSegments?qt.setMode(K.LINES):ce.isLineLoop?qt.setMode(K.LINE_LOOP):qt.setMode(K.LINE_STRIP)}else ce.isPoints?qt.setMode(K.POINTS):ce.isSprite&&qt.setMode(K.TRIANGLES);if(ce.isBatchedMesh)if(ce._multiDrawInstances!==null)qt.renderMultiDrawInstances(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount,ce._multiDrawInstances);else if(ke.get("WEBGL_multi_draw"))qt.renderMultiDraw(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount);else{const St=ce._multiDrawStarts,cn=ce._multiDrawCounts,en=ce._multiDrawCount,vi=yt?Te.get(yt).bytesPerElement:1,Ds=qe.get(he).currentProgram.getUniforms();for(let ui=0;ui<en;ui++)Ds.setValue(K,"_gl_DrawID",ui),qt.render(St[ui]/vi,cn[ui])}else if(ce.isInstancedMesh)qt.renderInstances(Mt,rn,ce.count);else if(Ae.isInstancedBufferGeometry){const St=Ae._maxInstanceCount!==void 0?Ae._maxInstanceCount:1/0,cn=Math.min(Ae.instanceCount,St);qt.renderInstances(Mt,rn,cn)}else qt.render(Mt,rn)};function Qt(G,le,Ae){G.transparent===!0&&G.side===Ps&&G.forceSinglePass===!1?(G.side=br,G.needsUpdate=!0,Xa(G,le,Ae),G.side=Oo,G.needsUpdate=!0,Xa(G,le,Ae),G.side=Ps):Xa(G,le,Ae)}this.compile=function(G,le,Ae=null){Ae===null&&(Ae=G),A=Gt.get(Ae),A.init(le),b.push(A),Ae.traverseVisible(function(ce){ce.isLight&&ce.layers.test(le.layers)&&(A.pushLight(ce),ce.castShadow&&A.pushShadow(ce))}),G!==Ae&&G.traverseVisible(function(ce){ce.isLight&&ce.layers.test(le.layers)&&(A.pushLight(ce),ce.castShadow&&A.pushShadow(ce))}),A.setupLights();const he=new Set;return G.traverse(function(ce){if(!(ce.isMesh||ce.isPoints||ce.isLine||ce.isSprite))return;const Ge=ce.material;if(Ge)if(Array.isArray(Ge))for(let it=0;it<Ge.length;it++){const dt=Ge[it];Qt(dt,Ae,ce),he.add(dt)}else Qt(Ge,Ae,ce),he.add(Ge)}),b.pop(),A=null,he},this.compileAsync=function(G,le,Ae=null){const he=this.compile(G,le,Ae);return new Promise(ce=>{function Ge(){if(he.forEach(function(it){qe.get(it).currentProgram.isReady()&&he.delete(it)}),he.size===0){ce(G);return}setTimeout(Ge,10)}ke.get("KHR_parallel_shader_compile")!==null?Ge():setTimeout(Ge,10)})};let Vn=null;function Qn(G){Vn&&Vn(G)}function ja(){ds.stop()}function yo(){ds.start()}const ds=new iR;ds.setAnimationLoop(Qn),typeof self<"u"&&ds.setContext(self),this.setAnimationLoop=function(G){Vn=G,Me.setAnimationLoop(G),G===null?ds.stop():ds.start()},Me.addEventListener("sessionstart",ja),Me.addEventListener("sessionend",yo),this.render=function(G,le){if(le!==void 0&&le.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),le.parent===null&&le.matrixWorldAutoUpdate===!0&&le.updateMatrixWorld(),Me.enabled===!0&&Me.isPresenting===!0&&(Me.cameraAutoUpdate===!0&&Me.updateCamera(le),le=Me.getCamera()),G.isScene===!0&&G.onBeforeRender(B,G,le,z),A=Gt.get(G,b.length),A.init(le),b.push(A),je.multiplyMatrices(le.projectionMatrix,le.matrixWorldInverse),fe.setFromProjectionMatrix(je),Ne=this.localClippingEnabled,we=ze.init(this.clippingPlanes,Ne),M=ct.get(G,C.length),M.init(),C.push(M),Me.enabled===!0&&Me.isPresenting===!0){const Ge=B.xr.getDepthSensingMesh();Ge!==null&&Xr(Ge,le,-1/0,B.sortObjects)}Xr(G,le,0,B.sortObjects),M.finish(),B.sortObjects===!0&&M.sort(re,$),Fe=Me.enabled===!1||Me.isPresenting===!1||Me.hasDepthSensing()===!1,Fe&&Bt.addToRenderList(M,G),this.info.render.frame++,we===!0&&ze.beginShadows();const Ae=A.state.shadowsArray;gt.render(Ae,G,le),we===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset();const he=M.opaque,ce=M.transmissive;if(A.setupLights(),le.isArrayCamera){const Ge=le.cameras;if(ce.length>0)for(let it=0,dt=Ge.length;it<dt;it++){const yt=Ge[it];Jr(he,ce,G,yt)}Fe&&Bt.render(G);for(let it=0,dt=Ge.length;it<dt;it++){const yt=Ge[it];Go(M,G,yt,yt.viewport)}}else ce.length>0&&Jr(he,ce,G,le),Fe&&Bt.render(G),Go(M,G,le);z!==null&&k===0&&(X.updateMultisampleRenderTarget(z),X.updateRenderTargetMipmap(z)),G.isScene===!0&&G.onAfterRender(B,G,le),tt.resetDefaultState(),L=-1,D=null,b.pop(),b.length>0?(A=b[b.length-1],we===!0&&ze.setGlobalState(B.clippingPlanes,A.state.camera)):A=null,C.pop(),C.length>0?M=C[C.length-1]:M=null};function Xr(G,le,Ae,he){if(G.visible===!1)return;if(G.layers.test(le.layers)){if(G.isGroup)Ae=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(le);else if(G.isLight)A.pushLight(G),G.castShadow&&A.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||fe.intersectsSprite(G)){he&&Je.setFromMatrixPosition(G.matrixWorld).applyMatrix4(je);const it=Pe.update(G),dt=G.material;dt.visible&&M.push(G,it,dt,Ae,Je.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||fe.intersectsObject(G))){const it=Pe.update(G),dt=G.material;if(he&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),Je.copy(G.boundingSphere.center)):(it.boundingSphere===null&&it.computeBoundingSphere(),Je.copy(it.boundingSphere.center)),Je.applyMatrix4(G.matrixWorld).applyMatrix4(je)),Array.isArray(dt)){const yt=it.groups;for(let It=0,Rt=yt.length;It<Rt;It++){const Ye=yt[It],Mt=dt[Ye.materialIndex];Mt&&Mt.visible&&M.push(G,it,Mt,Ae,Je.z,Ye)}}else dt.visible&&M.push(G,it,dt,Ae,Je.z,null)}}const Ge=G.children;for(let it=0,dt=Ge.length;it<dt;it++)Xr(Ge[it],le,Ae,he)}function Go(G,le,Ae,he){const ce=G.opaque,Ge=G.transmissive,it=G.transparent;A.setupLightsView(Ae),we===!0&&ze.setGlobalState(B.clippingPlanes,Ae),he&&Xe.viewport(V.copy(he)),ce.length>0&&vo(ce,le,Ae),Ge.length>0&&vo(Ge,le,Ae),it.length>0&&vo(it,le,Ae),Xe.buffers.depth.setTest(!0),Xe.buffers.depth.setMask(!0),Xe.buffers.color.setMask(!0),Xe.setPolygonOffset(!1)}function Jr(G,le,Ae,he){if((Ae.isScene===!0?Ae.overrideMaterial:null)!==null)return;A.state.transmissionRenderTarget[he.id]===void 0&&(A.state.transmissionRenderTarget[he.id]=new ko(1,1,{generateMipmaps:!0,type:ke.has("EXT_color_buffer_half_float")||ke.has("EXT_color_buffer_float")?Bd:fo,minFilter:Bs,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:yn.workingColorSpace}));const Ge=A.state.transmissionRenderTarget[he.id],it=he.viewport||V;Ge.setSize(it.z*B.transmissionResolutionScale,it.w*B.transmissionResolutionScale);const dt=B.getRenderTarget();B.setRenderTarget(Ge),B.getClearColor(ye),xe=B.getClearAlpha(),xe<1&&B.setClearColor(16777215,.5),B.clear(),Fe&&Bt.render(Ae);const yt=B.toneMapping;B.toneMapping=Lo;const It=he.viewport;if(he.viewport!==void 0&&(he.viewport=void 0),A.setupLightsView(he),we===!0&&ze.setGlobalState(B.clippingPlanes,he),vo(G,Ae,he),X.updateMultisampleRenderTarget(Ge),X.updateRenderTargetMipmap(Ge),ke.has("WEBGL_multisampled_render_to_texture")===!1){let Rt=!1;for(let Ye=0,Mt=le.length;Ye<Mt;Ye++){const kt=le[Ye],rn=kt.object,sn=kt.geometry,qt=kt.material,St=kt.group;if(qt.side===Ps&&rn.layers.test(he.layers)){const cn=qt.side;qt.side=br,qt.needsUpdate=!0,bc(rn,Ae,he,sn,qt,St),qt.side=cn,qt.needsUpdate=!0,Rt=!0}}Rt===!0&&(X.updateMultisampleRenderTarget(Ge),X.updateRenderTargetMipmap(Ge))}B.setRenderTarget(dt),B.setClearColor(ye,xe),It!==void 0&&(he.viewport=It),B.toneMapping=yt}function vo(G,le,Ae){const he=le.isScene===!0?le.overrideMaterial:null;for(let ce=0,Ge=G.length;ce<Ge;ce++){const it=G[ce],dt=it.object,yt=it.geometry,It=he===null?it.material:he,Rt=it.group;dt.layers.test(Ae.layers)&&bc(dt,le,Ae,yt,It,Rt)}}function bc(G,le,Ae,he,ce,Ge){G.onBeforeRender(B,le,Ae,he,ce,Ge),G.modelViewMatrix.multiplyMatrices(Ae.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),ce.onBeforeRender(B,le,Ae,he,G,Ge),ce.transparent===!0&&ce.side===Ps&&ce.forceSinglePass===!1?(ce.side=br,ce.needsUpdate=!0,B.renderBufferDirect(Ae,le,he,ce,G,Ge),ce.side=Oo,ce.needsUpdate=!0,B.renderBufferDirect(Ae,le,he,ce,G,Ge),ce.side=Ps):B.renderBufferDirect(Ae,le,he,ce,G,Ge),G.onAfterRender(B,le,Ae,he,ce,Ge)}function Xa(G,le,Ae){le.isScene!==!0&&(le=rt);const he=qe.get(G),ce=A.state.lights,Ge=A.state.shadowsArray,it=ce.state.version,dt=st.getParameters(G,ce.state,Ge,le,Ae),yt=st.getProgramCacheKey(dt);let It=he.programs;he.environment=G.isMeshStandardMaterial?le.environment:null,he.fog=le.fog,he.envMap=(G.isMeshStandardMaterial?pe:H).get(G.envMap||he.environment),he.envMapRotation=he.environment!==null&&G.envMap===null?le.environmentRotation:G.envMapRotation,It===void 0&&(G.addEventListener("dispose",Pt),It=new Map,he.programs=It);let Rt=It.get(yt);if(Rt!==void 0){if(he.currentProgram===Rt&&he.lightsStateVersion===it)return hs(G,dt),Rt}else dt.uniforms=st.getUniforms(G),G.onBeforeCompile(dt,B),Rt=st.acquireProgram(dt,yt),It.set(yt,Rt),he.uniforms=dt.uniforms;const Ye=he.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(Ye.clippingPlanes=ze.uniform),hs(G,dt),he.needsLights=Ic(G),he.lightsStateVersion=it,he.needsLights&&(Ye.ambientLightColor.value=ce.state.ambient,Ye.lightProbe.value=ce.state.probe,Ye.directionalLights.value=ce.state.directional,Ye.directionalLightShadows.value=ce.state.directionalShadow,Ye.spotLights.value=ce.state.spot,Ye.spotLightShadows.value=ce.state.spotShadow,Ye.rectAreaLights.value=ce.state.rectArea,Ye.ltc_1.value=ce.state.rectAreaLTC1,Ye.ltc_2.value=ce.state.rectAreaLTC2,Ye.pointLights.value=ce.state.point,Ye.pointLightShadows.value=ce.state.pointShadow,Ye.hemisphereLights.value=ce.state.hemi,Ye.directionalShadowMap.value=ce.state.directionalShadowMap,Ye.directionalShadowMatrix.value=ce.state.directionalShadowMatrix,Ye.spotShadowMap.value=ce.state.spotShadowMap,Ye.spotLightMatrix.value=ce.state.spotLightMatrix,Ye.spotLightMap.value=ce.state.spotLightMap,Ye.pointShadowMap.value=ce.state.pointShadowMap,Ye.pointShadowMatrix.value=ce.state.pointShadowMatrix),he.currentProgram=Rt,he.uniformsList=null,Rt}function Rc(G){if(G.uniformsList===null){const le=G.currentProgram.getUniforms();G.uniformsList=ny.seqWithValue(le.seq,G.uniforms)}return G.uniformsList}function hs(G,le){const Ae=qe.get(G);Ae.outputColorSpace=le.outputColorSpace,Ae.batching=le.batching,Ae.batchingColor=le.batchingColor,Ae.instancing=le.instancing,Ae.instancingColor=le.instancingColor,Ae.instancingMorph=le.instancingMorph,Ae.skinning=le.skinning,Ae.morphTargets=le.morphTargets,Ae.morphNormals=le.morphNormals,Ae.morphColors=le.morphColors,Ae.morphTargetsCount=le.morphTargetsCount,Ae.numClippingPlanes=le.numClippingPlanes,Ae.numIntersection=le.numClipIntersection,Ae.vertexAlphas=le.vertexAlphas,Ae.vertexTangents=le.vertexTangents,Ae.toneMapping=le.toneMapping}function Pc(G,le,Ae,he,ce){le.isScene!==!0&&(le=rt),X.resetTextureUnits();const Ge=le.fog,it=he.isMeshStandardMaterial?le.environment:null,dt=z===null?B.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:gc,yt=(he.isMeshStandardMaterial?pe:H).get(he.envMap||it),It=he.vertexColors===!0&&!!Ae.attributes.color&&Ae.attributes.color.itemSize===4,Rt=!!Ae.attributes.tangent&&(!!he.normalMap||he.anisotropy>0),Ye=!!Ae.morphAttributes.position,Mt=!!Ae.morphAttributes.normal,kt=!!Ae.morphAttributes.color;let rn=Lo;he.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(rn=B.toneMapping);const sn=Ae.morphAttributes.position||Ae.morphAttributes.normal||Ae.morphAttributes.color,qt=sn!==void 0?sn.length:0,St=qe.get(he),cn=A.state.lights;if(we===!0&&(Ne===!0||G!==D)){const xi=G===D&&he.id===L;ze.setState(he,G,xi)}let en=!1;he.version===St.__version?(St.needsLights&&St.lightsStateVersion!==cn.state.version||St.outputColorSpace!==dt||ce.isBatchedMesh&&St.batching===!1||!ce.isBatchedMesh&&St.batching===!0||ce.isBatchedMesh&&St.batchingColor===!0&&ce.colorTexture===null||ce.isBatchedMesh&&St.batchingColor===!1&&ce.colorTexture!==null||ce.isInstancedMesh&&St.instancing===!1||!ce.isInstancedMesh&&St.instancing===!0||ce.isSkinnedMesh&&St.skinning===!1||!ce.isSkinnedMesh&&St.skinning===!0||ce.isInstancedMesh&&St.instancingColor===!0&&ce.instanceColor===null||ce.isInstancedMesh&&St.instancingColor===!1&&ce.instanceColor!==null||ce.isInstancedMesh&&St.instancingMorph===!0&&ce.morphTexture===null||ce.isInstancedMesh&&St.instancingMorph===!1&&ce.morphTexture!==null||St.envMap!==yt||he.fog===!0&&St.fog!==Ge||St.numClippingPlanes!==void 0&&(St.numClippingPlanes!==ze.numPlanes||St.numIntersection!==ze.numIntersection)||St.vertexAlphas!==It||St.vertexTangents!==Rt||St.morphTargets!==Ye||St.morphNormals!==Mt||St.morphColors!==kt||St.toneMapping!==rn||St.morphTargetsCount!==qt)&&(en=!0):(en=!0,St.__version=he.version);let vi=St.currentProgram;en===!0&&(vi=Xa(he,le,ce));let Ds=!1,ui=!1,ps=!1;const on=vi.getUniforms(),Pi=St.uniforms;if(Xe.useProgram(vi.program)&&(Ds=!0,ui=!0,ps=!0),he.id!==L&&(L=he.id,ui=!0),Ds||D!==G){Xe.buffers.depth.getReversed()?(De.copy(G.projectionMatrix),dN(De),hN(De),on.setValue(K,"projectionMatrix",De)):on.setValue(K,"projectionMatrix",G.projectionMatrix),on.setValue(K,"viewMatrix",G.matrixWorldInverse);const Wn=on.map.cameraPosition;Wn!==void 0&&Wn.setValue(K,xt.setFromMatrixPosition(G.matrixWorld)),et.logarithmicDepthBuffer&&on.setValue(K,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(he.isMeshPhongMaterial||he.isMeshToonMaterial||he.isMeshLambertMaterial||he.isMeshBasicMaterial||he.isMeshStandardMaterial||he.isShaderMaterial)&&on.setValue(K,"isOrthographic",G.isOrthographicCamera===!0),D!==G&&(D=G,ui=!0,ps=!0)}if(ce.isSkinnedMesh){on.setOptional(K,ce,"bindMatrix"),on.setOptional(K,ce,"bindMatrixInverse");const xi=ce.skeleton;xi&&(xi.boneTexture===null&&xi.computeBoneTexture(),on.setValue(K,"boneTexture",xi.boneTexture,X))}ce.isBatchedMesh&&(on.setOptional(K,ce,"batchingTexture"),on.setValue(K,"batchingTexture",ce._matricesTexture,X),on.setOptional(K,ce,"batchingIdTexture"),on.setValue(K,"batchingIdTexture",ce._indirectTexture,X),on.setOptional(K,ce,"batchingColorTexture"),ce._colorsTexture!==null&&on.setValue(K,"batchingColorTexture",ce._colorsTexture,X));const ci=Ae.morphAttributes;if((ci.position!==void 0||ci.normal!==void 0||ci.color!==void 0)&&Lt.update(ce,Ae,vi),(ui||St.receiveShadow!==ce.receiveShadow)&&(St.receiveShadow=ce.receiveShadow,on.setValue(K,"receiveShadow",ce.receiveShadow)),he.isMeshGouraudMaterial&&he.envMap!==null&&(Pi.envMap.value=yt,Pi.flipEnvMap.value=yt.isCubeTexture&&yt.isRenderTargetTexture===!1?-1:1),he.isMeshStandardMaterial&&he.envMap===null&&le.environment!==null&&(Pi.envMapIntensity.value=le.environmentIntensity),ui&&(on.setValue(K,"toneMappingExposure",B.toneMappingExposure),St.needsLights&&Bc(Pi,ps),Ge&&he.fog===!0&&Ze.refreshFogUniforms(Pi,Ge),Ze.refreshMaterialUniforms(Pi,he,W,de,A.state.transmissionRenderTarget[G.id]),ny.upload(K,Rc(St),Pi,X)),he.isShaderMaterial&&he.uniformsNeedUpdate===!0&&(ny.upload(K,Rc(St),Pi,X),he.uniformsNeedUpdate=!1),he.isSpriteMaterial&&on.setValue(K,"center",ce.center),on.setValue(K,"modelViewMatrix",ce.modelViewMatrix),on.setValue(K,"normalMatrix",ce.normalMatrix),on.setValue(K,"modelMatrix",ce.matrixWorld),he.isShaderMaterial||he.isRawShaderMaterial){const xi=he.uniformsGroups;for(let Wn=0,an=xi.length;Wn<an;Wn++){const qi=xi[Wn];Z.update(qi,vi),Z.bind(qi,vi)}}return vi}function Bc(G,le){G.ambientLightColor.needsUpdate=le,G.lightProbe.needsUpdate=le,G.directionalLights.needsUpdate=le,G.directionalLightShadows.needsUpdate=le,G.pointLights.needsUpdate=le,G.pointLightShadows.needsUpdate=le,G.spotLights.needsUpdate=le,G.spotLightShadows.needsUpdate=le,G.rectAreaLights.needsUpdate=le,G.hemisphereLights.needsUpdate=le}function Ic(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(G,le,Ae){qe.get(G.texture).__webglTexture=le,qe.get(G.depthTexture).__webglTexture=Ae;const he=qe.get(G);he.__hasExternalTextures=!0,he.__autoAllocateDepthBuffer=Ae===void 0,he.__autoAllocateDepthBuffer||ke.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),he.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(G,le){const Ae=qe.get(G);Ae.__webglFramebuffer=le,Ae.__useDefaultFramebuffer=le===void 0};const Dc=K.createFramebuffer();this.setRenderTarget=function(G,le=0,Ae=0){z=G,F=le,k=Ae;let he=!0,ce=null,Ge=!1,it=!1;if(G){const yt=qe.get(G);if(yt.__useDefaultFramebuffer!==void 0)Xe.bindFramebuffer(K.FRAMEBUFFER,null),he=!1;else if(yt.__webglFramebuffer===void 0)X.setupRenderTarget(G);else if(yt.__hasExternalTextures)X.rebindTextures(G,qe.get(G.texture).__webglTexture,qe.get(G.depthTexture).__webglTexture);else if(G.depthBuffer){const Ye=G.depthTexture;if(yt.__boundDepthTexture!==Ye){if(Ye!==null&&qe.has(Ye)&&(G.width!==Ye.image.width||G.height!==Ye.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");X.setupDepthRenderbuffer(G)}}const It=G.texture;(It.isData3DTexture||It.isDataArrayTexture||It.isCompressedArrayTexture)&&(it=!0);const Rt=qe.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(Rt[le])?ce=Rt[le][Ae]:ce=Rt[le],Ge=!0):G.samples>0&&X.useMultisampledRTT(G)===!1?ce=qe.get(G).__webglMultisampledFramebuffer:Array.isArray(Rt)?ce=Rt[Ae]:ce=Rt,V.copy(G.viewport),oe.copy(G.scissor),ie=G.scissorTest}else V.copy(J).multiplyScalar(W).floor(),oe.copy(ae).multiplyScalar(W).floor(),ie=Le;if(Ae!==0&&(ce=Dc),Xe.bindFramebuffer(K.FRAMEBUFFER,ce)&&he&&Xe.drawBuffers(G,ce),Xe.viewport(V),Xe.scissor(oe),Xe.setScissorTest(ie),Ge){const yt=qe.get(G.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+le,yt.__webglTexture,Ae)}else if(it){const yt=qe.get(G.texture),It=le;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,yt.__webglTexture,Ae,It)}else if(G!==null&&Ae!==0){const yt=qe.get(G.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,yt.__webglTexture,Ae)}L=-1},this.readRenderTargetPixels=function(G,le,Ae,he,ce,Ge,it){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dt=qe.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&it!==void 0&&(dt=dt[it]),dt){Xe.bindFramebuffer(K.FRAMEBUFFER,dt);try{const yt=G.texture,It=yt.format,Rt=yt.type;if(!et.textureFormatReadable(It)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!et.textureTypeReadable(Rt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}le>=0&&le<=G.width-he&&Ae>=0&&Ae<=G.height-ce&&K.readPixels(le,Ae,he,ce,Re.convert(It),Re.convert(Rt),Ge)}finally{const yt=z!==null?qe.get(z).__webglFramebuffer:null;Xe.bindFramebuffer(K.FRAMEBUFFER,yt)}}},this.readRenderTargetPixelsAsync=async function(G,le,Ae,he,ce,Ge,it){if(!(G&&G.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let dt=qe.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&it!==void 0&&(dt=dt[it]),dt){const yt=G.texture,It=yt.format,Rt=yt.type;if(!et.textureFormatReadable(It))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!et.textureTypeReadable(Rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(le>=0&&le<=G.width-he&&Ae>=0&&Ae<=G.height-ce){Xe.bindFramebuffer(K.FRAMEBUFFER,dt);const Ye=K.createBuffer();K.bindBuffer(K.PIXEL_PACK_BUFFER,Ye),K.bufferData(K.PIXEL_PACK_BUFFER,Ge.byteLength,K.STREAM_READ),K.readPixels(le,Ae,he,ce,Re.convert(It),Re.convert(Rt),0);const Mt=z!==null?qe.get(z).__webglFramebuffer:null;Xe.bindFramebuffer(K.FRAMEBUFFER,Mt);const kt=K.fenceSync(K.SYNC_GPU_COMMANDS_COMPLETE,0);return K.flush(),await fN(K,kt,4),K.bindBuffer(K.PIXEL_PACK_BUFFER,Ye),K.getBufferSubData(K.PIXEL_PACK_BUFFER,0,Ge),K.deleteBuffer(Ye),K.deleteSync(kt),Ge}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(G,le=null,Ae=0){G.isTexture!==!0&&(ed("WebGLRenderer: copyFramebufferToTexture function signature has changed."),le=arguments[0]||null,G=arguments[1]);const he=Math.pow(2,-Ae),ce=Math.floor(G.image.width*he),Ge=Math.floor(G.image.height*he),it=le!==null?le.x:0,dt=le!==null?le.y:0;X.setTexture2D(G,0),K.copyTexSubImage2D(K.TEXTURE_2D,Ae,0,0,it,dt,ce,Ge),Xe.unbindTexture()};const Lc=K.createFramebuffer(),Fc=K.createFramebuffer();this.copyTextureToTexture=function(G,le,Ae=null,he=null,ce=0,Ge=null){G.isTexture!==!0&&(ed("WebGLRenderer: copyTextureToTexture function signature has changed."),he=arguments[0]||null,G=arguments[1],le=arguments[2],Ge=arguments[3]||0,Ae=null),Ge===null&&(ce!==0?(ed("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ge=ce,ce=0):Ge=0);let it,dt,yt,It,Rt,Ye,Mt,kt,rn;const sn=G.isCompressedTexture?G.mipmaps[Ge]:G.image;if(Ae!==null)it=Ae.max.x-Ae.min.x,dt=Ae.max.y-Ae.min.y,yt=Ae.isBox3?Ae.max.z-Ae.min.z:1,It=Ae.min.x,Rt=Ae.min.y,Ye=Ae.isBox3?Ae.min.z:0;else{const ci=Math.pow(2,-ce);it=Math.floor(sn.width*ci),dt=Math.floor(sn.height*ci),G.isDataArrayTexture?yt=sn.depth:G.isData3DTexture?yt=Math.floor(sn.depth*ci):yt=1,It=0,Rt=0,Ye=0}he!==null?(Mt=he.x,kt=he.y,rn=he.z):(Mt=0,kt=0,rn=0);const qt=Re.convert(le.format),St=Re.convert(le.type);let cn;le.isData3DTexture?(X.setTexture3D(le,0),cn=K.TEXTURE_3D):le.isDataArrayTexture||le.isCompressedArrayTexture?(X.setTexture2DArray(le,0),cn=K.TEXTURE_2D_ARRAY):(X.setTexture2D(le,0),cn=K.TEXTURE_2D),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,le.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,le.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,le.unpackAlignment);const en=K.getParameter(K.UNPACK_ROW_LENGTH),vi=K.getParameter(K.UNPACK_IMAGE_HEIGHT),Ds=K.getParameter(K.UNPACK_SKIP_PIXELS),ui=K.getParameter(K.UNPACK_SKIP_ROWS),ps=K.getParameter(K.UNPACK_SKIP_IMAGES);K.pixelStorei(K.UNPACK_ROW_LENGTH,sn.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,sn.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,It),K.pixelStorei(K.UNPACK_SKIP_ROWS,Rt),K.pixelStorei(K.UNPACK_SKIP_IMAGES,Ye);const on=G.isDataArrayTexture||G.isData3DTexture,Pi=le.isDataArrayTexture||le.isData3DTexture;if(G.isDepthTexture){const ci=qe.get(G),xi=qe.get(le),Wn=qe.get(ci.__renderTarget),an=qe.get(xi.__renderTarget);Xe.bindFramebuffer(K.READ_FRAMEBUFFER,Wn.__webglFramebuffer),Xe.bindFramebuffer(K.DRAW_FRAMEBUFFER,an.__webglFramebuffer);for(let qi=0;qi<yt;qi++)on&&(K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,qe.get(G).__webglTexture,ce,Ye+qi),K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,qe.get(le).__webglTexture,Ge,rn+qi)),K.blitFramebuffer(It,Rt,it,dt,Mt,kt,it,dt,K.DEPTH_BUFFER_BIT,K.NEAREST);Xe.bindFramebuffer(K.READ_FRAMEBUFFER,null),Xe.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else if(ce!==0||G.isRenderTargetTexture||qe.has(G)){const ci=qe.get(G),xi=qe.get(le);Xe.bindFramebuffer(K.READ_FRAMEBUFFER,Lc),Xe.bindFramebuffer(K.DRAW_FRAMEBUFFER,Fc);for(let Wn=0;Wn<yt;Wn++)on?K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,ci.__webglTexture,ce,Ye+Wn):K.framebufferTexture2D(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,ci.__webglTexture,ce),Pi?K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,xi.__webglTexture,Ge,rn+Wn):K.framebufferTexture2D(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,xi.__webglTexture,Ge),ce!==0?K.blitFramebuffer(It,Rt,it,dt,Mt,kt,it,dt,K.COLOR_BUFFER_BIT,K.NEAREST):Pi?K.copyTexSubImage3D(cn,Ge,Mt,kt,rn+Wn,It,Rt,it,dt):K.copyTexSubImage2D(cn,Ge,Mt,kt,It,Rt,it,dt);Xe.bindFramebuffer(K.READ_FRAMEBUFFER,null),Xe.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else Pi?G.isDataTexture||G.isData3DTexture?K.texSubImage3D(cn,Ge,Mt,kt,rn,it,dt,yt,qt,St,sn.data):le.isCompressedArrayTexture?K.compressedTexSubImage3D(cn,Ge,Mt,kt,rn,it,dt,yt,qt,sn.data):K.texSubImage3D(cn,Ge,Mt,kt,rn,it,dt,yt,qt,St,sn):G.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,Ge,Mt,kt,it,dt,qt,St,sn.data):G.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,Ge,Mt,kt,sn.width,sn.height,qt,sn.data):K.texSubImage2D(K.TEXTURE_2D,Ge,Mt,kt,it,dt,qt,St,sn);K.pixelStorei(K.UNPACK_ROW_LENGTH,en),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,vi),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Ds),K.pixelStorei(K.UNPACK_SKIP_ROWS,ui),K.pixelStorei(K.UNPACK_SKIP_IMAGES,ps),Ge===0&&le.generateMipmaps&&K.generateMipmap(cn),Xe.unbindTexture()},this.copyTextureToTexture3D=function(G,le,Ae=null,he=null,ce=0){return G.isTexture!==!0&&(ed("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ae=arguments[0]||null,he=arguments[1]||null,G=arguments[2],le=arguments[3],ce=arguments[4]||0),ed('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(G,le,Ae,he,ce)},this.initRenderTarget=function(G){qe.get(G).__webglFramebuffer===void 0&&X.setupRenderTarget(G)},this.initTexture=function(G){G.isCubeTexture?X.setTextureCube(G,0):G.isData3DTexture?X.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?X.setTexture2DArray(G,0):X.setTexture2D(G,0),Xe.unbindTexture()},this.resetState=function(){F=0,k=0,z=null,Xe.reset(),tt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return uo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=yn._getDrawingBufferColorSpace(e),t.unpackColorSpace=yn._getUnpackColorSpace()}}const _G=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:lA,AddEquation:Dl,AddOperation:NC,AdditiveAnimationBlendMode:vA,AdditiveBlending:r_,AgXToneMapping:zC,AlphaFormat:dA,AlwaysCompare:ib,AlwaysDepth:my,AlwaysStencilFunc:l_,AmbientLight:Wb,AnimationAction:eR,AnimationClip:Ed,AnimationLoader:U3,AnimationMixer:cU,AnimationObjectGroup:lU,AnimationUtils:D3,ArcCurve:vb,ArrayCamera:qb,ArrowHelper:IU,AttachedBindMode:a_,Audio:Zb,AudioAnalyser:Z3,AudioContext:JA,AudioListener:Y3,AudioLoader:X3,AxesHelper:DU,BackSide:br,BasicDepthPacking:KC,BasicShadowMap:gC,BatchedMesh:gb,Bone:_v,BooleanKeyframeTrack:Tc,Box2:vU,Box3:fr,Box3Helper:PU,BoxGeometry:wc,BoxHelper:RU,BufferAttribute:_n,BufferGeometry:Yt,BufferGeometryLoader:Yb,ByteType:uA,Cache:Da,Camera:Vp,CameraHelper:bU,CanvasTexture:i3,CapsuleGeometry:Ev,CatmullRomCurve3:xb,CineonToneMapping:kC,CircleGeometry:wv,ClampToEdgeWrapping:os,Clock:KA,Color:lt,ColorKeyframeTrack:zA,ColorManagement:yn,CompressedArrayTexture:t3,CompressedCubeTexture:n3,CompressedTexture:Sv,CompressedTextureLoader:O3,ConeGeometry:Tv,ConstantAlphaFactor:DC,ConstantColorFactor:BC,Controls:FU,CubeCamera:fb,CubeReflectionMapping:za,CubeRefractionMapping:kl,CubeTexture:Wp,CubeTextureLoader:k3,CubeUVReflectionMapping:Pd,CubicBezierCurve:IA,CubicBezierCurve3:_b,CubicInterpolant:Ob,CullFaceBack:i_,CullFaceFront:mC,CullFaceFrontBack:gF,CullFaceNone:pC,Curve:mo,CurvePath:Sb,CustomBlending:yC,CustomToneMapping:HC,CylinderGeometry:Id,Cylindrical:yU,Data3DTexture:yv,DataArrayTexture:Gp,DataTexture:Fo,DataTextureLoader:H3,DataUtils:bN,DecrementStencilOp:CF,DecrementWrapStencilOp:RF,DefaultLoadingManager:zb,DepthFormat:uc,DepthStencilFormat:mc,DepthTexture:PA,DetachedBindMode:VC,DirectionalLight:XA,DirectionalLightHelper:CU,DiscreteInterpolant:kb,DodecahedronGeometry:Cv,DoubleSide:Ps,DstAlphaFactor:TC,DstColorFactor:bC,DynamicCopyUsage:WF,DynamicDrawUsage:OF,DynamicReadUsage:zF,EdgesGeometry:Mb,EllipseCurve:Mv,EqualCompare:$C,EqualDepth:yy,EqualStencilFunc:DF,EquirectangularReflectionMapping:_p,EquirectangularRefractionMapping:Ap,Euler:cs,EventDispatcher:zo,ExtrudeGeometry:Rv,FileLoader:fs,Float16BufferAttribute:FN,Float32BufferAttribute:Ct,FloatType:jr,Fog:xv,FogExp2:vv,FramebufferTexture:e3,FrontSide:Oo,Frustum:Jp,GLBufferAttribute:gU,GLSL1:XF,GLSL3:u_,GreaterCompare:eb,GreaterDepth:xy,GreaterEqualCompare:nb,GreaterEqualDepth:vy,GreaterEqualStencilFunc:UF,GreaterStencilFunc:FF,GridHelper:wU,Group:Ia,HalfFloatType:Bd,HemisphereLight:Vb,HemisphereLightHelper:EU,IcosahedronGeometry:Pv,ImageBitmapLoader:Qb,ImageLoader:Bp,ImageUtils:ab,IncrementStencilOp:TF,IncrementWrapStencilOp:bF,InstancedBufferAttribute:yc,InstancedBufferGeometry:Kb,InstancedInterleavedBuffer:mU,InstancedMesh:CA,Int16BufferAttribute:DN,Int32BufferAttribute:LN,Int8BufferAttribute:PN,IntType:uv,InterleavedBuffer:jp,InterleavedBufferAttribute:zl,Interpolant:Ld,InterpolateDiscrete:_d,InterpolateLinear:Ad,InterpolateSmooth:ey,InvertStencilOp:PF,KeepStencilOp:Qu,KeyframeTrack:go,LOD:mb,LatheGeometry:Kp,Layers:fc,LessCompare:ZC,LessDepth:gy,LessEqualCompare:_A,LessEqualDepth:hc,LessEqualStencilFunc:LF,LessStencilFunc:IF,Light:jl,LightProbe:Jb,Line:Va,Line3:xU,LineBasicMaterial:dr,LineCurve:DA,LineCurve3:Ab,LineDashedMaterial:Fb,LineLoop:bA,LineSegments:po,LinearFilter:ai,LinearInterpolant:HA,LinearMipMapLinearFilter:_F,LinearMipMapNearestFilter:xF,LinearMipmapLinearFilter:Bs,LinearMipmapNearestFilter:dd,LinearSRGBColorSpace:gc,LinearToneMapping:UC,LinearTransfer:Mp,Loader:hr,LoaderUtils:Fl,LoadingManager:GA,LoopOnce:WC,LoopPingPong:XC,LoopRepeat:jC,LuminanceAlphaFormat:mA,LuminanceFormat:pA,MOUSE:Ku,Material:Ci,MaterialLoader:Uv,MathUtils:rb,Matrix2:ZA,Matrix3:Kt,Matrix4:Ot,MaxEquation:AC,Mesh:li,MeshBasicMaterial:as,MeshDepthMaterial:UA,MeshDistanceMaterial:OA,MeshLambertMaterial:Db,MeshMatcapMaterial:Lb,MeshNormalMaterial:Ib,MeshPhongMaterial:Pb,MeshPhysicalMaterial:Is,MeshStandardMaterial:qp,MeshToonMaterial:Bb,MinEquation:_C,MirroredRepeatWrapping:vd,MixOperation:FC,MultiplyBlending:o_,MultiplyOperation:Hp,NearestFilter:Ui,NearestMipMapLinearFilter:vF,NearestMipMapNearestFilter:yF,NearestMipmapLinearFilter:ec,NearestMipmapNearestFilter:lv,NeutralToneMapping:GC,NeverCompare:qC,NeverDepth:py,NeverStencilFunc:BF,NoBlending:Ua,NoColorSpace:Pa,NoToneMapping:Lo,NormalAnimationBlendMode:mv,NormalBlending:lc,NotEqualCompare:tb,NotEqualDepth:_y,NotEqualStencilFunc:NF,NumberKeyframeTrack:xc,Object3D:pn,ObjectLoader:W3,ObjectSpaceNormalMap:QC,OctahedronGeometry:Yp,OneFactor:MC,OneMinusConstantAlphaFactor:LC,OneMinusConstantColorFactor:IC,OneMinusDstAlphaFactor:CC,OneMinusDstColorFactor:RC,OneMinusSrcAlphaFactor:hy,OneMinusSrcColorFactor:wC,OrthographicCamera:co,PCFShadowMap:ov,PCFSoftShadowMap:ip,PMREMGenerator:y_,Path:Cp,PerspectiveCamera:zn,Plane:Ra,PlaneGeometry:Dd,PlaneHelper:BU,PointLight:jA,PointLightHelper:SU,Points:RA,PointsMaterial:Av,PolarGridHelper:TU,PolyhedronGeometry:Wl,PositionalAudio:q3,PropertyBinding:gn,PropertyMixer:$b,QuadraticBezierCurve:LA,QuadraticBezierCurve3:FA,Quaternion:Oi,QuaternionKeyframeTrack:_c,QuaternionLinearInterpolant:Hb,RED_GREEN_RGTC2_Format:jy,RED_RGTC1_Format:yA,REVISION:kp,RGBADepthPacking:YC,RGBAFormat:cr,RGBAIntegerFormat:pv,RGBA_ASTC_10x10_Format:ky,RGBA_ASTC_10x5_Format:Ny,RGBA_ASTC_10x6_Format:Uy,RGBA_ASTC_10x8_Format:Oy,RGBA_ASTC_12x10_Format:Hy,RGBA_ASTC_12x12_Format:zy,RGBA_ASTC_4x4_Format:by,RGBA_ASTC_5x4_Format:Ry,RGBA_ASTC_5x5_Format:Py,RGBA_ASTC_6x5_Format:By,RGBA_ASTC_6x6_Format:Iy,RGBA_ASTC_8x5_Format:Dy,RGBA_ASTC_8x6_Format:Ly,RGBA_ASTC_8x8_Format:Fy,RGBA_BPTC_Format:lp,RGBA_ETC2_EAC_Format:Cy,RGBA_PVRTC_2BPPV1_Format:Ey,RGBA_PVRTC_4BPPV1_Format:My,RGBA_S3TC_DXT1_Format:sp,RGBA_S3TC_DXT3_Format:op,RGBA_S3TC_DXT5_Format:ap,RGBDepthPacking:SF,RGBFormat:hA,RGBIntegerFormat:AF,RGB_BPTC_SIGNED_Format:Gy,RGB_BPTC_UNSIGNED_Format:Vy,RGB_ETC1_Format:wy,RGB_ETC2_Format:Ty,RGB_PVRTC_2BPPV1_Format:Sy,RGB_PVRTC_4BPPV1_Format:Ay,RGB_S3TC_DXT1_Format:rp,RGDepthPacking:MF,RGFormat:gA,RGIntegerFormat:hv,RawShaderMaterial:Rb,Ray:Ec,Raycaster:tR,RectAreaLight:jb,RedFormat:dv,RedIntegerFormat:zp,ReinhardToneMapping:OC,RenderTarget:gv,RenderTarget3D:fU,RenderTargetArray:dU,RepeatWrapping:Hl,ReplaceStencilOp:wF,ReverseSubtractEquation:xC,RingGeometry:Bv,SIGNED_RED_GREEN_RGTC2_Format:Xy,SIGNED_RED_RGTC1_Format:Wy,SRGBColorSpace:Vr,SRGBTransfer:wn,Scene:EA,ShaderChunk:nn,ShaderLib:lo,ShaderMaterial:ho,ShadowMaterial:bb,Shape:dc,ShapeGeometry:Iv,ShapePath:LU,ShapeUtils:No,ShortType:cA,Skeleton:Xp,SkeletonHelper:AU,SkinnedMesh:TA,Source:ic,Sphere:Qi,SphereGeometry:Qp,Spherical:m_,SphericalHarmonics3:Xb,SplineCurve:NA,SpotLight:WA,SpotLightHelper:_U,Sprite:pb,SpriteMaterial:wA,SrcAlphaFactor:dy,SrcAlphaSaturateFactor:PC,SrcColorFactor:EC,StaticCopyUsage:VF,StaticDrawUsage:Ep,StaticReadUsage:HF,StereoCamera:J3,StreamCopyUsage:jF,StreamDrawUsage:kF,StreamReadUsage:GF,StringKeyframeTrack:Cc,SubtractEquation:vC,SubtractiveBlending:s_,TOUCH:Yu,TangentSpaceNormalMap:Vl,TetrahedronGeometry:Dv,Texture:Gn,TextureLoader:Gb,TextureUtils:HU,TimestampQuery:JF,TorusGeometry:Lv,TorusKnotGeometry:Fv,Triangle:Wr,TriangleFanDrawMode:Jy,TriangleStripDrawMode:xA,TrianglesDrawMode:JC,TubeGeometry:Nv,UVMapping:av,Uint16BufferAttribute:SA,Uint32BufferAttribute:MA,Uint8BufferAttribute:BN,Uint8ClampedBufferAttribute:IN,Uniform:qA,UniformsGroup:pU,UniformsLib:at,UniformsUtils:cb,UnsignedByteType:fo,UnsignedInt248Type:pc,UnsignedInt5999Type:fA,UnsignedIntType:Ga,UnsignedShort4444Type:cv,UnsignedShort5551Type:fv,UnsignedShortType:xd,VSMShadowMap:ao,Vector2:Ie,Vector3:j,Vector4:xn,VectorKeyframeTrack:Ac,VideoFrameTexture:$N,VideoTexture:yb,WebGL3DRenderTarget:vN,WebGLArrayRenderTarget:yN,WebGLCoordinateSystem:uo,WebGLCubeRenderTarget:db,WebGLRenderTarget:ko,WebGLRenderer:uR,WebGLUtils:lR,WebGPUCoordinateSystem:wp,WebXRController:ty,WireframeGeometry:Cb,WrapAroundEnding:Sp,ZeroCurvatureEnding:tc,ZeroFactor:SC,ZeroSlopeEnding:nc,ZeroStencilOp:EF,createCanvasElement:ob},Symbol.toStringTag,{value:"Module"}));var Ax={exports:{}},Pl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww;function AG(){return Ww||(Ww=1,Pl.ConcurrentRoot=1,Pl.ContinuousEventPriority=4,Pl.DefaultEventPriority=16,Pl.DiscreteEventPriority=1,Pl.IdleEventPriority=536870912,Pl.LegacyRoot=0),Pl}var jw;function SG(){return jw||(jw=1,Ax.exports=AG()),Ax.exports}var fd=SG();function MG(i){let e;const t=new Set,n=(h,p)=>{const g=typeof h=="function"?h(e):h;if(g!==e){const y=e;e=p?g:Object.assign({},e,g),t.forEach(v=>v(e,y))}},r=()=>e,s=(h,p=r,g=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let y=p(e);function v(){const S=p(e);if(!g(y,S)){const w=y;h(y=S,w)}}return t.add(v),()=>t.delete(v)},c={setState:n,getState:r,subscribe:(h,p,g)=>p||g?s(h,p,g):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=i(n,r,c),c}const EG=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Xw=EG?q.useEffect:q.useLayoutEffect;function wG(i){const e=typeof i=="function"?MG(i):i,t=(n=e.getState,r=Object.is)=>{const[,s]=q.useReducer(M=>M+1,0),o=e.getState(),l=q.useRef(o),c=q.useRef(n),h=q.useRef(r),p=q.useRef(!1),g=q.useRef();g.current===void 0&&(g.current=n(o));let y,v=!1;(l.current!==o||c.current!==n||h.current!==r||p.current)&&(y=n(o),v=!r(g.current,y)),Xw(()=>{v&&(g.current=y),l.current=o,c.current=n,h.current=r,p.current=!1});const S=q.useRef(o);Xw(()=>{const M=()=>{try{const C=e.getState(),b=c.current(C);h.current(g.current,b)||(l.current=C,g.current=b,s())}catch{p.current=!0,s()}},A=e.subscribe(M);return e.getState()!==S.current&&M(),A},[]);const w=v?y:g.current;return q.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}const TG=i=>typeof i=="object"&&typeof i.then=="function",sc=[];function cR(i,e,t=(n,r)=>n===r){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let r=0;r<n;r++)if(!t(i[r],e[r]))return!1;return!0}function fR(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const s of sc)if(cR(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:n.equal,remove:()=>{const s=sc.indexOf(r);s!==-1&&sc.splice(s,1)},promise:(TG(i)?i:i(...e)).then(s=>{r.response=s,n.lifespan&&n.lifespan>0&&(r.timeout=setTimeout(r.remove,n.lifespan))}).catch(s=>r.error=s)};if(sc.push(r),!t)throw r.promise}const CG=(i,e,t)=>fR(i,e,!1,t),bG=(i,e,t)=>void fR(i,e,!0,t),RG=i=>{if(i===void 0||i.length===0)sc.splice(0,sc.length);else{const e=sc.find(t=>cR(i,t.keys,t.equal));e&&e.remove()}};var Sx={exports:{}},Mx={exports:{}},Ex={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function PG(){return Jw||(Jw=1,function(i){function e(W,re){var $=W.length;W.push(re);e:for(;0<$;){var J=$-1>>>1,ae=W[J];if(0<r(ae,re))W[J]=re,W[$]=ae,$=J;else break e}}function t(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var re=W[0],$=W.pop();if($!==re){W[0]=$;e:for(var J=0,ae=W.length,Le=ae>>>1;J<Le;){var fe=2*(J+1)-1,we=W[fe],Ne=fe+1,De=W[Ne];if(0>r(we,$))Ne<ae&&0>r(De,we)?(W[J]=De,W[Ne]=$,J=Ne):(W[J]=we,W[fe]=$,J=fe);else if(Ne<ae&&0>r(De,$))W[J]=De,W[Ne]=$,J=Ne;else break e}}return re}function r(W,re){var $=W.sortIndex-re.sortIndex;return $!==0?$:W.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,g=null,y=3,v=!1,S=!1,w=!1,M=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(W){for(var re=t(h);re!==null;){if(re.callback===null)n(h);else if(re.startTime<=W)n(h),re.sortIndex=re.expirationTime,e(c,re);else break;re=t(h)}}function B(W){if(w=!1,b(W),!S)if(t(c)!==null)S=!0,ge(N);else{var re=t(h);re!==null&&de(B,re.startTime-W)}}function N(W,re){S=!1,w&&(w=!1,A(z),z=-1),v=!0;var $=y;try{for(b(re),g=t(c);g!==null&&(!(g.expirationTime>re)||W&&!V());){var J=g.callback;if(typeof J=="function"){g.callback=null,y=g.priorityLevel;var ae=J(g.expirationTime<=re);re=i.unstable_now(),typeof ae=="function"?g.callback=ae:g===t(c)&&n(c),b(re)}else n(c);g=t(c)}if(g!==null)var Le=!0;else{var fe=t(h);fe!==null&&de(B,fe.startTime-re),Le=!1}return Le}finally{g=null,y=$,v=!1}}var F=!1,k=null,z=-1,L=5,D=-1;function V(){return!(i.unstable_now()-D<L)}function oe(){if(k!==null){var W=i.unstable_now();D=W;var re=!0;try{re=k(!0,W)}finally{re?ie():(F=!1,k=null)}}else F=!1}var ie;if(typeof C=="function")ie=function(){C(oe)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,xe=ye.port2;ye.port1.onmessage=oe,ie=function(){xe.postMessage(null)}}else ie=function(){M(oe,0)};function ge(W){k=W,F||(F=!0,ie())}function de(W,re){z=M(function(){W(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(W){W.callback=null},i.unstable_continueExecution=function(){S||v||(S=!0,ge(N))},i.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<W?Math.floor(1e3/W):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(W){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var $=y;y=re;try{return W()}finally{y=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(W,re){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var $=y;y=W;try{return re()}finally{y=$}},i.unstable_scheduleCallback=function(W,re,$){var J=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?J+$:J):$=J,W){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=$+ae,W={id:p++,callback:re,priorityLevel:W,startTime:$,expirationTime:ae,sortIndex:-1},$>J?(W.sortIndex=$,e(h,W),t(c)===null&&W===t(h)&&(w?(A(z),z=-1):w=!0,de(B,$-J))):(W.sortIndex=ae,e(c,W),S||v||(S=!0,ge(N))),W},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(W){var re=y;return function(){var $=y;y=re;try{return W.apply(this,arguments)}finally{y=$}}}}(Ex)),Ex}var Kw;function dR(){return Kw||(Kw=1,Mx.exports=PG()),Mx.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wx,Yw;function BG(){return Yw||(Yw=1,wx=function(e){var t={},n=$y(),r=dR(),s=Object.assign;function o(f){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+f,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),S=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),N=Symbol.iterator;function F(f){return f===null||typeof f!="object"?null:(f=N&&f[N]||f["@@iterator"],typeof f=="function"?f:null)}function k(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case p:return"Fragment";case h:return"Portal";case y:return"Profiler";case g:return"StrictMode";case M:return"Suspense";case A:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case S:return(f.displayName||"Context")+".Consumer";case v:return(f._context.displayName||"Context")+".Provider";case w:var d=f.render;return f=f.displayName,f||(f=d.displayName||d.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case C:return d=f.displayName||null,d!==null?d:k(f.type)||"Memo";case b:d=f._payload,f=f._init;try{return k(f(d))}catch{}}return null}function z(f){var d=f.type;switch(f.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=d.render,f=f.displayName||f.name||"",d.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k(d);case 8:return d===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function L(f){var d=f,x=f;if(f.alternate)for(;d.return;)d=d.return;else{f=d;do d=f,(d.flags&4098)!==0&&(x=d.return),f=d.return;while(f)}return d.tag===3?x:null}function D(f){if(L(f)!==f)throw Error(o(188))}function V(f){var d=f.alternate;if(!d){if(d=L(f),d===null)throw Error(o(188));return d!==f?null:f}for(var x=f,E=d;;){var R=x.return;if(R===null)break;var I=R.alternate;if(I===null){if(E=R.return,E!==null){x=E;continue}break}if(R.child===I.child){for(I=R.child;I;){if(I===x)return D(R),f;if(I===E)return D(R),d;I=I.sibling}throw Error(o(188))}if(x.return!==E.return)x=R,E=I;else{for(var Y=!1,se=R.child;se;){if(se===x){Y=!0,x=R,E=I;break}if(se===E){Y=!0,E=R,x=I;break}se=se.sibling}if(!Y){for(se=I.child;se;){if(se===x){Y=!0,x=I,E=R;break}if(se===E){Y=!0,E=I,x=R;break}se=se.sibling}if(!Y)throw Error(o(189))}}if(x.alternate!==E)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?f:d}function oe(f){return f=V(f),f!==null?ie(f):null}function ie(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var d=ie(f);if(d!==null)return d;f=f.sibling}return null}function ye(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var d=ye(f);if(d!==null)return d}f=f.sibling}return null}var xe=Array.isArray,ge=e.getPublicInstance,de=e.getRootHostContext,W=e.getChildHostContext,re=e.prepareForCommit,$=e.resetAfterCommit,J=e.createInstance,ae=e.appendInitialChild,Le=e.finalizeInitialChildren,fe=e.prepareUpdate,we=e.shouldSetTextContent,Ne=e.createTextInstance,De=e.scheduleTimeout,je=e.cancelTimeout,xt=e.noTimeout,Je=e.isPrimaryRenderer,rt=e.supportsMutation,Fe=e.supportsPersistence,be=e.supportsHydration,K=e.getInstanceFromNode,mt=e.preparePortalMount,ke=e.getCurrentEventPriority,et=e.detachDeletedInstance,Xe=e.supportsMicrotasks,wt=e.scheduleMicrotask,qe=e.supportsTestSelectors,X=e.findFiberRoot,H=e.getBoundingRect,pe=e.getTextContent,Te=e.isHiddenSubtree,Ue=e.matchAccessibilityRole,Pe=e.setFocusIfFocusable,st=e.setupIntersectionObserver,Ze=e.appendChild,ct=e.appendChildToContainer,Gt=e.commitTextUpdate,ze=e.commitMount,gt=e.commitUpdate,Bt=e.insertBefore,Lt=e.insertInContainerBefore,ht=e.removeChild,ee=e.removeChildFromContainer,Re=e.resetTextContent,tt=e.hideInstance,Z=e.hideTextInstance,Ve=e.unhideInstance,Me=e.unhideTextInstance,Be=e.clearContainer,ut=e.cloneInstance,nt=e.createContainerChildSet,Pt=e.appendChildToContainerChildSet,un=e.finalizeContainerChildren,Tn=e.replaceContainerChildren,Qt=e.cloneHiddenInstance,Vn=e.cloneHiddenTextInstance,Qn=e.canHydrateInstance,ja=e.canHydrateTextInstance,yo=e.canHydrateSuspenseInstance,ds=e.isSuspenseInstancePending,Xr=e.isSuspenseInstanceFallback,Go=e.registerSuspenseInstanceRetry,Jr=e.getNextHydratableSibling,vo=e.getFirstHydratableChild,bc=e.getFirstHydratableChildWithinContainer,Xa=e.getFirstHydratableChildWithinSuspenseInstance,Rc=e.hydrateInstance,hs=e.hydrateTextInstance,Pc=e.hydrateSuspenseInstance,Bc=e.getNextHydratableInstanceAfterSuspenseInstance,Ic=e.commitHydratedContainer,Dc=e.commitHydratedSuspenseInstance,Lc=e.clearSuspenseBoundary,Fc=e.clearSuspenseBoundaryFromContainer,G=e.shouldDeleteUnhydratedTailInstances,le=e.didNotMatchHydratedContainerTextInstance,Ae=e.didNotMatchHydratedTextInstance,he;function ce(f){if(he===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);he=d&&d[1]||""}return`
`+he+f}var Ge=!1;function it(f,d){if(!f||Ge)return"";Ge=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ke){var E=Ke}Reflect.construct(f,[],d)}else{try{d.call()}catch(Ke){E=Ke}f.call(d.prototype)}else{try{throw Error()}catch(Ke){E=Ke}f()}}catch(Ke){if(Ke&&E&&typeof Ke.stack=="string"){for(var R=Ke.stack.split(`
`),I=E.stack.split(`
`),Y=R.length-1,se=I.length-1;1<=Y&&0<=se&&R[Y]!==I[se];)se--;for(;1<=Y&&0<=se;Y--,se--)if(R[Y]!==I[se]){if(Y!==1||se!==1)do if(Y--,se--,0>se||R[Y]!==I[se]){var Ce=`
`+R[Y].replace(" at new "," at ");return f.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",f.displayName)),Ce}while(1<=Y&&0<=se);break}}}finally{Ge=!1,Error.prepareStackTrace=x}return(f=f?f.displayName||f.name:"")?ce(f):""}var dt=Object.prototype.hasOwnProperty,yt=[],It=-1;function Rt(f){return{current:f}}function Ye(f){0>It||(f.current=yt[It],yt[It]=null,It--)}function Mt(f,d){It++,yt[It]=f.current,f.current=d}var kt={},rn=Rt(kt),sn=Rt(!1),qt=kt;function St(f,d){var x=f.type.contextTypes;if(!x)return kt;var E=f.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===d)return E.__reactInternalMemoizedMaskedChildContext;var R={},I;for(I in x)R[I]=d[I];return E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=d,f.__reactInternalMemoizedMaskedChildContext=R),R}function cn(f){return f=f.childContextTypes,f!=null}function en(){Ye(sn),Ye(rn)}function vi(f,d,x){if(rn.current!==kt)throw Error(o(168));Mt(rn,d),Mt(sn,x)}function Ds(f,d,x){var E=f.stateNode;if(d=d.childContextTypes,typeof E.getChildContext!="function")return x;E=E.getChildContext();for(var R in E)if(!(R in d))throw Error(o(108,z(f)||"Unknown",R));return s({},x,E)}function ui(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||kt,qt=rn.current,Mt(rn,f),Mt(sn,sn.current),!0}function ps(f,d,x){var E=f.stateNode;if(!E)throw Error(o(169));x?(f=Ds(f,d,qt),E.__reactInternalMemoizedMergedChildContext=f,Ye(sn),Ye(rn),Mt(rn,f)):Ye(sn),Mt(sn,x)}var on=Math.clz32?Math.clz32:xi,Pi=Math.log,ci=Math.LN2;function xi(f){return f>>>=0,f===0?32:31-(Pi(f)/ci|0)|0}var Wn=64,an=4194304;function qi(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Xl(f,d){var x=f.pendingLanes;if(x===0)return 0;var E=0,R=f.suspendedLanes,I=f.pingedLanes,Y=x&268435455;if(Y!==0){var se=Y&~R;se!==0?E=qi(se):(I&=Y,I!==0&&(E=qi(I)))}else Y=x&~R,Y!==0?E=qi(Y):I!==0&&(E=qi(I));if(E===0)return 0;if(d!==0&&d!==E&&(d&R)===0&&(R=E&-E,I=d&-d,R>=I||R===16&&(I&4194240)!==0))return d;if((E&4)!==0&&(E|=x&16),d=f.entangledLanes,d!==0)for(f=f.entanglements,d&=E;0<d;)x=31-on(d),R=1<<x,E|=f[x],d&=~R;return E}function Nd(f,d){switch(f){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nm(f,d){for(var x=f.suspendedLanes,E=f.pingedLanes,R=f.expirationTimes,I=f.pendingLanes;0<I;){var Y=31-on(I),se=1<<Y,Ce=R[Y];Ce===-1?((se&x)===0||(se&E)!==0)&&(R[Y]=Nd(se,d)):Ce<=d&&(f.expiredLanes|=se),I&=~se}}function Nc(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function Uc(f){for(var d=[],x=0;31>x;x++)d.push(f);return d}function Vo(f,d,x){f.pendingLanes|=d,d!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,d=31-on(d),f[d]=x}function Oc(f,d){var x=f.pendingLanes&~d;f.pendingLanes=d,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=d,f.mutableReadLanes&=d,f.entangledLanes&=d,d=f.entanglements;var E=f.eventTimes;for(f=f.expirationTimes;0<x;){var R=31-on(x),I=1<<R;d[R]=0,E[R]=-1,f[R]=-1,x&=~I}}function ms(f,d){var x=f.entangledLanes|=d;for(f=f.entanglements;x;){var E=31-on(x),R=1<<E;R&d|f[E]&d&&(f[E]|=d),x&=~R}}var tn=0;function Ls(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var Wo=r.unstable_scheduleCallback,Ja=r.unstable_cancelCallback,xo=r.unstable_shouldYield,Hv=r.unstable_requestPaint,ni=r.unstable_now,jo=r.unstable_ImmediatePriority,zv=r.unstable_UserBlockingPriority,kc=r.unstable_NormalPriority,Hc=r.unstable_IdlePriority,Jl=null,gs=null;function Kl(f){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(Jl,f,void 0,(f.current.flags&128)===128)}catch{}}function Yl(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var ki=typeof Object.is=="function"?Object.is:Yl,Rr=null,zc=!1,Ud=!1;function Gc(f){Rr===null?Rr=[f]:Rr.push(f)}function Vc(f){zc=!0,Gc(f)}function Pr(){if(!Ud&&Rr!==null){Ud=!0;var f=0,d=tn;try{var x=Rr;for(tn=1;f<x.length;f++){var E=x[f];do E=E(!0);while(E!==null)}Rr=null,zc=!1}catch(R){throw Rr!==null&&(Rr=Rr.slice(f+1)),Wo(jo,Pr),R}finally{tn=d,Ud=!1}}return null}var im=l.ReactCurrentBatchConfig;function Kr(f,d){if(ki(f,d))return!0;if(typeof f!="object"||f===null||typeof d!="object"||d===null)return!1;var x=Object.keys(f),E=Object.keys(d);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var R=x[E];if(!dt.call(d,R)||!ki(f[R],d[R]))return!1}return!0}function Od(f){switch(f.tag){case 5:return ce(f.type);case 16:return ce("Lazy");case 13:return ce("Suspense");case 19:return ce("SuspenseList");case 0:case 2:case 15:return f=it(f.type,!1),f;case 11:return f=it(f.type.render,!1),f;case 1:return f=it(f.type,!0),f;default:return""}}function Zi(f,d){if(f&&f.defaultProps){d=s({},d),f=f.defaultProps;for(var x in f)d[x]===void 0&&(d[x]=f[x]);return d}return d}var Ql=Rt(null),Xo=null,Fs=null,Wc=null;function Hi(){Wc=Fs=Xo=null}function Jo(f,d,x){Je?(Mt(Ql,d._currentValue),d._currentValue=x):(Mt(Ql,d._currentValue2),d._currentValue2=x)}function ql(f){var d=Ql.current;Ye(Ql),Je?f._currentValue=d:f._currentValue2=d}function Ko(f,d,x){for(;f!==null;){var E=f.alternate;if((f.childLanes&d)!==d?(f.childLanes|=d,E!==null&&(E.childLanes|=d)):E!==null&&(E.childLanes&d)!==d&&(E.childLanes|=d),f===x)break;f=f.return}}function Ka(f,d){Xo=f,Wc=Fs=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&d)!==0&&(pi=!0),f.firstContext=null)}function $i(f){var d=Je?f._currentValue:f._currentValue2;if(Wc!==f)if(f={context:f,memoizedValue:d,next:null},Fs===null){if(Xo===null)throw Error(o(308));Fs=f,Xo.dependencies={lanes:0,firstContext:f}}else Fs=Fs.next=f;return d}var Br=null,Ir=!1;function Ya(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kd(f,d){f=f.updateQueue,d.updateQueue===f&&(d.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Ns(f,d){return{eventTime:f,lane:d,tag:0,payload:null,callback:null,next:null}}function _o(f,d){var x=f.updateQueue;x!==null&&(x=x.shared,Xn!==null&&(f.mode&1)!==0&&(Jt&2)===0?(f=x.interleaved,f===null?(d.next=d,Br===null?Br=[x]:Br.push(x)):(d.next=f.next,f.next=d),x.interleaved=d):(f=x.pending,f===null?d.next=d:(d.next=f.next,f.next=d),x.pending=d))}function jc(f,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var E=d.lanes;E&=f.pendingLanes,x|=E,d.lanes=x,ms(f,x)}}function Xc(f,d){var x=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var R=null,I=null;if(x=x.firstBaseUpdate,x!==null){do{var Y={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};I===null?R=I=Y:I=I.next=Y,x=x.next}while(x!==null);I===null?R=I=d:I=I.next=d}else R=I=d;x={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:I,shared:E.shared,effects:E.effects},f.updateQueue=x;return}f=x.lastBaseUpdate,f===null?x.firstBaseUpdate=d:f.next=d,x.lastBaseUpdate=d}function Jc(f,d,x,E){var R=f.updateQueue;Ir=!1;var I=R.firstBaseUpdate,Y=R.lastBaseUpdate,se=R.shared.pending;if(se!==null){R.shared.pending=null;var Ce=se,Ke=Ce.next;Ce.next=null,Y===null?I=Ke:Y.next=Ke,Y=Ce;var vt=f.alternate;vt!==null&&(vt=vt.updateQueue,se=vt.lastBaseUpdate,se!==Y&&(se===null?vt.firstBaseUpdate=Ke:se.next=Ke,vt.lastBaseUpdate=Ce))}if(I!==null){var Vt=R.baseState;Y=0,vt=Ke=Ce=null,se=I;do{var Dt=se.lane,Zt=se.eventTime;if((E&Dt)===Dt){vt!==null&&(vt=vt.next={eventTime:Zt,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var ft=f,wi=se;switch(Dt=d,Zt=x,wi.tag){case 1:if(ft=wi.payload,typeof ft=="function"){Vt=ft.call(Zt,Vt,Dt);break e}Vt=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=wi.payload,Dt=typeof ft=="function"?ft.call(Zt,Vt,Dt):ft,Dt==null)break e;Vt=s({},Vt,Dt);break e;case 2:Ir=!0}}se.callback!==null&&se.lane!==0&&(f.flags|=64,Dt=R.effects,Dt===null?R.effects=[se]:Dt.push(se))}else Zt={eventTime:Zt,lane:Dt,tag:se.tag,payload:se.payload,callback:se.callback,next:null},vt===null?(Ke=vt=Zt,Ce=Vt):vt=vt.next=Zt,Y|=Dt;if(se=se.next,se===null){if(se=R.shared.pending,se===null)break;Dt=se,se=Dt.next,Dt.next=null,R.lastBaseUpdate=Dt,R.shared.pending=null}}while(!0);if(vt===null&&(Ce=Vt),R.baseState=Ce,R.firstBaseUpdate=Ke,R.lastBaseUpdate=vt,d=R.shared.interleaved,d!==null){R=d;do Y|=R.lane,R=R.next;while(R!==d)}else I===null&&(R.shared.lanes=0);_s|=Y,f.lanes=Y,f.memoizedState=Vt}}function rm(f,d,x){if(f=d.effects,d.effects=null,f!==null)for(d=0;d<f.length;d++){var E=f[d],R=E.callback;if(R!==null){if(E.callback=null,E=x,typeof R!="function")throw Error(o(191,R));R.call(E)}}}var sm=new n.Component().refs;function Hd(f,d,x,E){d=f.memoizedState,x=x(E,d),x=x==null?d:s({},d,x),f.memoizedState=x,f.lanes===0&&(f.updateQueue.baseState=x)}var Kc={isMounted:function(f){return(f=f._reactInternals)?L(f)===f:!1},enqueueSetState:function(f,d,x){f=f._reactInternals;var E=mn(),R=ts(f),I=Ns(E,R);I.payload=d,x!=null&&(I.callback=x),_o(f,I),d=Di(f,R,E),d!==null&&jc(d,f,R)},enqueueReplaceState:function(f,d,x){f=f._reactInternals;var E=mn(),R=ts(f),I=Ns(E,R);I.tag=1,I.payload=d,x!=null&&(I.callback=x),_o(f,I),d=Di(f,R,E),d!==null&&jc(d,f,R)},enqueueForceUpdate:function(f,d){f=f._reactInternals;var x=mn(),E=ts(f),R=Ns(x,E);R.tag=2,d!=null&&(R.callback=d),_o(f,R),d=Di(f,E,x),d!==null&&jc(d,f,E)}};function zd(f,d,x,E,R,I,Y){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,I,Y):d.prototype&&d.prototype.isPureReactComponent?!Kr(x,E)||!Kr(R,I):!0}function om(f,d,x){var E=!1,R=kt,I=d.contextType;return typeof I=="object"&&I!==null?I=$i(I):(R=cn(d)?qt:rn.current,E=d.contextTypes,I=(E=E!=null)?St(f,R):kt),d=new d(x,I),f.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Kc,f.stateNode=d,d._reactInternals=f,E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=R,f.__reactInternalMemoizedMaskedChildContext=I),d}function am(f,d,x,E){f=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,E),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,E),d.state!==f&&Kc.enqueueReplaceState(d,d.state,null)}function Gd(f,d,x,E){var R=f.stateNode;R.props=x,R.state=f.memoizedState,R.refs=sm,Ya(f);var I=d.contextType;typeof I=="object"&&I!==null?R.context=$i(I):(I=cn(d)?qt:rn.current,R.context=St(f,I)),R.state=f.memoizedState,I=d.getDerivedStateFromProps,typeof I=="function"&&(Hd(f,d,I,x),R.state=f.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(d=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),d!==R.state&&Kc.enqueueReplaceState(R,R.state,null),Jc(f,x,R,E),R.state=f.memoizedState),typeof R.componentDidMount=="function"&&(f.flags|=4194308)}var Qa=[],Ao=0,Yc=null,Qc=0,Dr=[],pr=0,Yo=null,Us=1,Os="";function Qo(f,d){Qa[Ao++]=Qc,Qa[Ao++]=Yc,Yc=f,Qc=d}function lm(f,d,x){Dr[pr++]=Us,Dr[pr++]=Os,Dr[pr++]=Yo,Yo=f;var E=Us;f=Os;var R=32-on(E)-1;E&=~(1<<R),x+=1;var I=32-on(d)+R;if(30<I){var Y=R-R%5;I=(E&(1<<Y)-1).toString(32),E>>=Y,R-=Y,Us=1<<32-on(d)+R|x<<R|E,Os=I+f}else Us=1<<I|x<<R|E,Os=f}function Vd(f){f.return!==null&&(Qo(f,1),lm(f,1,0))}function Wd(f){for(;f===Yc;)Yc=Qa[--Ao],Qa[Ao]=null,Qc=Qa[--Ao],Qa[Ao]=null;for(;f===Yo;)Yo=Dr[--pr],Dr[pr]=null,Os=Dr[--pr],Dr[pr]=null,Us=Dr[--pr],Dr[pr]=null}var zi=null,_i=null,In=!1,qa=!1,Lr=null;function jd(f,d){var x=Ar(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=f,d=f.deletions,d===null?(f.deletions=[x],f.flags|=16):d.push(x)}function Xd(f,d){switch(f.tag){case 5:return d=Qn(d,f.type,f.pendingProps),d!==null?(f.stateNode=d,zi=f,_i=vo(d),!0):!1;case 6:return d=ja(d,f.pendingProps),d!==null?(f.stateNode=d,zi=f,_i=null,!0):!1;case 13:if(d=yo(d),d!==null){var x=Yo!==null?{id:Us,overflow:Os}:null;return f.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=Ar(18,null,null,0),x.stateNode=d,x.return=f,f.child=x,zi=f,_i=null,!0}return!1;default:return!1}}function qc(f){return(f.mode&1)!==0&&(f.flags&128)===0}function So(f){if(In){var d=_i;if(d){var x=d;if(!Xd(f,d)){if(qc(f))throw Error(o(418));d=Jr(x);var E=zi;d&&Xd(f,d)?jd(E,x):(f.flags=f.flags&-4097|2,In=!1,zi=f)}}else{if(qc(f))throw Error(o(418));f.flags=f.flags&-4097|2,In=!1,zi=f}}}function um(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;zi=f}function Zl(f){if(!be||f!==zi)return!1;if(!In)return um(f),In=!0,!1;if(f.tag!==3&&(f.tag!==5||G(f.type)&&!we(f.type,f.memoizedProps))){var d=_i;if(d){if(qc(f)){for(f=_i;f;)f=Jr(f);throw Error(o(418))}for(;d;)jd(f,d),d=Jr(d)}}if(um(f),f.tag===13){if(!be)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));_i=Bc(f)}else _i=zi?Jr(f.stateNode):null;return!0}function Za(){be&&(_i=zi=null,qa=In=!1)}function Zc(f){Lr===null?Lr=[f]:Lr.push(f)}function $a(f,d,x){if(f=x.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var E=x.stateNode}if(!E)throw Error(o(147,f));var R=E,I=""+f;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===I?d.ref:(d=function(Y){var se=R.refs;se===sm&&(se=R.refs={}),Y===null?delete se[I]:se[I]=Y},d._stringRef=I,d)}if(typeof f!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,f))}return f}function Mo(f,d){throw f=Object.prototype.toString.call(d),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":f))}function el(f){var d=f._init;return d(f._payload)}function cm(f){function d(_e,ue){if(f){var Ee=_e.deletions;Ee===null?(_e.deletions=[ue],_e.flags|=16):Ee.push(ue)}}function x(_e,ue){if(!f)return null;for(;ue!==null;)d(_e,ue),ue=ue.sibling;return null}function E(_e,ue){for(_e=new Map;ue!==null;)ue.key!==null?_e.set(ue.key,ue):_e.set(ue.index,ue),ue=ue.sibling;return _e}function R(_e,ue){return _e=Zs(_e,ue),_e.index=0,_e.sibling=null,_e}function I(_e,ue,Ee){return _e.index=Ee,f?(Ee=_e.alternate,Ee!==null?(Ee=Ee.index,Ee<ue?(_e.flags|=2,ue):Ee):(_e.flags|=2,ue)):(_e.flags|=1048576,ue)}function Y(_e){return f&&_e.alternate===null&&(_e.flags|=2),_e}function se(_e,ue,Ee,ot){return ue===null||ue.tag!==6?(ue=Tf(Ee,_e.mode,ot),ue.return=_e,ue):(ue=R(ue,Ee),ue.return=_e,ue)}function Ce(_e,ue,Ee,ot){var Tt=Ee.type;return Tt===p?vt(_e,ue,Ee.props.children,ot,Ee.key):ue!==null&&(ue.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===b&&el(Tt)===ue.type)?(ot=R(ue,Ee.props),ot.ref=$a(_e,ue,Ee),ot.return=_e,ot):(ot=wf(Ee.type,Ee.key,Ee.props,null,_e.mode,ot),ot.ref=$a(_e,ue,Ee),ot.return=_e,ot)}function Ke(_e,ue,Ee,ot){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==Ee.containerInfo||ue.stateNode.implementation!==Ee.implementation?(ue=Cf(Ee,_e.mode,ot),ue.return=_e,ue):(ue=R(ue,Ee.children||[]),ue.return=_e,ue)}function vt(_e,ue,Ee,ot,Tt){return ue===null||ue.tag!==7?(ue=va(Ee,_e.mode,ot,Tt),ue.return=_e,ue):(ue=R(ue,Ee),ue.return=_e,ue)}function Vt(_e,ue,Ee){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ue=Tf(""+ue,_e.mode,Ee),ue.return=_e,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case c:return Ee=wf(ue.type,ue.key,ue.props,null,_e.mode,Ee),Ee.ref=$a(_e,null,ue),Ee.return=_e,Ee;case h:return ue=Cf(ue,_e.mode,Ee),ue.return=_e,ue;case b:var ot=ue._init;return Vt(_e,ot(ue._payload),Ee)}if(xe(ue)||F(ue))return ue=va(ue,_e.mode,Ee,null),ue.return=_e,ue;Mo(_e,ue)}return null}function Dt(_e,ue,Ee,ot){var Tt=ue!==null?ue.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Tt!==null?null:se(_e,ue,""+Ee,ot);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case c:return Ee.key===Tt?Ce(_e,ue,Ee,ot):null;case h:return Ee.key===Tt?Ke(_e,ue,Ee,ot):null;case b:return Tt=Ee._init,Dt(_e,ue,Tt(Ee._payload),ot)}if(xe(Ee)||F(Ee))return Tt!==null?null:vt(_e,ue,Ee,ot,null);Mo(_e,Ee)}return null}function Zt(_e,ue,Ee,ot,Tt){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return _e=_e.get(Ee)||null,se(ue,_e,""+ot,Tt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case c:return _e=_e.get(ot.key===null?Ee:ot.key)||null,Ce(ue,_e,ot,Tt);case h:return _e=_e.get(ot.key===null?Ee:ot.key)||null,Ke(ue,_e,ot,Tt);case b:var jt=ot._init;return Zt(_e,ue,Ee,jt(ot._payload),Tt)}if(xe(ot)||F(ot))return _e=_e.get(Ee)||null,vt(ue,_e,ot,Tt,null);Mo(ue,ot)}return null}function ft(_e,ue,Ee,ot){for(var Tt=null,jt=null,Wt=ue,hn=ue=0,Zn=null;Wt!==null&&hn<Ee.length;hn++){Wt.index>hn?(Zn=Wt,Wt=null):Zn=Wt.sibling;var dn=Dt(_e,Wt,Ee[hn],ot);if(dn===null){Wt===null&&(Wt=Zn);break}f&&Wt&&dn.alternate===null&&d(_e,Wt),ue=I(dn,ue,hn),jt===null?Tt=dn:jt.sibling=dn,jt=dn,Wt=Zn}if(hn===Ee.length)return x(_e,Wt),In&&Qo(_e,hn),Tt;if(Wt===null){for(;hn<Ee.length;hn++)Wt=Vt(_e,Ee[hn],ot),Wt!==null&&(ue=I(Wt,ue,hn),jt===null?Tt=Wt:jt.sibling=Wt,jt=Wt);return In&&Qo(_e,hn),Tt}for(Wt=E(_e,Wt);hn<Ee.length;hn++)Zn=Zt(Wt,_e,hn,Ee[hn],ot),Zn!==null&&(f&&Zn.alternate!==null&&Wt.delete(Zn.key===null?hn:Zn.key),ue=I(Zn,ue,hn),jt===null?Tt=Zn:jt.sibling=Zn,jt=Zn);return f&&Wt.forEach(function($s){return d(_e,$s)}),In&&Qo(_e,hn),Tt}function wi(_e,ue,Ee,ot){var Tt=F(Ee);if(typeof Tt!="function")throw Error(o(150));if(Ee=Tt.call(Ee),Ee==null)throw Error(o(151));for(var jt=Tt=null,Wt=ue,hn=ue=0,Zn=null,dn=Ee.next();Wt!==null&&!dn.done;hn++,dn=Ee.next()){Wt.index>hn?(Zn=Wt,Wt=null):Zn=Wt.sibling;var $s=Dt(_e,Wt,dn.value,ot);if($s===null){Wt===null&&(Wt=Zn);break}f&&Wt&&$s.alternate===null&&d(_e,Wt),ue=I($s,ue,hn),jt===null?Tt=$s:jt.sibling=$s,jt=$s,Wt=Zn}if(dn.done)return x(_e,Wt),In&&Qo(_e,hn),Tt;if(Wt===null){for(;!dn.done;hn++,dn=Ee.next())dn=Vt(_e,dn.value,ot),dn!==null&&(ue=I(dn,ue,hn),jt===null?Tt=dn:jt.sibling=dn,jt=dn);return In&&Qo(_e,hn),Tt}for(Wt=E(_e,Wt);!dn.done;hn++,dn=Ee.next())dn=Zt(Wt,_e,hn,dn.value,ot),dn!==null&&(f&&dn.alternate!==null&&Wt.delete(dn.key===null?hn:dn.key),ue=I(dn,ue,hn),jt===null?Tt=dn:jt.sibling=dn,jt=dn);return f&&Wt.forEach(function(Mh){return d(_e,Mh)}),In&&Qo(_e,hn),Tt}function Sr(_e,ue,Ee,ot){if(typeof Ee=="object"&&Ee!==null&&Ee.type===p&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case c:e:{for(var Tt=Ee.key,jt=ue;jt!==null;){if(jt.key===Tt){if(Tt=Ee.type,Tt===p){if(jt.tag===7){x(_e,jt.sibling),ue=R(jt,Ee.props.children),ue.return=_e,_e=ue;break e}}else if(jt.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===b&&el(Tt)===jt.type){x(_e,jt.sibling),ue=R(jt,Ee.props),ue.ref=$a(_e,jt,Ee),ue.return=_e,_e=ue;break e}x(_e,jt);break}else d(_e,jt);jt=jt.sibling}Ee.type===p?(ue=va(Ee.props.children,_e.mode,ot,Ee.key),ue.return=_e,_e=ue):(ot=wf(Ee.type,Ee.key,Ee.props,null,_e.mode,ot),ot.ref=$a(_e,ue,Ee),ot.return=_e,_e=ot)}return Y(_e);case h:e:{for(jt=Ee.key;ue!==null;){if(ue.key===jt)if(ue.tag===4&&ue.stateNode.containerInfo===Ee.containerInfo&&ue.stateNode.implementation===Ee.implementation){x(_e,ue.sibling),ue=R(ue,Ee.children||[]),ue.return=_e,_e=ue;break e}else{x(_e,ue);break}else d(_e,ue);ue=ue.sibling}ue=Cf(Ee,_e.mode,ot),ue.return=_e,_e=ue}return Y(_e);case b:return jt=Ee._init,Sr(_e,ue,jt(Ee._payload),ot)}if(xe(Ee))return ft(_e,ue,Ee,ot);if(F(Ee))return wi(_e,ue,Ee,ot);Mo(_e,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,ue!==null&&ue.tag===6?(x(_e,ue.sibling),ue=R(ue,Ee),ue.return=_e,_e=ue):(x(_e,ue),ue=Tf(Ee,_e.mode,ot),ue.return=_e,_e=ue),Y(_e)):x(_e,ue)}return Sr}var ks=cm(!0),fm=cm(!1),tl={},er=Rt(tl),qo=Rt(tl),Zo=Rt(tl);function Yr(f){if(f===tl)throw Error(o(174));return f}function $c(f,d){Mt(Zo,d),Mt(qo,f),Mt(er,tl),f=de(d),Ye(er),Mt(er,f)}function nl(){Ye(er),Ye(qo),Ye(Zo)}function dm(f){var d=Yr(Zo.current),x=Yr(er.current);d=W(x,f.type,d),x!==d&&(Mt(qo,f),Mt(er,d))}function Jd(f){qo.current===f&&(Ye(er),Ye(qo))}var Nn=Rt(0);function ef(f){for(var d=f;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||ds(x)||Xr(x)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var mr=[];function $o(){for(var f=0;f<mr.length;f++){var d=mr[f];Je?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}mr.length=0}var $l=l.ReactCurrentDispatcher,gr=l.ReactCurrentBatchConfig,ea=0,Un=null,fi=null,di=null,tf=!1,ys=!1,ta=0,eu=0;function hi(){throw Error(o(321))}function nf(f,d){if(d===null)return!1;for(var x=0;x<d.length&&x<f.length;x++)if(!ki(f[x],d[x]))return!1;return!0}function il(f,d,x,E,R,I){if(ea=I,Un=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,$l.current=f===null||f.memoizedState===null?$d:eh,f=x(E,R),ys){I=0;do{if(ys=!1,ta=0,25<=I)throw Error(o(301));I+=1,di=fi=null,d.updateQueue=null,$l.current=th,f=x(E,R)}while(ys)}if($l.current=al,d=fi!==null&&fi.next!==null,ea=0,di=fi=Un=null,tf=!1,d)throw Error(o(300));return f}function Eo(){var f=ta!==0;return ta=0,f}function Qr(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?Un.memoizedState=di=f:di=di.next=f,di}function qr(){if(fi===null){var f=Un.alternate;f=f!==null?f.memoizedState:null}else f=fi.next;var d=di===null?Un.memoizedState:di.next;if(d!==null)di=d,fi=f;else{if(f===null)throw Error(o(310));fi=f,f={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},di===null?Un.memoizedState=di=f:di=di.next=f}return di}function vs(f,d){return typeof d=="function"?d(f):d}function tu(f){var d=qr(),x=d.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=f;var E=fi,R=E.baseQueue,I=x.pending;if(I!==null){if(R!==null){var Y=R.next;R.next=I.next,I.next=Y}E.baseQueue=R=I,x.pending=null}if(R!==null){I=R.next,E=E.baseState;var se=Y=null,Ce=null,Ke=I;do{var vt=Ke.lane;if((ea&vt)===vt)Ce!==null&&(Ce=Ce.next={lane:0,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),E=Ke.hasEagerState?Ke.eagerState:f(E,Ke.action);else{var Vt={lane:vt,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null};Ce===null?(se=Ce=Vt,Y=E):Ce=Ce.next=Vt,Un.lanes|=vt,_s|=vt}Ke=Ke.next}while(Ke!==null&&Ke!==I);Ce===null?Y=E:Ce.next=se,ki(E,d.memoizedState)||(pi=!0),d.memoizedState=E,d.baseState=Y,d.baseQueue=Ce,x.lastRenderedState=E}if(f=x.interleaved,f!==null){R=f;do I=R.lane,Un.lanes|=I,_s|=I,R=R.next;while(R!==f)}else R===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function nu(f){var d=qr(),x=d.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=f;var E=x.dispatch,R=x.pending,I=d.memoizedState;if(R!==null){x.pending=null;var Y=R=R.next;do I=f(I,Y.action),Y=Y.next;while(Y!==R);ki(I,d.memoizedState)||(pi=!0),d.memoizedState=I,d.baseQueue===null&&(d.baseState=I),x.lastRenderedState=I}return[I,E]}function Kd(){}function Yd(f,d){var x=Un,E=qr(),R=d(),I=!ki(E.memoizedState,R);if(I&&(E.memoizedState=R,pi=!0),E=E.queue,rl(Hs.bind(null,x,E,f),[f]),E.getSnapshot!==d||I||di!==null&&di.memoizedState.tag&1){if(x.flags|=2048,ru(9,qd.bind(null,x,E,R,d),void 0,null),Xn===null)throw Error(o(349));(ea&30)!==0||Qd(x,d,R)}return R}function Qd(f,d,x){f.flags|=16384,f={getSnapshot:d,value:x},d=Un.updateQueue,d===null?(d={lastEffect:null,stores:null},Un.updateQueue=d,d.stores=[f]):(x=d.stores,x===null?d.stores=[f]:x.push(f))}function qd(f,d,x,E){d.value=x,d.getSnapshot=E,rf(d)&&Di(f,1,-1)}function Hs(f,d,x){return x(function(){rf(d)&&Di(f,1,-1)})}function rf(f){var d=f.getSnapshot;f=f.value;try{var x=d();return!ki(f,x)}catch{return!0}}function iu(f){var d=Qr();return typeof f=="function"&&(f=f()),d.memoizedState=d.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:f},d.queue=f,f=f.dispatch=Gv.bind(null,Un,f),[d.memoizedState,f]}function ru(f,d,x,E){return f={tag:f,create:d,destroy:x,deps:E,next:null},d=Un.updateQueue,d===null?(d={lastEffect:null,stores:null},Un.updateQueue=d,d.lastEffect=f.next=f):(x=d.lastEffect,x===null?d.lastEffect=f.next=f:(E=x.next,x.next=f,f.next=E,d.lastEffect=f)),f}function hm(){return qr().memoizedState}function wo(f,d,x,E){var R=Qr();Un.flags|=f,R.memoizedState=ru(1|d,x,void 0,E===void 0?null:E)}function sf(f,d,x,E){var R=qr();E=E===void 0?null:E;var I=void 0;if(fi!==null){var Y=fi.memoizedState;if(I=Y.destroy,E!==null&&nf(E,Y.deps)){R.memoizedState=ru(d,x,I,E);return}}Un.flags|=f,R.memoizedState=ru(1|d,x,I,E)}function of(f,d){return wo(8390656,8,f,d)}function rl(f,d){return sf(2048,8,f,d)}function Cn(f,d){return sf(4,2,f,d)}function af(f,d){return sf(4,4,f,d)}function su(f,d){if(typeof d=="function")return f=f(),d(f),function(){d(null)};if(d!=null)return f=f(),d.current=f,function(){d.current=null}}function sl(f,d,x){return x=x!=null?x.concat([f]):null,sf(4,4,su.bind(null,d,f),x)}function lf(){}function uf(f,d){var x=qr();d=d===void 0?null:d;var E=x.memoizedState;return E!==null&&d!==null&&nf(d,E[1])?E[0]:(x.memoizedState=[f,d],f)}function ol(f,d){var x=qr();d=d===void 0?null:d;var E=x.memoizedState;return E!==null&&d!==null&&nf(d,E[1])?E[0]:(f=f(),x.memoizedState=[f,d],f)}function cf(f,d){var x=tn;tn=x!==0&&4>x?x:4,f(!0);var E=gr.transition;gr.transition={};try{f(!1),d()}finally{tn=x,gr.transition=E}}function na(){return qr().memoizedState}function pm(f,d,x){var E=ts(f);x={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null},mm(f)?Zd(d,x):(ou(f,d,x),x=mn(),f=Di(f,E,x),f!==null&&au(f,d,E))}function Gv(f,d,x){var E=ts(f),R={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null};if(mm(f))Zd(d,R);else{ou(f,d,R);var I=f.alternate;if(f.lanes===0&&(I===null||I.lanes===0)&&(I=d.lastRenderedReducer,I!==null))try{var Y=d.lastRenderedState,se=I(Y,x);if(R.hasEagerState=!0,R.eagerState=se,ki(se,Y))return}catch{}finally{}x=mn(),f=Di(f,E,x),f!==null&&au(f,d,E)}}function mm(f){var d=f.alternate;return f===Un||d!==null&&d===Un}function Zd(f,d){ys=tf=!0;var x=f.pending;x===null?d.next=d:(d.next=x.next,x.next=d),f.pending=d}function ou(f,d,x){Xn!==null&&(f.mode&1)!==0&&(Jt&2)===0?(f=d.interleaved,f===null?(x.next=x,Br===null?Br=[d]:Br.push(d)):(x.next=f.next,f.next=x),d.interleaved=x):(f=d.pending,f===null?x.next=x:(x.next=f.next,f.next=x),d.pending=x)}function au(f,d,x){if((x&4194240)!==0){var E=d.lanes;E&=f.pendingLanes,x|=E,d.lanes=x,ms(f,x)}}var al={readContext:$i,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},$d={readContext:$i,useCallback:function(f,d){return Qr().memoizedState=[f,d===void 0?null:d],f},useContext:$i,useEffect:of,useImperativeHandle:function(f,d,x){return x=x!=null?x.concat([f]):null,wo(4194308,4,su.bind(null,d,f),x)},useLayoutEffect:function(f,d){return wo(4194308,4,f,d)},useInsertionEffect:function(f,d){return wo(4,2,f,d)},useMemo:function(f,d){var x=Qr();return d=d===void 0?null:d,f=f(),x.memoizedState=[f,d],f},useReducer:function(f,d,x){var E=Qr();return d=x!==void 0?x(d):d,E.memoizedState=E.baseState=d,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:d},E.queue=f,f=f.dispatch=pm.bind(null,Un,f),[E.memoizedState,f]},useRef:function(f){var d=Qr();return f={current:f},d.memoizedState=f},useState:iu,useDebugValue:lf,useDeferredValue:function(f){var d=iu(f),x=d[0],E=d[1];return of(function(){var R=gr.transition;gr.transition={};try{E(f)}finally{gr.transition=R}},[f]),x},useTransition:function(){var f=iu(!1),d=f[0];return f=cf.bind(null,f[1]),Qr().memoizedState=f,[d,f]},useMutableSource:function(){},useSyncExternalStore:function(f,d,x){var E=Un,R=Qr();if(In){if(x===void 0)throw Error(o(407));x=x()}else{if(x=d(),Xn===null)throw Error(o(349));(ea&30)!==0||Qd(E,d,x)}R.memoizedState=x;var I={value:x,getSnapshot:d};return R.queue=I,of(Hs.bind(null,E,I,f),[f]),E.flags|=2048,ru(9,qd.bind(null,E,I,x,d),void 0,null),x},useId:function(){var f=Qr(),d=Xn.identifierPrefix;if(In){var x=Os,E=Us;x=(E&~(1<<32-on(E)-1)).toString(32)+x,d=":"+d+"R"+x,x=ta++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=eu++,d=":"+d+"r"+x.toString(32)+":";return f.memoizedState=d},unstable_isNewReconciler:!1},eh={readContext:$i,useCallback:uf,useContext:$i,useEffect:rl,useImperativeHandle:sl,useInsertionEffect:Cn,useLayoutEffect:af,useMemo:ol,useReducer:tu,useRef:hm,useState:function(){return tu(vs)},useDebugValue:lf,useDeferredValue:function(f){var d=tu(vs),x=d[0],E=d[1];return rl(function(){var R=gr.transition;gr.transition={};try{E(f)}finally{gr.transition=R}},[f]),x},useTransition:function(){var f=tu(vs)[0],d=qr().memoizedState;return[f,d]},useMutableSource:Kd,useSyncExternalStore:Yd,useId:na,unstable_isNewReconciler:!1},th={readContext:$i,useCallback:uf,useContext:$i,useEffect:rl,useImperativeHandle:sl,useInsertionEffect:Cn,useLayoutEffect:af,useMemo:ol,useReducer:nu,useRef:hm,useState:function(){return nu(vs)},useDebugValue:lf,useDeferredValue:function(f){var d=nu(vs),x=d[0],E=d[1];return rl(function(){var R=gr.transition;gr.transition={};try{E(f)}finally{gr.transition=R}},[f]),x},useTransition:function(){var f=nu(vs)[0],d=qr().memoizedState;return[f,d]},useMutableSource:Kd,useSyncExternalStore:Yd,useId:na,unstable_isNewReconciler:!1};function nh(f,d){try{var x="",E=d;do x+=Od(E),E=E.return;while(E);var R=x}catch(I){R=`
Error generating stack: `+I.message+`
`+I.stack}return{value:f,source:d,stack:R}}function ff(f,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var Vv=typeof WeakMap=="function"?WeakMap:Map;function gm(f,d,x){x=Ns(-1,x),x.tag=3,x.payload={element:null};var E=d.value;return x.callback=function(){hl||(hl=!0,Bn=E),ff(f,d)},x}function df(f,d,x){x=Ns(-1,x),x.tag=3;var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var R=d.value;x.payload=function(){return E(R)},x.callback=function(){ff(f,d)}}var I=f.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(x.callback=function(){ff(f,d),typeof E!="function"&&(es===null?es=new Set([this]):es.add(this));var Y=d.stack;this.componentDidCatch(d.value,{componentStack:Y!==null?Y:""})}),x}function zs(f,d,x){var E=f.pingCache;if(E===null){E=f.pingCache=new Vv;var R=new Set;E.set(d,R)}else R=E.get(d),R===void 0&&(R=new Set,E.set(d,R));R.has(x)||(R.add(x),f=_h.bind(null,f,d,x),d.then(f,f))}function ih(f){do{var d;if((d=f.tag===13)&&(d=f.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return f;f=f.return}while(f!==null);return null}function ia(f,d,x,E,R){return(f.mode&1)===0?(f===d?f.flags|=65536:(f.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=Ns(-1,1),d.tag=2,_o(x,d))),x.lanes|=1),f):(f.flags|=65536,f.lanes=R,f)}function ii(f){f.flags|=4}function ll(f,d){if(f!==null&&f.child===d.child)return!0;if((d.flags&16)!==0)return!1;for(f=d.child;f!==null;){if((f.flags&12854)!==0||(f.subtreeFlags&12854)!==0)return!1;f=f.sibling}return!0}var yr,ra,hf,pf;if(rt)yr=function(f,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)ae(f,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},ra=function(){},hf=function(f,d,x,E,R){if(f=f.memoizedProps,f!==E){var I=d.stateNode,Y=Yr(er.current);x=fe(I,x,f,E,R,Y),(d.updateQueue=x)&&ii(d)}},pf=function(f,d,x,E){x!==E&&ii(d)};else if(Fe){yr=function(f,d,x,E){for(var R=d.child;R!==null;){if(R.tag===5){var I=R.stateNode;x&&E&&(I=Qt(I,R.type,R.memoizedProps,R)),ae(f,I)}else if(R.tag===6)I=R.stateNode,x&&E&&(I=Vn(I,R.memoizedProps,R)),ae(f,I);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)I=R.child,I!==null&&(I.return=R),yr(f,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===d)break;for(;R.sibling===null;){if(R.return===null||R.return===d)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var To=function(f,d,x,E){for(var R=d.child;R!==null;){if(R.tag===5){var I=R.stateNode;x&&E&&(I=Qt(I,R.type,R.memoizedProps,R)),Pt(f,I)}else if(R.tag===6)I=R.stateNode,x&&E&&(I=Vn(I,R.memoizedProps,R)),Pt(f,I);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)I=R.child,I!==null&&(I.return=R),To(f,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===d)break;for(;R.sibling===null;){if(R.return===null||R.return===d)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};ra=function(f,d){var x=d.stateNode;if(!ll(f,d)){f=x.containerInfo;var E=nt(f);To(E,d,!1,!1),x.pendingChildren=E,ii(d),un(f,E)}},hf=function(f,d,x,E,R){var I=f.stateNode,Y=f.memoizedProps;if((f=ll(f,d))&&Y===E)d.stateNode=I;else{var se=d.stateNode,Ce=Yr(er.current),Ke=null;Y!==E&&(Ke=fe(se,x,Y,E,R,Ce)),f&&Ke===null?d.stateNode=I:(I=ut(I,Ke,x,Y,E,d,f,se),Le(I,x,E,R,Ce)&&ii(d),d.stateNode=I,f?ii(d):yr(I,d,!1,!1))}},pf=function(f,d,x,E){x!==E?(f=Yr(Zo.current),x=Yr(er.current),d.stateNode=Ne(E,f,x,d),ii(d)):d.stateNode=f.stateNode}}else ra=function(){},hf=function(){},pf=function(){};function Gs(f,d){if(!In)switch(f.tailMode){case"hidden":d=f.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?f.tail=null:x.sibling=null;break;case"collapsed":x=f.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?d||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function jn(f){var d=f.alternate!==null&&f.alternate.child===f.child,x=0,E=0;if(d)for(var R=f.child;R!==null;)x|=R.lanes|R.childLanes,E|=R.subtreeFlags&14680064,E|=R.flags&14680064,R.return=f,R=R.sibling;else for(R=f.child;R!==null;)x|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=f,R=R.sibling;return f.subtreeFlags|=E,f.childLanes=x,d}function mf(f,d,x){var E=d.pendingProps;switch(Wd(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(d),null;case 1:return cn(d.type)&&en(),jn(d),null;case 3:return E=d.stateNode,nl(),Ye(sn),Ye(rn),$o(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(f===null||f.child===null)&&(Zl(d)?ii(d):f===null||f.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Lr!==null&&(_u(Lr),Lr=null))),ra(f,d),jn(d),null;case 5:Jd(d),x=Yr(Zo.current);var R=d.type;if(f!==null&&d.stateNode!=null)hf(f,d,R,E,x),f.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!E){if(d.stateNode===null)throw Error(o(166));return jn(d),null}if(f=Yr(er.current),Zl(d)){if(!be)throw Error(o(175));f=Rc(d.stateNode,d.type,d.memoizedProps,x,f,d,!qa),d.updateQueue=f,f!==null&&ii(d)}else{var I=J(R,E,x,f,d);yr(I,d,!1,!1),d.stateNode=I,Le(I,R,E,x,f)&&ii(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return jn(d),null;case 6:if(f&&d.stateNode!=null)pf(f,d,f.memoizedProps,E);else{if(typeof E!="string"&&d.stateNode===null)throw Error(o(166));if(f=Yr(Zo.current),x=Yr(er.current),Zl(d)){if(!be)throw Error(o(176));if(f=d.stateNode,E=d.memoizedProps,(x=hs(f,E,d,!qa))&&(R=zi,R!==null))switch(I=(R.mode&1)!==0,R.tag){case 3:le(R.stateNode.containerInfo,f,E,I);break;case 5:Ae(R.type,R.memoizedProps,R.stateNode,f,E,I)}x&&ii(d)}else d.stateNode=Ne(E,f,x,d)}return jn(d),null;case 13:if(Ye(Nn),E=d.memoizedState,In&&_i!==null&&(d.mode&1)!==0&&(d.flags&128)===0){for(f=_i;f;)f=Jr(f);return Za(),d.flags|=98560,d}if(E!==null&&E.dehydrated!==null){if(E=Zl(d),f===null){if(!E)throw Error(o(318));if(!be)throw Error(o(344));if(f=d.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));Pc(f,d)}else Za(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;return jn(d),null}return Lr!==null&&(_u(Lr),Lr=null),(d.flags&128)!==0?(d.lanes=x,d):(E=E!==null,x=!1,f===null?Zl(d):x=f.memoizedState!==null,E&&!x&&(d.child.flags|=8192,(d.mode&1)!==0&&(f===null||(Nn.current&1)!==0?kn===0&&(kn=3):Sf())),d.updateQueue!==null&&(d.flags|=4),jn(d),null);case 4:return nl(),ra(f,d),f===null&&mt(d.stateNode.containerInfo),jn(d),null;case 10:return ql(d.type._context),jn(d),null;case 17:return cn(d.type)&&en(),jn(d),null;case 19:if(Ye(Nn),R=d.memoizedState,R===null)return jn(d),null;if(E=(d.flags&128)!==0,I=R.rendering,I===null)if(E)Gs(R,!1);else{if(kn!==0||f!==null&&(f.flags&128)!==0)for(f=d.child;f!==null;){if(I=ef(f),I!==null){for(d.flags|=128,Gs(R,!1),f=I.updateQueue,f!==null&&(d.updateQueue=f,d.flags|=4),d.subtreeFlags=0,f=x,E=d.child;E!==null;)x=E,R=f,x.flags&=14680066,I=x.alternate,I===null?(x.childLanes=0,x.lanes=R,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=I.childLanes,x.lanes=I.lanes,x.child=I.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=I.memoizedProps,x.memoizedState=I.memoizedState,x.updateQueue=I.updateQueue,x.type=I.type,R=I.dependencies,x.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),E=E.sibling;return Mt(Nn,Nn.current&1|2),d.child}f=f.sibling}R.tail!==null&&ni()>Ro&&(d.flags|=128,E=!0,Gs(R,!1),d.lanes=4194304)}else{if(!E)if(f=ef(I),f!==null){if(d.flags|=128,E=!0,f=f.updateQueue,f!==null&&(d.updateQueue=f,d.flags|=4),Gs(R,!0),R.tail===null&&R.tailMode==="hidden"&&!I.alternate&&!In)return jn(d),null}else 2*ni()-R.renderingStartTime>Ro&&x!==1073741824&&(d.flags|=128,E=!0,Gs(R,!1),d.lanes=4194304);R.isBackwards?(I.sibling=d.child,d.child=I):(f=R.last,f!==null?f.sibling=I:d.child=I,R.last=I)}return R.tail!==null?(d=R.tail,R.rendering=d,R.tail=d.sibling,R.renderingStartTime=ni(),d.sibling=null,f=Nn.current,Mt(Nn,E?f&1|2:f&1),d):(jn(d),null);case 22:case 23:return Au(),E=d.memoizedState!==null,f!==null&&f.memoizedState!==null!==E&&(d.flags|=8192),E&&(d.mode&1)!==0?(Ii&1073741824)!==0&&(jn(d),rt&&d.subtreeFlags&6&&(d.flags|=8192)):jn(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var rh=l.ReactCurrentOwner,pi=!1;function On(f,d,x,E){d.child=f===null?fm(d,null,x,E):ks(d,f.child,x,E)}function bn(f,d,x,E,R){x=x.render;var I=d.ref;return Ka(d,R),E=il(f,d,x,E,I,R),x=Eo(),f!==null&&!pi?(d.updateQueue=f.updateQueue,d.flags&=-2053,f.lanes&=~R,tr(f,d,R)):(In&&x&&Vd(d),d.flags|=1,On(f,d,E,R),d.child)}function En(f,d,x,E,R){if(f===null){var I=x.type;return typeof I=="function"&&!Ef(I)&&I.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=I,Vs(f,d,I,E,R)):(f=wf(x.type,null,E,d,d.mode,R),f.ref=d.ref,f.return=d,d.child=f)}if(I=f.child,(f.lanes&R)===0){var Y=I.memoizedProps;if(x=x.compare,x=x!==null?x:Kr,x(Y,E)&&f.ref===d.ref)return tr(f,d,R)}return d.flags|=1,f=Zs(I,E),f.ref=d.ref,f.return=d,d.child=f}function Vs(f,d,x,E,R){if(f!==null&&Kr(f.memoizedProps,E)&&f.ref===d.ref)if(pi=!1,(f.lanes&R)!==0)(f.flags&131072)!==0&&(pi=!0);else return d.lanes=f.lanes,tr(f,d,R);return Ws(f,d,x,E,R)}function Ai(f,d,x){var E=d.pendingProps,R=E.children,I=f!==null?f.memoizedState:null;if(E.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null},Mt(ha,Ii),Ii|=x;else if((x&1073741824)!==0)d.memoizedState={baseLanes:0,cachePool:null},E=I!==null?I.baseLanes:x,Mt(ha,Ii),Ii|=E;else return f=I!==null?I.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:f,cachePool:null},d.updateQueue=null,Mt(ha,Ii),Ii|=f,null;else I!==null?(E=I.baseLanes|x,d.memoizedState=null):E=x,Mt(ha,Ii),Ii|=E;return On(f,d,R,x),d.child}function Gi(f,d){var x=d.ref;(f===null&&x!==null||f!==null&&f.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function Ws(f,d,x,E,R){var I=cn(x)?qt:rn.current;return I=St(d,I),Ka(d,R),x=il(f,d,x,E,I,R),E=Eo(),f!==null&&!pi?(d.updateQueue=f.updateQueue,d.flags&=-2053,f.lanes&=~R,tr(f,d,R)):(In&&E&&Vd(d),d.flags|=1,On(f,d,x,R),d.child)}function sa(f,d,x,E,R){if(cn(x)){var I=!0;ui(d)}else I=!1;if(Ka(d,R),d.stateNode===null)f!==null&&(f.alternate=null,d.alternate=null,d.flags|=2),om(d,x,E),Gd(d,x,E,R),E=!0;else if(f===null){var Y=d.stateNode,se=d.memoizedProps;Y.props=se;var Ce=Y.context,Ke=x.contextType;typeof Ke=="object"&&Ke!==null?Ke=$i(Ke):(Ke=cn(x)?qt:rn.current,Ke=St(d,Ke));var vt=x.getDerivedStateFromProps,Vt=typeof vt=="function"||typeof Y.getSnapshotBeforeUpdate=="function";Vt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(se!==E||Ce!==Ke)&&am(d,Y,E,Ke),Ir=!1;var Dt=d.memoizedState;Y.state=Dt,Jc(d,E,Y,R),Ce=d.memoizedState,se!==E||Dt!==Ce||sn.current||Ir?(typeof vt=="function"&&(Hd(d,x,vt,E),Ce=d.memoizedState),(se=Ir||zd(d,x,se,E,Dt,Ce,Ke))?(Vt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(d.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=E,d.memoizedState=Ce),Y.props=E,Y.state=Ce,Y.context=Ke,E=se):(typeof Y.componentDidMount=="function"&&(d.flags|=4194308),E=!1)}else{Y=d.stateNode,kd(f,d),se=d.memoizedProps,Ke=d.type===d.elementType?se:Zi(d.type,se),Y.props=Ke,Vt=d.pendingProps,Dt=Y.context,Ce=x.contextType,typeof Ce=="object"&&Ce!==null?Ce=$i(Ce):(Ce=cn(x)?qt:rn.current,Ce=St(d,Ce));var Zt=x.getDerivedStateFromProps;(vt=typeof Zt=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(se!==Vt||Dt!==Ce)&&am(d,Y,E,Ce),Ir=!1,Dt=d.memoizedState,Y.state=Dt,Jc(d,E,Y,R);var ft=d.memoizedState;se!==Vt||Dt!==ft||sn.current||Ir?(typeof Zt=="function"&&(Hd(d,x,Zt,E),ft=d.memoizedState),(Ke=Ir||zd(d,x,Ke,E,Dt,ft,Ce)||!1)?(vt||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(E,ft,Ce),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(E,ft,Ce)),typeof Y.componentDidUpdate=="function"&&(d.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof Y.componentDidUpdate!="function"||se===f.memoizedProps&&Dt===f.memoizedState||(d.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||se===f.memoizedProps&&Dt===f.memoizedState||(d.flags|=1024),d.memoizedProps=E,d.memoizedState=ft),Y.props=E,Y.state=ft,Y.context=Ce,E=Ke):(typeof Y.componentDidUpdate!="function"||se===f.memoizedProps&&Dt===f.memoizedState||(d.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||se===f.memoizedProps&&Dt===f.memoizedState||(d.flags|=1024),E=!1)}return Bi(f,d,x,E,I,R)}function Bi(f,d,x,E,R,I){Gi(f,d);var Y=(d.flags&128)!==0;if(!E&&!Y)return R&&ps(d,x,!1),tr(f,d,I);E=d.stateNode,rh.current=d;var se=Y&&typeof x.getDerivedStateFromError!="function"?null:E.render();return d.flags|=1,f!==null&&Y?(d.child=ks(d,f.child,null,I),d.child=ks(d,null,se,I)):On(f,d,se,I),d.memoizedState=E.state,R&&ps(d,x,!0),d.child}function lu(f){var d=f.stateNode;d.pendingContext?vi(f,d.pendingContext,d.pendingContext!==d.context):d.context&&vi(f,d.context,!1),$c(f,d.containerInfo)}function sh(f,d,x,E,R){return Za(),Zc(R),d.flags|=256,On(f,d,x,E),d.child}var uu={dehydrated:null,treeContext:null,retryLane:0};function oa(f){return{baseLanes:f,cachePool:null}}function oh(f,d,x){var E=d.pendingProps,R=Nn.current,I=!1,Y=(d.flags&128)!==0,se;if((se=Y)||(se=f!==null&&f.memoizedState===null?!1:(R&2)!==0),se?(I=!0,d.flags&=-129):(f===null||f.memoizedState!==null)&&(R|=1),Mt(Nn,R&1),f===null)return So(d),f=d.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((d.mode&1)===0?d.lanes=1:Xr(f)?d.lanes=8:d.lanes=1073741824,null):(R=E.children,f=E.fallback,I?(E=d.mode,I=d.child,R={mode:"hidden",children:R},(E&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=R):I=Eu(R,E,0,null),f=va(f,E,x,null),I.return=d,f.return=d,I.sibling=f,d.child=I,d.child.memoizedState=oa(x),d.memoizedState=uu,f):Zr(d,R));if(R=f.memoizedState,R!==null){if(se=R.dehydrated,se!==null){if(Y)return d.flags&256?(d.flags&=-257,fu(f,d,x,Error(o(422)))):d.memoizedState!==null?(d.child=f.child,d.flags|=128,null):(I=E.fallback,R=d.mode,E=Eu({mode:"visible",children:E.children},R,0,null),I=va(I,R,x,null),I.flags|=2,E.return=d,I.return=d,E.sibling=I,d.child=E,(d.mode&1)!==0&&ks(d,f.child,null,x),d.child.memoizedState=oa(x),d.memoizedState=uu,I);if((d.mode&1)===0)d=fu(f,d,x,null);else if(Xr(se))d=fu(f,d,x,Error(o(419)));else if(E=(x&f.childLanes)!==0,pi||E){if(E=Xn,E!==null){switch(x&-x){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}E=(I&(E.suspendedLanes|x))!==0?0:I,E!==0&&E!==R.retryLane&&(R.retryLane=E,Di(f,E,-1))}Sf(),d=fu(f,d,x,Error(o(421)))}else ds(se)?(d.flags|=128,d.child=f.child,d=Am.bind(null,f),Go(se,d),d=null):(x=R.treeContext,be&&(_i=Xa(se),zi=d,In=!0,Lr=null,qa=!1,x!==null&&(Dr[pr++]=Us,Dr[pr++]=Os,Dr[pr++]=Yo,Us=x.id,Os=x.overflow,Yo=d)),d=Zr(d,d.pendingProps.children),d.flags|=4096);return d}return I?(E=gf(f,d,E.children,E.fallback,x),I=d.child,R=f.child.memoizedState,I.memoizedState=R===null?oa(x):{baseLanes:R.baseLanes|x,cachePool:null},I.childLanes=f.childLanes&~x,d.memoizedState=uu,E):(x=cu(f,d,E.children,x),d.memoizedState=null,x)}return I?(E=gf(f,d,E.children,E.fallback,x),I=d.child,R=f.child.memoizedState,I.memoizedState=R===null?oa(x):{baseLanes:R.baseLanes|x,cachePool:null},I.childLanes=f.childLanes&~x,d.memoizedState=uu,E):(x=cu(f,d,E.children,x),d.memoizedState=null,x)}function Zr(f,d){return d=Eu({mode:"visible",children:d},f.mode,0,null),d.return=f,f.child=d}function cu(f,d,x,E){var R=f.child;return f=R.sibling,x=Zs(R,{mode:"visible",children:x}),(d.mode&1)===0&&(x.lanes=E),x.return=d,x.sibling=null,f!==null&&(E=d.deletions,E===null?(d.deletions=[f],d.flags|=16):E.push(f)),d.child=x}function gf(f,d,x,E,R){var I=d.mode;f=f.child;var Y=f.sibling,se={mode:"hidden",children:x};return(I&1)===0&&d.child!==f?(x=d.child,x.childLanes=0,x.pendingProps=se,d.deletions=null):(x=Zs(f,se),x.subtreeFlags=f.subtreeFlags&14680064),Y!==null?E=Zs(Y,E):(E=va(E,I,R,null),E.flags|=2),E.return=d,x.return=d,x.sibling=E,d.child=x,E}function fu(f,d,x,E){return E!==null&&Zc(E),ks(d,f.child,null,x),f=Zr(d,d.pendingProps.children),f.flags|=2,d.memoizedState=null,f}function ym(f,d,x){f.lanes|=d;var E=f.alternate;E!==null&&(E.lanes|=d),Ko(f.return,d,x)}function xs(f,d,x,E,R){var I=f.memoizedState;I===null?f.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:R}:(I.isBackwards=d,I.rendering=null,I.renderingStartTime=0,I.last=E,I.tail=x,I.tailMode=R)}function aa(f,d,x){var E=d.pendingProps,R=E.revealOrder,I=E.tail;if(On(f,d,E.children,x),E=Nn.current,(E&2)!==0)E=E&1|2,d.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=d.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&ym(f,x,d);else if(f.tag===19)ym(f,x,d);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break e;for(;f.sibling===null;){if(f.return===null||f.return===d)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}E&=1}if(Mt(Nn,E),(d.mode&1)===0)d.memoizedState=null;else switch(R){case"forwards":for(x=d.child,R=null;x!==null;)f=x.alternate,f!==null&&ef(f)===null&&(R=x),x=x.sibling;x=R,x===null?(R=d.child,d.child=null):(R=x.sibling,x.sibling=null),xs(d,!1,R,x,I);break;case"backwards":for(x=null,R=d.child,d.child=null;R!==null;){if(f=R.alternate,f!==null&&ef(f)===null){d.child=R;break}f=R.sibling,R.sibling=x,x=R,R=f}xs(d,!0,x,null,I);break;case"together":xs(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function tr(f,d,x){if(f!==null&&(d.dependencies=f.dependencies),_s|=d.lanes,(x&d.childLanes)===0)return null;if(f!==null&&d.child!==f.child)throw Error(o(153));if(d.child!==null){for(f=d.child,x=Zs(f,f.pendingProps),d.child=x,x.return=d;f.sibling!==null;)f=f.sibling,x=x.sibling=Zs(f,f.pendingProps),x.return=d;x.sibling=null}return d.child}function yf(f,d,x){switch(d.tag){case 3:lu(d),Za();break;case 5:dm(d);break;case 1:cn(d.type)&&ui(d);break;case 4:$c(d,d.stateNode.containerInfo);break;case 10:Jo(d,d.type._context,d.memoizedProps.value);break;case 13:var E=d.memoizedState;if(E!==null)return E.dehydrated!==null?(Mt(Nn,Nn.current&1),d.flags|=128,null):(x&d.child.childLanes)!==0?oh(f,d,x):(Mt(Nn,Nn.current&1),f=tr(f,d,x),f!==null?f.sibling:null);Mt(Nn,Nn.current&1);break;case 19:if(E=(x&d.childLanes)!==0,(f.flags&128)!==0){if(E)return aa(f,d,x);d.flags|=128}var R=d.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),Mt(Nn,Nn.current),E)break;return null;case 22:case 23:return d.lanes=0,Ai(f,d,x)}return tr(f,d,x)}function vf(f,d){switch(Wd(d),d.tag){case 1:return cn(d.type)&&en(),f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 3:return nl(),Ye(sn),Ye(rn),$o(),f=d.flags,(f&65536)!==0&&(f&128)===0?(d.flags=f&-65537|128,d):null;case 5:return Jd(d),null;case 13:if(Ye(Nn),f=d.memoizedState,f!==null&&f.dehydrated!==null){if(d.alternate===null)throw Error(o(340));Za()}return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 19:return Ye(Nn),null;case 4:return nl(),null;case 10:return ql(d.type._context),null;case 22:case 23:return Au(),null;case 24:return null;default:return null}}var Vi=!1,mi=!1,la=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Fr(f,d){var x=f.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(E){ji(f,d,E)}else x.current=null}function js(f,d,x){try{x()}catch(E){ji(f,d,E)}}var ah=!1;function lh(f,d){for(re(f.containerInfo),$e=d;$e!==null;)if(f=$e,d=f.child,(f.subtreeFlags&1028)!==0&&d!==null)d.return=f,$e=d;else for(;$e!==null;){f=$e;try{var x=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,R=x.memoizedState,I=f.stateNode,Y=I.getSnapshotBeforeUpdate(f.elementType===f.type?E:Zi(f.type,E),R);I.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:rt&&Be(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(se){ji(f,f.return,se)}if(d=f.sibling,d!==null){d.return=f.return,$e=d;break}$e=f.return}return x=ah,ah=!1,x}function Xs(f,d,x){var E=d.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var R=E=E.next;do{if((R.tag&f)===f){var I=R.destroy;R.destroy=void 0,I!==void 0&&js(d,x,I)}R=R.next}while(R!==E)}}function Si(f,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&f)===f){var E=x.create;x.destroy=E()}x=x.next}while(x!==d)}}function Wi(f){var d=f.ref;if(d!==null){var x=f.stateNode;switch(f.tag){case 5:f=ge(x);break;default:f=x}typeof d=="function"?d(f):d.current=f}}function Pn(f,d,x){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(Jl,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(f=d.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var E=f=f.next;do{var R=E,I=R.destroy;R=R.tag,I!==void 0&&((R&2)!==0||(R&4)!==0)&&js(d,x,I),E=E.next}while(E!==f)}break;case 1:if(Fr(d,x),f=d.stateNode,typeof f.componentWillUnmount=="function")try{f.props=d.memoizedProps,f.state=d.memoizedState,f.componentWillUnmount()}catch(Y){ji(d,x,Y)}break;case 5:Fr(d,x);break;case 4:rt?fh(f,d,x):Fe&&Fe&&(d=d.stateNode.containerInfo,x=nt(d),Tn(d,x))}}function Nr(f,d,x){for(var E=d;;)if(Pn(f,E,x),E.child===null||rt&&E.tag===4){if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function uh(f){var d=f.alternate;d!==null&&(f.alternate=null,uh(d)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(d=f.stateNode,d!==null&&et(d)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function ch(f){return f.tag===5||f.tag===3||f.tag===4}function xf(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||ch(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function _f(f){if(rt){e:{for(var d=f.return;d!==null;){if(ch(d))break e;d=d.return}throw Error(o(160))}var x=d;switch(x.tag){case 5:d=x.stateNode,x.flags&32&&(Re(d),x.flags&=-33),x=xf(f),ul(f,x,d);break;case 3:case 4:d=x.stateNode.containerInfo,x=xf(f),Af(f,x,d);break;default:throw Error(o(161))}}}function Af(f,d,x){var E=f.tag;if(E===5||E===6)f=f.stateNode,d?Lt(x,f,d):ct(x,f);else if(E!==4&&(f=f.child,f!==null))for(Af(f,d,x),f=f.sibling;f!==null;)Af(f,d,x),f=f.sibling}function ul(f,d,x){var E=f.tag;if(E===5||E===6)f=f.stateNode,d?Bt(x,f,d):Ze(x,f);else if(E!==4&&(f=f.child,f!==null))for(ul(f,d,x),f=f.sibling;f!==null;)ul(f,d,x),f=f.sibling}function fh(f,d,x){for(var E=d,R=!1,I,Y;;){if(!R){R=E.return;e:for(;;){if(R===null)throw Error(o(160));switch(I=R.stateNode,R.tag){case 5:Y=!1;break e;case 3:I=I.containerInfo,Y=!0;break e;case 4:I=I.containerInfo,Y=!0;break e}R=R.return}R=!0}if(E.tag===5||E.tag===6)Nr(f,E,x),Y?ee(I,E.stateNode):ht(I,E.stateNode);else if(E.tag===18)Y?Fc(I,E.stateNode):Lc(I,E.stateNode);else if(E.tag===4){if(E.child!==null){I=E.stateNode.containerInfo,Y=!0,E.child.return=E,E=E.child;continue}}else if(Pn(f,E,x),E.child!==null){E.child.return=E,E=E.child;continue}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return,E.tag===4&&(R=!1)}E.sibling.return=E.return,E=E.sibling}}function Co(f,d){if(rt){switch(d.tag){case 0:case 11:case 14:case 15:Xs(3,d,d.return),Si(3,d),Xs(5,d,d.return);return;case 1:return;case 5:var x=d.stateNode;if(x!=null){var E=d.memoizedProps;f=f!==null?f.memoizedProps:E;var R=d.type,I=d.updateQueue;d.updateQueue=null,I!==null&&gt(x,I,R,f,E,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));x=d.memoizedProps,Gt(d.stateNode,f!==null?f.memoizedProps:x,x);return;case 3:be&&f!==null&&f.memoizedState.isDehydrated&&Ic(d.stateNode.containerInfo);return;case 12:return;case 13:cl(d);return;case 19:cl(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:Xs(3,d,d.return),Si(3,d),Xs(5,d,d.return);return;case 12:return;case 13:cl(d);return;case 19:cl(d);return;case 3:be&&f!==null&&f.memoizedState.isDehydrated&&Ic(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(Fe){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,Tn(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function cl(f){var d=f.updateQueue;if(d!==null){f.updateQueue=null;var x=f.stateNode;x===null&&(x=f.stateNode=new la),d.forEach(function(E){var R=Sm.bind(null,f,E);x.has(E)||(x.add(E),E.then(R,R))})}}function Wv(f,d){for($e=d;$e!==null;){d=$e;var x=d.deletions;if(x!==null)for(var E=0;E<x.length;E++){var R=x[E];try{var I=f;rt?fh(I,R,d):Nr(I,R,d);var Y=R.alternate;Y!==null&&(Y.return=null),R.return=null}catch(Tt){ji(R,d,Tt)}}if(x=d.child,(d.subtreeFlags&12854)!==0&&x!==null)x.return=d,$e=x;else for(;$e!==null;){d=$e;try{var se=d.flags;if(se&32&&rt&&Re(d.stateNode),se&512){var Ce=d.alternate;if(Ce!==null){var Ke=Ce.ref;Ke!==null&&(typeof Ke=="function"?Ke(null):Ke.current=null)}}if(se&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var vt=d.alternate;(vt===null||vt.memoizedState===null)&&(vu=ni())}break;case 22:var Vt=d.memoizedState!==null,Dt=d.alternate,Zt=Dt!==null&&Dt.memoizedState!==null;if(x=d,rt){e:if(E=x,R=Vt,I=null,rt)for(var ft=E;;){if(ft.tag===5){if(I===null){I=ft;var wi=ft.stateNode;R?tt(wi):Ve(ft.stateNode,ft.memoizedProps)}}else if(ft.tag===6){if(I===null){var Sr=ft.stateNode;R?Z(Sr):Me(Sr,ft.memoizedProps)}}else if((ft.tag!==22&&ft.tag!==23||ft.memoizedState===null||ft===E)&&ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===E)break;for(;ft.sibling===null;){if(ft.return===null||ft.return===E)break e;I===ft&&(I=null),ft=ft.return}I===ft&&(I=null),ft.sibling.return=ft.return,ft=ft.sibling}}if(Vt&&!Zt&&(x.mode&1)!==0){$e=x;for(var _e=x.child;_e!==null;){for(x=$e=_e;$e!==null;){E=$e;var ue=E.child;switch(E.tag){case 0:case 11:case 14:case 15:Xs(4,E,E.return);break;case 1:Fr(E,E.return);var Ee=E.stateNode;if(typeof Ee.componentWillUnmount=="function"){var ot=E.return;try{Ee.props=E.memoizedProps,Ee.state=E.memoizedState,Ee.componentWillUnmount()}catch(Tt){ji(E,ot,Tt)}}break;case 5:Fr(E,E.return);break;case 22:if(E.memoizedState!==null){hh(x);continue}}ue!==null?(ue.return=E,$e=ue):hh(x)}_e=_e.sibling}}}switch(se&4102){case 2:_f(d),d.flags&=-3;break;case 6:_f(d),d.flags&=-3,Co(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,Co(d.alternate,d);break;case 4:Co(d.alternate,d)}}catch(Tt){ji(d,d.return,Tt)}if(x=d.sibling,x!==null){x.return=d.return,$e=x;break}$e=d.return}}}function du(f,d,x){$e=f,hu(f)}function hu(f,d,x){for(var E=(f.mode&1)!==0;$e!==null;){var R=$e,I=R.child;if(R.tag===22&&E){var Y=R.memoizedState!==null||Vi;if(!Y){var se=R.alternate,Ce=se!==null&&se.memoizedState!==null||mi;se=Vi;var Ke=mi;if(Vi=Y,(mi=Ce)&&!Ke)for($e=R;$e!==null;)Y=$e,Ce=Y.child,Y.tag===22&&Y.memoizedState!==null?ua(R):Ce!==null?(Ce.return=Y,$e=Ce):ua(R);for(;I!==null;)$e=I,hu(I),I=I.sibling;$e=R,Vi=se,mi=Ke}dh(f)}else(R.subtreeFlags&8772)!==0&&I!==null?(I.return=R,$e=I):dh(f)}}function dh(f){for(;$e!==null;){var d=$e;if((d.flags&8772)!==0){var x=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:mi||Si(5,d);break;case 1:var E=d.stateNode;if(d.flags&4&&!mi)if(x===null)E.componentDidMount();else{var R=d.elementType===d.type?x.memoizedProps:Zi(d.type,x.memoizedProps);E.componentDidUpdate(R,x.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var I=d.updateQueue;I!==null&&rm(d,I,E);break;case 3:var Y=d.updateQueue;if(Y!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=ge(d.child.stateNode);break;case 1:x=d.child.stateNode}rm(d,Y,x)}break;case 5:var se=d.stateNode;x===null&&d.flags&4&&ze(se,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(be&&d.memoizedState===null){var Ce=d.alternate;if(Ce!==null){var Ke=Ce.memoizedState;if(Ke!==null){var vt=Ke.dehydrated;vt!==null&&Dc(vt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}mi||d.flags&512&&Wi(d)}catch(Vt){ji(d,d.return,Vt)}}if(d===f){$e=null;break}if(x=d.sibling,x!==null){x.return=d.return,$e=x;break}$e=d.return}}function hh(f){for(;$e!==null;){var d=$e;if(d===f){$e=null;break}var x=d.sibling;if(x!==null){x.return=d.return,$e=x;break}$e=d.return}}function ua(f){for(;$e!==null;){var d=$e;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{Si(4,d)}catch(Ce){ji(d,x,Ce)}break;case 1:var E=d.stateNode;if(typeof E.componentDidMount=="function"){var R=d.return;try{E.componentDidMount()}catch(Ce){ji(d,R,Ce)}}var I=d.return;try{Wi(d)}catch(Ce){ji(d,I,Ce)}break;case 5:var Y=d.return;try{Wi(d)}catch(Ce){ji(d,Y,Ce)}}}catch(Ce){ji(d,d.return,Ce)}if(d===f){$e=null;break}var se=d.sibling;if(se!==null){se.return=d.return,$e=se;break}$e=d.return}}var pu=0,ca=1,fa=2,Js=3,fl=4;if(typeof Symbol=="function"&&Symbol.for){var da=Symbol.for;pu=da("selector.component"),ca=da("selector.has_pseudo_class"),fa=da("selector.role"),Js=da("selector.test_id"),fl=da("selector.text")}function mu(f){var d=K(f);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(f=X(f),f===null)throw Error(o(362));return f.stateNode.current}function gu(f,d){switch(d.$$typeof){case pu:if(f.type===d.value)return!0;break;case ca:e:{d=d.value,f=[f,0];for(var x=0;x<f.length;){var E=f[x++],R=f[x++],I=d[R];if(E.tag!==5||!Te(E)){for(;I!=null&&gu(E,I);)R++,I=d[R];if(R===d.length){d=!0;break e}else for(E=E.child;E!==null;)f.push(E,R),E=E.sibling}}d=!1}return d;case fa:if(f.tag===5&&Ue(f.stateNode,d.value))return!0;break;case fl:if((f.tag===5||f.tag===6)&&(f=pe(f),f!==null&&0<=f.indexOf(d.value)))return!0;break;case Js:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function bo(f){switch(f.$$typeof){case pu:return"<"+(k(f.value)||"Unknown")+">";case ca:return":has("+(bo(f)||"")+")";case fa:return'[role="'+f.value+'"]';case fl:return'"'+f.value+'"';case Js:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function vr(f,d){var x=[];f=[f,0];for(var E=0;E<f.length;){var R=f[E++],I=f[E++],Y=d[I];if(R.tag!==5||!Te(R)){for(;Y!=null&&gu(R,Y);)I++,Y=d[I];if(I===d.length)x.push(R);else for(R=R.child;R!==null;)f.push(R,I),R=R.sibling}}return x}function Ks(f,d){if(!qe)throw Error(o(363));f=mu(f),f=vr(f,d),d=[],f=Array.from(f);for(var x=0;x<f.length;){var E=f[x++];if(E.tag===5)Te(E)||d.push(E.stateNode);else for(E=E.child;E!==null;)f.push(E),E=E.sibling}return d}var ph=Math.ceil,yu=l.ReactCurrentDispatcher,$r=l.ReactCurrentOwner,Sn=l.ReactCurrentBatchConfig,Jt=0,Xn=null,Mn=null,Dn=0,Ii=0,ha=Rt(0),kn=0,dl=null,_s=0,xr=0,pa=0,Ys=null,qn=null,vu=0,Ro=1/0;function ma(){Ro=ni()+500}var hl=!1,Bn=null,es=null,pl=!1,As=null,ga=0,ya=0,Qs=null,Rn=-1,Hn=0;function mn(){return(Jt&6)!==0?ni():Rn!==-1?Rn:Rn=ni()}function ts(f){return(f.mode&1)===0?1:(Jt&2)!==0&&Dn!==0?Dn&-Dn:im.transition!==null?(Hn===0&&(f=Wn,Wn<<=1,(Wn&4194240)===0&&(Wn=64),Hn=f),Hn):(f=tn,f!==0?f:ke())}function Di(f,d,x){if(50<ya)throw ya=0,Qs=null,Error(o(185));var E=Po(f,d);return E===null?null:(Vo(E,d,x),((Jt&2)===0||E!==Xn)&&(E===Xn&&((Jt&2)===0&&(xr|=d),kn===4&&Ei(E,Dn)),nr(E,x),d===1&&Jt===0&&(f.mode&1)===0&&(ma(),zc&&Pr())),E)}function Po(f,d){f.lanes|=d;var x=f.alternate;for(x!==null&&(x.lanes|=d),x=f,f=f.return;f!==null;)f.childLanes|=d,x=f.alternate,x!==null&&(x.childLanes|=d),x=f,f=f.return;return x.tag===3?x.stateNode:null}function nr(f,d){var x=f.callbackNode;nm(f,d);var E=Xl(f,f===Xn?Dn:0);if(E===0)x!==null&&Ja(x),f.callbackNode=null,f.callbackPriority=0;else if(d=E&-E,f.callbackPriority!==d){if(x!=null&&Ja(x),d===1)f.tag===0?Vc(_r.bind(null,f)):Gc(_r.bind(null,f)),Xe?wt(function(){Jt===0&&Pr()}):Wo(jo,Pr),x=null;else{switch(Ls(E)){case 1:x=jo;break;case 4:x=zv;break;case 16:x=kc;break;case 536870912:x=Hc;break;default:x=kc}x=Mf(x,Mi.bind(null,f))}f.callbackPriority=d,f.callbackNode=x}}function Mi(f,d){if(Rn=-1,Hn=0,(Jt&6)!==0)throw Error(o(327));var x=f.callbackNode;if(Ss()&&f.callbackNode!==x)return null;var E=Xl(f,f===Xn?Dn:0);if(E===0)return null;if((E&30)!==0||(E&f.expiredLanes)!==0||d)d=Su(f,E);else{d=E;var R=Jt;Jt|=2;var I=yh();(Xn!==f||Dn!==d)&&(ma(),qs(f,d));do try{xm();break}catch(se){gh(f,se)}while(!0);Hi(),yu.current=I,Jt=R,Mn!==null?d=0:(Xn=null,Dn=0,d=kn)}if(d!==0){if(d===2&&(R=Nc(f),R!==0&&(E=R,d=xu(f,R))),d===1)throw x=dl,qs(f,0),Ei(f,E),nr(f,ni()),x;if(d===6)Ei(f,E);else{if(R=f.current.alternate,(E&30)===0&&!mh(R)&&(d=Su(f,E),d===2&&(I=Nc(f),I!==0&&(E=I,d=xu(f,I))),d===1))throw x=dl,qs(f,0),Ei(f,E),nr(f,ni()),x;switch(f.finishedWork=R,f.finishedLanes=E,d){case 0:case 1:throw Error(o(345));case 2:ns(f,qn);break;case 3:if(Ei(f,E),(E&130023424)===E&&(d=vu+500-ni(),10<d)){if(Xl(f,0)!==0)break;if(R=f.suspendedLanes,(R&E)!==E){mn(),f.pingedLanes|=f.suspendedLanes&R;break}f.timeoutHandle=De(ns.bind(null,f,qn),d);break}ns(f,qn);break;case 4:if(Ei(f,E),(E&4194240)===E)break;for(d=f.eventTimes,R=-1;0<E;){var Y=31-on(E);I=1<<Y,Y=d[Y],Y>R&&(R=Y),E&=~I}if(E=R,E=ni()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*ph(E/1960))-E,10<E){f.timeoutHandle=De(ns.bind(null,f,qn),E);break}ns(f,qn);break;case 5:ns(f,qn);break;default:throw Error(o(329))}}}return nr(f,ni()),f.callbackNode===x?Mi.bind(null,f):null}function xu(f,d){var x=Ys;return f.current.memoizedState.isDehydrated&&(qs(f,d).flags|=256),f=Su(f,d),f!==2&&(d=qn,qn=x,d!==null&&_u(d)),f}function _u(f){qn===null?qn=f:qn.push.apply(qn,f)}function mh(f){for(var d=f;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var E=0;E<x.length;E++){var R=x[E],I=R.getSnapshot;R=R.value;try{if(!ki(I(),R))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ei(f,d){for(d&=~pa,d&=~xr,f.suspendedLanes|=d,f.pingedLanes&=~d,f=f.expirationTimes;0<d;){var x=31-on(d),E=1<<x;f[x]=-1,d&=~E}}function _r(f){if((Jt&6)!==0)throw Error(o(327));Ss();var d=Xl(f,0);if((d&1)===0)return nr(f,ni()),null;var x=Su(f,d);if(f.tag!==0&&x===2){var E=Nc(f);E!==0&&(d=E,x=xu(f,E))}if(x===1)throw x=dl,qs(f,0),Ei(f,d),nr(f,ni()),x;if(x===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=d,ns(f,qn),nr(f,ni()),null}function ml(f){As!==null&&As.tag===0&&(Jt&6)===0&&Ss();var d=Jt;Jt|=1;var x=Sn.transition,E=tn;try{if(Sn.transition=null,tn=1,f)return f()}finally{tn=E,Sn.transition=x,Jt=d,(Jt&6)===0&&Pr()}}function Au(){Ii=ha.current,Ye(ha)}function qs(f,d){f.finishedWork=null,f.finishedLanes=0;var x=f.timeoutHandle;if(x!==xt&&(f.timeoutHandle=xt,je(x)),Mn!==null)for(x=Mn.return;x!==null;){var E=x;switch(Wd(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&en();break;case 3:nl(),Ye(sn),Ye(rn),$o();break;case 5:Jd(E);break;case 4:nl();break;case 13:Ye(Nn);break;case 19:Ye(Nn);break;case 10:ql(E.type._context);break;case 22:case 23:Au()}x=x.return}if(Xn=f,Mn=f=Zs(f.current,null),Dn=Ii=d,kn=0,dl=null,pa=xr=_s=0,qn=Ys=null,Br!==null){for(d=0;d<Br.length;d++)if(x=Br[d],E=x.interleaved,E!==null){x.interleaved=null;var R=E.next,I=x.pending;if(I!==null){var Y=I.next;I.next=R,E.next=Y}x.pending=E}Br=null}return f}function gh(f,d){do{var x=Mn;try{if(Hi(),$l.current=al,tf){for(var E=Un.memoizedState;E!==null;){var R=E.queue;R!==null&&(R.pending=null),E=E.next}tf=!1}if(ea=0,di=fi=Un=null,ys=!1,ta=0,$r.current=null,x===null||x.return===null){kn=1,dl=d,Mn=null;break}e:{var I=f,Y=x.return,se=x,Ce=d;if(d=Dn,se.flags|=32768,Ce!==null&&typeof Ce=="object"&&typeof Ce.then=="function"){var Ke=Ce,vt=se,Vt=vt.tag;if((vt.mode&1)===0&&(Vt===0||Vt===11||Vt===15)){var Dt=vt.alternate;Dt?(vt.updateQueue=Dt.updateQueue,vt.memoizedState=Dt.memoizedState,vt.lanes=Dt.lanes):(vt.updateQueue=null,vt.memoizedState=null)}var Zt=ih(Y);if(Zt!==null){Zt.flags&=-257,ia(Zt,Y,se,I,d),Zt.mode&1&&zs(I,Ke,d),d=Zt,Ce=Ke;var ft=d.updateQueue;if(ft===null){var wi=new Set;wi.add(Ce),d.updateQueue=wi}else ft.add(Ce);break e}else{if((d&1)===0){zs(I,Ke,d),Sf();break e}Ce=Error(o(426))}}else if(In&&se.mode&1){var Sr=ih(Y);if(Sr!==null){(Sr.flags&65536)===0&&(Sr.flags|=256),ia(Sr,Y,se,I,d),Zc(Ce);break e}}I=Ce,kn!==4&&(kn=2),Ys===null?Ys=[I]:Ys.push(I),Ce=nh(Ce,se),se=Y;do{switch(se.tag){case 3:se.flags|=65536,d&=-d,se.lanes|=d;var _e=gm(se,Ce,d);Xc(se,_e);break e;case 1:I=Ce;var ue=se.type,Ee=se.stateNode;if((se.flags&128)===0&&(typeof ue.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(es===null||!es.has(Ee)))){se.flags|=65536,d&=-d,se.lanes|=d;var ot=df(se,I,d);Xc(se,ot);break e}}se=se.return}while(se!==null)}xh(x)}catch(Tt){d=Tt,Mn===x&&x!==null&&(Mn=x=x.return);continue}break}while(!0)}function yh(){var f=yu.current;return yu.current=al,f===null?al:f}function Sf(){(kn===0||kn===3||kn===2)&&(kn=4),Xn===null||(_s&268435455)===0&&(xr&268435455)===0||Ei(Xn,Dn)}function Su(f,d){var x=Jt;Jt|=2;var E=yh();Xn===f&&Dn===d||qs(f,d);do try{vm();break}catch(R){gh(f,R)}while(!0);if(Hi(),Jt=x,yu.current=E,Mn!==null)throw Error(o(261));return Xn=null,Dn=0,kn}function vm(){for(;Mn!==null;)vh(Mn)}function xm(){for(;Mn!==null&&!xo();)vh(Mn)}function vh(f){var d=Sh(f.alternate,f,Ii);f.memoizedProps=f.pendingProps,d===null?xh(f):Mn=d,$r.current=null}function xh(f){var d=f;do{var x=d.alternate;if(f=d.return,(d.flags&32768)===0){if(x=mf(x,d,Ii),x!==null){Mn=x;return}}else{if(x=vf(x,d),x!==null){x.flags&=32767,Mn=x;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{kn=6,Mn=null;return}}if(d=d.sibling,d!==null){Mn=d;return}Mn=d=f}while(d!==null);kn===0&&(kn=5)}function ns(f,d){var x=tn,E=Sn.transition;try{Sn.transition=null,tn=1,_m(f,d,x)}finally{Sn.transition=E,tn=x}return null}function _m(f,d,x){do Ss();while(As!==null);if((Jt&6)!==0)throw Error(o(327));var E=f.finishedWork,R=f.finishedLanes;if(E===null)return null;if(f.finishedWork=null,f.finishedLanes=0,E===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var I=E.lanes|E.childLanes;if(Oc(f,I),f===Xn&&(Mn=Xn=null,Dn=0),(E.subtreeFlags&2064)===0&&(E.flags&2064)===0||pl||(pl=!0,Mf(kc,function(){return Ss(),null})),I=(E.flags&15990)!==0,(E.subtreeFlags&15990)!==0||I){I=Sn.transition,Sn.transition=null;var Y=tn;tn=1;var se=Jt;Jt|=4,$r.current=null,lh(f,E),Wv(f,E),$(f.containerInfo),f.current=E,du(E),Hv(),Jt=se,tn=Y,Sn.transition=I}else f.current=E;if(pl&&(pl=!1,As=f,ga=R),I=f.pendingLanes,I===0&&(es=null),Kl(E.stateNode),nr(f,ni()),d!==null)for(x=f.onRecoverableError,E=0;E<d.length;E++)x(d[E]);if(hl)throw hl=!1,f=Bn,Bn=null,f;return(ga&1)!==0&&f.tag!==0&&Ss(),I=f.pendingLanes,(I&1)!==0?f===Qs?ya++:(ya=0,Qs=f):ya=0,Pr(),null}function Ss(){if(As!==null){var f=Ls(ga),d=Sn.transition,x=tn;try{if(Sn.transition=null,tn=16>f?16:f,As===null)var E=!1;else{if(f=As,As=null,ga=0,(Jt&6)!==0)throw Error(o(331));var R=Jt;for(Jt|=4,$e=f.current;$e!==null;){var I=$e,Y=I.child;if(($e.flags&16)!==0){var se=I.deletions;if(se!==null){for(var Ce=0;Ce<se.length;Ce++){var Ke=se[Ce];for($e=Ke;$e!==null;){var vt=$e;switch(vt.tag){case 0:case 11:case 15:Xs(8,vt,I)}var Vt=vt.child;if(Vt!==null)Vt.return=vt,$e=Vt;else for(;$e!==null;){vt=$e;var Dt=vt.sibling,Zt=vt.return;if(uh(vt),vt===Ke){$e=null;break}if(Dt!==null){Dt.return=Zt,$e=Dt;break}$e=Zt}}}var ft=I.alternate;if(ft!==null){var wi=ft.child;if(wi!==null){ft.child=null;do{var Sr=wi.sibling;wi.sibling=null,wi=Sr}while(wi!==null)}}$e=I}}if((I.subtreeFlags&2064)!==0&&Y!==null)Y.return=I,$e=Y;else e:for(;$e!==null;){if(I=$e,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:Xs(9,I,I.return)}var _e=I.sibling;if(_e!==null){_e.return=I.return,$e=_e;break e}$e=I.return}}var ue=f.current;for($e=ue;$e!==null;){Y=$e;var Ee=Y.child;if((Y.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=Y,$e=Ee;else e:for(Y=ue;$e!==null;){if(se=$e,(se.flags&2048)!==0)try{switch(se.tag){case 0:case 11:case 15:Si(9,se)}}catch(Tt){ji(se,se.return,Tt)}if(se===Y){$e=null;break e}var ot=se.sibling;if(ot!==null){ot.return=se.return,$e=ot;break e}$e=se.return}}if(Jt=R,Pr(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(Jl,f)}catch{}E=!0}return E}finally{tn=x,Sn.transition=d}}return!1}function Mu(f,d,x){d=nh(x,d),d=gm(f,d,1),_o(f,d),d=mn(),f=Po(f,1),f!==null&&(Vo(f,1,d),nr(f,d))}function ji(f,d,x){if(f.tag===3)Mu(f,f,x);else for(;d!==null;){if(d.tag===3){Mu(d,f,x);break}else if(d.tag===1){var E=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(es===null||!es.has(E))){f=nh(x,f),f=df(d,f,1),_o(d,f),f=mn(),d=Po(d,1),d!==null&&(Vo(d,1,f),nr(d,f));break}}d=d.return}}function _h(f,d,x){var E=f.pingCache;E!==null&&E.delete(d),d=mn(),f.pingedLanes|=f.suspendedLanes&x,Xn===f&&(Dn&x)===x&&(kn===4||kn===3&&(Dn&130023424)===Dn&&500>ni()-vu?qs(f,0):pa|=x),nr(f,d)}function Ah(f,d){d===0&&((f.mode&1)===0?d=1:(d=an,an<<=1,(an&130023424)===0&&(an=4194304)));var x=mn();f=Po(f,d),f!==null&&(Vo(f,d,x),nr(f,x))}function Am(f){var d=f.memoizedState,x=0;d!==null&&(x=d.retryLane),Ah(f,x)}function Sm(f,d){var x=0;switch(f.tag){case 13:var E=f.stateNode,R=f.memoizedState;R!==null&&(x=R.retryLane);break;case 19:E=f.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(d),Ah(f,x)}var Sh;Sh=function(f,d,x){if(f!==null)if(f.memoizedProps!==d.pendingProps||sn.current)pi=!0;else{if((f.lanes&x)===0&&(d.flags&128)===0)return pi=!1,yf(f,d,x);pi=(f.flags&131072)!==0}else pi=!1,In&&(d.flags&1048576)!==0&&lm(d,Qc,d.index);switch(d.lanes=0,d.tag){case 2:var E=d.type;f!==null&&(f.alternate=null,d.alternate=null,d.flags|=2),f=d.pendingProps;var R=St(d,rn.current);Ka(d,x),R=il(null,d,E,f,R,x);var I=Eo();return d.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,cn(E)?(I=!0,ui(d)):I=!1,d.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,Ya(d),R.updater=Kc,d.stateNode=R,R._reactInternals=d,Gd(d,E,f,x),d=Bi(null,d,E,!0,I,x)):(d.tag=0,In&&I&&Vd(d),On(null,d,R,x),d=d.child),d;case 16:E=d.elementType;e:{switch(f!==null&&(f.alternate=null,d.alternate=null,d.flags|=2),f=d.pendingProps,R=E._init,E=R(E._payload),d.type=E,R=d.tag=jv(E),f=Zi(E,f),R){case 0:d=Ws(null,d,E,f,x);break e;case 1:d=sa(null,d,E,f,x);break e;case 11:d=bn(null,d,E,f,x);break e;case 14:d=En(null,d,E,Zi(E.type,f),x);break e}throw Error(o(306,E,""))}return d;case 0:return E=d.type,R=d.pendingProps,R=d.elementType===E?R:Zi(E,R),Ws(f,d,E,R,x);case 1:return E=d.type,R=d.pendingProps,R=d.elementType===E?R:Zi(E,R),sa(f,d,E,R,x);case 3:e:{if(lu(d),f===null)throw Error(o(387));E=d.pendingProps,I=d.memoizedState,R=I.element,kd(f,d),Jc(d,E,null,x);var Y=d.memoizedState;if(E=Y.element,be&&I.isDehydrated)if(I={element:E,isDehydrated:!1,cache:Y.cache,transitions:Y.transitions},d.updateQueue.baseState=I,d.memoizedState=I,d.flags&256){R=Error(o(423)),d=sh(f,d,E,x,R);break e}else if(E!==R){R=Error(o(424)),d=sh(f,d,E,x,R);break e}else for(be&&(_i=bc(d.stateNode.containerInfo),zi=d,In=!0,Lr=null,qa=!1),x=fm(d,null,E,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Za(),E===R){d=tr(f,d,x);break e}On(f,d,E,x)}d=d.child}return d;case 5:return dm(d),f===null&&So(d),E=d.type,R=d.pendingProps,I=f!==null?f.memoizedProps:null,Y=R.children,we(E,R)?Y=null:I!==null&&we(E,I)&&(d.flags|=32),Gi(f,d),On(f,d,Y,x),d.child;case 6:return f===null&&So(d),null;case 13:return oh(f,d,x);case 4:return $c(d,d.stateNode.containerInfo),E=d.pendingProps,f===null?d.child=ks(d,null,E,x):On(f,d,E,x),d.child;case 11:return E=d.type,R=d.pendingProps,R=d.elementType===E?R:Zi(E,R),bn(f,d,E,R,x);case 7:return On(f,d,d.pendingProps,x),d.child;case 8:return On(f,d,d.pendingProps.children,x),d.child;case 12:return On(f,d,d.pendingProps.children,x),d.child;case 10:e:{if(E=d.type._context,R=d.pendingProps,I=d.memoizedProps,Y=R.value,Jo(d,E,Y),I!==null)if(ki(I.value,Y)){if(I.children===R.children&&!sn.current){d=tr(f,d,x);break e}}else for(I=d.child,I!==null&&(I.return=d);I!==null;){var se=I.dependencies;if(se!==null){Y=I.child;for(var Ce=se.firstContext;Ce!==null;){if(Ce.context===E){if(I.tag===1){Ce=Ns(-1,x&-x),Ce.tag=2;var Ke=I.updateQueue;if(Ke!==null){Ke=Ke.shared;var vt=Ke.pending;vt===null?Ce.next=Ce:(Ce.next=vt.next,vt.next=Ce),Ke.pending=Ce}}I.lanes|=x,Ce=I.alternate,Ce!==null&&(Ce.lanes|=x),Ko(I.return,x,d),se.lanes|=x;break}Ce=Ce.next}}else if(I.tag===10)Y=I.type===d.type?null:I.child;else if(I.tag===18){if(Y=I.return,Y===null)throw Error(o(341));Y.lanes|=x,se=Y.alternate,se!==null&&(se.lanes|=x),Ko(Y,x,d),Y=I.sibling}else Y=I.child;if(Y!==null)Y.return=I;else for(Y=I;Y!==null;){if(Y===d){Y=null;break}if(I=Y.sibling,I!==null){I.return=Y.return,Y=I;break}Y=Y.return}I=Y}On(f,d,R.children,x),d=d.child}return d;case 9:return R=d.type,E=d.pendingProps.children,Ka(d,x),R=$i(R),E=E(R),d.flags|=1,On(f,d,E,x),d.child;case 14:return E=d.type,R=Zi(E,d.pendingProps),R=Zi(E.type,R),En(f,d,E,R,x);case 15:return Vs(f,d,d.type,d.pendingProps,x);case 17:return E=d.type,R=d.pendingProps,R=d.elementType===E?R:Zi(E,R),f!==null&&(f.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,cn(E)?(f=!0,ui(d)):f=!1,Ka(d,x),om(d,E,R),Gd(d,E,R,x),Bi(null,d,E,!0,f,x);case 19:return aa(f,d,x);case 22:return Ai(f,d,x)}throw Error(o(156,d.tag))};function Mf(f,d){return Wo(f,d)}function Mm(f,d,x,E){this.tag=f,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(f,d,x,E){return new Mm(f,d,x,E)}function Ef(f){return f=f.prototype,!(!f||!f.isReactComponent)}function jv(f){if(typeof f=="function")return Ef(f)?1:0;if(f!=null){if(f=f.$$typeof,f===w)return 11;if(f===C)return 14}return 2}function Zs(f,d){var x=f.alternate;return x===null?(x=Ar(f.tag,d,f.key,f.mode),x.elementType=f.elementType,x.type=f.type,x.stateNode=f.stateNode,x.alternate=f,f.alternate=x):(x.pendingProps=d,x.type=f.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=f.flags&14680064,x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,d=f.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=f.sibling,x.index=f.index,x.ref=f.ref,x}function wf(f,d,x,E,R,I){var Y=2;if(E=f,typeof f=="function")Ef(f)&&(Y=1);else if(typeof f=="string")Y=5;else e:switch(f){case p:return va(x.children,R,I,d);case g:Y=8,R|=8;break;case y:return f=Ar(12,x,d,R|2),f.elementType=y,f.lanes=I,f;case M:return f=Ar(13,x,d,R),f.elementType=M,f.lanes=I,f;case A:return f=Ar(19,x,d,R),f.elementType=A,f.lanes=I,f;case B:return Eu(x,R,I,d);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case v:Y=10;break e;case S:Y=9;break e;case w:Y=11;break e;case C:Y=14;break e;case b:Y=16,E=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return d=Ar(Y,x,d,R),d.elementType=f,d.type=E,d.lanes=I,d}function va(f,d,x,E){return f=Ar(7,f,E,d),f.lanes=x,f}function Eu(f,d,x,E){return f=Ar(22,f,E,d),f.elementType=B,f.lanes=x,f.stateNode={},f}function Tf(f,d,x){return f=Ar(6,f,null,d),f.lanes=x,f}function Cf(f,d,x){return d=Ar(4,f.children!==null?f.children:[],f.key,d),d.lanes=x,d.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},d}function bf(f,d,x,E,R){this.tag=d,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=xt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uc(0),this.expirationTimes=Uc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uc(0),this.identifierPrefix=E,this.onRecoverableError=R,be&&(this.mutableSourceEagerHydrationData=null)}function Em(f,d,x,E,R,I,Y,se,Ce){return f=new bf(f,d,x,se,Ce),d===1?(d=1,I===!0&&(d|=8)):d=0,I=Ar(3,null,null,d),f.current=I,I.stateNode=f,I.memoizedState={element:E,isDehydrated:x,cache:null,transitions:null},Ya(I),f}function wm(f){if(!f)return kt;f=f._reactInternals;e:{if(L(f)!==f||f.tag!==1)throw Error(o(170));var d=f;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(cn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(f.tag===1){var x=f.type;if(cn(x))return Ds(f,x,d)}return d}function Tm(f){var d=f._reactInternals;if(d===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=oe(d),f===null?null:f.stateNode}function Ur(f,d){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var x=f.retryLane;f.retryLane=x!==0&&x<d?x:d}}function wu(f,d){Ur(f,d),(f=f.alternate)&&Ur(f,d)}function Rf(f){return f=oe(f),f===null?null:f.stateNode}function Cm(){return null}return t.attemptContinuousHydration=function(f){if(f.tag===13){var d=mn();Di(f,134217728,d),wu(f,134217728)}},t.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var d=mn(),x=ts(f);Di(f,x,d),wu(f,x)}},t.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var d=f.stateNode;if(d.current.memoizedState.isDehydrated){var x=qi(d.pendingLanes);x!==0&&(ms(d,x|1),nr(d,ni()),(Jt&6)===0&&(ma(),Pr()))}break;case 13:var E=mn();ml(function(){return Di(f,1,E)}),wu(f,1)}},t.batchedUpdates=function(f,d){var x=Jt;Jt|=1;try{return f(d)}finally{Jt=x,Jt===0&&(ma(),zc&&Pr())}},t.createComponentSelector=function(f){return{$$typeof:pu,value:f}},t.createContainer=function(f,d,x,E,R,I,Y){return Em(f,d,!1,null,x,E,R,I,Y)},t.createHasPseudoClassSelector=function(f){return{$$typeof:ca,value:f}},t.createHydrationContainer=function(f,d,x,E,R,I,Y,se,Ce){return f=Em(x,E,!0,f,R,I,Y,se,Ce),f.context=wm(null),x=f.current,E=mn(),R=ts(x),I=Ns(E,R),I.callback=d??null,_o(x,I),f.current.lanes=R,Vo(f,R,E),nr(f,E),f},t.createPortal=function(f,d,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:E==null?null:""+E,children:f,containerInfo:d,implementation:x}},t.createRoleSelector=function(f){return{$$typeof:fa,value:f}},t.createTestNameSelector=function(f){return{$$typeof:Js,value:f}},t.createTextSelector=function(f){return{$$typeof:fl,value:f}},t.deferredUpdates=function(f){var d=tn,x=Sn.transition;try{return Sn.transition=null,tn=16,f()}finally{tn=d,Sn.transition=x}},t.discreteUpdates=function(f,d,x,E,R){var I=tn,Y=Sn.transition;try{return Sn.transition=null,tn=1,f(d,x,E,R)}finally{tn=I,Sn.transition=Y,Jt===0&&ma()}},t.findAllNodes=Ks,t.findBoundingRects=function(f,d){if(!qe)throw Error(o(363));d=Ks(f,d),f=[];for(var x=0;x<d.length;x++)f.push(H(d[x]));for(d=f.length-1;0<d;d--){x=f[d];for(var E=x.x,R=E+x.width,I=x.y,Y=I+x.height,se=d-1;0<=se;se--)if(d!==se){var Ce=f[se],Ke=Ce.x,vt=Ke+Ce.width,Vt=Ce.y,Dt=Vt+Ce.height;if(E>=Ke&&I>=Vt&&R<=vt&&Y<=Dt){f.splice(d,1);break}else if(E!==Ke||x.width!==Ce.width||Dt<I||Vt>Y){if(!(I!==Vt||x.height!==Ce.height||vt<E||Ke>R)){Ke>E&&(Ce.width+=Ke-E,Ce.x=E),vt<R&&(Ce.width=R-Ke),f.splice(d,1);break}}else{Vt>I&&(Ce.height+=Vt-I,Ce.y=I),Dt<Y&&(Ce.height=Y-Vt),f.splice(d,1);break}}}return f},t.findHostInstance=Tm,t.findHostInstanceWithNoPortals=function(f){return f=V(f),f=f!==null?ye(f):null,f===null?null:f.stateNode},t.findHostInstanceWithWarning=function(f){return Tm(f)},t.flushControlled=function(f){var d=Jt;Jt|=1;var x=Sn.transition,E=tn;try{Sn.transition=null,tn=1,f()}finally{tn=E,Sn.transition=x,Jt=d,Jt===0&&(ma(),Pr())}},t.flushPassiveEffects=Ss,t.flushSync=ml,t.focusWithin=function(f,d){if(!qe)throw Error(o(363));for(f=mu(f),d=vr(f,d),d=Array.from(d),f=0;f<d.length;){var x=d[f++];if(!Te(x)){if(x.tag===5&&Pe(x.stateNode))return!0;for(x=x.child;x!==null;)d.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return tn},t.getFindAllNodesFailureDescription=function(f,d){if(!qe)throw Error(o(363));var x=0,E=[];f=[mu(f),0];for(var R=0;R<f.length;){var I=f[R++],Y=f[R++],se=d[Y];if((I.tag!==5||!Te(I))&&(gu(I,se)&&(E.push(bo(se)),Y++,Y>x&&(x=Y)),Y<d.length))for(I=I.child;I!==null;)f.push(I,Y),I=I.sibling}if(x<d.length){for(f=[];x<d.length;x++)f.push(bo(d[x]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},t.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return ge(f.child.stateNode);default:return f.child.stateNode}},t.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:Rf,findFiberByHostInstance:f.findFiberByHostInstance||Cm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)f=!0;else{try{Jl=d.inject(f),gs=d}catch{}f=!!d.checkDCE}}return f},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(f,d,x,E){if(!qe)throw Error(o(363));f=Ks(f,d);var R=st(f,x,E).disconnect;return{disconnect:function(){R()}}},t.registerMutableSourceForHydration=function(f,d){var x=d._getVersion;x=x(d._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[d,x]:f.mutableSourceEagerHydrationData.push(d,x)},t.runWithPriority=function(f,d){var x=tn;try{return tn=f,d()}finally{tn=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(f,d,x,E){var R=d.current,I=mn(),Y=ts(R);return x=wm(x),d.context===null?d.context=x:d.pendingContext=x,d=Ns(I,Y),d.payload={element:f},E=E===void 0?null:E,E!==null&&(d.callback=E),_o(R,d),f=Di(R,Y,I),f!==null&&jc(f,R,Y),Y},t}),wx}var Qw;function IG(){return Qw||(Qw=1,Sx.exports=BG()),Sx.exports}var DG=IG();const LG=hP(DG);var qw=dR();const eS={},FG=i=>void Object.assign(eS,i);function NG(i,e){function t(p,{args:g=[],attach:y,...v},S){let w=`${p[0].toUpperCase()}${p.slice(1)}`,M;if(p==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const A=v.object;M=td(A,{type:p,root:S,attach:y,primitive:!0})}else{const A=eS[w];if(!A)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(g))throw new Error("R3F: The args prop must be an array!");M=td(new A(...g),{type:p,root:S,attach:y,memoizedProps:{args:g}})}return M.__r3f.attach===void 0&&(M.isBufferGeometry?M.__r3f.attach="geometry":M.isMaterial&&(M.__r3f.attach="material")),w!=="inject"&&bx(M,v),M}function n(p,g){let y=!1;if(g){var v,S;(v=g.__r3f)!=null&&v.attach?Cx(p,g,g.__r3f.attach):g.isObject3D&&p.isObject3D&&(p.add(g),y=!0),y||(S=p.__r3f)==null||S.objects.push(g),g.__r3f||td(g,{}),g.__r3f.parent=p,__(g),nd(g)}}function r(p,g,y){let v=!1;if(g){var S,w;if((S=g.__r3f)!=null&&S.attach)Cx(p,g,g.__r3f.attach);else if(g.isObject3D&&p.isObject3D){g.parent=p,g.dispatchEvent({type:"added"}),p.dispatchEvent({type:"childadded",child:g});const M=p.children.filter(C=>C!==g),A=M.indexOf(y);p.children=[...M.slice(0,A),g,...M.slice(A)],v=!0}v||(w=p.__r3f)==null||w.objects.push(g),g.__r3f||td(g,{}),g.__r3f.parent=p,__(g),nd(g)}}function s(p,g,y=!1){p&&[...p].forEach(v=>o(g,v,y))}function o(p,g,y){if(g){var v,S,w;if(g.__r3f&&(g.__r3f.parent=null),(v=p.__r3f)!=null&&v.objects&&(p.__r3f.objects=p.__r3f.objects.filter(B=>B!==g)),(S=g.__r3f)!=null&&S.attach)n1(p,g,g.__r3f.attach);else if(g.isObject3D&&p.isObject3D){var M;p.remove(g),(M=g.__r3f)!=null&&M.root&&WG(iy(g),g)}const C=(w=g.__r3f)==null?void 0:w.primitive,b=!C&&(y===void 0?g.dispose!==null:y);if(!C){var A;s((A=g.__r3f)==null?void 0:A.objects,g,b),s(g.children,g,b)}if(delete g.__r3f,b&&g.dispose&&g.type!=="Scene"){const B=()=>{try{g.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?qw.unstable_scheduleCallback(qw.unstable_IdlePriority,B):B()}nd(p)}}function l(p,g,y,v){var S;const w=(S=p.__r3f)==null?void 0:S.parent;if(!w)return;const M=t(g,y,p.__r3f.root);if(p.children){for(const A of p.children)A.__r3f&&n(M,A);p.children=p.children.filter(A=>!A.__r3f)}p.__r3f.objects.forEach(A=>n(M,A)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||o(w,p),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),n(w,M),M.raycast&&M.__r3f.eventCount&&iy(M).getState().internal.interaction.push(M),[v,v.alternate].forEach(A=>{A!==null&&(A.stateNode=M,A.ref&&(typeof A.ref=="function"?A.ref(M):A.ref.current=M))})}const c=()=>{};return{reconciler:LG({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,g)=>{if(!g)return;const y=p.getState().scene;y.__r3f&&(y.__r3f.root=p,n(y,g))},removeChildFromContainer:(p,g)=>{g&&o(p.getState().scene,g)},insertInContainerBefore:(p,g,y)=>{if(!g||!y)return;const v=p.getState().scene;v.__r3f&&r(v,g,y)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var g;return!!((g=p==null?void 0:p.__r3f)!=null?g:{}).handlers},prepareUpdate(p,g,y,v){var S;if(((S=p==null?void 0:p.__r3f)!=null?S:{}).primitive&&v.object&&v.object!==p)return[!0];{const{args:M=[],children:A,...C}=v,{args:b=[],children:B,...N}=y;if(!Array.isArray(M))throw new Error("R3F: the args prop must be an array!");if(M.some((k,z)=>k!==b[z]))return[!0];const F=xR(p,C,N,!0);return F.changes.length?[!1,F]:null}},commitUpdate(p,[g,y],v,S,w,M){g?l(p,v,w,M):bx(p,y)},commitMount(p,g,y,v){var S;const w=(S=p.__r3f)!=null?S:{};p.raycast&&w.handlers&&w.eventCount&&iy(p).getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>td(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var g;const{attach:y,parent:v}=(g=p.__r3f)!=null?g:{};y&&v&&n1(v,p,y),p.isObject3D&&(p.visible=!1),nd(p)},unhideInstance(p,g){var y;const{attach:v,parent:S}=(y=p.__r3f)!=null?y:{};v&&S&&Cx(S,p,v),(p.isObject3D&&g.visible==null||g.visible)&&(p.visible=!0),nd(p)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():fd.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Ln.fun(performance.now)?performance.now:Ln.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Ln.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Ln.fun(clearTimeout)?clearTimeout:void 0}),applyProps:bx}}var Zw,$w;const Tx=i=>"colorSpace"in i||"outputColorSpace"in i,hR=()=>{var i;return(i=eS.ColorManagement)!=null?i:null},pR=i=>i&&i.isOrthographicCamera,UG=i=>i&&i.hasOwnProperty("current"),Zp=typeof window<"u"&&((Zw=window.document)!=null&&Zw.createElement||(($w=window.navigator)==null?void 0:$w.product)==="ReactNative")?q.useLayoutEffect:q.useEffect;function mR(i){const e=q.useRef(i);return Zp(()=>void(e.current=i),[i]),e}function OG({set:i}){return Zp(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class gR extends q.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}gR.getDerivedStateFromError=()=>({error:!0});const yR="__default",e1=new Map,kG=i=>i&&!!i.memoized&&!!i.changes;function vR(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}const Xh=i=>{var e;return(e=i.__r3f)==null?void 0:e.root.getState()};function iy(i){let e=i.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Ln={obj:i=>i===Object(i)&&!Ln.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Ln.str(i)||Ln.num(i)||Ln.boo(i))return i===e;const s=Ln.obj(i);if(s&&n==="reference")return i===e;const o=Ln.arr(i);if(o&&t==="reference")return i===e;if((o||s)&&i===e)return!0;let l;for(l in i)if(!(l in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(l in r?e:i)if(!Ln.equ(i[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:i)if(i[l]!==e[l])return!1;if(Ln.und(l)){if(o&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function HG(i){const e={nodes:{},materials:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function zG(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const e in i)e.dispose==null||e.dispose(),delete i[e]}function td(i,e){const t=i;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},i}function x_(i,e){let t=i;if(e.includes("-")){const n=e.split("-"),r=n.pop();return t=n.reduce((s,o)=>s[o],i),{target:t,key:r}}else return{target:t,key:e}}const t1=/-\d+$/;function Cx(i,e,t){if(Ln.str(t)){if(t1.test(t)){const s=t.replace(t1,""),{target:o,key:l}=x_(i,s);Array.isArray(o[l])||(o[l]=[])}const{target:n,key:r}=x_(i,t);e.__r3f.previousAttach=n[r],n[r]=e}else e.__r3f.previousAttach=t(i,e)}function n1(i,e,t){var n,r;if(Ln.str(t)){const{target:s,key:o}=x_(i,t),l=e.__r3f.previousAttach;l===void 0?delete s[o]:s[o]=l}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(i,e);(r=e.__r3f)==null||delete r.previousAttach}function xR(i,{children:e,key:t,ref:n,...r},{children:s,key:o,ref:l,...c}={},h=!1){const p=i.__r3f,g=Object.entries(r),y=[];if(h){const S=Object.keys(c);for(let w=0;w<S.length;w++)r.hasOwnProperty(S[w])||g.unshift([S[w],yR+"remove"])}g.forEach(([S,w])=>{var M;if((M=i.__r3f)!=null&&M.primitive&&S==="object"||Ln.equ(w,c[S]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(S))return y.push([S,w,!0,[]]);let A=[];S.includes("-")&&(A=S.split("-")),y.push([S,w,!1,A]);for(const C in r){const b=r[C];C.startsWith(`${S}-`)&&y.push([C,b,!1,C.split("-")])}});const v={...r};return p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.args&&(v.args=p.memoizedProps.args),p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.attach&&(v.attach=p.memoizedProps.attach),{memoized:v,changes:y}}function bx(i,e){var t;const n=i.__r3f,r=n==null?void 0:n.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:l}=kG(e)?e:xR(i,e),c=n==null?void 0:n.eventCount;i.__r3f&&(i.__r3f.memoizedProps=o);for(let y=0;y<l.length;y++){let[v,S,w,M]=l[y];if(Tx(i)){const B="srgb",N="srgb-linear";v==="encoding"?(v="colorSpace",S=S===3001?B:N):v==="outputEncoding"&&(v="outputColorSpace",S=S===3001?B:N)}let A=i,C=A[v];if(M.length&&(C=M.reduce((b,B)=>b[B],i),!(C&&C.set))){const[b,...B]=M.reverse();A=B.reverse().reduce((N,F)=>N[F],i),v=b}if(S===yR+"remove")if(A.constructor){let b=e1.get(A.constructor);b||(b=new A.constructor,e1.set(A.constructor,b)),S=b[v]}else S=0;if(w&&n)S?n.handlers[v]=S:delete n.handlers[v],n.eventCount=Object.keys(n.handlers).length;else if(C&&C.set&&(C.copy||C instanceof fc)){if(Array.isArray(S))C.fromArray?C.fromArray(S):C.set(...S);else if(C.copy&&S&&S.constructor&&C.constructor===S.constructor)C.copy(S);else if(S!==void 0){var h;const b=(h=C)==null?void 0:h.isColor;!b&&C.setScalar?C.setScalar(S):C instanceof fc&&S instanceof fc?C.mask=S.mask:C.set(S),!hR()&&s&&!s.linear&&b&&C.convertSRGBToLinear()}}else{var p;if(A[v]=S,(p=A[v])!=null&&p.isTexture&&A[v].format===cr&&A[v].type===fo&&s){const b=A[v];Tx(b)&&Tx(s.gl)?b.colorSpace=s.gl.outputColorSpace:b.encoding=s.gl.outputEncoding}}nd(i)}if(n&&n.parent&&i.raycast&&c!==n.eventCount){const y=iy(i).getState().internal,v=y.interaction.indexOf(i);v>-1&&y.interaction.splice(v,1),n.eventCount&&y.interaction.push(i)}return!(l.length===1&&l[0][0]==="onUpdate")&&l.length&&(t=i.__r3f)!=null&&t.parent&&__(i),i}function nd(i){var e,t;const n=(e=i.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function __(i){i.onUpdate==null||i.onUpdate(i)}function GG(i,e){i.manual||(pR(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function Wg(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function VG(){var i;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return fd.DefaultEventPriority;switch((i=e.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return fd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return fd.ContinuousEventPriority;default:return fd.DefaultEventPriority}}function _R(i,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(i.delete(n),r.target.releasePointerCapture(n)))}function WG(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{_R(t.capturedMap,e,n,r)})}function jG(i){function e(c){const{internal:h}=i.getState(),p=c.offsetX-h.initialClick[0],g=c.offsetY-h.initialClick[1];return Math.round(Math.sqrt(p*p+g*g))}function t(c){return c.filter(h=>["Move","Over","Enter","Out","Leave"].some(p=>{var g;return(g=h.__r3f)==null?void 0:g.handlers["onPointer"+p]}))}function n(c,h){const p=i.getState(),g=new Set,y=[],v=h?h(p.internal.interaction):p.internal.interaction;for(let A=0;A<v.length;A++){const C=Xh(v[A]);C&&(C.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(c,p);function S(A){const C=Xh(A);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var b;C.events.compute==null||C.events.compute(c,C,(b=C.previousRoot)==null?void 0:b.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(A,!0):[]}let w=v.flatMap(S).sort((A,C)=>{const b=Xh(A.object),B=Xh(C.object);return!b||!B?A.distance-C.distance:B.events.priority-b.events.priority||A.distance-C.distance}).filter(A=>{const C=Wg(A);return g.has(C)?!1:(g.add(C),!0)});p.events.filter&&(w=p.events.filter(w,p));for(const A of w){let C=A.object;for(;C;){var M;(M=C.__r3f)!=null&&M.eventCount&&y.push({...A,eventObject:C}),C=C.parent}}if("pointerId"in c&&p.internal.capturedMap.has(c.pointerId))for(let A of p.internal.capturedMap.get(c.pointerId).values())g.has(Wg(A.intersection))||y.push(A.intersection);return y}function r(c,h,p,g){const y=i.getState();if(c.length){const v={stopped:!1};for(const S of c){const w=Xh(S.object)||y,{raycaster:M,pointer:A,camera:C,internal:b}=w,B=new j(A.x,A.y,0).unproject(C),N=D=>{var V,oe;return(V=(oe=b.capturedMap.get(D))==null?void 0:oe.has(S.eventObject))!=null?V:!1},F=D=>{const V={intersection:S,target:h.target};b.capturedMap.has(D)?b.capturedMap.get(D).set(S.eventObject,V):b.capturedMap.set(D,new Map([[S.eventObject,V]])),h.target.setPointerCapture(D)},k=D=>{const V=b.capturedMap.get(D);V&&_R(b.capturedMap,S.eventObject,V,D)};let z={};for(let D in h){let V=h[D];typeof V!="function"&&(z[D]=V)}let L={...S,...z,pointer:A,intersections:c,stopped:v.stopped,delta:p,unprojectedPoint:B,ray:M.ray,camera:C,stopPropagation(){const D="pointerId"in h&&b.capturedMap.get(h.pointerId);if((!D||D.has(S.eventObject))&&(L.stopped=v.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(V=>V.eventObject===S.eventObject))){const V=c.slice(0,c.indexOf(S));s([...V,S])}},target:{hasPointerCapture:N,setPointerCapture:F,releasePointerCapture:k},currentTarget:{hasPointerCapture:N,setPointerCapture:F,releasePointerCapture:k},nativeEvent:h};if(g(L),v.stopped===!0)break}}return c}function s(c){const{internal:h}=i.getState();for(const p of h.hovered.values())if(!c.length||!c.find(g=>g.object===p.object&&g.index===p.index&&g.instanceId===p.instanceId)){const y=p.eventObject.__r3f,v=y==null?void 0:y.handlers;if(h.hovered.delete(Wg(p)),y!=null&&y.eventCount){const S={...p,intersections:c};v.onPointerOut==null||v.onPointerOut(S),v.onPointerLeave==null||v.onPointerLeave(S)}}}function o(c,h){for(let p=0;p<h.length;p++){const g=h[p].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return h=>{const{internal:p}=i.getState();"pointerId"in h&&p.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(h.pointerId)&&(p.capturedMap.delete(h.pointerId),s([]))})}}return function(p){const{onPointerMissed:g,internal:y}=i.getState();y.lastEvent.current=p;const v=c==="onPointerMove",S=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",M=n(p,v?t:void 0),A=S?e(p):0;c==="onPointerDown"&&(y.initialClick=[p.offsetX,p.offsetY],y.initialHits=M.map(b=>b.eventObject)),S&&!M.length&&A<=2&&(o(p,y.interaction),g&&g(p)),v&&s(M);function C(b){const B=b.eventObject,N=B.__r3f,F=N==null?void 0:N.handlers;if(N!=null&&N.eventCount)if(v){if(F.onPointerOver||F.onPointerEnter||F.onPointerOut||F.onPointerLeave){const k=Wg(b),z=y.hovered.get(k);z?z.stopped&&b.stopPropagation():(y.hovered.set(k,b),F.onPointerOver==null||F.onPointerOver(b),F.onPointerEnter==null||F.onPointerEnter(b))}F.onPointerMove==null||F.onPointerMove(b)}else{const k=F[c];k?(!S||y.initialHits.includes(B))&&(o(p,y.interaction.filter(z=>!y.initialHits.includes(z))),k(b)):S&&y.initialHits.includes(B)&&o(p,y.interaction.filter(z=>!y.initialHits.includes(z)))}}r(M,p,A,C)}}return{handlePointer:l}}const AR=i=>!!(i!=null&&i.render),SR=q.createContext(null),XG=(i,e)=>{const t=wG((l,c)=>{const h=new j,p=new j,g=new j;function y(A=c().camera,C=p,b=c().size){const{width:B,height:N,top:F,left:k}=b,z=B/N;C.isVector3?g.copy(C):g.set(...C);const L=A.getWorldPosition(h).distanceTo(g);if(pR(A))return{width:B/A.zoom,height:N/A.zoom,top:F,left:k,factor:1,distance:L,aspect:z};{const D=A.fov*Math.PI/180,V=2*Math.tan(D/2)*L,oe=V*(B/N);return{width:oe,height:V,top:F,left:k,factor:B/oe,distance:L,aspect:z}}}let v;const S=A=>l(C=>({performance:{...C.performance,current:A}})),w=new Ie;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(A=1)=>i(c(),A),advance:(A,C)=>e(A,C,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new KA,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const A=c();v&&clearTimeout(v),A.performance.current!==A.performance.min&&S(A.performance.min),v=setTimeout(()=>S(c().performance.max),A.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:A=>l(C=>({...C,events:{...C.events,...A}})),setSize:(A,C,b,B,N)=>{const F=c().camera,k={width:A,height:C,top:B||0,left:N||0,updateStyle:b};l(z=>({size:k,viewport:{...z.viewport,...y(F,p,k)}}))},setDpr:A=>l(C=>{const b=vR(A);return{viewport:{...C.viewport,dpr:b,initialDpr:C.viewport.initialDpr||b}}}),setFrameloop:(A="always")=>{const C=c().clock;C.stop(),C.elapsedTime=0,A!=="never"&&(C.start(),C.elapsedTime=0),l(()=>({frameloop:A}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:q.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(A,C,b)=>{const B=c().internal;return B.priority=B.priority+(C>0?1:0),B.subscribers.push({ref:A,priority:C,store:b}),B.subscribers=B.subscribers.sort((N,F)=>N.priority-F.priority),()=>{const N=c().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(C>0?1:0),N.subscribers=N.subscribers.filter(F=>F.ref!==A))}}}}}),n=t.getState();let r=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:h,gl:p,set:g}=t.getState();if(c.width!==r.width||c.height!==r.height||h.dpr!==s){var y;r=c,s=h.dpr,GG(l,c),p.setPixelRatio(h.dpr);const v=(y=c.updateStyle)!=null?y:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(c.width,c.height,v)}l!==o&&(o=l,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>i(l)),t};let jg,JG=new Set,KG=new Set,YG=new Set;function Rx(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Jh(i,e){switch(i){case"before":return Rx(JG,e);case"after":return Rx(KG,e);case"tail":return Rx(YG,e)}}let Px,Bx;function Ix(i,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),Px=e.internal.subscribers,jg=0;jg<Px.length;jg++)Bx=Px[jg],Bx.ref.current(Bx.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function QG(i){let e=!1,t=!1,n,r,s;function o(h){r=requestAnimationFrame(o),e=!0,n=0,Jh("before",h),t=!0;for(const g of i.values()){var p;s=g.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((p=s.gl.xr)!=null&&p.isPresenting)&&(n+=Ix(h,s))}if(t=!1,Jh("after",h),n===0)return Jh("tail",h),e=!1,cancelAnimationFrame(r)}function l(h,p=1){var g;if(!h)return i.forEach(y=>l(y.store.getState(),p));(g=h.gl.xr)!=null&&g.isPresenting||!h.internal.active||h.frameloop==="never"||(p>1?h.internal.frames=Math.min(60,h.internal.frames+p):t?h.internal.frames=2:h.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function c(h,p=!0,g,y){if(p&&Jh("before",h),g)Ix(h,g,y);else for(const v of i.values())Ix(h,v.store.getState());p&&Jh("after",h)}return{loop:o,invalidate:l,advance:c}}function MR(){const i=q.useContext(SR);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Ca(i=t=>t,e){return MR()(i,e)}function tS(i,e=0){const t=MR(),n=t.getState().internal.subscribe,r=mR(i);return Zp(()=>n(r,e,t),[e,n,t]),null}const i1=new WeakMap;function ER(i,e){return function(t,...n){let r=i1.get(t);return r||(r=new t,i1.set(t,r)),i&&i(r),Promise.all(n.map(s=>new Promise((o,l)=>r.load(s,c=>{c.scene&&Object.assign(c,HG(c.scene)),o(c)},e,c=>l(new Error(`Could not load ${s}: ${c==null?void 0:c.message}`))))))}}function $p(i,e,t,n){const r=Array.isArray(e)?e:[e],s=CG(ER(t,n),[i,...r],{equal:Ln.equ});return Array.isArray(e)?s:s[0]}$p.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return bG(ER(t),[i,...n])};$p.clear=function(i,e){const t=Array.isArray(e)?e:[e];return RG([i,...t])};const wd=new Map,{invalidate:r1,advance:s1}=QG(wd),{reconciler:qy,applyProps:Zf}=NG(wd,VG),$f={objects:"shallow",strict:!1},qG=(i,e)=>{const t=typeof i=="function"?i(e):i;return AR(t)?t:new uR({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...i})};function ZG(i,e){const t=typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement;if(e){const{width:n,height:r,top:s,left:o,updateStyle:l=t}=e;return{width:n,height:r,top:s,left:o,updateStyle:l}}else if(typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:n,height:r,top:s,left:o}=i.parentElement.getBoundingClientRect();return{width:n,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function $G(i){const e=wd.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=n||XG(r1,s1),o=t||qy.createContainer(s,fd.ConcurrentRoot,null,!1,null,"",r,null);e||wd.set(i,{fiber:o,store:s});let l,c=!1,h;return{configure(p={}){let{gl:g,size:y,scene:v,events:S,onCreated:w,shadows:M=!1,linear:A=!1,flat:C=!1,legacy:b=!1,orthographic:B=!1,frameloop:N="always",dpr:F=[1,2],performance:k,raycaster:z,camera:L,onPointerMissed:D}=p,V=s.getState(),oe=V.gl;V.gl||V.set({gl:oe=qG(g,i)});let ie=V.raycaster;ie||V.set({raycaster:ie=new tR});const{params:ye,...xe}=z||{};if(Ln.equ(xe,ie,$f)||Zf(ie,{...xe}),Ln.equ(ye,ie.params,$f)||Zf(ie,{params:{...ie.params,...ye}}),!V.camera||V.camera===h&&!Ln.equ(h,L,$f)){h=L;const $=L instanceof Vp,J=$?L:B?new co(0,0,0,0,.1,1e3):new zn(75,0,.1,1e3);$||(J.position.z=5,L&&(Zf(J,L),("aspect"in L||"left"in L||"right"in L||"bottom"in L||"top"in L)&&(J.manual=!0,J.updateProjectionMatrix())),!V.camera&&!(L!=null&&L.rotation)&&J.lookAt(0,0,0)),V.set({camera:J}),ie.camera=J}if(!V.scene){let $;v!=null&&v.isScene?$=v:($=new EA,v&&Zf($,v)),V.set({scene:td($)})}if(!V.xr){var ge;const $=(Le,fe)=>{const we=s.getState();we.frameloop!=="never"&&s1(Le,!0,we,fe)},J=()=>{const Le=s.getState();Le.gl.xr.enabled=Le.gl.xr.isPresenting,Le.gl.xr.setAnimationLoop(Le.gl.xr.isPresenting?$:null),Le.gl.xr.isPresenting||r1(Le)},ae={connect(){const Le=s.getState().gl;Le.xr.addEventListener("sessionstart",J),Le.xr.addEventListener("sessionend",J)},disconnect(){const Le=s.getState().gl;Le.xr.removeEventListener("sessionstart",J),Le.xr.removeEventListener("sessionend",J)}};typeof((ge=oe.xr)==null?void 0:ge.addEventListener)=="function"&&ae.connect(),V.set({xr:ae})}if(oe.shadowMap){const $=oe.shadowMap.enabled,J=oe.shadowMap.type;if(oe.shadowMap.enabled=!!M,Ln.boo(M))oe.shadowMap.type=ip;else if(Ln.str(M)){var de;const ae={basic:gC,percentage:ov,soft:ip,variance:ao};oe.shadowMap.type=(de=ae[M])!=null?de:ip}else Ln.obj(M)&&Object.assign(oe.shadowMap,M);($!==oe.shadowMap.enabled||J!==oe.shadowMap.type)&&(oe.shadowMap.needsUpdate=!0)}const W=hR();W&&("enabled"in W?W.enabled=!b:"legacyMode"in W&&(W.legacyMode=b)),c||Zf(oe,{outputEncoding:A?3e3:3001,toneMapping:C?Lo:lA}),V.legacy!==b&&V.set(()=>({legacy:b})),V.linear!==A&&V.set(()=>({linear:A})),V.flat!==C&&V.set(()=>({flat:C})),g&&!Ln.fun(g)&&!AR(g)&&!Ln.equ(g,oe,$f)&&Zf(oe,g),S&&!V.events.handlers&&V.set({events:S(s)});const re=ZG(i,y);return Ln.equ(re,V.size,$f)||V.setSize(re.width,re.height,re.updateStyle,re.top,re.left),F&&V.viewport.dpr!==vR(F)&&V.setDpr(F),V.frameloop!==N&&V.setFrameloop(N),V.onPointerMissed||V.set({onPointerMissed:D}),k&&!Ln.equ(k,V.performance,$f)&&V.set($=>({performance:{...$.performance,...k}})),l=w,c=!0,this},render(p){return c||this.configure(),qy.updateContainer(U.jsx(e4,{store:s,children:p,onCreated:l,rootElement:i}),o,null,()=>{}),s},unmount(){wR(i)}}}function e4({store:i,children:e,onCreated:t,rootElement:n}){return Zp(()=>{const r=i.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),i.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),U.jsx(SR.Provider,{value:i,children:e})}function wR(i,e){const t=wd.get(i),n=t==null?void 0:t.fiber;if(n){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),qy.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var s,o,l,c;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),zG(r),wd.delete(i)}catch{}},500)})}}qy.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:q.version});const Dx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function t4(i){const{handlePointer:e}=jG(i);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(Dx).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=i.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:s}=i.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,l])=>{const[c,h]=Dx[o];t.addEventListener(c,l,{passive:h})})},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){var r;Object.entries((r=n.handlers)!=null?r:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[l]=Dx[s];n.connected.removeEventListener(l,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function o1(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function n4({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=q.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=q.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=i?typeof i=="number"?i:i.scroll:null,h=i?typeof i=="number"?i:i.resize:null,p=q.useRef(!1);q.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,y,v]=q.useMemo(()=>{const A=()=>{if(!l.current.element)return;const{left:C,top:b,width:B,height:N,bottom:F,right:k,x:z,y:L}=l.current.element.getBoundingClientRect(),D={left:C,top:b,width:B,height:N,bottom:F,right:k,x:z,y:L};l.current.element instanceof HTMLElement&&n&&(D.height=l.current.element.offsetHeight,D.width=l.current.element.offsetWidth),Object.freeze(D),p.current&&!o4(l.current.lastBounds,D)&&o(l.current.lastBounds=D)};return[A,h?o1(A,h):A,c?o1(A,c):A]},[o,n,c,h]);function S(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(A=>A.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function w(){l.current.element&&(l.current.resizeObserver=new r(v),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(A=>A.addEventListener("scroll",v,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const M=A=>{!A||A===l.current.element||(S(),l.current.element=A,l.current.scrollContainers=TR(A),w())};return r4(v,!!e),i4(y),q.useEffect(()=>{S(),w()},[e,v,y]),q.useEffect(()=>S,[]),[M,s,g]}function i4(i){q.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function r4(i,e){q.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function TR(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(i);return[t,n,r].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...TR(i.parentElement)]}const s4=["x","y","top","bottom","left","right","width","height"],o4=(i,e)=>s4.every(t=>i[t]===e[t]);var a4=Object.defineProperty,l4=Object.defineProperties,u4=Object.getOwnPropertyDescriptors,a1=Object.getOwnPropertySymbols,c4=Object.prototype.hasOwnProperty,f4=Object.prototype.propertyIsEnumerable,l1=(i,e,t)=>e in i?a4(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,u1=(i,e)=>{for(var t in e||(e={}))c4.call(e,t)&&l1(i,t,e[t]);if(a1)for(var t of a1(e))f4.call(e,t)&&l1(i,t,e[t]);return i},d4=(i,e)=>l4(i,u4(e)),c1,f1;typeof window<"u"&&((c1=window.document)!=null&&c1.createElement||((f1=window.navigator)==null?void 0:f1.product)==="ReactNative")?q.useLayoutEffect:q.useEffect;function CR(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=i.child;for(;n;){const r=CR(n,e,t);if(r)return r;n=n.sibling}}function bR(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const d1=console.error;console.error=function(){const i=[...arguments].join("");if(i!=null&&i.startsWith("Warning:")&&i.includes("useContext")){console.error=d1;return}return d1.apply(this,arguments)};const nS=bR(q.createContext(null));class RR extends q.Component{render(){return q.createElement(nS.Provider,{value:this._reactInternals},this.props.children)}}function h4(){const i=q.useContext(nS);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=q.useId();return q.useMemo(()=>{for(const n of[i,i==null?void 0:i.alternate]){if(!n)continue;const r=CR(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[i,e])}function p4(){const i=h4(),[e]=q.useState(()=>new Map);e.clear();let t=i;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==nS&&!e.has(r)&&e.set(r,q.useContext(bR(r)))}t=t.return}return e}function m4(){const i=p4();return q.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>q.createElement(e,null,q.createElement(t.Provider,d4(u1({},n),{value:i.get(t)}))),e=>q.createElement(RR,u1({},e))),[i])}const g4=q.forwardRef(function({children:e,fallback:t,resize:n,style:r,gl:s,events:o=t4,eventSource:l,eventPrefix:c,shadows:h,linear:p,flat:g,legacy:y,orthographic:v,frameloop:S,dpr:w,performance:M,raycaster:A,camera:C,scene:b,onPointerMissed:B,onCreated:N,...F},k){q.useMemo(()=>FG(_G),[]);const z=m4(),[L,D]=n4({scroll:!0,debounce:{scroll:50,resize:0},...n}),V=q.useRef(null),oe=q.useRef(null);q.useImperativeHandle(k,()=>V.current);const ie=mR(B),[ye,xe]=q.useState(!1),[ge,de]=q.useState(!1);if(ye)throw ye;if(ge)throw ge;const W=q.useRef(null);Zp(()=>{const $=V.current;D.width>0&&D.height>0&&$&&(W.current||(W.current=$G($)),W.current.configure({gl:s,events:o,shadows:h,linear:p,flat:g,legacy:y,orthographic:v,frameloop:S,dpr:w,performance:M,raycaster:A,camera:C,scene:b,size:D,onPointerMissed:(...J)=>ie.current==null?void 0:ie.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(l?UG(l)?l.current:l:oe.current),c&&J.setEvents({compute:(ae,Le)=>{const fe=ae[c+"X"],we=ae[c+"Y"];Le.pointer.set(fe/Le.size.width*2-1,-(we/Le.size.height)*2+1),Le.raycaster.setFromCamera(Le.pointer,Le.camera)}}),N==null||N(J)}}),W.current.render(U.jsx(z,{children:U.jsx(gR,{set:de,children:U.jsx(q.Suspense,{fallback:U.jsx(OG,{set:xe}),children:e})})})))}),q.useEffect(()=>{const $=V.current;if($)return()=>wR($)},[]);const re=l?"none":"auto";return U.jsx("div",{ref:oe,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:re,...r},...F,children:U.jsx("div",{ref:L,style:{width:"100%",height:"100%"},children:U.jsx("canvas",{ref:V,style:{display:"block"},children:t})})})}),y4=q.forwardRef(function(e,t){return U.jsx(RR,{children:U.jsx(g4,{...e,ref:t})})}),em=new j,iS=new j,v4=new j,h1=new Ie;function x4(i,e,t){const n=em.setFromMatrixPosition(i.matrixWorld);n.project(e);const r=t.width/2,s=t.height/2;return[n.x*r+r,-(n.y*s)+s]}function _4(i,e){const t=em.setFromMatrixPosition(i.matrixWorld),n=iS.setFromMatrixPosition(e.matrixWorld),r=t.sub(n),s=e.getWorldDirection(v4);return r.angleTo(s)>Math.PI/2}function A4(i,e,t,n){const r=em.setFromMatrixPosition(i.matrixWorld),s=r.clone();s.project(e),h1.set(s.x,s.y),t.setFromCamera(h1,e);const o=t.intersectObjects(n,!0);if(o.length){const l=o[0].distance;return r.distanceTo(t.ray.origin)<l}return!0}function S4(i,e){if(e instanceof co)return e.zoom;if(e instanceof zn){const t=em.setFromMatrixPosition(i.matrixWorld),n=iS.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(r/2)*s)}else return 1}function M4(i,e,t){if(e instanceof zn||e instanceof co){const n=em.setFromMatrixPosition(i.matrixWorld),r=iS.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),l=t[1]-o*e.far;return Math.round(o*s+l)}}const A_=i=>Math.abs(i)<1e-10?0:i;function PR(i,e,t=""){let n="matrix3d(";for(let r=0;r!==16;r++)n+=A_(e[r]*i.elements[r])+(r!==15?",":")");return t+n}const E4=(i=>e=>PR(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),w4=(i=>(e,t)=>PR(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function T4(i){return i&&typeof i=="object"&&"current"in i}const C4=q.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:r,center:s,fullscreen:o,portal:l,distanceFactor:c,sprite:h=!1,transform:p=!1,occlude:g,onOcclude:y,castShadow:v,receiveShadow:S,material:w,geometry:M,zIndexRange:A=[16777271,0],calculatePosition:C=x4,as:b="div",wrapperClass:B,pointerEvents:N="auto",...F},k)=>{const{gl:z,camera:L,scene:D,size:V,raycaster:oe,events:ie,viewport:ye}=Ca(),[xe]=q.useState(()=>document.createElement(b)),ge=q.useRef(),de=q.useRef(null),W=q.useRef(0),re=q.useRef([0,0]),$=q.useRef(null),J=q.useRef(null),ae=(l==null?void 0:l.current)||ie.connected||z.domElement.parentNode,Le=q.useRef(null),fe=q.useRef(!1),we=q.useMemo(()=>g&&g!=="blending"||Array.isArray(g)&&g.length&&T4(g[0]),[g]);q.useLayoutEffect(()=>{const Je=z.domElement;g&&g==="blending"?(Je.style.zIndex=`${Math.floor(A[0]/2)}`,Je.style.position="absolute",Je.style.pointerEvents="none"):(Je.style.zIndex=null,Je.style.position=null,Je.style.pointerEvents=null)},[g]),q.useLayoutEffect(()=>{if(de.current){const Je=ge.current=S1.createRoot(xe);if(D.updateMatrixWorld(),p)xe.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const rt=C(de.current,L,V);xe.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${rt[0]}px,${rt[1]}px,0);transform-origin:0 0;`}return ae&&(r?ae.prepend(xe):ae.appendChild(xe)),()=>{ae&&ae.removeChild(xe),Je.unmount()}}},[ae,p]),q.useLayoutEffect(()=>{B&&(xe.className=B)},[B]);const Ne=q.useMemo(()=>p?{position:"absolute",top:0,left:0,width:V.width,height:V.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-V.height/2,left:-V.width/2,width:V.width,height:V.height},...t},[t,s,o,V,p]),De=q.useMemo(()=>({position:"absolute",pointerEvents:N}),[N]);q.useLayoutEffect(()=>{if(fe.current=!1,p){var Je;(Je=ge.current)==null||Je.render(q.createElement("div",{ref:$,style:Ne},q.createElement("div",{ref:J,style:De},q.createElement("div",{ref:k,className:n,style:t,children:i}))))}else{var rt;(rt=ge.current)==null||rt.render(q.createElement("div",{ref:k,style:Ne,className:n,children:i}))}});const je=q.useRef(!0);tS(Je=>{if(de.current){L.updateMatrixWorld(),de.current.updateWorldMatrix(!0,!1);const rt=p?re.current:C(de.current,L,V);if(p||Math.abs(W.current-L.zoom)>e||Math.abs(re.current[0]-rt[0])>e||Math.abs(re.current[1]-rt[1])>e){const Fe=_4(de.current,L);let be=!1;we&&(Array.isArray(g)?be=g.map(et=>et.current):g!=="blending"&&(be=[D]));const K=je.current;if(be){const et=A4(de.current,L,oe,be);je.current=et&&!Fe}else je.current=!Fe;K!==je.current&&(y?y(!je.current):xe.style.display=je.current?"block":"none");const mt=Math.floor(A[0]/2),ke=g?we?[A[0],mt]:[mt-1,0]:A;if(xe.style.zIndex=`${M4(de.current,L,ke)}`,p){const[et,Xe]=[V.width/2,V.height/2],wt=L.projectionMatrix.elements[5]*Xe,{isOrthographicCamera:qe,top:X,left:H,bottom:pe,right:Te}=L,Ue=E4(L.matrixWorldInverse),Pe=qe?`scale(${wt})translate(${A_(-(Te+H)/2)}px,${A_((X+pe)/2)}px)`:`translateZ(${wt}px)`;let st=de.current.matrixWorld;h&&(st=L.matrixWorldInverse.clone().transpose().copyPosition(st).scale(de.current.scale),st.elements[3]=st.elements[7]=st.elements[11]=0,st.elements[15]=1),xe.style.width=V.width+"px",xe.style.height=V.height+"px",xe.style.perspective=qe?"":`${wt}px`,$.current&&J.current&&($.current.style.transform=`${Pe}${Ue}translate(${et}px,${Xe}px)`,J.current.style.transform=w4(st,1/((c||10)/400)))}else{const et=c===void 0?1:S4(de.current,L)*c;xe.style.transform=`translate3d(${rt[0]}px,${rt[1]}px,0) scale(${et})`}re.current=rt,W.current=L.zoom}}if(!we&&Le.current&&!fe.current)if(p){if($.current){const rt=$.current.children[0];if(rt!=null&&rt.clientWidth&&rt!=null&&rt.clientHeight){const{isOrthographicCamera:Fe}=L;if(Fe||M)F.scale&&(Array.isArray(F.scale)?F.scale instanceof j?Le.current.scale.copy(F.scale.clone().divideScalar(1)):Le.current.scale.set(1/F.scale[0],1/F.scale[1],1/F.scale[2]):Le.current.scale.setScalar(1/F.scale));else{const be=(c||10)/400,K=rt.clientWidth*be,mt=rt.clientHeight*be;Le.current.scale.set(K,mt,1)}fe.current=!0}}}else{const rt=xe.children[0];if(rt!=null&&rt.clientWidth&&rt!=null&&rt.clientHeight){const Fe=1/ye.factor,be=rt.clientWidth*Fe,K=rt.clientHeight*Fe;Le.current.scale.set(be,K,1),fe.current=!0}Le.current.lookAt(Je.camera.position)}});const xt=q.useMemo(()=>({vertexShader:p?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[p]);return q.createElement("group",fy({},F,{ref:de}),g&&!we&&q.createElement("mesh",{castShadow:v,receiveShadow:S,ref:Le},M||q.createElement("planeGeometry",null),w||q.createElement("shaderMaterial",{side:Ps,vertexShader:xt.vertexShader,fragmentShader:xt.fragmentShader})))}),b4=parseInt(kp.replace(/\D+/g,""));function p1(i,e){if(e===JC)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===Jy||e===xA){let t=i.getIndex();if(t===null){const o=[],l=i.getAttribute("position");if(l!==void 0){for(let c=0;c<l.count;c++)o.push(c);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(t)if(e===Jy)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var R4=Object.defineProperty,P4=(i,e,t)=>e in i?R4(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,B4=(i,e,t)=>(P4(i,e+"",t),t);class I4{constructor(){B4(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var D4=Object.defineProperty,L4=(i,e,t)=>e in i?D4(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ut=(i,e,t)=>(L4(i,typeof e!="symbol"?e+"":e,t),t);const Xg=new Ec,m1=new Ra,F4=Math.cos(70*(Math.PI/180)),g1=(i,e)=>(i%e+e)%e;let N4=class extends I4{constructor(e,t){super(),Ut(this,"object"),Ut(this,"domElement"),Ut(this,"enabled",!0),Ut(this,"target",new j),Ut(this,"minDistance",0),Ut(this,"maxDistance",1/0),Ut(this,"minZoom",0),Ut(this,"maxZoom",1/0),Ut(this,"minPolarAngle",0),Ut(this,"maxPolarAngle",Math.PI),Ut(this,"minAzimuthAngle",-1/0),Ut(this,"maxAzimuthAngle",1/0),Ut(this,"enableDamping",!1),Ut(this,"dampingFactor",.05),Ut(this,"enableZoom",!0),Ut(this,"zoomSpeed",1),Ut(this,"enableRotate",!0),Ut(this,"rotateSpeed",1),Ut(this,"enablePan",!0),Ut(this,"panSpeed",1),Ut(this,"screenSpacePanning",!0),Ut(this,"keyPanSpeed",7),Ut(this,"zoomToCursor",!1),Ut(this,"autoRotate",!1),Ut(this,"autoRotateSpeed",2),Ut(this,"reverseOrbit",!1),Ut(this,"reverseHorizontalOrbit",!1),Ut(this,"reverseVerticalOrbit",!1),Ut(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ut(this,"mouseButtons",{LEFT:Ku.ROTATE,MIDDLE:Ku.DOLLY,RIGHT:Ku.PAN}),Ut(this,"touches",{ONE:Yu.ROTATE,TWO:Yu.DOLLY_PAN}),Ut(this,"target0"),Ut(this,"position0"),Ut(this,"zoom0"),Ut(this,"_domElementKeyEvents",null),Ut(this,"getPolarAngle"),Ut(this,"getAzimuthalAngle"),Ut(this,"setPolarAngle"),Ut(this,"setAzimuthalAngle"),Ut(this,"getDistance"),Ut(this,"getZoomScale"),Ut(this,"listenToKeyEvents"),Ut(this,"stopListenToKeyEvents"),Ut(this,"saveState"),Ut(this,"reset"),Ut(this,"update"),Ut(this,"connect"),Ut(this,"dispose"),Ut(this,"dollyIn"),Ut(this,"dollyOut"),Ut(this,"getScale"),Ut(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=ee=>{let Re=g1(ee,2*Math.PI),tt=p.phi;tt<0&&(tt+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let Z=Math.abs(Re-tt);2*Math.PI-Z<Z&&(Re<tt?Re+=2*Math.PI:tt+=2*Math.PI),g.phi=Re-tt,n.update()},this.setAzimuthalAngle=ee=>{let Re=g1(ee,2*Math.PI),tt=p.theta;tt<0&&(tt+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let Z=Math.abs(Re-tt);2*Math.PI-Z<Z&&(Re<tt?Re+=2*Math.PI:tt+=2*Math.PI),g.theta=Re-tt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ee=>{ee.addEventListener("keydown",Ze),this._domElementKeyEvents=ee},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ze),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),c=l.NONE},this.update=(()=>{const ee=new j,Re=new j(0,1,0),tt=new Oi().setFromUnitVectors(e.up,Re),Z=tt.clone().invert(),Ve=new j,Me=new Oi,Be=2*Math.PI;return function(){const nt=n.object.position;tt.setFromUnitVectors(e.up,Re),Z.copy(tt).invert(),ee.copy(nt).sub(n.target),ee.applyQuaternion(tt),p.setFromVector3(ee),n.autoRotate&&c===l.NONE&&ye(oe()),n.enableDamping?(p.theta+=g.theta*n.dampingFactor,p.phi+=g.phi*n.dampingFactor):(p.theta+=g.theta,p.phi+=g.phi);let Pt=n.minAzimuthAngle,un=n.maxAzimuthAngle;isFinite(Pt)&&isFinite(un)&&(Pt<-Math.PI?Pt+=Be:Pt>Math.PI&&(Pt-=Be),un<-Math.PI?un+=Be:un>Math.PI&&(un-=Be),Pt<=un?p.theta=Math.max(Pt,Math.min(un,p.theta)):p.theta=p.theta>(Pt+un)/2?Math.max(Pt,p.theta):Math.min(un,p.theta)),p.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,p.phi)),p.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(v,n.dampingFactor):n.target.add(v),n.zoomToCursor&&L||n.object.isOrthographicCamera?p.radius=Le(p.radius):p.radius=Le(p.radius*y),ee.setFromSpherical(p),ee.applyQuaternion(Z),nt.copy(n.target).add(ee),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(g.theta*=1-n.dampingFactor,g.phi*=1-n.dampingFactor,v.multiplyScalar(1-n.dampingFactor)):(g.set(0,0,0),v.set(0,0,0));let Tn=!1;if(n.zoomToCursor&&L){let Qt=null;if(n.object instanceof zn&&n.object.isPerspectiveCamera){const Vn=ee.length();Qt=Le(Vn*y);const Qn=Vn-Qt;n.object.position.addScaledVector(k,Qn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Vn=new j(z.x,z.y,0);Vn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix(),Tn=!0;const Qn=new j(z.x,z.y,0);Qn.unproject(n.object),n.object.position.sub(Qn).add(Vn),n.object.updateMatrixWorld(),Qt=ee.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Qt!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Qt).add(n.object.position):(Xg.origin.copy(n.object.position),Xg.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Xg.direction))<F4?e.lookAt(n.target):(m1.setFromNormalAndCoplanarPoint(n.object.up,n.target),Xg.intersectPlane(m1,n.target))))}else n.object instanceof co&&n.object.isOrthographicCamera&&(Tn=y!==1,Tn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix()));return y=1,L=!1,Tn||Ve.distanceToSquared(n.object.position)>h||8*(1-Me.dot(n.object.quaternion))>h?(n.dispatchEvent(r),Ve.copy(n.object.position),Me.copy(n.object.quaternion),Tn=!1,!0):!1}})(),this.connect=ee=>{n.domElement=ee,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",ze),n.domElement.addEventListener("pointerdown",H),n.domElement.addEventListener("pointercancel",Te),n.domElement.addEventListener("wheel",st)},this.dispose=()=>{var ee,Re,tt,Z,Ve,Me;n.domElement&&(n.domElement.style.touchAction="auto"),(ee=n.domElement)==null||ee.removeEventListener("contextmenu",ze),(Re=n.domElement)==null||Re.removeEventListener("pointerdown",H),(tt=n.domElement)==null||tt.removeEventListener("pointercancel",Te),(Z=n.domElement)==null||Z.removeEventListener("wheel",st),(Ve=n.domElement)==null||Ve.ownerDocument.removeEventListener("pointermove",pe),(Me=n.domElement)==null||Me.ownerDocument.removeEventListener("pointerup",Te),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ze)};const n=this,r={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const h=1e-6,p=new m_,g=new m_;let y=1;const v=new j,S=new Ie,w=new Ie,M=new Ie,A=new Ie,C=new Ie,b=new Ie,B=new Ie,N=new Ie,F=new Ie,k=new j,z=new Ie;let L=!1;const D=[],V={};function oe(){return 2*Math.PI/60/60*n.autoRotateSpeed}function ie(){return Math.pow(.95,n.zoomSpeed)}function ye(ee){n.reverseOrbit||n.reverseHorizontalOrbit?g.theta+=ee:g.theta-=ee}function xe(ee){n.reverseOrbit||n.reverseVerticalOrbit?g.phi+=ee:g.phi-=ee}const ge=(()=>{const ee=new j;return function(tt,Z){ee.setFromMatrixColumn(Z,0),ee.multiplyScalar(-tt),v.add(ee)}})(),de=(()=>{const ee=new j;return function(tt,Z){n.screenSpacePanning===!0?ee.setFromMatrixColumn(Z,1):(ee.setFromMatrixColumn(Z,0),ee.crossVectors(n.object.up,ee)),ee.multiplyScalar(tt),v.add(ee)}})(),W=(()=>{const ee=new j;return function(tt,Z){const Ve=n.domElement;if(Ve&&n.object instanceof zn&&n.object.isPerspectiveCamera){const Me=n.object.position;ee.copy(Me).sub(n.target);let Be=ee.length();Be*=Math.tan(n.object.fov/2*Math.PI/180),ge(2*tt*Be/Ve.clientHeight,n.object.matrix),de(2*Z*Be/Ve.clientHeight,n.object.matrix)}else Ve&&n.object instanceof co&&n.object.isOrthographicCamera?(ge(tt*(n.object.right-n.object.left)/n.object.zoom/Ve.clientWidth,n.object.matrix),de(Z*(n.object.top-n.object.bottom)/n.object.zoom/Ve.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function re(ee){n.object instanceof zn&&n.object.isPerspectiveCamera||n.object instanceof co&&n.object.isOrthographicCamera?y=ee:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function $(ee){re(y/ee)}function J(ee){re(y*ee)}function ae(ee){if(!n.zoomToCursor||!n.domElement)return;L=!0;const Re=n.domElement.getBoundingClientRect(),tt=ee.clientX-Re.left,Z=ee.clientY-Re.top,Ve=Re.width,Me=Re.height;z.x=tt/Ve*2-1,z.y=-(Z/Me)*2+1,k.set(z.x,z.y,1).unproject(n.object).sub(n.object.position).normalize()}function Le(ee){return Math.max(n.minDistance,Math.min(n.maxDistance,ee))}function fe(ee){S.set(ee.clientX,ee.clientY)}function we(ee){ae(ee),B.set(ee.clientX,ee.clientY)}function Ne(ee){A.set(ee.clientX,ee.clientY)}function De(ee){w.set(ee.clientX,ee.clientY),M.subVectors(w,S).multiplyScalar(n.rotateSpeed);const Re=n.domElement;Re&&(ye(2*Math.PI*M.x/Re.clientHeight),xe(2*Math.PI*M.y/Re.clientHeight)),S.copy(w),n.update()}function je(ee){N.set(ee.clientX,ee.clientY),F.subVectors(N,B),F.y>0?$(ie()):F.y<0&&J(ie()),B.copy(N),n.update()}function xt(ee){C.set(ee.clientX,ee.clientY),b.subVectors(C,A).multiplyScalar(n.panSpeed),W(b.x,b.y),A.copy(C),n.update()}function Je(ee){ae(ee),ee.deltaY<0?J(ie()):ee.deltaY>0&&$(ie()),n.update()}function rt(ee){let Re=!1;switch(ee.code){case n.keys.UP:W(0,n.keyPanSpeed),Re=!0;break;case n.keys.BOTTOM:W(0,-n.keyPanSpeed),Re=!0;break;case n.keys.LEFT:W(n.keyPanSpeed,0),Re=!0;break;case n.keys.RIGHT:W(-n.keyPanSpeed,0),Re=!0;break}Re&&(ee.preventDefault(),n.update())}function Fe(){if(D.length==1)S.set(D[0].pageX,D[0].pageY);else{const ee=.5*(D[0].pageX+D[1].pageX),Re=.5*(D[0].pageY+D[1].pageY);S.set(ee,Re)}}function be(){if(D.length==1)A.set(D[0].pageX,D[0].pageY);else{const ee=.5*(D[0].pageX+D[1].pageX),Re=.5*(D[0].pageY+D[1].pageY);A.set(ee,Re)}}function K(){const ee=D[0].pageX-D[1].pageX,Re=D[0].pageY-D[1].pageY,tt=Math.sqrt(ee*ee+Re*Re);B.set(0,tt)}function mt(){n.enableZoom&&K(),n.enablePan&&be()}function ke(){n.enableZoom&&K(),n.enableRotate&&Fe()}function et(ee){if(D.length==1)w.set(ee.pageX,ee.pageY);else{const tt=ht(ee),Z=.5*(ee.pageX+tt.x),Ve=.5*(ee.pageY+tt.y);w.set(Z,Ve)}M.subVectors(w,S).multiplyScalar(n.rotateSpeed);const Re=n.domElement;Re&&(ye(2*Math.PI*M.x/Re.clientHeight),xe(2*Math.PI*M.y/Re.clientHeight)),S.copy(w)}function Xe(ee){if(D.length==1)C.set(ee.pageX,ee.pageY);else{const Re=ht(ee),tt=.5*(ee.pageX+Re.x),Z=.5*(ee.pageY+Re.y);C.set(tt,Z)}b.subVectors(C,A).multiplyScalar(n.panSpeed),W(b.x,b.y),A.copy(C)}function wt(ee){const Re=ht(ee),tt=ee.pageX-Re.x,Z=ee.pageY-Re.y,Ve=Math.sqrt(tt*tt+Z*Z);N.set(0,Ve),F.set(0,Math.pow(N.y/B.y,n.zoomSpeed)),$(F.y),B.copy(N)}function qe(ee){n.enableZoom&&wt(ee),n.enablePan&&Xe(ee)}function X(ee){n.enableZoom&&wt(ee),n.enableRotate&&et(ee)}function H(ee){var Re,tt;n.enabled!==!1&&(D.length===0&&((Re=n.domElement)==null||Re.ownerDocument.addEventListener("pointermove",pe),(tt=n.domElement)==null||tt.ownerDocument.addEventListener("pointerup",Te)),gt(ee),ee.pointerType==="touch"?ct(ee):Ue(ee))}function pe(ee){n.enabled!==!1&&(ee.pointerType==="touch"?Gt(ee):Pe(ee))}function Te(ee){var Re,tt,Z;Bt(ee),D.length===0&&((Re=n.domElement)==null||Re.releasePointerCapture(ee.pointerId),(tt=n.domElement)==null||tt.ownerDocument.removeEventListener("pointermove",pe),(Z=n.domElement)==null||Z.ownerDocument.removeEventListener("pointerup",Te)),n.dispatchEvent(o),c=l.NONE}function Ue(ee){let Re;switch(ee.button){case 0:Re=n.mouseButtons.LEFT;break;case 1:Re=n.mouseButtons.MIDDLE;break;case 2:Re=n.mouseButtons.RIGHT;break;default:Re=-1}switch(Re){case Ku.DOLLY:if(n.enableZoom===!1)return;we(ee),c=l.DOLLY;break;case Ku.ROTATE:if(ee.ctrlKey||ee.metaKey||ee.shiftKey){if(n.enablePan===!1)return;Ne(ee),c=l.PAN}else{if(n.enableRotate===!1)return;fe(ee),c=l.ROTATE}break;case Ku.PAN:if(ee.ctrlKey||ee.metaKey||ee.shiftKey){if(n.enableRotate===!1)return;fe(ee),c=l.ROTATE}else{if(n.enablePan===!1)return;Ne(ee),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}function Pe(ee){if(n.enabled!==!1)switch(c){case l.ROTATE:if(n.enableRotate===!1)return;De(ee);break;case l.DOLLY:if(n.enableZoom===!1)return;je(ee);break;case l.PAN:if(n.enablePan===!1)return;xt(ee);break}}function st(ee){n.enabled===!1||n.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(ee.preventDefault(),n.dispatchEvent(s),Je(ee),n.dispatchEvent(o))}function Ze(ee){n.enabled===!1||n.enablePan===!1||rt(ee)}function ct(ee){switch(Lt(ee),D.length){case 1:switch(n.touches.ONE){case Yu.ROTATE:if(n.enableRotate===!1)return;Fe(),c=l.TOUCH_ROTATE;break;case Yu.PAN:if(n.enablePan===!1)return;be(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(n.touches.TWO){case Yu.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;mt(),c=l.TOUCH_DOLLY_PAN;break;case Yu.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ke(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}function Gt(ee){switch(Lt(ee),c){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;et(ee),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;Xe(ee),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;qe(ee),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;X(ee),n.update();break;default:c=l.NONE}}function ze(ee){n.enabled!==!1&&ee.preventDefault()}function gt(ee){D.push(ee)}function Bt(ee){delete V[ee.pointerId];for(let Re=0;Re<D.length;Re++)if(D[Re].pointerId==ee.pointerId){D.splice(Re,1);return}}function Lt(ee){let Re=V[ee.pointerId];Re===void 0&&(Re=new Ie,V[ee.pointerId]=Re),Re.set(ee.pageX,ee.pageY)}function ht(ee){const Re=ee.pointerId===D[0].pointerId?D[1]:D[0];return V[Re.pointerId]}this.dollyIn=(ee=ie())=>{J(ee),n.update()},this.dollyOut=(ee=ie())=>{$(ee),n.update()},this.getScale=()=>y,this.setScale=ee=>{re(ee),n.update()},this.getZoomScale=()=>ie(),t!==void 0&&this.connect(t),this.update()}};function Zy(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const oc="srgb",ka="srgb-linear",y1=3001,U4=3e3;class rS extends hr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new G4(t)}),this.register(function(t){return new V4(t)}),this.register(function(t){return new Z4(t)}),this.register(function(t){return new $4(t)}),this.register(function(t){return new eV(t)}),this.register(function(t){return new j4(t)}),this.register(function(t){return new X4(t)}),this.register(function(t){return new J4(t)}),this.register(function(t){return new K4(t)}),this.register(function(t){return new z4(t)}),this.register(function(t){return new Y4(t)}),this.register(function(t){return new W4(t)}),this.register(function(t){return new q4(t)}),this.register(function(t){return new Q4(t)}),this.register(function(t){return new k4(t)}),this.register(function(t){return new tV(t)}),this.register(function(t){return new nV(t)})}load(e,t,n,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const h=Fl.extractUrlBase(e);o=Fl.resolveURL(h,this.path)}else o=Fl.extractUrlBase(e);this.manager.itemStart(e);const l=function(h){r?r(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},c=new fs(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{s.parse(h,o,function(p){t(p),s.manager.itemEnd(e)},l)}catch(p){l(p)}},n,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},l={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Zy(new Uint8Array(e.slice(0,4)))===BR){try{o[fn.KHR_BINARY_GLTF]=new iV(e)}catch(p){r&&r(p);return}s=JSON.parse(o[fn.KHR_BINARY_GLTF].content)}else s=JSON.parse(Zy(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new gV(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const p=this.pluginCallbacks[h](c);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[p.name]=p,o[p.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const p=s.extensionsUsed[h],g=s.extensionsRequired||[];switch(p){case fn.KHR_MATERIALS_UNLIT:o[p]=new H4;break;case fn.KHR_DRACO_MESH_COMPRESSION:o[p]=new rV(s,this.dracoLoader);break;case fn.KHR_TEXTURE_TRANSFORM:o[p]=new sV;break;case fn.KHR_MESH_QUANTIZATION:o[p]=new oV;break;default:g.indexOf(p)>=0&&l[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}c.setExtensions(o),c.setPlugins(l),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function O4(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const fn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class k4{constructor(e){this.parser=e,this.name=fn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let h;const p=new lt(16777215);c.color!==void 0&&p.setRGB(c.color[0],c.color[1],c.color[2],ka);const g=c.range!==void 0?c.range:0;switch(c.type){case"directional":h=new XA(p),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new jA(p),h.distance=g;break;case"spot":h=new WA(p),h.distance=g,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,h.angle=c.spot.outerConeAngle,h.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return h.position.set(0,0,0),h.decay=2,ba(h,c),c.intensity!==void 0&&(h.intensity=c.intensity),h.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(h),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(c){return n._getNodeRef(t.cache,l,c)})}}class H4{constructor(){this.name=fn.KHR_MATERIALS_UNLIT}getMaterialType(){return as}extendParams(e,t,n){const r=[];e.color=new lt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],ka),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,oc))}return Promise.all(r)}}class z4{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class G4{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Is}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ie(l,l)}return Promise.all(s)}}class V4{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Is}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class W4{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Is}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class j4{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Is}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new lt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],ka)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,oc)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class X4{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Is}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class J4{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Is}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return t.attenuationColor=new lt().setRGB(l[0],l[1],l[2],ka),Promise.all(s)}}class K4{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Is}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Y4{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Is}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularColor=new lt().setRGB(l[0],l[1],l[2],ka),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,oc)),Promise.all(s)}}class Q4{constructor(e){this.parser=e,this.name=fn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Is}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class q4{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Is}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Z4{constructor(e){this.parser=e,this.name=fn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class $4{constructor(e){this.parser=e,this.name=fn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let c=n.textureLoader;if(l.uri){const h=n.options.manager.getHandler(l.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class eV{constructor(e){this.parser=e,this.name=fn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let c=n.textureLoader;if(l.uri){const h=n.options.manager.getHandler(l.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class tV{constructor(e){this.name=fn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const c=r.byteOffset||0,h=r.byteLength||0,p=r.count,g=r.byteStride,y=new Uint8Array(l,c,h);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(p,g,y,r.mode,r.filter).then(function(v){return v.buffer}):o.ready.then(function(){const v=new ArrayBuffer(p*g);return o.decodeGltfBuffer(new Uint8Array(v),p,g,y,r.mode,r.filter),v})})}else return null}}class nV{constructor(e){this.name=fn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const h of r.primitives)if(h.mode!==bs.TRIANGLES&&h.mode!==bs.TRIANGLE_STRIP&&h.mode!==bs.TRIANGLE_FAN&&h.mode!==void 0)return null;const o=n.extensions[this.name].attributes,l=[],c={};for(const h in o)l.push(this.parser.getDependency("accessor",o[h]).then(p=>(c[h]=p,c[h])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(h=>{const p=h.pop(),g=p.isGroup?p.children:[p],y=h[0].count,v=[];for(const S of g){const w=new Ot,M=new j,A=new Oi,C=new j(1,1,1),b=new CA(S.geometry,S.material,y);for(let B=0;B<y;B++)c.TRANSLATION&&M.fromBufferAttribute(c.TRANSLATION,B),c.ROTATION&&A.fromBufferAttribute(c.ROTATION,B),c.SCALE&&C.fromBufferAttribute(c.SCALE,B),b.setMatrixAt(B,w.compose(M,A,C));for(const B in c)if(B==="_COLOR_0"){const N=c[B];b.instanceColor=new yc(N.array,N.itemSize,N.normalized)}else B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&S.geometry.setAttribute(B,c[B]);pn.prototype.copy.call(b,S),this.parser.assignFinalMaterial(b),v.push(b)}return p.isGroup?(p.clear(),p.add(...v),p):v[0]}))}}const BR="glTF",Kh=12,v1={JSON:1313821514,BIN:5130562};class iV{constructor(e){this.name=fn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Kh);if(this.header={magic:Zy(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==BR)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-Kh,r=new DataView(e,Kh);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const l=r.getUint32(s,!0);if(s+=4,l===v1.JSON){const c=new Uint8Array(e,Kh+s,o);this.content=Zy(c)}else if(l===v1.BIN){const c=Kh+s;this.body=e.slice(c,c+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class rV{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=fn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},c={},h={};for(const p in o){const g=S_[p]||p.toLowerCase();l[g]=o[p]}for(const p in e.attributes){const g=S_[p]||p.toLowerCase();if(o[p]!==void 0){const y=n.accessors[e.attributes[p]],v=pd[y.componentType];h[g]=v.name,c[g]=y.normalized===!0}}return t.getDependency("bufferView",s).then(function(p){return new Promise(function(g,y){r.decodeDracoFile(p,function(v){for(const S in v.attributes){const w=v.attributes[S],M=c[S];M!==void 0&&(w.normalized=M)}g(v)},l,h,ka,y)})})}}class sV{constructor(){this.name=fn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class oV{constructor(){this.name=fn.KHR_MESH_QUANTIZATION}}class IR extends Ld{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=l*2,h=l*3,p=r-t,g=(n-t)/p,y=g*g,v=y*g,S=e*h,w=S-h,M=-2*v+3*y,A=v-y,C=1-M,b=A-y+g;for(let B=0;B!==l;B++){const N=o[w+B+l],F=o[w+B+c]*p,k=o[S+B+l],z=o[S+B]*p;s[B]=C*N+b*F+M*k+A*z}return s}}const aV=new Oi;class lV extends IR{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return aV.fromArray(s).normalize().toArray(s),s}}const bs={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},pd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},x1={9728:Ui,9729:ai,9984:lv,9985:dd,9986:ec,9987:Bs},_1={33071:os,33648:vd,10497:Hl},Lx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},S_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...b4>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Bl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},uV={CUBICSPLINE:void 0,LINEAR:Ad,STEP:_d},Fx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function cV(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new qp({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Oo})),i.DefaultMaterial}function ju(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function ba(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function fV(i,e,t){let n=!1,r=!1,s=!1;for(let h=0,p=e.length;h<p;h++){const g=e[h];if(g.POSITION!==void 0&&(n=!0),g.NORMAL!==void 0&&(r=!0),g.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],l=[],c=[];for(let h=0,p=e.length;h<p;h++){const g=e[h];if(n){const y=g.POSITION!==void 0?t.getDependency("accessor",g.POSITION):i.attributes.position;o.push(y)}if(r){const y=g.NORMAL!==void 0?t.getDependency("accessor",g.NORMAL):i.attributes.normal;l.push(y)}if(s){const y=g.COLOR_0!==void 0?t.getDependency("accessor",g.COLOR_0):i.attributes.color;c.push(y)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(c)]).then(function(h){const p=h[0],g=h[1],y=h[2];return n&&(i.morphAttributes.position=p),r&&(i.morphAttributes.normal=g),s&&(i.morphAttributes.color=y),i.morphTargetsRelative=!0,i})}function dV(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function hV(i){let e;const t=i.extensions&&i.extensions[fn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Nx(t.attributes):e=i.indices+":"+Nx(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+Nx(i.targets[n]);return e}function Nx(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function M_(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function pV(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const mV=new Ot;class gV{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new O4,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&s<98?this.textureLoader=new Gb(this.options.manager):this.textureLoader=new Qb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new fs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const l={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return ju(s,l,r),ba(l,r),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(l)})).then(function(){for(const c of l.scenes)c.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let l=0,c=o.length;l<c;l++)e[o[l]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,l)=>{const c=this.associations.get(o);c!=null&&this.associations.set(l,c);for(const[h,p]of o.children.entries())s(p,l.children[h])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[fn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(Fl.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=Lx[r.type],l=pd[r.componentType],c=r.normalized===!0,h=new l(r.count*o);return Promise.resolve(new _n(h,o,c))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const l=o[0],c=Lx[r.type],h=pd[r.componentType],p=h.BYTES_PER_ELEMENT,g=p*c,y=r.byteOffset||0,v=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,S=r.normalized===!0;let w,M;if(v&&v!==g){const A=Math.floor(y/v),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+A+":"+r.count;let b=t.cache.get(C);b||(w=new h(l,A*v,r.count*v/p),b=new jp(w,v/p),t.cache.add(C,b)),M=new zl(b,c,y%v/p,S)}else l===null?w=new h(r.count*c):w=new h(l,y,r.count*c),M=new _n(w,c,S);if(r.sparse!==void 0){const A=Lx.SCALAR,C=pd[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,B=r.sparse.values.byteOffset||0,N=new C(o[1],b,r.sparse.count*A),F=new h(o[2],B,r.sparse.count*c);l!==null&&(M=new _n(M.array.slice(),M.itemSize,M.normalized));for(let k=0,z=N.length;k<z;k++){const L=N[k];if(M.setX(L,F[k*c]),c>=2&&M.setY(L,F[k*c+1]),c>=3&&M.setZ(L,F[k*c+2]),c>=4&&M.setW(L,F[k*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return M})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let l=this.textureLoader;if(o.uri){const c=n.manager.getHandler(o.uri);c!==null&&(l=c)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],l=s.images[t],c=(l.uri||l.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const h=this.loadImageSource(t,n).then(function(p){p.flipY=!1,p.name=o.name||l.name||"",p.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(p.name=l.uri);const y=(s.samplers||{})[o.sampler]||{};return p.magFilter=x1[y.magFilter]||ai,p.minFilter=x1[y.minFilter]||Bs,p.wrapS=_1[y.wrapS]||Hl,p.wrapT=_1[y.wrapT]||Hl,r.associations.set(p,{textures:e}),p}).catch(function(){return null});return this.textureCache[c]=h,h}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(g=>g.clone());const o=r.images[e],l=self.URL||self.webkitURL;let c=o.uri||"",h=!1;if(o.bufferView!==void 0)c=n.getDependency("bufferView",o.bufferView).then(function(g){h=!0;const y=new Blob([g],{type:o.mimeType});return c=l.createObjectURL(y),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(c).then(function(g){return new Promise(function(y,v){let S=y;t.isImageBitmapLoader===!0&&(S=function(w){const M=new Gn(w);M.needsUpdate=!0,y(M)}),t.load(Fl.resolveURL(g,s.path),S,void 0,v)})}).then(function(g){return h===!0&&l.revokeObjectURL(c),ba(g,o),g.userData.mimeType=o.mimeType||pV(o.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),g});return this.sourceCache[e]=p,p}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[fn.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[fn.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const c=s.associations.get(o);o=s.extensions[fn.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),s.associations.set(o,c)}}return r!==void 0&&(typeof r=="number"&&(r=r===y1?oc:ka),"colorSpace"in o?o.colorSpace=r:o.encoding=r===oc?y1:U4),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+n.uuid;let c=this.cache.get(l);c||(c=new Av,Ci.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(l,c)),n=c}else if(e.isLine){const l="LineBasicMaterial:"+n.uuid;let c=this.cache.get(l);c||(c=new dr,Ci.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,this.cache.add(l,c)),n=c}if(r||s||o){let l="ClonedMaterial:"+n.uuid+":";r&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),o&&(l+="flat-shading:");let c=this.cache.get(l);c||(c=n.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(l,c),this.associations.set(c,this.associations.get(n))),n=c}e.material=n}getMaterialType(){return qp}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let o;const l={},c=s.extensions||{},h=[];if(c[fn.KHR_MATERIALS_UNLIT]){const g=r[fn.KHR_MATERIALS_UNLIT];o=g.getMaterialType(),h.push(g.extendParams(l,s,t))}else{const g=s.pbrMetallicRoughness||{};if(l.color=new lt(1,1,1),l.opacity=1,Array.isArray(g.baseColorFactor)){const y=g.baseColorFactor;l.color.setRGB(y[0],y[1],y[2],ka),l.opacity=y[3]}g.baseColorTexture!==void 0&&h.push(t.assignTexture(l,"map",g.baseColorTexture,oc)),l.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,l.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(l,"metalnessMap",g.metallicRoughnessTexture)),h.push(t.assignTexture(l,"roughnessMap",g.metallicRoughnessTexture))),o=this._invokeOne(function(y){return y.getMaterialType&&y.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(y){return y.extendMaterialParams&&y.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=Ps);const p=s.alphaMode||Fx.OPAQUE;if(p===Fx.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,p===Fx.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==as&&(h.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new Ie(1,1),s.normalTexture.scale!==void 0)){const g=s.normalTexture.scale;l.normalScale.set(g,g)}if(s.occlusionTexture!==void 0&&o!==as&&(h.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==as){const g=s.emissiveFactor;l.emissive=new lt().setRGB(g[0],g[1],g[2],ka)}return s.emissiveTexture!==void 0&&o!==as&&h.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,oc)),Promise.all(h).then(function(){const g=new o(l);return s.name&&(g.name=s.name),ba(g,s),t.associations.set(g,{materials:e}),s.extensions&&ju(r,g,s),g})}createUniqueName(e){const t=gn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(l){return n[fn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(c){return A1(c,l,t)})}const o=[];for(let l=0,c=e.length;l<c;l++){const h=e[l],p=hV(h),g=r[p];if(g)o.push(g.promise);else{let y;h.extensions&&h.extensions[fn.KHR_DRACO_MESH_COMPRESSION]?y=s(h):y=A1(new Yt,h,t),r[p]={primitive:h,promise:y},o.push(y)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],o=s.primitives,l=[];for(let c=0,h=o.length;c<h;c++){const p=o[c].material===void 0?cV(this.cache):this.getDependency("material",o[c].material);l.push(p)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(c){const h=c.slice(0,c.length-1),p=c[c.length-1],g=[];for(let v=0,S=p.length;v<S;v++){const w=p[v],M=o[v];let A;const C=h[v];if(M.mode===bs.TRIANGLES||M.mode===bs.TRIANGLE_STRIP||M.mode===bs.TRIANGLE_FAN||M.mode===void 0)A=s.isSkinnedMesh===!0?new TA(w,C):new li(w,C),A.isSkinnedMesh===!0&&A.normalizeSkinWeights(),M.mode===bs.TRIANGLE_STRIP?A.geometry=p1(A.geometry,xA):M.mode===bs.TRIANGLE_FAN&&(A.geometry=p1(A.geometry,Jy));else if(M.mode===bs.LINES)A=new po(w,C);else if(M.mode===bs.LINE_STRIP)A=new Va(w,C);else if(M.mode===bs.LINE_LOOP)A=new bA(w,C);else if(M.mode===bs.POINTS)A=new RA(w,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(A.geometry.morphAttributes).length>0&&dV(A,s),A.name=t.createUniqueName(s.name||"mesh_"+e),ba(A,s),M.extensions&&ju(r,A,M),t.assignFinalMaterial(A),g.push(A)}for(let v=0,S=g.length;v<S;v++)t.associations.set(g[v],{meshes:e,primitives:v});if(g.length===1)return s.extensions&&ju(r,g[0],s),g[0];const y=new Ia;s.extensions&&ju(r,y,s),t.associations.set(y,{meshes:e});for(let v=0,S=g.length;v<S;v++)y.add(g[v]);return y})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new zn(rb.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new co(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ba(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),o=r,l=[],c=[];for(let h=0,p=o.length;h<p;h++){const g=o[h];if(g){l.push(g);const y=new Ot;s!==null&&y.fromArray(s.array,h*16),c.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new Xp(l,c)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],l=[],c=[],h=[],p=[];for(let g=0,y=r.channels.length;g<y;g++){const v=r.channels[g],S=r.samplers[v.sampler],w=v.target,M=w.node,A=r.parameters!==void 0?r.parameters[S.input]:S.input,C=r.parameters!==void 0?r.parameters[S.output]:S.output;w.node!==void 0&&(o.push(this.getDependency("node",M)),l.push(this.getDependency("accessor",A)),c.push(this.getDependency("accessor",C)),h.push(S),p.push(w))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(h),Promise.all(p)]).then(function(g){const y=g[0],v=g[1],S=g[2],w=g[3],M=g[4],A=[];for(let C=0,b=y.length;C<b;C++){const B=y[C],N=v[C],F=S[C],k=w[C],z=M[C];if(B===void 0)continue;B.updateMatrix&&B.updateMatrix();const L=n._createAnimationTracks(B,N,F,k,z);if(L)for(let D=0;D<L.length;D++)A.push(L[D])}return new Ed(s,void 0,A)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(l){if(l.isMesh)for(let c=0,h=r.weights.length;c<h;c++)l.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),o=[],l=r.children||[];for(let h=0,p=l.length;h<p;h++)o.push(n.getDependency("node",l[h]));const c=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),c]).then(function(h){const p=h[0],g=h[1],y=h[2];y!==null&&p.traverse(function(v){v.isSkinnedMesh&&v.bind(y,mV)});for(let v=0,S=g.length;v<S;v++)p.add(g[v]);return p})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",l=[],c=r._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return c&&l.push(c),s.camera!==void 0&&l.push(r.getDependency("camera",s.camera).then(function(h){return r._getNodeRef(r.cameraCache,s.camera,h)})),r._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){l.push(h)}),this.nodeCache[e]=Promise.all(l).then(function(h){let p;if(s.isBone===!0?p=new _v:h.length>1?p=new Ia:h.length===1?p=h[0]:p=new pn,p!==h[0])for(let g=0,y=h.length;g<y;g++)p.add(h[g]);if(s.name&&(p.userData.name=s.name,p.name=o),ba(p,s),s.extensions&&ju(n,p,s),s.matrix!==void 0){const g=new Ot;g.fromArray(s.matrix),p.applyMatrix4(g)}else s.translation!==void 0&&p.position.fromArray(s.translation),s.rotation!==void 0&&p.quaternion.fromArray(s.rotation),s.scale!==void 0&&p.scale.fromArray(s.scale);return r.associations.has(p)||r.associations.set(p,{}),r.associations.get(p).nodes=e,p}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new Ia;n.name&&(s.name=r.createUniqueName(n.name)),ba(s,n),n.extensions&&ju(t,s,n);const o=n.nodes||[],l=[];for(let c=0,h=o.length;c<h;c++)l.push(r.getDependency("node",o[c]));return Promise.all(l).then(function(c){for(let p=0,g=c.length;p<g;p++)s.add(c[p]);const h=p=>{const g=new Map;for(const[y,v]of r.associations)(y instanceof Ci||y instanceof Gn)&&g.set(y,v);return p.traverse(y=>{const v=r.associations.get(y);v!=null&&g.set(y,v)}),g};return r.associations=h(s),s})}_createAnimationTracks(e,t,n,r,s){const o=[],l=e.name?e.name:e.uuid,c=[];Bl[s.path]===Bl.weights?e.traverse(function(y){y.morphTargetInfluences&&c.push(y.name?y.name:y.uuid)}):c.push(l);let h;switch(Bl[s.path]){case Bl.weights:h=xc;break;case Bl.rotation:h=_c;break;case Bl.position:case Bl.scale:h=Ac;break;default:switch(n.itemSize){case 1:h=xc;break;case 2:case 3:default:h=Ac;break}break}const p=r.interpolation!==void 0?uV[r.interpolation]:Ad,g=this._getArrayFromAccessor(n);for(let y=0,v=c.length;y<v;y++){const S=new h(c[y]+"."+Bl[s.path],t.array,g,p);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(S),o.push(S)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=M_(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof _c?lV:IR;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function yV(i,e,t){const n=e.attributes,r=new fr;if(n.POSITION!==void 0){const l=t.json.accessors[n.POSITION],c=l.min,h=l.max;if(c!==void 0&&h!==void 0){if(r.set(new j(c[0],c[1],c[2]),new j(h[0],h[1],h[2])),l.normalized){const p=M_(pd[l.componentType]);r.min.multiplyScalar(p),r.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new j,c=new j;for(let h=0,p=s.length;h<p;h++){const g=s[h];if(g.POSITION!==void 0){const y=t.json.accessors[g.POSITION],v=y.min,S=y.max;if(v!==void 0&&S!==void 0){if(c.setX(Math.max(Math.abs(v[0]),Math.abs(S[0]))),c.setY(Math.max(Math.abs(v[1]),Math.abs(S[1]))),c.setZ(Math.max(Math.abs(v[2]),Math.abs(S[2]))),y.normalized){const w=M_(pd[y.componentType]);c.multiplyScalar(w)}l.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}i.boundingBox=r;const o=new Qi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}function A1(i,e,t){const n=e.attributes,r=[];function s(o,l){return t.getDependency("accessor",o).then(function(c){i.setAttribute(l,c)})}for(const o in n){const l=S_[o]||o.toLowerCase();l in i.attributes||r.push(s(n[o],l))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(l){i.setIndex(l)});r.push(o)}return ba(i,e),yV(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?fV(i,e.targets,t):i})}const Ux=new WeakMap;class vV extends hr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new fs(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,l).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const h=t.attributeTypes[c];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=h.name)}const n=JSON.stringify(t);if(Ux.has(e)){const c=Ux.get(e);if(c.key===n)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,l=this._getWorker(s,o).then(c=>(r=c,new Promise((h,p)=>{r._callbacks[s]={resolve:h,reject:p},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return l.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Ux.set(e,{key:n,promise:l}),l}_createGeometry(e){const t=new Yt;e.index&&t.setIndex(new _n(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,o=r.array,l=r.itemSize;t.setAttribute(s,new _n(o,l))}return t}_loadLibrary(e,t){const n=new fs(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=xV.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function xV(){let i,e;onmessage=function(o){const l=o.data;switch(l.type){case"init":i=l.decoderConfig,e=new Promise(function(p){i.onModuleLoaded=function(g){p({draco:g})},DracoDecoderModule(i)});break;case"decode":const c=l.buffer,h=l.taskConfig;e.then(p=>{const g=p.draco,y=new g.Decoder,v=new g.DecoderBuffer;v.Init(new Int8Array(c),c.byteLength);try{const S=t(g,y,v,h),w=S.attributes.map(M=>M.array.buffer);S.index&&w.push(S.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:S},w)}catch(S){console.error(S),self.postMessage({type:"error",id:l.id,error:S.message})}finally{g.destroy(v),g.destroy(y)}});break}};function t(o,l,c,h){const p=h.attributeIDs,g=h.attributeTypes;let y,v;const S=l.GetEncodedGeometryType(c);if(S===o.TRIANGULAR_MESH)y=new o.Mesh,v=l.DecodeBufferToMesh(c,y);else if(S===o.POINT_CLOUD)y=new o.PointCloud,v=l.DecodeBufferToPointCloud(c,y);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!v.ok()||y.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+v.error_msg());const w={index:null,attributes:[]};for(const M in p){const A=self[g[M]];let C,b;if(h.useUniqueIDs)b=p[M],C=l.GetAttributeByUniqueId(y,b);else{if(b=l.GetAttributeId(y,o[p[M]]),b===-1)continue;C=l.GetAttribute(y,b)}w.attributes.push(r(o,l,y,M,A,C))}return S===o.TRIANGULAR_MESH&&(w.index=n(o,l,y)),o.destroy(y),w}function n(o,l,c){const p=c.num_faces()*3,g=p*4,y=o._malloc(g);l.GetTrianglesUInt32Array(c,g,y);const v=new Uint32Array(o.HEAPF32.buffer,y,p).slice();return o._free(y),{array:v,itemSize:1}}function r(o,l,c,h,p,g){const y=g.num_components(),S=c.num_points()*y,w=S*p.BYTES_PER_ELEMENT,M=s(o,p),A=o._malloc(w);l.GetAttributeDataArrayForAllPoints(c,g,M,w,A);const C=new p(o.HEAPF32.buffer,A,S).slice();return o._free(A),{name:h,array:C,itemSize:y}}function s(o,l){switch(l){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Jg;const Ox=()=>{if(Jg)return Jg;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=i;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(l(r),{}).then(g=>{s=g.instance,s.exports.__wasm_call_ctors()});function l(g){const y=new Uint8Array(g.length);for(let S=0;S<g.length;++S){const w=g.charCodeAt(S);y[S]=w>96?w-71:w>64?w-65:w>47?w+4:w>46?63:62}let v=0;for(let S=0;S<g.length;++S)y[v++]=y[S]<60?n[y[S]]:(y[S]-60)*64+y[++S];return y.buffer.slice(0,v)}function c(g,y,v,S,w,M){const A=s.exports.sbrk,C=v+3&-4,b=A(C*S),B=A(w.length),N=new Uint8Array(s.exports.memory.buffer);N.set(w,B);const F=g(b,v,S,B,w.length);if(F===0&&M&&M(b,C,S),y.set(N.subarray(b,b+v*S)),A(b-A(0)),F!==0)throw new Error(`Malformed buffer data: ${F}`)}const h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},p={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Jg={ready:o,supported:!0,decodeVertexBuffer(g,y,v,S,w){c(s.exports.meshopt_decodeVertexBuffer,g,y,v,S,s.exports[h[w]])},decodeIndexBuffer(g,y,v,S){c(s.exports.meshopt_decodeIndexBuffer,g,y,v,S)},decodeIndexSequence(g,y,v,S){c(s.exports.meshopt_decodeIndexSequence,g,y,v,S)},decodeGltfBuffer(g,y,v,S,w,M){c(s.exports[p[w]],g,y,v,S,s.exports[h[M]])}},Jg};let Kg=null,DR="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function LR(i=!0,e=!0,t){return n=>{t&&t(n),i&&(Kg||(Kg=new vV),Kg.setDecoderPath(typeof i=="string"?i:DR),n.setDRACOLoader(Kg)),e&&n.setMeshoptDecoder(typeof Ox=="function"?Ox():Ox)}}const kv=(i,e,t,n)=>$p(rS,i,LR(e,t,n));kv.preload=(i,e,t,n)=>$p.preload(rS,i,LR(e,t,n));kv.clear=i=>$p.clear(rS,i);kv.setDecoderPath=i=>{DR=i};const _V=q.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:l,onEnd:c,...h},p)=>{const g=Ca(F=>F.invalidate),y=Ca(F=>F.camera),v=Ca(F=>F.gl),S=Ca(F=>F.events),w=Ca(F=>F.setEvents),M=Ca(F=>F.set),A=Ca(F=>F.get),C=Ca(F=>F.performance),b=e||y,B=n||S.connected||v.domElement,N=q.useMemo(()=>new N4(b),[b]);return tS(()=>{N.enabled&&N.update()},-1),q.useEffect(()=>(s&&N.connect(s===!0?B:s),N.connect(B),()=>void N.dispose()),[s,B,t,N,g]),q.useEffect(()=>{const F=L=>{g(),t&&C.regress(),o&&o(L)},k=L=>{l&&l(L)},z=L=>{c&&c(L)};return N.addEventListener("change",F),N.addEventListener("start",k),N.addEventListener("end",z),()=>{N.removeEventListener("start",k),N.removeEventListener("end",z),N.removeEventListener("change",F)}},[o,l,c,N,g,w]),q.useEffect(()=>{if(i){const F=A().controls;return M({controls:N}),()=>M({controls:F})}},[i,N]),q.createElement("primitive",fy({ref:p,object:N,enableDamping:r},h))}),AV=({url:i,scale:e=1,position:t=[0,-20,50],rotation:n=[90,90,90]})=>{const r=q.useRef(null),{scene:s}=kv(i);return tS(o=>{r.current&&(r.current.position.y=Math.sin(o.clock.elapsedTime)*.5,r.current.rotation.y=o.clock.elapsedTime/2)}),U.jsx("group",{ref:r,children:U.jsx("primitive",{object:s,scale:e,position:t,rotation:n})})},SV=()=>U.jsx(Ll.div,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{type:"spring",duration:.8,delay:.9,stiffness:160},className:"w-full h-[500px]",children:U.jsxs(y4,{camera:{position:[20,0,30],fov:50},children:[U.jsx("ambientLight",{intensity:3}),U.jsx(q.Suspense,{fallback:U.jsx(C4,{center:!0,children:U.jsx("div",{children:"Loading 3D Model....."})}),children:U.jsx(AV,{url:"/no1/assets/models1/scene.gltf",scale:7,position:[-10,-15,0],rotation:[0,0,0]})}),U.jsx(_V,{})]})}),MV=()=>U.jsx("main",{className:"min-h-screen bg-gray-800",children:U.jsxs("div",{className:"w-full max-w-screen-xl mx-auto px-4 min-h-screen",children:[U.jsxs(Ll.header,{initial:{opacity:0},animate:{opacity:1},transition:{type:"spring",duration:1,delay:.5,stiffness:125},className:"flex justify-between items-center p-2 text-white",children:[U.jsx("span",{className:"font-bold text-5xl",children:"-Welcome to my website-"}),U.jsx("nav",{children:U.jsxs("ul",{className:"flex items-center gap-7 text-3xl",children:[U.jsxs("li",{children:[U.jsx(Rs,{to:"/",children:"Home"})," "]}),U.jsxs("li",{children:[U.jsx(Rs,{to:"/about",children:"About Me"})," "]}),U.jsxs("li",{children:[U.jsx(Rs,{to:"/service",children:"Service"})," "]}),U.jsxs("li",{children:[U.jsx(Rs,{to:"/contact",children:"Contact"})," "]})]})})]}),U.jsx("section",{className:"lg:py-48",children:U.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between",children:[U.jsxs("div",{className:"space-y-6 text-center lg:text-left",children:[U.jsx(Ll.h2,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",duration:1,delay:.5,stiffness:130},className:"text-white lg:text-9xl md:text-8xl font-bold lg:max-w-[40rem]",children:"My Portfolio Website"}),U.jsxs(Ll.p,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",duration:1,delay:.8,stiffness:130},className:"text-white lg:max-w-[40rem] lg:text-5xl font-semibold",children:["The ",U.jsx("span",{className:"text-orange-500",children:"coding"})," projects"]}),U.jsxs(Ll.div,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{type:"spring",duration:1,delay:.9,stiffness:130},className:"flex items-center gap-2 w-full justify-center",children:[U.jsx(Rs,{to:"/more-details",children:U.jsx("button",{className:"px-3 py-6 rounded-md border border-white border-2 my-4 hover:translate-y-1 duration-150",children:U.jsx("span",{className:"font-bold text-white",children:"More details"})})}),U.jsx(Rs,{to:"/samples",children:U.jsx("button",{className:"px-3 py-6 rounded-md border border-white border-2 my-4 hover:translate-y-1 duration-150",children:U.jsx("span",{className:"font-bold text-orange-500",children:"Samples"})})})]})]}),U.jsx("div",{className:"w-full lg:w-1/2 flex-shrink-0",children:U.jsx(SV,{})})]})})]})}),EV=()=>{const i=I1(),e="/no1/assets/models1/atcoder4.png",t=()=>{i("/")};return U.jsx("div",{className:"about-page bg-gradient-to-r from-blue-100 via-indigo-200 to-purple-300 text-gray-900 py-16 px-4",children:U.jsxs("div",{className:"container mx-auto max-w-4xl",children:[U.jsx("h1",{className:"text-4xl font-bold text-center mb-25 text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:"About Me"}),U.jsxs("div",{className:"my-12 bg-white p-8 rounded-xl shadow-lg shadow-gray-400/30",children:[U.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"自己紹介"}),U.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"現在、私は新しい技術を学びつつ、プログラミング、開発、競技プログラミングなどに注力しています。このサイトでは、私の経歴やスキル、そしてこれからのキャリアについての概要を紹介しています。どうぞよろしくお願いいたします。"})]}),U.jsxs("div",{className:"my-12 bg-white p-8 rounded-xl shadow-lg shadow-gray-400/30",children:[U.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"開発・スキル"}),U.jsxs("p",{className:"text-lg text-gray-700 leading-relaxed space-y-4",children:["私は広く浅く多くの技術に触れてきました。主に以下の分野で経験があります。",U.jsx("br",{}),U.jsx("br",{}),U.jsxs("div",{children:["1 : 競技プログラミング AtCoder、Codeforcesなどで活動しています。特にアルゴリズム、データ構造、そして計算量の見積もりと削減に少し強みがあります。このポートフォリオサイトや、他のプロジェクトでのアルゴリズムの最適化や、計算量の削減にも活かしています。 例えば、このポートフォリオサイトのページ遷移の高速化や、コンポーネントの再利用、ルーティング設定によるメンテナンス性、そして可読性を考慮した設計をしています。また、Three.jsを用いた、3DオブジェクトがHome pageで組み込まれているため、 3Dレンダリングの負荷が高くブラウザーのパフォーマンスに影響がででいたので、コンポーネントで分割し、かつ、useGLTF で重いモデルを読み込む部分は、React の Suspense を使って遅延読み込みし読み込み中のフォールバック UI を表示することでユーザー体験を向上しました。 ほかにもSnake gameの迷路自動生成にDFS、Ghostの行動規範をBFSでパックマンとの距離をBFSで計算するなども実装しカスタムすることで活かしています。",U.jsx("br",{})]}),U.jsxs("div",{children:["2 : ゲーム開発 snake gameやブロック崩しなどのゲームのc++での開発経験あり。(ライブラリ : SDL2,設計思想 : オブジェクト指向)",U.jsx("br",{})]}),U.jsxs("div",{children:["3 : Web開発 : Reactを用いた3Dオブジェクトを含むWebsiteの制作。(jQuery,Bootstrapm、HTML,CSSのみの開発も多少あり)",U.jsx("br",{})]}),U.jsx("div",{children:"4 : Github活用 このポートフォリオ関連の成果物をGithubで公開。(Github ActionsでCI/CDも導入) *画像が読み込まれないエラーあり"})]})]}),U.jsxs("div",{className:"my-12 bg-white p-8 rounded-xl shadow-lg shadow-gray-400/30",children:[U.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"私の強みとこだわり"}),U.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"私の強みは、問題解決能力と継続的な学習です。私は常に最新の技術を追い求め、自分を進化させ続けています。その姿勢を仕事に反映させることができ、プロジェクトで直面するどんな課題も、地道に解決策を見つけることができます。また、チームでの協力を大切にし、異なる視点や意見を取り入れることで、より良い成果を生み出すことができると信じています。"})]}),U.jsxs("div",{className:"my-12 bg-white p-8 rounded-xl shadow-lg shadow-gray-400/30",children:[U.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"どんな仕事をしたいのか"}),U.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"私がこれから挑戦していきたいことは、社会的な影響力を持つ技術の開発です。テクノロジーは日々進化していますが、その進化を社会全体にどれだけ有益に活かせるかが重要だと思っています。"})]}),U.jsxs("div",{className:"my-12 bg-white p-8 rounded-xl shadow-lg shadow-gray-400/30",children:[U.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"私が大切にしていること"}),U.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"どんな仕事にも共通して大切にしているのは、情熱と誠実です。私は自分がやることに対して責任を持ち、常に誠実に取り組みます。情熱を持って仕事に取り組むことが、良い結果を生み出す源泉だと信じています。個人としての成長だけでなく、チームや組織、さらには社会にどれだけ貢献できるかを考えながら仕事を進めていきます。"})]}),U.jsxs("div",{className:"my-12 bg-white p-8 rounded-xl shadow-lg shadow-gray-400/30",children:[U.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"過去の作品 - ブロック崩し"}),U.jsxs("p",{className:"text-lg text-gray-700 leading-relaxed",children:["過去にC++を用いて、「ブロック崩し」ゲームを制作しました。",U.jsx("br",{}),"ゲーム全体の構成にはオブジェクト指向設計を採用し、ボール、パドル、ブロックといった各要素をクラスとして定義。",U.jsx("br",{}),"それぞれが自律的に振る舞うように実装することで、機能追加や仕様変更にも柔軟に対応できる設計を意識しました。"]}),U.jsxs("p",{className:"text-lg text-gray-700 leading-relaxed mt-4",children:["描画処理やイベント処理には「SDL2ライブラリ」を活用。",U.jsx("br",{}),"SDL2公式ドキュメントを参考にしながら、自ら必要な機能を探索、使用、応用し自分の思い描くプロジェクトの実現の目的で、実装に組み込みました。",U.jsx("br",{}),"しかし、SDL2は日本語での解説や事例が比較的少なく、インターネット上にも実践的なサンプルコードも豊富にあるわけではございませんでした。",U.jsx("br",{}),"そのため、ライブラリの仕様や使い方を英語の公式ドキュメントやSDLを使用したエンジニアのGithubリポジトリーを参考にしながら、地道に調査・検証し、完成させました。"]}),U.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mt-4",children:"初めてのSDL2を用いたC++作品として、単に動かすだけでなく、オブジェクト指向設計やライブラリを組み込む設定や使用技術を養う貴重な経験となりました。 今後はこの経験を活かし、より複雑なゲームや、他ライブラリへの応用も積極的に行いたいと考えています。(※今回はPythonによる短期間でどれだけプロジェクトが作れるかという目的の実現のプロジェクトです。)"}),U.jsx("div",{className:"mt-6",children:U.jsx("a",{href:"https://github.com/sskkkkkkkkk/game1-breakdown-",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-lg font-medium",children:"➡️ GitHubリポジトリ"})})]}),U.jsxs("div",{className:"my-12 bg-white p-8 rounded-xl shadow-lg shadow-gray-400/30",children:[U.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"AtCoder 成績"}),U.jsxs("p",{className:"text-xl text-gray-700 leading-relaxed",children:["AtCoderでは、",U.jsx("br",{}),"[ 問題文を読解 ]➡[ 解法を導出 ]➡[ 多々あるアルゴリズムやデータ構造から特定のものを活用or応用 ]➡[ 実装する ]",U.jsx("br",{}),"という繰り返しを何度も反復してきました。",U.jsx("br",{}),"灰色上位に位置することができたのは、問題解決能力を磨く努力やや、問題の解法を導き実装する力を養ってきたからです。また、頻繁に実装の中でミスも発生するので、何度もエラーと向き合い、デバックをした経験もあります. その中で培ったスキルは、現実世界の問題解決にも応用できると感じています。"]}),U.jsxs("div",{className:"mt-6",children:[U.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"レート分布"}),U.jsx("p",{className:"text-xl text-gray-600",children:"以下は、私のAtCoderでのレート分布です。レート別の色分けでは灰色でその中で上位の位置づけです。平均して毎回のコンテストでC問題までの問題を解くことができます。C問題あたりは、ほぼ全探索でで解ける問題が多く、DFS、BFS,尺取り法、bit全探索,再帰関数、順列全探索などの基礎的なアルゴリズムを問題文を読んで、考察をしたうえで使えるくらいの実力です。グラフや木の問題に関しても、少なめの考察の問題であれば解くことができます。競技プログラミングの本質である、計算量削減のアルゴリズムについては、浅く広い知識はありますが、考察ありきの応用した実装はもう少し経験が必要です。 またデータ構造は、配列、スタック、キュー、優先度付きキューや、連想配列、ハッシュマップを使うことができます。"}),U.jsx("img",{src:e,alt:"AtCoder レート分布",className:"w-3/5 mt-4 rounded-md shadow-md"})]})]}),U.jsxs("div",{className:"my-12 bg-white p-8 rounded-xl shadow-lg shadow-gray-400/30",children:[U.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"最後に"}),U.jsx("p",{className:"text-2x1 text-gray-700 leading-relaxed",children:"私のキャリアはまだ始まったばかりですが、これからも新しい技術に挑戦し、成長し続けたいと思っています。そして、私の作ったものが、少しでも多くの人々の役に立つことができれば最高です。どんな小さなことでも、人々にインパクトを与えられるようなエンジニアでありたいと考えています。"})]}),U.jsx("div",{className:"text-center mt-12",children:U.jsx("button",{onClick:t,className:"bg-teal-500 text-white py-2 px-6 rounded-lg shadow-md hover:bg-teal-600 transition duration-300",children:"back"})})]})})},wV=()=>U.jsx("div",{className:"flex justify-center my-8",children:U.jsxs("svg",{width:"400",height:"300",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("rect",{x:"100",y:"20",width:"200",height:"50",fill:"#f0f0f0",stroke:"#333"}),U.jsx("text",{x:"200",y:"50",textAnchor:"middle",fontSize:"14",fill:"#333",children:"ゲーム全体の状態"}),U.jsx("rect",{x:"50",y:"100",width:"100",height:"50",fill:"#e6f7ff",stroke:"#333"}),U.jsx("text",{x:"100",y:"130",textAnchor:"middle",fontSize:"12",fill:"#333",children:"Pac-Man"}),U.jsx("rect",{x:"160",y:"100",width:"100",height:"50",fill:"#ffebcc",stroke:"#333"}),U.jsx("text",{x:"210",y:"130",textAnchor:"middle",fontSize:"12",fill:"#333",children:"ゴースト"}),U.jsx("rect",{x:"270",y:"100",width:"100",height:"50",fill:"#d9f7be",stroke:"#333"}),U.jsx("text",{x:"320",y:"130",textAnchor:"middle",fontSize:"12",fill:"#333",children:"ステージ"}),U.jsx("line",{x1:"200",y1:"70",x2:"100",y2:"100",stroke:"#333"}),U.jsx("line",{x1:"200",y1:"70",x2:"210",y2:"100",stroke:"#333"}),U.jsx("line",{x1:"200",y1:"70",x2:"320",y2:"100",stroke:"#333"})]})}),TV=()=>{const i="/no1/assets/models1/snake.png",e="/no1/assets/models1/pac-man.png",t="/no1/assets/models1/calculator.png",n=()=>U.jsxs("div",{children:[U.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Pac-Manの状態管理型アーキテクチャ"}),U.jsx(wV,{})]});return U.jsxs(Ll.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"container mx-auto px-6 py-12 min-h-screen overflow-y-auto",children:[U.jsx("h1",{className:"text-4xl font-bold text-center mb-35 mt-25",children:"Services"}),U.jsxs("section",{className:"mb-12",children:[U.jsx("h2",{className:"text-3xl font-semibold mb-15 mt-15",children:"🐍 Snake Game - 技術解説"}),U.jsx("h3",{className:"text-xl font-semibold mb-2 mt-5",children:"アーキテクチャ"}),U.jsxs("div",{className:"text-lg text-gray-700 mb-15 space-y-5",children:[U.jsx("p",{children:"本作のSnake Gameは、Pygameをベースに構築されたシンプルながら拡張性の高い構成になっています。"}),U.jsx("p",{children:"ゲームループを軸に、毎フレームごとに「入力の取得」「ゲーム状態の更新」「画面の描画」という3つの処理を順番に実行することでゲームを制御しています。"}),U.jsx("p",{children:"ヘビの移動や果物の生成、衝突判定といった各ロジックは独立した関数に分け、責務が分離された設計です。"})]}),U.jsx("h3",{className:"text-xl font-semibold mb-8",children:"技術スタック"}),U.jsxs("ul",{className:"text-lg list-disc pl-6 mb-15 space-y-5",children:[U.jsxs("li",{children:[U.jsx("strong",{children:"Python + Pygame:"}),"グラフィック描画、イベント処理、フレームレート制御など、Pygameの機能をフル活用。ヘビや果物、スコア表示など、すべての描画はPygameのSurfaceに直接描画します。"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"オブジェクト指向設計:"}),"ヘビや果物はそれぞれ独立したデータ構造として管理され、座標やサイズなどの状態を持ちます。ゲーム進行に合わせて、各オブジェクトの状態が更新される仕組みです。"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"イベント駆動＋ループベース:"}),"プレイヤーのキーボード操作はイベントとして処理し、各フレームごとにヘビの移動方向が更新されます。状態更新と描画が毎フレーム実行されるため、スムーズな操作感を実現しています。"]})]}),U.jsx("h3",{className:"text-xl font-semibold mb-8",children:"ゲームロジックとデータ管理"}),U.jsxs("div",{className:"text-lg text-gray-700 mb-6 space-y-5",children:[U.jsx("p",{children:"ヘビの身体は座標のリスト（配列）として管理されています。"}),U.jsx("p",{children:"移動するごとに新しい頭の座標がリストに追加され、尻尾側の座標が削除されることで、ヘビの伸縮を表現しています。"}),U.jsx("p",{children:"果物はランダムな座標に生成され、ヘビが果物を食べるとスコアが加算され、ヘビの長さが1マス分伸びる仕組みです。"}),U.jsxs("p",{children:["ゲームオーバー判定は",U.jsx("span",{className:"underline",children:"「壁への衝突」"}),",",U.jsx("span",{className:"underline",children:"「自身の身体への衝突」"}),"によって行われ、ゲーム終了時にはスコアが表示されるようになっています。"]})]}),U.jsx("h3",{className:"text-xl font-semibold mb-8",children:"速度調整と難易度設計"}),U.jsxs("div",{className:"text-lg text-gray-700 mb-6 space-y-4",children:[U.jsx("p",{children:"ゲーム進行に合わせて、フレームレート（ヘビの移動速度）を徐々に引き上げることで、段階的に難易度が上昇する仕組みになっています。"}),U.jsx("p",{children:"ヘビの体が長くなるほど、移動スペースが限られ、戦略的な操作が求められるよう設計されています。"}),U.jsx("p",{children:"また、果物の生成位置は毎回ランダムに設定されるため、プレイごとに異なる配置・展開が楽しめるようになっています。"})]}),U.jsx("h3",{className:"text-xl font-semibold mb-8",children:"Pygameによる描画と画面遷移"}),U.jsxs("div",{className:"text-lg text-gray-700 mb-6 space-y-4",children:[U.jsx("p",{children:"画面描画はPygameのSurfaceに対して、毎フレーム全体を再描画する方式を採用しています。"}),U.jsx("p",{children:"これにより、ヘビの動きや果物の位置変化、スコアのカウントアップなどが即座に反映されます。"}),U.jsx("p",{children:"ゲームオーバー時には、画面全体に「Game Over」のメッセージを表示し、リスタートを促す設計です。"})]}),U.jsx("div",{className:"text-center mt-20 mb-6",children:U.jsx("img",{src:i,alt:"Snake Game",className:"mx-auto w-60 h-60 object-cover mb-4"})}),U.jsx("h3",{className:"text-2xl font-semibold mb-15",children:"ファイル構成 📂"}),U.jsx("pre",{className:"bg-gray-100 p-4 rounded-md mb-10",children:U.jsx("code",{children:`
snake_game/
│
├── main.py           # ゲームのメインロジック
├── game.py           # ゲーム管理クラス
├── snake.py          # スネークの挙動を管理するクラス
├── food.py           # 食べ物の生成と描画を管理するクラス
├── music/            # BGMと効果音を格納するフォルダ
│   ├── BGM1.mp3      # ゲーム中のBGM
│   └── effect1.wav   # 衝突時の効果音
└── README.md         # 説明書（このファイル）
    `})}),U.jsx("div",{className:"text-center",children:U.jsx("a",{href:"https://github.com/sinnn9593/snake_game",target:"_blank",rel:"noopener noreferrer",children:U.jsx("button",{className:"px-6 py-3 bg-blue-500 text-white text-lg rounded-md hover:bg-blue-600 transition",children:"View on GitHub"})})})]}),U.jsxs("section",{className:"mb-12",children:[U.jsx("h2",{className:"text-3xl font-semibold mt-15 mb-15",children:"🕹️ Pac-Man - 技術解説"}),U.jsx("h3",{className:"text-xl font-semibold mb-6",children:"アーキテクチャ"}),U.jsxs("div",{className:"text-lg text-gray-700 mb-6 space-y-4 mb-8",children:[U.jsx("p",{children:"Pac-Manは、エンティティ駆動型および状態遷移型アーキテクチャを採用しており、ゲーム内のすべての要素（Pac-Man本体、ゴースト、エサ、壁など）がそれぞれ独自の状態と振る舞いを持ちます。"}),U.jsx("p",{children:"各エンティティは独立したオブジェクトとして管理され、ゲームループ内で毎フレームごとに状態が更新されます。またPygameを採用しているので、Surfaceに直接描画しています。"}),U.jsxs("p",{children:["特にでは、",U.jsx("span",{className:"underline",children:"「ターゲット座標の設定」「最短経路探索」「ランダム移動」「ステージの自動生成」"}),"など複数のロジックが組み合わさることで、単純な追跡行動に終わらず、多様な動きを実現しています。"]}),U.jsx("p",{children:"この構造により、ステージ設計やゴーストの行動パターンをパラメータ化し、ゲームバランスを細かく調整できる設計になっています。"})]}),U.jsx("h3",{className:"text-xl font-semibold mb-15",children:"📂 フォルダ構成"}),U.jsx("pre",{className:"bg-gray-100 p-4 rounded-md mb-8",children:U.jsx("code",{children:`
pacman/
├── assets/              # 画像・音声データ
├── src/
│   ├── game.py          # メインループ
│   ├── player.py        # Pac-Manクラス
│   ├── ghost.py         # ゴーストクラス
│   ├── map.py           # マップ描画・管理
│   └── utils.py         # 補助関数
└── README.md             # 技術解説＆プレイガイド
      `})}),U.jsx("h3",{className:"text-xl font-semibold mb-15",children:"技術スタック"}),U.jsxs("ul",{className:"text-lg list-disc pl-6 mb-6 space-y-10 mb-15",children:[U.jsxs("li",{children:[U.jsx("strong",{children:"Python (3.x):"}),U.jsx("br",{}),"ゲーム全体のロジックからグラフィック描画、キャラクターの動作制御、衝突判定、スコア管理に至るまで、すべてPythonで実装しています。特にPygameライブラリを採用しており、ゲームウィンドウの生成、イベントハンドリング（キー入力）、タイマー管理、音声再生などの基本機能をフル活用しています。Pythonのオブジェクト指向を活かし、Pac-Man、ゴースト、エサ、壁といった各要素を個別のクラスに分離することで、可読性と拡張性を確保しています。 また、AIアルゴリズム（追跡、逃避、ランダム移動など）は、それぞれ専用のメソッドとして実装し、ゴーストごとに異なる性格を持たせることが可能になっています。これにより、パラメーター調整のみで難易度を柔軟に変更できる設計になっています。",U.jsx("span",{className:"underline",children:"エンティティの状態管理や衝突判定"}),"、スコア計算などの各種ロジックをフレーム単位で更新する、ゲームループ型の構成です。"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"Pygame (2.x):"}),U.jsx("br",{}),"迷路やキャラクター、エサ、ゴーストなど、すべてのグラフィック要素はPygameのSurface（サーフェス）に直接描画しています。スプライトシートを活用し、キャラクターのアニメーション（移動時のパックマンの口の開閉やゴーストの目の動きなど）を簡潔に管理。Pygameの「blit()」メソッドを駆使して、描画負荷を抑えつつ、毎フレームごとに最新の状態を反映しています。 また、Pygameのイベントハンドリング機能により、プレイヤーからのキー入力（矢印キーによる移動）をリアルタイムに取得し、即座にPac-Manの動作に反映。これにより、「イベント駆動型プログラム」としての構造を持ちながら、ゲームの流れをシンプルに保つ工夫をしています。"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"サウンド管理:"}),U.jsx("br",{}),"ゲーム中の効果音（エサを食べたとき、ゴーストにやられたとき、クリア時のファンファーレなど）は、Pygame.mixerモジュールで制御。特に、複数サウンドの同時再生や、BGMと効果音のミキシングには、Pygame.mixerを活用しています。 音声ファイルはWAV形式で管理し、ファイルサイズと音質のバランスを考慮した設計です。"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"UI表示（スコア・メッセージ表示）:"}),U.jsx("br",{}),"スコア表示や「GAME OVER」「READY!」といったメッセージ表示は、Pygameのフォント描画機能（pygame.font）を使用して実現。ゲームエリアに直接描画することで、Canvasライクな描画手法を採用しています。 文字色や位置はパラメーター化されており、フォントサイズや色の変更にも柔軟に対応できる構造です。 画面全体のレイアウトは、「ゲームエリア（迷路）」「ステータス表示エリア（スコア・残機）」を分離し、可読性を確保。これにより、スコアを常に確認できるユーザーフレンドリーな画面構成にしています。"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"マップデータ管理:"}),U.jsx("br",{}),"迷路デザイン（壁やエサの配置）については、外部ファイル化することで、ステージごとのデザイン変更にも対応。CSVやテキスト形式でマップデータを保存し、ゲーム起動時に読み込む仕組みを採用しています。 これにより、プログラムを書き換えずに、新しいステージを追加可能な拡張性を実現しています。ステージデータには、「壁の種類」「エサの位置」「ゴーストの初期配置」などの情報が含まれており、ゲーム進行に応じてエサの消失状態も記録・更新されます。"]})]}),U.jsx("h3",{className:"text-xl font-semibold mb-8",children:"ゲームロジックとアルゴリズム"}),U.jsxs("p",{className:"text-lg text-gray-700 mb-6",children:["Pac-Manにおける最大の特徴は、3体のゴーストがそれぞれ異なるを持ち、プレイヤーに対して異なるプレッシャーを与える点です。",U.jsx("br",{}),"例えば："]}),U.jsxs("ul",{className:"list-disc pl-6 mb-6 space-y-4",children:[U.jsxs("li",{children:[U.jsx("strong",{children:"赤（Blinky）:"})," ","最短ルートでPac-Manを直接追跡する「チェイサー」タイプ。"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"青（Inky）:"})," ","不規則な動きをする「トリックスター」タイプ。"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"オレンジ（Clyde）:"})," ","近距離では逃げるが、遠距離では追いかける「臆病者」タイプ。"]})]}),U.jsxs("p",{className:"text-lg text-gray-700 mb-15",children:["これらの複雑なゴーストの行動規範は、",U.jsx("span",{className:"underline",children:U.jsx("strong",{children:"マンハッタン距離"})}),"を基準にしたターゲット座標の設定、および",U.jsx("span",{className:"underline",children:U.jsx("strong",{children:"深さ優先探索"})}),"に基づく",U.jsx("strong",{children:"最短経路探索"}),"によって実現されています 。",U.jsx("br",{}),"またパックマンのマップについて、毎回プレイごとに異なるマップをランダムに生成することを可能にしました。深さ優先探索を用いて、スタックに初めの座標を挿入することで、そこから、通路を構築することでマップの生成をしています。"]}),U.jsx("h3",{className:"text-xl font-semibold mb-8",children:"設計パターンとユーザーインタラクション"}),U.jsxs("div",{className:"text-lg text-gray-700 mb-25 space-y-4",children:[U.jsx("p",{children:"ユーザー操作（矢印キー）によるイベントをもとにPac-Manが移動します。またGame RoopによりRoopが回るたびに状況が変わっていきます。"}),U.jsx("p",{children:"矢印キーが押されると、イベントハンドラーがそれを読み取りパックマンが動く仕組みです。またパックマンの位置に応じて、ある種類のGhostの動きも変化します。またステージの自動生成により、プレイするごとに新鮮感をもたせることができます。"})]}),U.jsx(n,{}),U.jsxs("div",{className:"text-lg text-gray-700 mt-15 mb-6 space-y-4",children:[U.jsx("p",{children:"上のSVG図は、ゲーム内のエンティティ（Pac-Man、ゴースト、エサなど）がそれぞれ自分の「状態」を持ち、毎フレームごとに更新される仕組みを表したものです。"}),U.jsx("p",{children:"プレイヤーの操作やゴーストの動きに応じて、それぞれの状態が変化し、ゲーム全体が進行していきます。"}),U.jsx("p",{children:"このように個別の状態を管理することで、複雑な動きやイベントにも対応しやすくなっています。"})]}),U.jsx("div",{className:"text-center mb-6",children:U.jsx("img",{src:e,alt:"Pac-Man",className:"mx-auto w-60 h-60 object-cover mb-4"})}),U.jsx("div",{className:"text-center",children:U.jsx("a",{href:"https://github.com/sinnn9593/pacman",target:"_blank",rel:"noopener noreferrer",children:U.jsx("button",{className:"px-6 py-3 bg-blue-500 text-white text-lg rounded-md hover:bg-blue-600 transition",children:"View on GitHub"})})})]}),U.jsxs("section",{className:"mb-12",children:[U.jsx("h2",{className:"text-3xl font-semibold mb-8",children:"🧮 Custom Calculator - 技術解説"}),U.jsx("h3",{className:"text-xl font-semibold mb-6",children:"概要"}),U.jsxs("div",{className:"text-lg text-gray-700 mb-10 space-y-4",children:[U.jsx("p",{children:"「Custom Calculator」は、お釣り計算に特化したデスクトップアプリです。"}),U.jsx("p",{children:"ユーザーが「支払い金額」と「受け取り金額」を入力すると、その差額を計算し表示します。"}),U.jsx("p",{children:"マイナス（負の数）を防ぐため、絶対値（正の数）で差額を表示する仕様です。"}),U.jsx("p",{children:"シンプルな操作性と機能性を重視しており、今後はモバイル対応も視野に入れています。"})]}),U.jsx("h3",{className:"text-xl font-semibold mb-2",children:"技術スタック"}),U.jsxs("ul",{className:"list-disc pl-6 mb-10 space-y-4",children:[U.jsxs("li",{className:"text-lg",children:[U.jsx("strong",{children:"Python & PyQt5:"}),U.jsx("span",{className:"underline",children:"デスクトップアプリとしてPythonで実装し、UI部分はPyQt5を使用"}),"。直感的な操作感を提供します。"]}),U.jsxs("li",{className:"text-lg",children:[U.jsx("strong",{children:"Docker:"}),"アプリケーションは",U.jsx("span",{className:"underline",children:"Dockerコンテナで管理"}),"。",U.jsx("span",{className:"underline",children:"Windows・macOSのどちらでも動作するクロスプラットフォーム設計"}),"です。"]}),U.jsxs("li",{className:"text-lg",children:[U.jsx("strong",{children:"シンプル設計:"}),"四則演算機能はなく、「お釣り計算」という特定用途に特化。業務や店舗シーンでの素早い計算をサポートします。"]})]}),U.jsx("h3",{className:"text-xl font-semibold mb-5",children:"アーキテクチャ"}),U.jsxs("div",{className:"text-lg text-gray-700 mb-10 space-y-4",children:[U.jsx("p",{children:"アプリケーションはシンプルなクライアント型アーキテクチャを採用。"}),U.jsx("p",{children:" ユーザーの入力は即座にアプリ内部のロジックに反映され、結果がリアルタイムで表示されます。"}),U.jsx("p",{children:"データ保存機能などの補助機能は排除しています。"})]}),U.jsx("h3",{className:"text-xl font-semibold mb-2",children:"機能と特徴"}),U.jsxs("ul",{className:"text-lg list-disc pl-6 mb-10 space-y-4",children:[U.jsx("li",{children:"「支払い金額」「受け取り金額」を入力し、ボタン一つでお釣りを計算"}),U.jsx("li",{children:"引き算結果は絶対値で表示（マイナス表示なし）"}),U.jsx("li",{children:"キー入力とボタンクリック両対応"}),U.jsx("li",{children:"デザインは極力シンプルに、業務利用を想定"}),U.jsxs("li",{children:[U.jsx("span",{className:"underline",children:"Windows・macOS対応済み"}),"。将来的にモバイル版も計画中"]})]}),U.jsx("h3",{className:"text-xl font-semibold mb-8",children:"UI/UXデザイン"}),U.jsxs("div",{className:"text-lg text-gray-700 mb-25 space-y-4",children:[U.jsx("p",{children:"デザインは機能重視・シンプル。"}),U.jsx("p",{children:"必要最小限のボタン配置で、初めて使う人でも迷わず操作できる設計です。"}),U.jsx("p",{children:"将来的には、ユーザーのフィードバックを元に、カスタマイズ機能やテーマ変更機能の追加も検討しています。"})]}),U.jsx("div",{className:"text-center mb-6",children:U.jsx("img",{src:t,alt:"Custom Calculator",className:"mx-auto w-60 h-60 object-cover mb-4"})})]}),U.jsx("div",{className:"text-center mb-6",children:U.jsxs("div",{className:"flex justify-center gap-6",children:[U.jsx("a",{href:"https://github.com/sinnn9593/calculator-for-delivery/archive/refs/tags/v1.0.0.zip",target:"_blank",rel:"noopener noreferrer",children:U.jsx("button",{className:"px-6 py-3 bg-blue-500 text-white text-lg rounded-md hover:bg-blue-600 transition",children:"Download for Windows"})}),U.jsx("a",{href:"https://github.com/sinnn9593/calculator-for-delivery/archive/refs/tags/v1.0.0.tar.gz",target:"_blank",rel:"noopener noreferrer",children:U.jsx("button",{className:"px-6 py-3 bg-blue-500 text-white text-lg rounded-md hover:bg-blue-600 transition",children:"Download for MacOS/Linux"})})]})}),U.jsx("div",{className:"text-center mt-12",children:U.jsx(Rs,{to:"/",children:U.jsx("button",{className:"px-6 py-3 bg-gray-500 text-white text-lg rounded-md hover:bg-gray-600 transition",children:"back"})})})]})};class tm{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const CV=()=>{if(!(typeof localStorage>"u"))return{get:i=>Promise.resolve(localStorage.getItem(i)),set:(i,e)=>Promise.resolve(localStorage.setItem(i,e)),remove:i=>Promise.resolve(localStorage.removeItem(i))}},Yi={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:CV()},sS=i=>i?typeof i=="string"?{publicKey:i}:i.toString()==="[object Object]"?i:{}:{},bV=(i,e="https://api.emailjs.com")=>{if(!i)return;const t=sS(i);Yi.publicKey=t.publicKey,Yi.blockHeadless=t.blockHeadless,Yi.storageProvider=t.storageProvider,Yi.blockList=t.blockList,Yi.limitRate=t.limitRate,Yi.origin=t.origin||e},FR=async(i,e,t={})=>{const n=await fetch(Yi.origin+i,{method:"POST",headers:t,body:e}),r=await n.text(),s=new tm(n.status,r);if(n.ok)return s;throw s},NR=(i,e,t)=>{if(!i||typeof i!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},RV=i=>{if(i&&i.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},UR=i=>i.webdriver||!i.languages||i.languages.length===0,OR=()=>new tm(451,"Unavailable For Headless Browser"),PV=(i,e)=>{if(!Array.isArray(i))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},BV=i=>{var e;return!((e=i.list)!=null&&e.length)||!i.watchVariable},IV=(i,e)=>i instanceof FormData?i.get(e):i[e],kR=(i,e)=>{if(BV(i))return!1;PV(i.list,i.watchVariable);const t=IV(e,i.watchVariable);return typeof t!="string"?!1:i.list.includes(t)},HR=()=>new tm(403,"Forbidden"),DV=(i,e)=>{if(typeof i!="number"||i<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},LV=async(i,e,t)=>{const n=Number(await t.get(i)||0);return e-Date.now()+n},zR=async(i,e,t)=>{if(!e.throttle||!t)return!1;DV(e.throttle,e.id);const n=e.id||i;return await LV(n,e.throttle,t)>0?!0:(await t.set(n,Date.now().toString()),!1)},GR=()=>new tm(429,"Too Many Requests"),FV=async(i,e,t,n)=>{const r=sS(n),s=r.publicKey||Yi.publicKey,o=r.blockHeadless||Yi.blockHeadless,l=r.storageProvider||Yi.storageProvider,c={...Yi.blockList,...r.blockList},h={...Yi.limitRate,...r.limitRate};return o&&UR(navigator)?Promise.reject(OR()):(NR(s,i,e),RV(t),t&&kR(c,t)?Promise.reject(HR()):await zR(location.pathname,h,l)?Promise.reject(GR()):FR("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:i,template_id:e,template_params:t}),{"Content-type":"application/json"}))},NV=i=>{if(!i||i.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},UV=i=>typeof i=="string"?document.querySelector(i):i,OV=async(i,e,t,n)=>{const r=sS(n),s=r.publicKey||Yi.publicKey,o=r.blockHeadless||Yi.blockHeadless,l=Yi.storageProvider||r.storageProvider,c={...Yi.blockList,...r.blockList},h={...Yi.limitRate,...r.limitRate};if(o&&UR(navigator))return Promise.reject(OR());const p=UV(t);NR(s,i,e),NV(p);const g=new FormData(p);return kR(c,g)?Promise.reject(HR()):await zR(location.pathname,h,l)?Promise.reject(GR()):(g.append("lib_version","4.4.1"),g.append("service_id",i),g.append("template_id",e),g.append("user_id",s),FR("/api/v1.0/email/send-form",g))},kV={init:bV,send:FV,sendForm:OV,EmailJSResponseStatus:tm},HV=()=>{const[i,e]=q.useState({name:"",email:"",message:""}),[t,n]=q.useState(!1),[r,s]=q.useState(""),o=c=>{e({...i,[c.target.name]:c.target.value})},l=c=>{c.preventDefault(),s(""),console.log("Service ID:","service_6d4wjwn"),console.log("Template ID:","template_0tm5bi7"),console.log("Public Key:","w50TrsoroQFepHUwu"),kV.sendForm("service_6d4wjwn","template_0tm5bi7",c.target,"w50TrsoroQFepHUwu").then(()=>{n(!0),e({name:"",email:"",message:""})},h=>{console.error("Error:",h),s("Failed to send message. Please try again.")})};return U.jsx("div",{className:"min-h-screen bg-gradient-to-r from-blue-100 to-white py-16 px-8",children:U.jsxs("div",{className:"max-w-xl mx-auto bg-white p-8 rounded-lg shadow-lg",children:[U.jsx("h2",{className:"text-3xl font-semibold text-center mb-6",children:"Contact Me"}),t?U.jsx("p",{className:"text-center text-green-600",children:"Your message has been sent successfully!"}):U.jsxs("form",{onSubmit:l,children:[U.jsxs("div",{className:"mb-4",children:[U.jsx("label",{htmlFor:"name",className:"block text-lg font-medium mb-2",children:"Name"}),U.jsx("input",{type:"text",name:"name",value:i.name,onChange:o,className:"w-full p-3 border border-gray-300 rounded-md",required:!0})]}),U.jsxs("div",{className:"mb-4",children:[U.jsx("label",{htmlFor:"email",className:"block text-lg font-medium mb-2",children:"Email"}),U.jsx("input",{type:"email",name:"email",value:i.email,onChange:o,className:"w-full p-3 border border-gray-300 rounded-md",required:!0})]}),U.jsxs("div",{className:"mb-4",children:[U.jsx("label",{htmlFor:"message",className:"block text-lg font-medium mb-2",children:"Message"}),U.jsx("textarea",{name:"message",value:i.message,onChange:o,className:"w-full p-3 border border-gray-300 rounded-md",required:!0})]}),r&&U.jsx("p",{className:"text-red-500 text-center",children:r}),U.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition",children:"Send Message"})]}),!t&&U.jsx("div",{className:"mt-4 text-center text-lg text-gray-600",children:U.jsxs("strong",{children:["※送信するとこちらのメールから確認できます。",U.jsxs("p",{className:"underline",children:["バックエンドは",U.jsx("span",{className:"font-semibold",children:"Email.js"}),"の技術を使用しています。"]})]})}),U.jsx("div",{className:"text-center mt-6",children:U.jsx(Rs,{to:"/",className:"px-6 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition",children:"Back"})})]})})},zV=()=>U.jsxs(Ll.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"container mx-auto px-6 py-12",children:[U.jsx("h1",{className:"text-3xl font-bold text-center mb-10",children:"Portfolio Site Overview"}),U.jsx("div",{className:"text-center mt-12 mb-20",children:U.jsx("a",{href:"https://github.com/sinnn9593/no1",target:"_blank",rel:"noopener noreferrer",children:U.jsx("button",{className:"px-6 py-3 bg-blue-500 text-white text-lg rounded-md hover:bg-blue-600 transition",children:"View on GitHub"})})}),U.jsxs("section",{className:"mb-12",children:[U.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"🎯 設計思想"}),U.jsx("p",{className:"text-lg text-gray-700",children:"本ポートフォリオは、インタラクティブなデザイン,ページ遷移の高速化を重視して構築されました。 フロントエンドのモダン技術を採用し、拡張性、コンポーネント分割とルーティング設定によるメンテナンス性そして可読性を考慮した設計をしています。"})]}),U.jsxs("section",{className:"mb-12",children:[U.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"🛠 技術スタック"}),U.jsxs("ul",{className:"text-lg list-disc pl-6 text-gray-700 space-y-4",children:[U.jsxs("li",{children:[U.jsx("strong",{children:"フロントエンド:"})," React (TypeScript), Vite"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"UI スタイリング:"})," TailwindCSS, Framer Motion"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"3D モデリング:"})," Three.js, React Three Fiber"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"ルーティング:"})," React Router"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"デプロイ環境:"})," Github Pages"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"バックエンド(コンタクトページ):"})," Email.js"]})]}),U.jsx("p",{children:"etc....."})]}),U.jsx("h3",{className:"text-xl font-semibold mb-2",children:"サイトマップ（Sitemap） 📂"}),U.jsx("pre",{className:"bg-gray-100 p-4 rounded-md mb-6",children:U.jsx("code",{children:`Home
├── About Me
│      └── Home
├── Service
│      └── Home
├── Contact
│      └── Home
├── Sample Page
│      ├── Home
│      └── Service
├── More Detail
     └── Home

    `})}),U.jsxs("section",{className:"mb-12",children:[U.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"📓 課題と解決策"}),U.jsx("p",{className:"text-lg text-gray-700",children:"開発時に直面した問題と、それに対する解決策を紹介します。"}),U.jsxs("ul",{className:"text-lg list-disc pl-6 text-gray-700 mt-4 space-y-4",children:[U.jsxs("li",{children:[U.jsx("strong",{children:"ビルド時間の最適化:"})," 決められた時間内で、できる限り開発を進めるため、効率性を考慮し、Vite によるホットリロードを活用。ローカルサーバーでの開発をスムーズに行う。"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"3D モデルの負荷軽減:"})," GLTF ファイルの最適化と lazy loadingを活用。Three.jsを用いたプロジェクト箇所のみコンポーネント分割をし、Suspenseタグで遅延読み込みを実装。"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"可読性の向上とメンテナンス重視:"}),"TailwindCSSを適用し、各コンポーネントやページに関するプロジェクトファイルの量を減少。"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"あらゆるデバイスからのサイトへのアクセスを予想・準備:"}),"レスポンシブデザインを適用し、スマートフォン、タブレット、デスクトップなど、あらゆるデバイスでの閲覧を想定。 Reactによるコンポーネント設計により、デバイスごとのレイアウトを柔軟に変更可能。(※Home Page以外適用済み)"]})]})]}),U.jsxs("section",{className:"mb-12",children:[U.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"🚀 パフォーマンスの最適化と3Dオブジェクトによる動的なデザイン"}),U.jsx("p",{className:"text-lg text-gray-700",children:"ページの高速化と可読性の向上を実現するために、以下の技術を適用しました。"}),U.jsxs("ul",{className:"text-lg list-disc pl-6 text-gray-700 mt-4 mb-8",children:[U.jsx("li",{children:"SPAによるページ遷移の高速化"}),U.jsx("li",{children:"Framer Motion による最適なアニメーション"}),U.jsx("li",{children:"コード分割による初回ロードの負担軽減"})]}),U.jsx("p",{className:"text-lg gray-700",children:"Three.js と React Three Fiber を活用し、3D オブジェクトを用いたダイナミックなデザインを実現しました。"})]}),U.jsxs("section",{className:"mb-12",children:[U.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"今後の展望"}),U.jsxs("ul",{className:"text-lg list-disc pl-6 text-gray-700 space-y-4",children:[U.jsx("li",{children:"ブログ機能の追加"}),U.jsx("li",{children:"カスタムフックを活用したコードの整理"}),U.jsx("li",{children:"ページ内容の充実"})]})]}),U.jsx("div",{className:"text-center mt-12",children:U.jsx("a",{href:"/no1/",className:"px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition",children:"back"})})]}),GV=()=>U.jsxs(Ll.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"container mx-auto px-6 py-12 min-h-screen overflow-y-auto",children:[U.jsx("h1",{className:"text-4xl font-bold text-center mb-45",children:"Samples"}),U.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-45",children:[U.jsxs("div",{className:"bg-yellow-100 shadow-md rounded-lg p-10 text-center min-h-[500px]",children:[U.jsx("img",{src:"/no1/assets/models1/pac-man.png",alt:"pac-man",className:"mx-auto w-40 h-40 object-cover mb-4"}),U.jsx("h2",{className:"text-2xl font-semibold",children:"🕹️ Pac-Man"}),U.jsx("p",{className:"text-lg text-gray-700 mt-2",children:"クラシックな迷路ゲーム。"}),U.jsx("h3",{className:"mt-4 text-xl font-bold",children:"🎮 遊び方"}),U.jsx("p",{className:"text-base",children:"Pac-Manは、矢印キーを使って上下左右に移動できます。迷路内に散らばるドットをすべて食べると、ステージクリアとなります。"}),U.jsx("h3",{className:"mt-4 text-xl font-bold",children:"📅 予定"}),U.jsx("p",{className:"text-base",children:"このゲームでは、自動迷路生成アルゴリズムを実装しているため、ステージの通路が一方通行になりがちです。そのためワープ機能の追加や、敵キャラの行動パターンの改善を予定しています。"}),U.jsx("h3",{className:"mt-4 text-xl font-bold",children:"🧩 Tips"}),U.jsx("p",{className:"text-base",children:"ゲームの敵キャラにはそれぞれ異なる行動パターンがあり、特定のルートで動きます。これを覚えると攻略しやすくなります"})]}),U.jsxs("div",{className:"bg-green-100 shadow-md rounded-lg p-10 text-center min-h-[500px]",children:[U.jsx("img",{src:"/no1/assets/models1/snake.png",alt:"Snake Game",className:"mx-auto w-40 h-40 object-cover mb-4"}),U.jsx("h2",{className:"text-2xl font-semibold",children:"🐍 Snake Game"}),U.jsx("p",{className:"text-lg text-gray-700 mt-2",children:"ヘビを操作してスコアを伸ばそう！"}),U.jsx("h3",{className:"mt-4 text-xl font-bold",children:"🎮 遊び方"}),U.jsx("p",{className:"text-base",children:"Snake Gameでは、矢印キーを使ってヘビを操作します。果物を食べるとヘビが成長し、スコアが上がります。しかし、壁や自分の体にぶつかるとゲームオーバーになるため、慎重に操作することが重要です。"}),U.jsx("h3",{className:"mt-4 text-xl font-bold",children:"📅 予定"}),U.jsx("p",{className:"text-base",children:"このゲームは、スコアボードや難易度設定などの機能を追加する予定です。また拡張機能として、ヘビの色や背景色を変更できるようにする予定です。"}),U.jsx("h3",{className:"mt-4 text-xl font-bold",children:"🧩 Tips"}),U.jsx("p",{className:"text-base",children:"ヘビの成長が進むと移動スペースが狭くなり、難易度が上がります。次の動きを計画しながらプレイすると高得点を狙いやすくなります！"})]}),U.jsxs("div",{className:"bg-blue-100 shadow-md rounded-lg p-10 text-center min-h-[500px]",children:[U.jsx("img",{src:"/no1/assets/models1/calculator.png",alt:"Calculator",className:"mx-auto w-40 h-40 object-cover mb-4"}),U.jsx("h2",{className:"text-2xl font-semibold",children:"🔢 カスタム電卓"}),U.jsx("p",{className:"text-lg text-gray-700 mt-2",children:"Pythonで作った電卓アプリ。"}),U.jsx("h3",{className:"mt-4 text-xl font-bold",children:"🛠️ 説明"}),U.jsx("p",{className:"text-base",children:"カスタム電卓は、２つの数字の差を出することに特化したデスクトップアプリです。特にお釣りの計算などに便利です。数字を入力し、ボタンを押すとお釣りが自動的に出力されます。"}),U.jsx("h3",{className:"mt-4 text-xl font-bold",children:"📅 予定"}),U.jsx("p",{className:"text-base",children:"この電卓は、IOSなどのPC以外でも使えるように拡張する予定です。"}),U.jsx("h3",{className:"mt-4 text-xl font-bold",children:"🧩 Tips"}),U.jsx("p",{className:"text-base",children:"この電卓は、急にお釣りを計算しないといけないときに便利です。通常の電卓であれば、四則演算やそのほかにも小数点を含む計算やルートなど多岐にわたりますが、このデスクトップアプリは、差を取ることだけに特化しているので、思わぬボタンの打ち間違いなどをふせぐことができます。また上下の数字を入力する欄の数字を反転させても、絶対値を返すので、問題なく求めていた結果を返します。"})]})]}),U.jsxs("div",{className:"text-center mt-12",children:[U.jsx(Rs,{to:"/service",children:U.jsx("button",{className:"px-6 py-3 bg-gray-500 text-white text-lg rounded-md hover:bg-gray-600 transition",children:"More"})}),U.jsx(Rs,{to:"/",className:"px-6 py-3 bg-gray-500 text-white text-lg rounded-md hover:bg-gray-600 transition ml-4",children:"back"})]})]}),VV="/no1/";function WV(){return U.jsx(FB,{basename:VV,children:U.jsxs(fB,{children:[U.jsx(Xu,{path:"/",element:U.jsx(MV,{})}),U.jsx(Xu,{path:"/about",element:U.jsx(EV,{})}),U.jsx(Xu,{path:"/service",element:U.jsx(TV,{})}),U.jsx(Xu,{path:"/contact",element:U.jsx(HV,{})}),U.jsx(Xu,{path:"/samples",element:U.jsx(GV,{})}),U.jsx(Xu,{path:"/more-details",element:U.jsx(zV,{})})]})})}S1.createRoot(document.getElementById("root")).render(U.jsx(q.StrictMode,{children:U.jsx(WV,{})}));
